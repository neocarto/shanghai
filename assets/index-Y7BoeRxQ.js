(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function lr(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const te={},zt=[],Ve=()=>{},aa=()=>!1,un=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),cr=t=>t.startsWith("onUpdate:"),xe=Object.assign,ur=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},la=Object.prototype.hasOwnProperty,Z=(t,e)=>la.call(t,e),q=Array.isArray,Gt=t=>hn(t)==="[object Map]",Ri=t=>hn(t)==="[object Set]",J=t=>typeof t=="function",oe=t=>typeof t=="string",_t=t=>typeof t=="symbol",re=t=>t!==null&&typeof t=="object",Ii=t=>(re(t)||J(t))&&J(t.then)&&J(t.catch),Li=Object.prototype.toString,hn=t=>Li.call(t),ca=t=>hn(t).slice(8,-1),Di=t=>hn(t)==="[object Object]",hr=t=>oe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ps=lr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dn=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},ua=/-(\w)/g,pt=dn(t=>t.replace(ua,(e,s)=>s?s.toUpperCase():"")),ha=/\B([A-Z])/g,Ct=dn(t=>t.replace(ha,"-$1").toLowerCase()),Ui=dn(t=>t.charAt(0).toUpperCase()+t.slice(1)),xn=dn(t=>t?`on${Ui(t)}`:""),ft=(t,e)=>!Object.is(t,e),Ys=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Mi=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Bn=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Rr;const fn=()=>Rr||(Rr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function dr(t){if(q(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=oe(n)?ga(n):dr(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(oe(t)||re(t))return t}const da=/;(?![^(]*\))/g,fa=/:([^]+)/,pa=/\/\*[^]*?\*\//g;function ga(t){const e={};return t.replace(pa,"").split(da).forEach(s=>{if(s){const n=s.split(fa);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function et(t){let e="";if(oe(t))e=t;else if(q(t))for(let s=0;s<t.length;s++){const n=et(t[s]);n&&(e+=n+" ")}else if(re(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const ma="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_a=lr(ma);function Ni(t){return!!t||t===""}const Fi=t=>!!(t&&t.__v_isRef===!0),O=t=>oe(t)?t:t==null?"":q(t)||re(t)&&(t.toString===Li||!J(t.toString))?Fi(t)?O(t.value):JSON.stringify(t,Bi,2):String(t),Bi=(t,e)=>Fi(e)?Bi(t,e.value):Gt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[Tn(n,i)+" =>"]=r,s),{})}:Ri(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Tn(s))}:_t(e)?Tn(e):re(e)&&!q(e)&&!Di(e)?String(e):e,Tn=(t,e="")=>{var s;return _t(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pe;class va{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Pe,!e&&Pe&&(this.index=(Pe.scopes||(Pe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Pe;try{return Pe=this,e()}finally{Pe=s}}}on(){++this._on===1&&(this.prevScope=Pe,Pe=this)}off(){this._on>0&&--this._on===0&&(Pe=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function ya(){return Pe}let ne;const En=new WeakSet;class qi{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Pe&&Pe.active&&Pe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,En.has(this)&&(En.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ki(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ir(this),Ji(this);const e=ne,s=Fe;ne=this,Fe=!0;try{return this.fn()}finally{Wi(this),ne=e,Fe=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)gr(e);this.deps=this.depsTail=void 0,Ir(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?En.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){qn(this)&&this.run()}get dirty(){return qn(this)}}let Hi=0,gs,ms;function Ki(t,e=!1){if(t.flags|=8,e){t.next=ms,ms=t;return}t.next=gs,gs=t}function fr(){Hi++}function pr(){if(--Hi>0)return;if(ms){let e=ms;for(ms=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;gs;){let e=gs;for(gs=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Ji(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Wi(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),gr(n),ba(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function qn(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Vi(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Vi(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===xs)||(t.globalVersion=xs,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!qn(t))))return;t.flags|=2;const e=t.dep,s=ne,n=Fe;ne=t,Fe=!0;try{Ji(t);const r=t.fn(t._value);(e.version===0||ft(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{ne=s,Fe=n,Wi(t),t.flags&=-3}}function gr(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)gr(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function ba(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Fe=!0;const zi=[];function nt(){zi.push(Fe),Fe=!1}function rt(){const t=zi.pop();Fe=t===void 0?!0:t}function Ir(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=ne;ne=void 0;try{e()}finally{ne=s}}}let xs=0;class wa{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class mr{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!ne||!Fe||ne===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==ne)s=this.activeLink=new wa(ne,this),ne.deps?(s.prevDep=ne.depsTail,ne.depsTail.nextDep=s,ne.depsTail=s):ne.deps=ne.depsTail=s,Gi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=ne.depsTail,s.nextDep=void 0,ne.depsTail.nextDep=s,ne.depsTail=s,ne.deps===s&&(ne.deps=n)}return s}trigger(e){this.version++,xs++,this.notify(e)}notify(e){fr();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{pr()}}}function Gi(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Gi(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Hn=new WeakMap,At=Symbol(""),Kn=Symbol(""),Ts=Symbol("");function ge(t,e,s){if(Fe&&ne){let n=Hn.get(t);n||Hn.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new mr),r.map=n,r.key=s),r.track()}}function tt(t,e,s,n,r,i){const o=Hn.get(t);if(!o){xs++;return}const a=l=>{l&&l.trigger()};if(fr(),e==="clear")o.forEach(a);else{const l=q(t),u=l&&hr(s);if(l&&s==="length"){const c=Number(n);o.forEach((h,m)=>{(m==="length"||m===Ts||!_t(m)&&m>=c)&&a(h)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),u&&a(o.get(Ts)),e){case"add":l?u&&a(o.get("length")):(a(o.get(At)),Gt(t)&&a(o.get(Kn)));break;case"delete":l||(a(o.get(At)),Gt(t)&&a(o.get(Kn)));break;case"set":Gt(t)&&a(o.get(At));break}}pr()}function Lt(t){const e=Q(t);return e===t?e:(ge(e,"iterate",Ts),Ue(t)?e:e.map(he))}function pn(t){return ge(t=Q(t),"iterate",Ts),t}const Sa={__proto__:null,[Symbol.iterator](){return On(this,Symbol.iterator,he)},concat(...t){return Lt(this).concat(...t.map(e=>q(e)?Lt(e):e))},entries(){return On(this,"entries",t=>(t[1]=he(t[1]),t))},every(t,e){return Ye(this,"every",t,e,void 0,arguments)},filter(t,e){return Ye(this,"filter",t,e,s=>s.map(he),arguments)},find(t,e){return Ye(this,"find",t,e,he,arguments)},findIndex(t,e){return Ye(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ye(this,"findLast",t,e,he,arguments)},findLastIndex(t,e){return Ye(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ye(this,"forEach",t,e,void 0,arguments)},includes(...t){return Pn(this,"includes",t)},indexOf(...t){return Pn(this,"indexOf",t)},join(t){return Lt(this).join(t)},lastIndexOf(...t){return Pn(this,"lastIndexOf",t)},map(t,e){return Ye(this,"map",t,e,void 0,arguments)},pop(){return os(this,"pop")},push(...t){return os(this,"push",t)},reduce(t,...e){return Lr(this,"reduce",t,e)},reduceRight(t,...e){return Lr(this,"reduceRight",t,e)},shift(){return os(this,"shift")},some(t,e){return Ye(this,"some",t,e,void 0,arguments)},splice(...t){return os(this,"splice",t)},toReversed(){return Lt(this).toReversed()},toSorted(t){return Lt(this).toSorted(t)},toSpliced(...t){return Lt(this).toSpliced(...t)},unshift(...t){return os(this,"unshift",t)},values(){return On(this,"values",he)}};function On(t,e,s){const n=pn(t),r=n[e]();return n!==t&&!Ue(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.value&&(i.value=s(i.value)),i}),r}const ka=Array.prototype;function Ye(t,e,s,n,r,i){const o=pn(t),a=o!==t&&!Ue(t),l=o[e];if(l!==ka[e]){const h=l.apply(t,i);return a?he(h):h}let u=s;o!==t&&(a?u=function(h,m){return s.call(this,he(h),m,t)}:s.length>2&&(u=function(h,m){return s.call(this,h,m,t)}));const c=l.call(o,u,n);return a&&r?r(c):c}function Lr(t,e,s,n){const r=pn(t);let i=s;return r!==t&&(Ue(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,he(a),l,t)}),r[e](i,...n)}function Pn(t,e,s){const n=Q(t);ge(n,"iterate",Ts);const r=n[e](...s);return(r===-1||r===!1)&&br(s[0])?(s[0]=Q(s[0]),n[e](...s)):r}function os(t,e,s=[]){nt(),fr();const n=Q(t)[e].apply(t,s);return pr(),rt(),n}const xa=lr("__proto__,__v_isRef,__isVue"),Yi=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_t));function Ta(t){_t(t)||(t=String(t));const e=Q(this);return ge(e,"has",t),e.hasOwnProperty(t)}class Xi{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?La:to:i?eo:Zi).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=q(e);if(!r){let l;if(o&&(l=Sa[s]))return l;if(s==="hasOwnProperty")return Ta}const a=Reflect.get(e,s,_e(e)?e:n);return(_t(s)?Yi.has(s):xa(s))||(r||ge(e,"get",s),i)?a:_e(a)?o&&hr(s)?a:a.value:re(a)?r?so(a):vr(a):a}}class Qi extends Xi{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];if(!this._isShallow){const l=gt(i);if(!Ue(n)&&!gt(n)&&(i=Q(i),n=Q(n)),!q(e)&&_e(i)&&!_e(n))return l?!1:(i.value=n,!0)}const o=q(e)&&hr(s)?Number(s)<e.length:Z(e,s),a=Reflect.set(e,s,n,_e(e)?e:r);return e===Q(r)&&(o?ft(n,i)&&tt(e,"set",s,n):tt(e,"add",s,n)),a}deleteProperty(e,s){const n=Z(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&tt(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!_t(s)||!Yi.has(s))&&ge(e,"has",s),n}ownKeys(e){return ge(e,"iterate",q(e)?"length":At),Reflect.ownKeys(e)}}class Ea extends Xi{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Oa=new Qi,Pa=new Ea,Aa=new Qi(!0);const Jn=t=>t,Bs=t=>Reflect.getPrototypeOf(t);function Ca(t,e,s){return function(...n){const r=this.__v_raw,i=Q(r),o=Gt(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=r[t](...n),c=s?Jn:e?en:he;return!e&&ge(i,"iterate",l?Kn:At),{next(){const{value:h,done:m}=u.next();return m?{value:h,done:m}:{value:a?[c(h[0]),c(h[1])]:c(h),done:m}},[Symbol.iterator](){return this}}}}function qs(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function ja(t,e){const s={get(r){const i=this.__v_raw,o=Q(i),a=Q(r);t||(ft(r,a)&&ge(o,"get",r),ge(o,"get",a));const{has:l}=Bs(o),u=e?Jn:t?en:he;if(l.call(o,r))return u(i.get(r));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(r)},get size(){const r=this.__v_raw;return!t&&ge(Q(r),"iterate",At),Reflect.get(r,"size",r)},has(r){const i=this.__v_raw,o=Q(i),a=Q(r);return t||(ft(r,a)&&ge(o,"has",r),ge(o,"has",a)),r===a?i.has(r):i.has(r)||i.has(a)},forEach(r,i){const o=this,a=o.__v_raw,l=Q(a),u=e?Jn:t?en:he;return!t&&ge(l,"iterate",At),a.forEach((c,h)=>r.call(i,u(c),u(h),o))}};return xe(s,t?{add:qs("add"),set:qs("set"),delete:qs("delete"),clear:qs("clear")}:{add(r){!e&&!Ue(r)&&!gt(r)&&(r=Q(r));const i=Q(this);return Bs(i).has.call(i,r)||(i.add(r),tt(i,"add",r,r)),this},set(r,i){!e&&!Ue(i)&&!gt(i)&&(i=Q(i));const o=Q(this),{has:a,get:l}=Bs(o);let u=a.call(o,r);u||(r=Q(r),u=a.call(o,r));const c=l.call(o,r);return o.set(r,i),u?ft(i,c)&&tt(o,"set",r,i):tt(o,"add",r,i),this},delete(r){const i=Q(this),{has:o,get:a}=Bs(i);let l=o.call(i,r);l||(r=Q(r),l=o.call(i,r)),a&&a.call(i,r);const u=i.delete(r);return l&&tt(i,"delete",r,void 0),u},clear(){const r=Q(this),i=r.size!==0,o=r.clear();return i&&tt(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Ca(r,t,e)}),s}function _r(t,e){const s=ja(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(Z(s,r)&&r in n?s:n,r,i)}const $a={get:_r(!1,!1)},Ra={get:_r(!1,!0)},Ia={get:_r(!0,!1)};const Zi=new WeakMap,eo=new WeakMap,to=new WeakMap,La=new WeakMap;function Da(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ua(t){return t.__v_skip||!Object.isExtensible(t)?0:Da(ca(t))}function vr(t){return gt(t)?t:yr(t,!1,Oa,$a,Zi)}function Ma(t){return yr(t,!1,Aa,Ra,eo)}function so(t){return yr(t,!0,Pa,Ia,to)}function yr(t,e,s,n,r){if(!re(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Ua(t);if(i===0)return t;const o=r.get(t);if(o)return o;const a=new Proxy(t,i===2?n:s);return r.set(t,a),a}function Yt(t){return gt(t)?Yt(t.__v_raw):!!(t&&t.__v_isReactive)}function gt(t){return!!(t&&t.__v_isReadonly)}function Ue(t){return!!(t&&t.__v_isShallow)}function br(t){return t?!!t.__v_raw:!1}function Q(t){const e=t&&t.__v_raw;return e?Q(e):t}function Na(t){return!Z(t,"__v_skip")&&Object.isExtensible(t)&&Mi(t,"__v_skip",!0),t}const he=t=>re(t)?vr(t):t,en=t=>re(t)?so(t):t;function _e(t){return t?t.__v_isRef===!0:!1}function je(t){return Fa(t,!1)}function Fa(t,e){return _e(t)?t:new Ba(t,e)}class Ba{constructor(e,s){this.dep=new mr,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Q(e),this._value=s?e:he(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||Ue(e)||gt(e);e=n?e:Q(e),ft(e,s)&&(this._rawValue=e,this._value=n?e:he(e),this.dep.trigger())}}function Wn(t){return _e(t)?t.value:t}const qa={get:(t,e,s)=>e==="__v_raw"?t:Wn(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return _e(r)&&!_e(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function no(t){return Yt(t)?t:new Proxy(t,qa)}class Ha{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new mr(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ne!==this)return Ki(this,!0),!0}get value(){const e=this.dep.track();return Vi(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ka(t,e,s=!1){let n,r;return J(t)?n=t:(n=t.get,r=t.set),new Ha(n,r,s)}const Hs={},tn=new WeakMap;let Et;function Ja(t,e=!1,s=Et){if(s){let n=tn.get(s);n||tn.set(s,n=[]),n.push(t)}}function Wa(t,e,s=te){const{immediate:n,deep:r,once:i,scheduler:o,augmentJob:a,call:l}=s,u=E=>r?E:Ue(E)||r===!1||r===0?st(E,1):st(E);let c,h,m,b,k=!1,y=!1;if(_e(t)?(h=()=>t.value,k=Ue(t)):Yt(t)?(h=()=>u(t),k=!0):q(t)?(y=!0,k=t.some(E=>Yt(E)||Ue(E)),h=()=>t.map(E=>{if(_e(E))return E.value;if(Yt(E))return u(E);if(J(E))return l?l(E,2):E()})):J(t)?e?h=l?()=>l(t,2):t:h=()=>{if(m){nt();try{m()}finally{rt()}}const E=Et;Et=c;try{return l?l(t,3,[b]):t(b)}finally{Et=E}}:h=Ve,e&&r){const E=h,_=r===!0?1/0:r;h=()=>st(E(),_)}const f=ya(),x=()=>{c.stop(),f&&f.active&&ur(f.effects,c)};if(i&&e){const E=e;e=(..._)=>{E(..._),x()}}let T=y?new Array(t.length).fill(Hs):Hs;const w=E=>{if(!(!(c.flags&1)||!c.dirty&&!E))if(e){const _=c.run();if(r||k||(y?_.some((v,B)=>ft(v,T[B])):ft(_,T))){m&&m();const v=Et;Et=c;try{const B=[_,T===Hs?void 0:y&&T[0]===Hs?[]:T,b];T=_,l?l(e,3,B):e(...B)}finally{Et=v}}}else c.run()};return a&&a(w),c=new qi(h),c.scheduler=o?()=>o(w,!1):w,b=E=>Ja(E,!1,c),m=c.onStop=()=>{const E=tn.get(c);if(E){if(l)l(E,4);else for(const _ of E)_();tn.delete(c)}},e?n?w(!0):T=c.run():o?o(w.bind(null,!0),!0):c.run(),x.pause=c.pause.bind(c),x.resume=c.resume.bind(c),x.stop=x,x}function st(t,e=1/0,s){if(e<=0||!re(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,_e(t))st(t.value,e,s);else if(q(t))for(let n=0;n<t.length;n++)st(t[n],e,s);else if(Ri(t)||Gt(t))t.forEach(n=>{st(n,e,s)});else if(Di(t)){for(const n in t)st(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&st(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $s(t,e,s,n){try{return n?t(...n):t()}catch(r){gn(r,e,s)}}function Ge(t,e,s,n){if(J(t)){const r=$s(t,e,s,n);return r&&Ii(r)&&r.catch(i=>{gn(i,e,s)}),r}if(q(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Ge(t[i],e,s,n));return r}}function gn(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||te;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,l,u)===!1)return}a=a.parent}if(i){nt(),$s(i,null,10,[t,l,u]),rt();return}}Va(t,s,r,n,o)}function Va(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const Se=[];let Je=-1;const Xt=[];let lt=null,Jt=0;const ro=Promise.resolve();let sn=null;function io(t){const e=sn||ro;return t?e.then(this?t.bind(this):t):e}function za(t){let e=Je+1,s=Se.length;for(;e<s;){const n=e+s>>>1,r=Se[n],i=Es(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function wr(t){if(!(t.flags&1)){const e=Es(t),s=Se[Se.length-1];!s||!(t.flags&2)&&e>=Es(s)?Se.push(t):Se.splice(za(e),0,t),t.flags|=1,oo()}}function oo(){sn||(sn=ro.then(lo))}function Ga(t){q(t)?Xt.push(...t):lt&&t.id===-1?lt.splice(Jt+1,0,t):t.flags&1||(Xt.push(t),t.flags|=1),oo()}function Dr(t,e,s=Je+1){for(;s<Se.length;s++){const n=Se[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Se.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function ao(t){if(Xt.length){const e=[...new Set(Xt)].sort((s,n)=>Es(s)-Es(n));if(Xt.length=0,lt){lt.push(...e);return}for(lt=e,Jt=0;Jt<lt.length;Jt++){const s=lt[Jt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}lt=null,Jt=0}}const Es=t=>t.id==null?t.flags&2?-1:1/0:t.id;function lo(t){try{for(Je=0;Je<Se.length;Je++){const e=Se[Je];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),$s(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Je<Se.length;Je++){const e=Se[Je];e&&(e.flags&=-2)}Je=-1,Se.length=0,ao(),sn=null,(Se.length||Xt.length)&&lo()}}let De=null,co=null;function nn(t){const e=De;return De=t,co=t&&t.type.__scopeId||null,e}function Ya(t,e=De,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&Jr(-1);const i=nn(e);let o;try{o=t(...r)}finally{nn(i),n._d&&Jr(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function uo(t,e){if(De===null)return t;const s=bn(De),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,o,a,l=te]=e[r];i&&(J(i)&&(i={mounted:i,updated:i}),i.deep&&st(o),n.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function kt(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];i&&(a.oldValue=i[o].value);let l=a.dir[n];l&&(nt(),Ge(l,s,8,[t.el,a,t,e]),rt())}}const Xa=Symbol("_vte"),Qa=t=>t.__isTeleport;function Sr(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Sr(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ho(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function rn(t,e,s,n,r=!1){if(q(t)){t.forEach((k,y)=>rn(k,e&&(q(e)?e[y]:e),s,n,r));return}if(_s(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&rn(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?bn(n.component):n.el,o=r?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===te?a.refs={}:a.refs,h=a.setupState,m=Q(h),b=h===te?()=>!1:k=>Z(m,k);if(u!=null&&u!==l&&(oe(u)?(c[u]=null,b(u)&&(h[u]=null)):_e(u)&&(u.value=null)),J(l))$s(l,a,12,[o,c]);else{const k=oe(l),y=_e(l);if(k||y){const f=()=>{if(t.f){const x=k?b(l)?h[l]:c[l]:l.value;r?q(x)&&ur(x,i):q(x)?x.includes(i)||x.push(i):k?(c[l]=[i],b(l)&&(h[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else k?(c[l]=o,b(l)&&(h[l]=o)):y&&(l.value=o,t.k&&(c[t.k]=o))};o?(f.id=-1,Ae(f,s)):f()}}}fn().requestIdleCallback;fn().cancelIdleCallback;const _s=t=>!!t.type.__asyncLoader,fo=t=>t.type.__isKeepAlive;function Za(t,e){po(t,"a",e)}function el(t,e){po(t,"da",e)}function po(t,e,s=ke){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(mn(e,n,s),s){let r=s.parent;for(;r&&r.parent;)fo(r.parent.vnode)&&tl(n,e,s,r),r=r.parent}}function tl(t,e,s,n){const r=mn(e,t,n,!0);mo(()=>{ur(n[e],r)},s)}function mn(t,e,s=ke,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{nt();const a=Rs(s),l=Ge(e,s,t,o);return a(),rt(),l});return n?r.unshift(i):r.push(i),i}}const it=t=>(e,s=ke)=>{(!As||t==="sp")&&mn(t,(...n)=>e(...n),s)},sl=it("bm"),_n=it("m"),nl=it("bu"),rl=it("u"),go=it("bum"),mo=it("um"),il=it("sp"),ol=it("rtg"),al=it("rtc");function ll(t,e=ke){mn("ec",t,e)}const cl=Symbol.for("v-ndc");function Os(t,e,s,n){let r;const i=s,o=q(t);if(o||oe(t)){const a=o&&Yt(t);let l=!1,u=!1;a&&(l=!Ue(t),u=gt(t),t=pn(t)),r=new Array(t.length);for(let c=0,h=t.length;c<h;c++)r[c]=e(l?u?en(he(t[c])):he(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let a=0;a<t;a++)r[a]=e(a+1,a,void 0,i)}else if(re(t))if(t[Symbol.iterator])r=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];r[l]=e(t[c],c,l,i)}}else r=[];return r}const Vn=t=>t?Uo(t)?bn(t):Vn(t.parent):null,vs=xe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Vn(t.parent),$root:t=>Vn(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>vo(t),$forceUpdate:t=>t.f||(t.f=()=>{wr(t.update)}),$nextTick:t=>t.n||(t.n=io.bind(t.proxy)),$watch:t=>jl.bind(t)}),An=(t,e)=>t!==te&&!t.__isScriptSetup&&Z(t,e),ul={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const b=o[e];if(b!==void 0)switch(b){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(An(n,e))return o[e]=1,n[e];if(r!==te&&Z(r,e))return o[e]=2,r[e];if((u=t.propsOptions[0])&&Z(u,e))return o[e]=3,i[e];if(s!==te&&Z(s,e))return o[e]=4,s[e];zn&&(o[e]=0)}}const c=vs[e];let h,m;if(c)return e==="$attrs"&&ge(t.attrs,"get",""),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==te&&Z(s,e))return o[e]=4,s[e];if(m=l.config.globalProperties,Z(m,e))return m[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return An(r,e)?(r[e]=s,!0):n!==te&&Z(n,e)?(n[e]=s,!0):Z(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,propsOptions:i}},o){let a;return!!s[o]||t!==te&&Z(t,o)||An(e,o)||(a=i[0])&&Z(a,o)||Z(n,o)||Z(vs,o)||Z(r.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Z(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Ur(t){return q(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let zn=!0;function hl(t){const e=vo(t),s=t.proxy,n=t.ctx;zn=!1,e.beforeCreate&&Mr(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:m,beforeUpdate:b,updated:k,activated:y,deactivated:f,beforeDestroy:x,beforeUnmount:T,destroyed:w,unmounted:E,render:_,renderTracked:v,renderTriggered:B,errorCaptured:V,serverPrefetch:Te,expose:ie,inheritAttrs:de,components:Be,directives:ot,filters:yt}=e;if(u&&dl(u,n,null),o)for(const U in o){const W=o[U];J(W)&&(n[U]=W.bind(s))}if(r){const U=r.call(s,s);re(U)&&(t.data=vr(U))}if(zn=!0,i)for(const U in i){const W=i[U],qe=J(W)?W.bind(s,s):J(W.get)?W.get.bind(s,s):Ve,Rt=!J(W)&&J(W.set)?W.set.bind(s):Ve,He=ds({get:qe,set:Rt});Object.defineProperty(n,U,{enumerable:!0,configurable:!0,get:()=>He.value,set:$e=>He.value=$e})}if(a)for(const U in a)_o(a[U],n,s,U);if(l){const U=J(l)?l.call(s):l;Reflect.ownKeys(U).forEach(W=>{vl(W,U[W])})}c&&Mr(c,t,"c");function ae(U,W){q(W)?W.forEach(qe=>U(qe.bind(s))):W&&U(W.bind(s))}if(ae(sl,h),ae(_n,m),ae(nl,b),ae(rl,k),ae(Za,y),ae(el,f),ae(ll,V),ae(al,v),ae(ol,B),ae(go,T),ae(mo,E),ae(il,Te),q(ie))if(ie.length){const U=t.exposed||(t.exposed={});ie.forEach(W=>{Object.defineProperty(U,W,{get:()=>s[W],set:qe=>s[W]=qe})})}else t.exposed||(t.exposed={});_&&t.render===Ve&&(t.render=_),de!=null&&(t.inheritAttrs=de),Be&&(t.components=Be),ot&&(t.directives=ot),Te&&ho(t)}function dl(t,e,s=Ve){q(t)&&(t=Gn(t));for(const n in t){const r=t[n];let i;re(r)?"default"in r?i=Xs(r.from||n,r.default,!0):i=Xs(r.from||n):i=Xs(r),_e(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[n]=i}}function Mr(t,e,s){Ge(q(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function _o(t,e,s,n){let r=n.includes(".")?jo(s,n):()=>s[n];if(oe(t)){const i=e[t];J(i)&&ys(r,i)}else if(J(t))ys(r,t.bind(s));else if(re(t))if(q(t))t.forEach(i=>_o(i,e,s,n));else{const i=J(t.handler)?t.handler.bind(s):e[t.handler];J(i)&&ys(r,i,t)}}function vo(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!r.length&&!s&&!n?l=e:(l={},r.length&&r.forEach(u=>on(l,u,o,!0)),on(l,e,o)),re(e)&&i.set(e,l),l}function on(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&on(t,i,s,!0),r&&r.forEach(o=>on(t,o,s,!0));for(const o in e)if(!(n&&o==="expose")){const a=fl[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const fl={data:Nr,props:Fr,emits:Fr,methods:us,computed:us,beforeCreate:be,created:be,beforeMount:be,mounted:be,beforeUpdate:be,updated:be,beforeDestroy:be,beforeUnmount:be,destroyed:be,unmounted:be,activated:be,deactivated:be,errorCaptured:be,serverPrefetch:be,components:us,directives:us,watch:gl,provide:Nr,inject:pl};function Nr(t,e){return e?t?function(){return xe(J(t)?t.call(this,this):t,J(e)?e.call(this,this):e)}:e:t}function pl(t,e){return us(Gn(t),Gn(e))}function Gn(t){if(q(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function be(t,e){return t?[...new Set([].concat(t,e))]:e}function us(t,e){return t?xe(Object.create(null),t,e):e}function Fr(t,e){return t?q(t)&&q(e)?[...new Set([...t,...e])]:xe(Object.create(null),Ur(t),Ur(e??{})):e}function gl(t,e){if(!t)return e;if(!e)return t;const s=xe(Object.create(null),t);for(const n in e)s[n]=be(t[n],e[n]);return s}function yo(){return{app:null,config:{isNativeTag:aa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ml=0;function _l(t,e){return function(n,r=null){J(n)||(n=xe({},n)),r!=null&&!re(r)&&(r=null);const i=yo(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:ml++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Xl,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&J(c.install)?(o.add(c),c.install(u,...h)):J(c)&&(o.add(c),c(u,...h))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,h){return h?(i.components[c]=h,u):i.components[c]},directive(c,h){return h?(i.directives[c]=h,u):i.directives[c]},mount(c,h,m){if(!l){const b=u._ceVNode||ze(n,r);return b.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),t(b,c,m),l=!0,u._container=c,c.__vue_app__=u,bn(b.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Ge(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return i.provides[c]=h,u},runWithContext(c){const h=Qt;Qt=u;try{return c()}finally{Qt=h}}};return u}}let Qt=null;function vl(t,e){if(ke){let s=ke.provides;const n=ke.parent&&ke.parent.provides;n===s&&(s=ke.provides=Object.create(n)),s[t]=e}}function Xs(t,e,s=!1){const n=ke||De;if(n||Qt){let r=Qt?Qt._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&J(e)?e.call(n&&n.proxy):e}}const bo={},wo=()=>Object.create(bo),So=t=>Object.getPrototypeOf(t)===bo;function yl(t,e,s,n=!1){const r={},i=wo();t.propsDefaults=Object.create(null),ko(t,e,r,i);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);s?t.props=n?r:Ma(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function bl(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:o}}=t,a=Q(r),[l]=t.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let m=c[h];if(vn(t.emitsOptions,m))continue;const b=e[m];if(l)if(Z(i,m))b!==i[m]&&(i[m]=b,u=!0);else{const k=pt(m);r[k]=Yn(l,a,k,b,t,!1)}else b!==i[m]&&(i[m]=b,u=!0)}}}else{ko(t,e,r,i)&&(u=!0);let c;for(const h in a)(!e||!Z(e,h)&&((c=Ct(h))===h||!Z(e,c)))&&(l?s&&(s[h]!==void 0||s[c]!==void 0)&&(r[h]=Yn(l,a,h,void 0,t,!0)):delete r[h]);if(i!==a)for(const h in i)(!e||!Z(e,h))&&(delete i[h],u=!0)}u&&tt(t.attrs,"set","")}function ko(t,e,s,n){const[r,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ps(l))continue;const u=e[l];let c;r&&Z(r,c=pt(l))?!i||!i.includes(c)?s[c]=u:(a||(a={}))[c]=u:vn(t.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(i){const l=Q(s),u=a||te;for(let c=0;c<i.length;c++){const h=i[c];s[h]=Yn(r,l,h,u[h],t,!Z(u,h))}}return o}function Yn(t,e,s,n,r,i){const o=t[s];if(o!=null){const a=Z(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&J(l)){const{propsDefaults:u}=r;if(s in u)n=u[s];else{const c=Rs(r);n=u[s]=l.call(null,e),c()}}else n=l;r.ce&&r.ce._setProp(s,n)}o[0]&&(i&&!a?n=!1:o[1]&&(n===""||n===Ct(s))&&(n=!0))}return n}const wl=new WeakMap;function xo(t,e,s=!1){const n=s?wl:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,o={},a=[];let l=!1;if(!J(t)){const c=h=>{l=!0;const[m,b]=xo(h,e,!0);xe(o,m),b&&a.push(...b)};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return re(t)&&n.set(t,zt),zt;if(q(i))for(let c=0;c<i.length;c++){const h=pt(i[c]);Br(h)&&(o[h]=te)}else if(i)for(const c in i){const h=pt(c);if(Br(h)){const m=i[c],b=o[h]=q(m)||J(m)?{type:m}:xe({},m),k=b.type;let y=!1,f=!0;if(q(k))for(let x=0;x<k.length;++x){const T=k[x],w=J(T)&&T.name;if(w==="Boolean"){y=!0;break}else w==="String"&&(f=!1)}else y=J(k)&&k.name==="Boolean";b[0]=y,b[1]=f,(y||Z(b,"default"))&&a.push(h)}}const u=[o,a];return re(t)&&n.set(t,u),u}function Br(t){return t[0]!=="$"&&!ps(t)}const kr=t=>t[0]==="_"||t==="$stable",xr=t=>q(t)?t.map(We):[We(t)],Sl=(t,e,s)=>{if(e._n)return e;const n=Ya((...r)=>xr(e(...r)),s);return n._c=!1,n},To=(t,e,s)=>{const n=t._ctx;for(const r in t){if(kr(r))continue;const i=t[r];if(J(i))e[r]=Sl(r,i,n);else if(i!=null){const o=xr(i);e[r]=()=>o}}},Eo=(t,e)=>{const s=xr(e);t.slots.default=()=>s},Oo=(t,e,s)=>{for(const n in e)(s||!kr(n))&&(t[n]=e[n])},kl=(t,e,s)=>{const n=t.slots=wo();if(t.vnode.shapeFlag&32){const r=e._;r?(Oo(n,e,s),s&&Mi(n,"_",r,!0)):To(e,n)}else e&&Eo(t,e)},xl=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,o=te;if(n.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:Oo(r,e,s):(i=!e.$stable,To(e,r)),o=e}else e&&(Eo(t,e),o={default:1});if(i)for(const a in r)!kr(a)&&o[a]==null&&delete r[a]},Ae=Ml;function Tl(t){return El(t)}function El(t,e){const s=fn();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:m,setScopeId:b=Ve,insertStaticContent:k}=t,y=(d,p,S,j=null,A=null,C=null,L=void 0,I=null,R=!!p.dynamicChildren)=>{if(d===p)return;d&&!as(d,p)&&(j=It(d),$e(d,A,C,!0),d=null),p.patchFlag===-2&&(R=!1,p.dynamicChildren=null);const{type:$,ref:N,shapeFlag:D}=p;switch($){case yn:f(d,p,S,j);break;case mt:x(d,p,S,j);break;case jn:d==null&&T(p,S,j,L);break;case me:Be(d,p,S,j,A,C,L,I,R);break;default:D&1?_(d,p,S,j,A,C,L,I,R):D&6?ot(d,p,S,j,A,C,L,I,R):(D&64||D&128)&&$.process(d,p,S,j,A,C,L,I,R,wt)}N!=null&&A&&rn(N,d&&d.ref,C,p||d,!p)},f=(d,p,S,j)=>{if(d==null)n(p.el=a(p.children),S,j);else{const A=p.el=d.el;p.children!==d.children&&u(A,p.children)}},x=(d,p,S,j)=>{d==null?n(p.el=l(p.children||""),S,j):p.el=d.el},T=(d,p,S,j)=>{[d.el,d.anchor]=k(d.children,p,S,j,d.el,d.anchor)},w=({el:d,anchor:p},S,j)=>{let A;for(;d&&d!==p;)A=m(d),n(d,S,j),d=A;n(p,S,j)},E=({el:d,anchor:p})=>{let S;for(;d&&d!==p;)S=m(d),r(d),d=S;r(p)},_=(d,p,S,j,A,C,L,I,R)=>{p.type==="svg"?L="svg":p.type==="math"&&(L="mathml"),d==null?v(p,S,j,A,C,L,I,R):Te(d,p,A,C,L,I,R)},v=(d,p,S,j,A,C,L,I)=>{let R,$;const{props:N,shapeFlag:D,transition:M,dirs:F}=d;if(R=d.el=o(d.type,C,N&&N.is,N),D&8?c(R,d.children):D&16&&V(d.children,R,null,j,A,Cn(d,C),L,I),F&&kt(d,null,j,"created"),B(R,d,d.scopeId,L,j),N){for(const ee in N)ee!=="value"&&!ps(ee)&&i(R,ee,null,N[ee],C,j);"value"in N&&i(R,"value",null,N.value,C),($=N.onVnodeBeforeMount)&&Ke($,j,d)}F&&kt(d,null,j,"beforeMount");const Y=Ol(A,M);Y&&M.beforeEnter(R),n(R,p,S),(($=N&&N.onVnodeMounted)||Y||F)&&Ae(()=>{$&&Ke($,j,d),Y&&M.enter(R),F&&kt(d,null,j,"mounted")},A)},B=(d,p,S,j,A)=>{if(S&&b(d,S),j)for(let C=0;C<j.length;C++)b(d,j[C]);if(A){let C=A.subTree;if(p===C||Ro(C.type)&&(C.ssContent===p||C.ssFallback===p)){const L=A.vnode;B(d,L,L.scopeId,L.slotScopeIds,A.parent)}}},V=(d,p,S,j,A,C,L,I,R=0)=>{for(let $=R;$<d.length;$++){const N=d[$]=I?ut(d[$]):We(d[$]);y(null,N,p,S,j,A,C,L,I)}},Te=(d,p,S,j,A,C,L)=>{const I=p.el=d.el;let{patchFlag:R,dynamicChildren:$,dirs:N}=p;R|=d.patchFlag&16;const D=d.props||te,M=p.props||te;let F;if(S&&xt(S,!1),(F=M.onVnodeBeforeUpdate)&&Ke(F,S,p,d),N&&kt(p,d,S,"beforeUpdate"),S&&xt(S,!0),(D.innerHTML&&M.innerHTML==null||D.textContent&&M.textContent==null)&&c(I,""),$?ie(d.dynamicChildren,$,I,S,j,Cn(p,A),C):L||W(d,p,I,null,S,j,Cn(p,A),C,!1),R>0){if(R&16)de(I,D,M,S,A);else if(R&2&&D.class!==M.class&&i(I,"class",null,M.class,A),R&4&&i(I,"style",D.style,M.style,A),R&8){const Y=p.dynamicProps;for(let ee=0;ee<Y.length;ee++){const X=Y[ee],ve=D[X],fe=M[X];(fe!==ve||X==="value")&&i(I,X,ve,fe,A,S)}}R&1&&d.children!==p.children&&c(I,p.children)}else!L&&$==null&&de(I,D,M,S,A);((F=M.onVnodeUpdated)||N)&&Ae(()=>{F&&Ke(F,S,p,d),N&&kt(p,d,S,"updated")},j)},ie=(d,p,S,j,A,C,L)=>{for(let I=0;I<p.length;I++){const R=d[I],$=p[I],N=R.el&&(R.type===me||!as(R,$)||R.shapeFlag&198)?h(R.el):S;y(R,$,N,null,j,A,C,L,!0)}},de=(d,p,S,j,A)=>{if(p!==S){if(p!==te)for(const C in p)!ps(C)&&!(C in S)&&i(d,C,p[C],null,A,j);for(const C in S){if(ps(C))continue;const L=S[C],I=p[C];L!==I&&C!=="value"&&i(d,C,I,L,A,j)}"value"in S&&i(d,"value",p.value,S.value,A)}},Be=(d,p,S,j,A,C,L,I,R)=>{const $=p.el=d?d.el:a(""),N=p.anchor=d?d.anchor:a("");let{patchFlag:D,dynamicChildren:M,slotScopeIds:F}=p;F&&(I=I?I.concat(F):F),d==null?(n($,S,j),n(N,S,j),V(p.children||[],S,N,A,C,L,I,R)):D>0&&D&64&&M&&d.dynamicChildren?(ie(d.dynamicChildren,M,S,A,C,L,I),(p.key!=null||A&&p===A.subTree)&&Po(d,p,!0)):W(d,p,S,N,A,C,L,I,R)},ot=(d,p,S,j,A,C,L,I,R)=>{p.slotScopeIds=I,d==null?p.shapeFlag&512?A.ctx.activate(p,S,j,L,R):yt(p,S,j,A,C,L,R):$t(d,p,R)},yt=(d,p,S,j,A,C,L)=>{const I=d.component=Jl(d,j,A);if(fo(d)&&(I.ctx.renderer=wt),Wl(I,!1,L),I.asyncDep){if(A&&A.registerDep(I,ae,L),!d.el){const R=I.subTree=ze(mt);x(null,R,p,S)}}else ae(I,d,p,S,A,C,L)},$t=(d,p,S)=>{const j=p.component=d.component;if(Dl(d,p,S))if(j.asyncDep&&!j.asyncResolved){U(j,p,S);return}else j.next=p,j.update();else p.el=d.el,j.vnode=p},ae=(d,p,S,j,A,C,L)=>{const I=()=>{if(d.isMounted){let{next:D,bu:M,u:F,parent:Y,vnode:ee}=d;{const Ie=Ao(d);if(Ie){D&&(D.el=ee.el,U(d,D,L)),Ie.asyncDep.then(()=>{d.isUnmounted||I()});return}}let X=D,ve;xt(d,!1),D?(D.el=ee.el,U(d,D,L)):D=ee,M&&Ys(M),(ve=D.props&&D.props.onVnodeBeforeUpdate)&&Ke(ve,Y,D,ee),xt(d,!0);const fe=Hr(d),Re=d.subTree;d.subTree=fe,y(Re,fe,h(Re.el),It(Re),d,A,C),D.el=fe.el,X===null&&Ul(d,fe.el),F&&Ae(F,A),(ve=D.props&&D.props.onVnodeUpdated)&&Ae(()=>Ke(ve,Y,D,ee),A)}else{let D;const{el:M,props:F}=p,{bm:Y,m:ee,parent:X,root:ve,type:fe}=d,Re=_s(p);xt(d,!1),Y&&Ys(Y),!Re&&(D=F&&F.onVnodeBeforeMount)&&Ke(D,X,p),xt(d,!0);{ve.ce&&ve.ce._injectChildStyle(fe);const Ie=d.subTree=Hr(d);y(null,Ie,S,j,d,A,C),p.el=Ie.el}if(ee&&Ae(ee,A),!Re&&(D=F&&F.onVnodeMounted)){const Ie=p;Ae(()=>Ke(D,X,Ie),A)}(p.shapeFlag&256||X&&_s(X.vnode)&&X.vnode.shapeFlag&256)&&d.a&&Ae(d.a,A),d.isMounted=!0,p=S=j=null}};d.scope.on();const R=d.effect=new qi(I);d.scope.off();const $=d.update=R.run.bind(R),N=d.job=R.runIfDirty.bind(R);N.i=d,N.id=d.uid,R.scheduler=()=>wr(N),xt(d,!0),$()},U=(d,p,S)=>{p.component=d;const j=d.vnode.props;d.vnode=p,d.next=null,bl(d,p.props,j,S),xl(d,p.children,S),nt(),Dr(d),rt()},W=(d,p,S,j,A,C,L,I,R=!1)=>{const $=d&&d.children,N=d?d.shapeFlag:0,D=p.children,{patchFlag:M,shapeFlag:F}=p;if(M>0){if(M&128){Rt($,D,S,j,A,C,L,I,R);return}else if(M&256){qe($,D,S,j,A,C,L,I,R);return}}F&8?(N&16&&bt($,A,C),D!==$&&c(S,D)):N&16?F&16?Rt($,D,S,j,A,C,L,I,R):bt($,A,C,!0):(N&8&&c(S,""),F&16&&V(D,S,j,A,C,L,I,R))},qe=(d,p,S,j,A,C,L,I,R)=>{d=d||zt,p=p||zt;const $=d.length,N=p.length,D=Math.min($,N);let M;for(M=0;M<D;M++){const F=p[M]=R?ut(p[M]):We(p[M]);y(d[M],F,S,null,A,C,L,I,R)}$>N?bt(d,A,C,!0,!1,D):V(p,S,j,A,C,L,I,R,D)},Rt=(d,p,S,j,A,C,L,I,R)=>{let $=0;const N=p.length;let D=d.length-1,M=N-1;for(;$<=D&&$<=M;){const F=d[$],Y=p[$]=R?ut(p[$]):We(p[$]);if(as(F,Y))y(F,Y,S,null,A,C,L,I,R);else break;$++}for(;$<=D&&$<=M;){const F=d[D],Y=p[M]=R?ut(p[M]):We(p[M]);if(as(F,Y))y(F,Y,S,null,A,C,L,I,R);else break;D--,M--}if($>D){if($<=M){const F=M+1,Y=F<N?p[F].el:j;for(;$<=M;)y(null,p[$]=R?ut(p[$]):We(p[$]),S,Y,A,C,L,I,R),$++}}else if($>M)for(;$<=D;)$e(d[$],A,C,!0),$++;else{const F=$,Y=$,ee=new Map;for($=Y;$<=M;$++){const ye=p[$]=R?ut(p[$]):We(p[$]);ye.key!=null&&ee.set(ye.key,$)}let X,ve=0;const fe=M-Y+1;let Re=!1,Ie=0;const St=new Array(fe);for($=0;$<fe;$++)St[$]=0;for($=F;$<=D;$++){const ye=d[$];if(ve>=fe){$e(ye,A,C,!0);continue}let Le;if(ye.key!=null)Le=ee.get(ye.key);else for(X=Y;X<=M;X++)if(St[X-Y]===0&&as(ye,p[X])){Le=X;break}Le===void 0?$e(ye,A,C,!0):(St[Le-Y]=$+1,Le>=Ie?Ie=Le:Re=!0,y(ye,p[Le],S,null,A,C,L,I,R),ve++)}const Ns=Re?Pl(St):zt;for(X=Ns.length-1,$=fe-1;$>=0;$--){const ye=Y+$,Le=p[ye],Fs=ye+1<N?p[ye+1].el:j;St[$]===0?y(null,Le,S,Fs,A,C,L,I,R):Re&&(X<0||$!==Ns[X]?He(Le,S,Fs,2):X--)}}},He=(d,p,S,j,A=null)=>{const{el:C,type:L,transition:I,children:R,shapeFlag:$}=d;if($&6){He(d.component.subTree,p,S,j);return}if($&128){d.suspense.move(p,S,j);return}if($&64){L.move(d,p,S,wt);return}if(L===me){n(C,p,S);for(let D=0;D<R.length;D++)He(R[D],p,S,j);n(d.anchor,p,S);return}if(L===jn){w(d,p,S);return}if(j!==2&&$&1&&I)if(j===0)I.beforeEnter(C),n(C,p,S),Ae(()=>I.enter(C),A);else{const{leave:D,delayLeave:M,afterLeave:F}=I,Y=()=>{d.ctx.isUnmounted?r(C):n(C,p,S)},ee=()=>{D(C,()=>{Y(),F&&F()})};M?M(C,Y,ee):ee()}else n(C,p,S)},$e=(d,p,S,j=!1,A=!1)=>{const{type:C,props:L,ref:I,children:R,dynamicChildren:$,shapeFlag:N,patchFlag:D,dirs:M,cacheIndex:F}=d;if(D===-2&&(A=!1),I!=null&&(nt(),rn(I,null,S,d,!0),rt()),F!=null&&(p.renderCache[F]=void 0),N&256){p.ctx.deactivate(d);return}const Y=N&1&&M,ee=!_s(d);let X;if(ee&&(X=L&&L.onVnodeBeforeUnmount)&&Ke(X,p,d),N&6)kn(d.component,S,j);else{if(N&128){d.suspense.unmount(S,j);return}Y&&kt(d,null,p,"beforeUnmount"),N&64?d.type.remove(d,p,S,wt,j):$&&!$.hasOnce&&(C!==me||D>0&&D&64)?bt($,p,S,!1,!0):(C===me&&D&384||!A&&N&16)&&bt(R,p,S),j&&Us(d)}(ee&&(X=L&&L.onVnodeUnmounted)||Y)&&Ae(()=>{X&&Ke(X,p,d),Y&&kt(d,null,p,"unmounted")},S)},Us=d=>{const{type:p,el:S,anchor:j,transition:A}=d;if(p===me){Sn(S,j);return}if(p===jn){E(d);return}const C=()=>{r(S),A&&!A.persisted&&A.afterLeave&&A.afterLeave()};if(d.shapeFlag&1&&A&&!A.persisted){const{leave:L,delayLeave:I}=A,R=()=>L(S,C);I?I(d.el,C,R):R()}else C()},Sn=(d,p)=>{let S;for(;d!==p;)S=m(d),r(d),d=S;r(p)},kn=(d,p,S)=>{const{bum:j,scope:A,job:C,subTree:L,um:I,m:R,a:$,parent:N,slots:{__:D}}=d;qr(R),qr($),j&&Ys(j),N&&q(D)&&D.forEach(M=>{N.renderCache[M]=void 0}),A.stop(),C&&(C.flags|=8,$e(L,d,p,S)),I&&Ae(I,p),Ae(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},bt=(d,p,S,j=!1,A=!1,C=0)=>{for(let L=C;L<d.length;L++)$e(d[L],p,S,j,A)},It=d=>{if(d.shapeFlag&6)return It(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const p=m(d.anchor||d.el),S=p&&p[Xa];return S?m(S):p};let ns=!1;const Ms=(d,p,S)=>{d==null?p._vnode&&$e(p._vnode,null,null,!0):y(p._vnode||null,d,p,null,null,null,S),p._vnode=d,ns||(ns=!0,Dr(),ao(),ns=!1)},wt={p:y,um:$e,m:He,r:Us,mt:yt,mc:V,pc:W,pbc:ie,n:It,o:t};return{render:Ms,hydrate:void 0,createApp:_l(Ms)}}function Cn({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function xt({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Ol(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Po(t,e,s=!1){const n=t.children,r=e.children;if(q(n)&&q(r))for(let i=0;i<n.length;i++){const o=n[i];let a=r[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[i]=ut(r[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Po(o,a)),a.type===yn&&(a.el=o.el),a.type===mt&&!a.el&&(a.el=o.el)}}function Pl(t){const e=t.slice(),s=[0];let n,r,i,o,a;const l=t.length;for(n=0;n<l;n++){const u=t[n];if(u!==0){if(r=s[s.length-1],t[r]<u){e[n]=r,s.push(n);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<u?i=a+1:o=a;u<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function Ao(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ao(e)}function qr(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Al=Symbol.for("v-scx"),Cl=()=>Xs(Al);function ys(t,e,s){return Co(t,e,s)}function Co(t,e,s=te){const{immediate:n,deep:r,flush:i,once:o}=s,a=xe({},s),l=e&&n||!e&&i!=="post";let u;if(As){if(i==="sync"){const b=Cl();u=b.__watcherHandles||(b.__watcherHandles=[])}else if(!l){const b=()=>{};return b.stop=Ve,b.resume=Ve,b.pause=Ve,b}}const c=ke;a.call=(b,k,y)=>Ge(b,c,k,y);let h=!1;i==="post"?a.scheduler=b=>{Ae(b,c&&c.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(b,k)=>{k?b():wr(b)}),a.augmentJob=b=>{e&&(b.flags|=4),h&&(b.flags|=2,c&&(b.id=c.uid,b.i=c))};const m=Wa(t,e,a);return As&&(u?u.push(m):l&&m()),m}function jl(t,e,s){const n=this.proxy,r=oe(t)?t.includes(".")?jo(n,t):()=>n[t]:t.bind(n,n);let i;J(e)?i=e:(i=e.handler,s=e);const o=Rs(this),a=Co(r,i.bind(n),s);return o(),a}function jo(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const $l=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${pt(e)}Modifiers`]||t[`${Ct(e)}Modifiers`];function Rl(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||te;let r=s;const i=e.startsWith("update:"),o=i&&$l(n,e.slice(7));o&&(o.trim&&(r=s.map(c=>oe(c)?c.trim():c)),o.number&&(r=s.map(Bn)));let a,l=n[a=xn(e)]||n[a=xn(pt(e))];!l&&i&&(l=n[a=xn(Ct(e))]),l&&Ge(l,t,6,r);const u=n[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ge(u,t,6,r)}}function $o(t,e,s=!1){const n=e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let o={},a=!1;if(!J(t)){const l=u=>{const c=$o(u,e,!0);c&&(a=!0,xe(o,c))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(re(t)&&n.set(t,null),null):(q(i)?i.forEach(l=>o[l]=null):xe(o,i),re(t)&&n.set(t,o),o)}function vn(t,e){return!t||!un(e)?!1:(e=e.slice(2).replace(/Once$/,""),Z(t,e[0].toLowerCase()+e.slice(1))||Z(t,Ct(e))||Z(t,e))}function Hr(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:m,setupState:b,ctx:k,inheritAttrs:y}=t,f=nn(t);let x,T;try{if(s.shapeFlag&4){const E=r||n,_=E;x=We(u.call(_,E,c,h,b,m,k)),T=a}else{const E=e;x=We(E.length>1?E(h,{attrs:a,slots:o,emit:l}):E(h,null)),T=e.props?a:Il(a)}}catch(E){bs.length=0,gn(E,t,1),x=ze(mt)}let w=x;if(T&&y!==!1){const E=Object.keys(T),{shapeFlag:_}=w;E.length&&_&7&&(i&&E.some(cr)&&(T=Ll(T,i)),w=es(w,T,!1,!0))}return s.dirs&&(w=es(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(s.dirs):s.dirs),s.transition&&Sr(w,s.transition),x=w,nn(f),x}const Il=t=>{let e;for(const s in t)(s==="class"||s==="style"||un(s))&&((e||(e={}))[s]=t[s]);return e},Ll=(t,e)=>{const s={};for(const n in t)(!cr(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Dl(t,e,s){const{props:n,children:r,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return n?Kr(n,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const m=c[h];if(o[m]!==n[m]&&!vn(u,m))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?Kr(n,o,u):!0:!!o;return!1}function Kr(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!vn(s,i))return!0}return!1}function Ul({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const Ro=t=>t.__isSuspense;function Ml(t,e){e&&e.pendingBranch?q(t)?e.effects.push(...t):e.effects.push(t):Ga(t)}const me=Symbol.for("v-fgt"),yn=Symbol.for("v-txt"),mt=Symbol.for("v-cmt"),jn=Symbol.for("v-stc"),bs=[];let Ce=null;function H(t=!1){bs.push(Ce=t?null:[])}function Nl(){bs.pop(),Ce=bs[bs.length-1]||null}let Ps=1;function Jr(t,e=!1){Ps+=t,t<0&&Ce&&e&&(Ce.hasOnce=!0)}function Io(t){return t.dynamicChildren=Ps>0?Ce||zt:null,Nl(),Ps>0&&Ce&&Ce.push(t),t}function z(t,e,s,n,r,i){return Io(g(t,e,s,n,r,i,!0))}function hs(t,e,s,n,r){return Io(ze(t,e,s,n,r,!0))}function Lo(t){return t?t.__v_isVNode===!0:!1}function as(t,e){return t.type===e.type&&t.key===e.key}const Do=({key:t})=>t??null,Qs=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?oe(t)||_e(t)||J(t)?{i:De,r:t,k:e,f:!!s}:t:null);function g(t,e=null,s=null,n=0,r=null,i=t===me?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Do(e),ref:e&&Qs(e),scopeId:co,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:De};return a?(Tr(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=oe(s)?8:16),Ps>0&&!o&&Ce&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ce.push(l),l}const ze=Fl;function Fl(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===cl)&&(t=mt),Lo(t)){const a=es(t,e,!0);return s&&Tr(a,s),Ps>0&&!i&&Ce&&(a.shapeFlag&6?Ce[Ce.indexOf(t)]=a:Ce.push(a)),a.patchFlag=-2,a}if(Yl(t)&&(t=t.__vccOpts),e){e=Bl(e);let{class:a,style:l}=e;a&&!oe(a)&&(e.class=et(a)),re(l)&&(br(l)&&!q(l)&&(l=xe({},l)),e.style=dr(l))}const o=oe(t)?1:Ro(t)?128:Qa(t)?64:re(t)?4:J(t)?2:0;return g(t,e,s,n,r,o,i,!0)}function Bl(t){return t?br(t)||So(t)?xe({},t):t:null}function es(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?ql(r||{},e):r,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Do(u),ref:e&&e.ref?s&&i?q(i)?i.concat(Qs(e)):[i,Qs(e)]:Qs(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==me?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&es(t.ssContent),ssFallback:t.ssFallback&&es(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&n&&Sr(c,l.clone(c)),c}function ct(t=" ",e=0){return ze(yn,null,t,e)}function ue(t="",e=!1){return e?(H(),hs(mt,null,t)):ze(mt,null,t)}function We(t){return t==null||typeof t=="boolean"?ze(mt):q(t)?ze(me,null,t.slice()):Lo(t)?ut(t):ze(yn,null,String(t))}function ut(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:es(t)}function Tr(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(q(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Tr(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!So(e)?e._ctx=De:r===3&&De&&(De.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else J(e)?(e={default:e,_ctx:De},s=32):(e=String(e),n&64?(s=16,e=[ct(e)]):s=8);t.children=e,t.shapeFlag|=s}function ql(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=et([e.class,n.class]));else if(r==="style")e.style=dr([e.style,n.style]);else if(un(r)){const i=e[r],o=n[r];o&&i!==o&&!(q(i)&&i.includes(o))&&(e[r]=i?[].concat(i,o):o)}else r!==""&&(e[r]=n[r])}return e}function Ke(t,e,s,n=null){Ge(t,e,7,[s,n])}const Hl=yo();let Kl=0;function Jl(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||Hl,i={uid:Kl++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new va(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xo(n,r),emitsOptions:$o(n,r),emit:null,emitted:null,propsDefaults:te,inheritAttrs:n.inheritAttrs,ctx:te,data:te,props:te,attrs:te,slots:te,refs:te,setupState:te,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Rl.bind(null,i),t.ce&&t.ce(i),i}let ke=null,an,Xn;{const t=fn(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(o=>o(i)):r[0](i)}};an=e("__VUE_INSTANCE_SETTERS__",s=>ke=s),Xn=e("__VUE_SSR_SETTERS__",s=>As=s)}const Rs=t=>{const e=ke;return an(t),t.scope.on(),()=>{t.scope.off(),an(e)}},Wr=()=>{ke&&ke.scope.off(),an(null)};function Uo(t){return t.vnode.shapeFlag&4}let As=!1;function Wl(t,e=!1,s=!1){e&&Xn(e);const{props:n,children:r}=t.vnode,i=Uo(t);yl(t,n,i,e),kl(t,r,s||e);const o=i?Vl(t,e):void 0;return e&&Xn(!1),o}function Vl(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ul);const{setup:n}=s;if(n){nt();const r=t.setupContext=n.length>1?Gl(t):null,i=Rs(t),o=$s(n,t,0,[t.props,r]),a=Ii(o);if(rt(),i(),(a||t.sp)&&!_s(t)&&ho(t),a){if(o.then(Wr,Wr),e)return o.then(l=>{Vr(t,l)}).catch(l=>{gn(l,t,0)});t.asyncDep=o}else Vr(t,o)}else Mo(t)}function Vr(t,e,s){J(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:re(e)&&(t.setupState=no(e)),Mo(t)}function Mo(t,e,s){const n=t.type;t.render||(t.render=n.render||Ve);{const r=Rs(t);nt();try{hl(t)}finally{rt(),r()}}}const zl={get(t,e){return ge(t,"get",""),t[e]}};function Gl(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,zl),slots:t.slots,emit:t.emit,expose:e}}function bn(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(no(Na(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in vs)return vs[s](t)},has(e,s){return s in e||s in vs}})):t.proxy}function Yl(t){return J(t)&&"__vccOpts"in t}const ds=(t,e)=>Ka(t,e,As),Xl="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qn;const zr=typeof window<"u"&&window.trustedTypes;if(zr)try{Qn=zr.createPolicy("vue",{createHTML:t=>t})}catch{}const No=Qn?t=>Qn.createHTML(t):t=>t,Ql="http://www.w3.org/2000/svg",Zl="http://www.w3.org/1998/Math/MathML",Qe=typeof document<"u"?document:null,Gr=Qe&&Qe.createElement("template"),ec={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?Qe.createElementNS(Ql,t):e==="mathml"?Qe.createElementNS(Zl,t):s?Qe.createElement(t,{is:s}):Qe.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Qe.createTextNode(t),createComment:t=>Qe.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qe.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const o=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{Gr.innerHTML=No(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const a=Gr.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},tc=Symbol("_vtc");function sc(t,e,s){const n=t[tc];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Yr=Symbol("_vod"),nc=Symbol("_vsh"),rc=Symbol(""),ic=/(^|;)\s*display\s*:/;function oc(t,e,s){const n=t.style,r=oe(s);let i=!1;if(s&&!r){if(e)if(oe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&Zs(n,a,"")}else for(const o in e)s[o]==null&&Zs(n,o,"");for(const o in s)o==="display"&&(i=!0),Zs(n,o,s[o])}else if(r){if(e!==s){const o=n[rc];o&&(s+=";"+o),n.cssText=s,i=ic.test(s)}}else e&&t.removeAttribute("style");Yr in t&&(t[Yr]=i?n.display:"",t[nc]&&(n.display="none"))}const Xr=/\s*!important$/;function Zs(t,e,s){if(q(s))s.forEach(n=>Zs(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=ac(t,e);Xr.test(s)?t.setProperty(Ct(n),s.replace(Xr,""),"important"):t[n]=s}}const Qr=["Webkit","Moz","ms"],$n={};function ac(t,e){const s=$n[e];if(s)return s;let n=pt(e);if(n!=="filter"&&n in t)return $n[e]=n;n=Ui(n);for(let r=0;r<Qr.length;r++){const i=Qr[r]+n;if(i in t)return $n[e]=i}return e}const Zr="http://www.w3.org/1999/xlink";function ei(t,e,s,n,r,i=_a(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Zr,e.slice(6,e.length)):t.setAttributeNS(Zr,e,s):s==null||i&&!Ni(s)?t.removeAttribute(e):t.setAttribute(e,i?"":_t(s)?String(s):s)}function ti(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?No(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Ni(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(r||e)}function Wt(t,e,s,n){t.addEventListener(e,s,n)}function lc(t,e,s,n){t.removeEventListener(e,s,n)}const si=Symbol("_vei");function cc(t,e,s,n,r=null){const i=t[si]||(t[si]={}),o=i[e];if(n&&o)o.value=n;else{const[a,l]=uc(e);if(n){const u=i[e]=fc(n,r);Wt(t,a,u,l)}else o&&(lc(t,a,o,l),i[e]=void 0)}}const ni=/(?:Once|Passive|Capture)$/;function uc(t){let e;if(ni.test(t)){e={};let n;for(;n=t.match(ni);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ct(t.slice(2)),e]}let Rn=0;const hc=Promise.resolve(),dc=()=>Rn||(hc.then(()=>Rn=0),Rn=Date.now());function fc(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Ge(pc(n,s.value),e,5,[n])};return s.value=t,s.attached=dc(),s}function pc(t,e){if(q(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const ri=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,gc=(t,e,s,n,r,i)=>{const o=r==="svg";e==="class"?sc(t,n,o):e==="style"?oc(t,s,n):un(e)?cr(e)||cc(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):mc(t,e,n,o))?(ti(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&ei(t,e,n,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!oe(n))?ti(t,pt(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),ei(t,e,n,o))};function mc(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&ri(e)&&J(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ri(e)&&oe(s)?!1:e in t}const ii=t=>{const e=t.props["onUpdate:modelValue"]||!1;return q(e)?s=>Ys(e,s):e};function _c(t){t.target.composing=!0}function oi(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const In=Symbol("_assign"),Fo={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[In]=ii(r);const i=n||r.props&&r.props.type==="number";Wt(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),i&&(a=Bn(a)),t[In](a)}),s&&Wt(t,"change",()=>{t.value=t.value.trim()}),e||(Wt(t,"compositionstart",_c),Wt(t,"compositionend",oi),Wt(t,"change",oi))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},o){if(t[In]=ii(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Bn(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===l)||(t.value=l))}},vc=["ctrl","shift","alt","meta"],yc={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>vc.some(s=>t[`${s}Key`]&&!e.includes(s))},Cs=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(r,...i)=>{for(let o=0;o<e.length;o++){const a=yc[e[o]];if(a&&a(r,e))return}return t(r,...i)})},bc=xe({patchProp:gc},ec);let ai;function wc(){return ai||(ai=Tl(bc))}const Sc=(...t)=>{const e=wc().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=xc(n);if(!r)return;const i=e._component;!J(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=s(r,!1,kc(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function kc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function xc(t){return oe(t)?document.querySelector(t):t}const Is=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},Tc={key:0,class:"action-buttons"},Ec=["disabled"],Oc={class:"players-grid"},Pc={class:"avatar-placeholder"},Ac=["src"],Cc={class:"player-name"},jc={class:"player-actions"},$c=["onClick"],Rc=["onClick"],Ic=["onClick"],Lc={class:"action-buttons"},Dc={__name:"PlayerSelector",props:{predefinedPlayers:Array,role:String},emits:["start-game"],setup(t,{emit:e}){const s=t,n=e,r=je([]),i=je(""),o=["/shanghai/img/invite_1.jpg","/shanghai/img/invite_2.png","/shanghai/img/invite_3.png","/shanghai/img/invite_4.png","/shanghai/img/invite_5.png","/shanghai/img/invite_6.png","/shanghai/img/invite_7.png","/shanghai/img/invite_8.png","/shanghai/img/invite_9.png","/shanghai/img/invite_10.png","/shanghai/img/invite_11.png"];let a=[...o];function l(){a.length===0&&(a=[...o]);const T=Math.floor(Math.random()*a.length);return a.splice(T,1)[0]}function u(){const T=i.value.trim();if(T===""||r.value.some(E=>E.name===T))return;const w=s.predefinedPlayers.find(E=>E.name===T);r.value.push({name:T,avatar:(w==null?void 0:w.avatar)||l()}),i.value=""}function c(){u()}function h(){r.value=s.predefinedPlayers.map(T=>({id:T.id,name:T.name,avatar:T.avatar||l()}))}function m(T){r.value=r.value.filter(w=>w.name!==T)}function b(T){const w=r.value.findIndex(E=>E.name===T);w<=0||([r.value[w-1],r.value[w]]=[r.value[w],r.value[w-1]])}function k(T){const w=r.value.findIndex(E=>E.name===T);w===-1||w>=r.value.length-1||([r.value[w+1],r.value[w]]=[r.value[w],r.value[w+1]])}function y(){for(let T=r.value.length-1;T>0;T--){const w=Math.floor(Math.random()*(T+1));[r.value[T],r.value[w]]=[r.value[w],r.value[T]]}}function f(){const T=document.documentElement;T.requestFullscreen?T.requestFullscreen():T.mozRequestFullScreen?T.mozRequestFullScreen():T.webkitRequestFullscreen?T.webkitRequestFullscreen():T.msRequestFullscreen&&T.msRequestFullscreen()}function x(){f(),n("start-game",r.value)}return _n(()=>{s.role==="admin"&&h()}),(T,w)=>(H(),z(me,null,[w[3]||(w[3]=g("h1",null,"Shanghai ",-1)),t.role==="admin"?(H(),z("div",Tc,[g("a",{href:"#",onClick:w[0]||(w[0]=Cs(E=>T.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):ue("",!0),g("form",{onSubmit:Cs(u,["prevent"])},[uo(g("input",{type:"text","onUpdate:modelValue":w[1]||(w[1]=E=>i.value=E),placeholder:"Ajouter un joueur",onChange:c},null,544),[[Fo,i.value]]),g("button",{disabled:i.value.length===0},"Ajouter",8,Ec)],32),g("ul",Oc,[(H(!0),z(me,null,Os(r.value,E=>(H(),z("li",{key:E.name,class:"player-card"},[g("div",Pc,[g("img",{src:E.avatar,alt:"avatar",class:"avatar-img"},null,8,Ac)]),g("div",Cc,O(E.name),1),g("div",jc,[g("button",{onClick:_=>b(E.name)},"",8,$c),g("button",{onClick:_=>m(E.name)},"",8,Rc),g("button",{onClick:_=>k(E.name)},"",8,Ic)])]))),128))]),g("div",Lc,[r.value.length>=2?(H(),z("button",{key:0,onClick:w[2]||(w[2]=E=>y())},"Ordre alatoire")):ue("",!0),r.value.length>=1?(H(),z("button",{key:1,onClick:x,class:"jouer-button"},"JOUER")):ue("",!0)]),w[4]||(w[4]=g("br",null,null,-1))],64))}},Uc=Is(Dc,[["__scopeId","data-v-91569e23"]]),Mc="modulepreload",Nc=function(t){return"/shanghai/"+t},li={},Ls=function(e,s,n){let r=Promise.resolve();if(s&&s.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=o(s.map(u=>{if(u=Nc(u),u in li)return;li[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=c?"stylesheet":Mc,c||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),c)return new Promise((b,k)=>{m.addEventListener("load",b),m.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Fc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ls(async()=>{const{default:n}=await Promise.resolve().then(()=>ss);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Er extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class Bc extends Er{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class qc extends Er{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hc extends Er{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zn;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Zn||(Zn={}));var Kc=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class Jc{constructor(e,{headers:s={},customFetch:n,region:r=Zn.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=Fc(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return Kc(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u}).catch(k=>{throw new Bc(k)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new qc(c);if(!c.ok)throw new Hc(c);let m=((n=c.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),b;return m==="application/json"?b=yield c.json():m==="application/octet-stream"?b=yield c.blob():m==="text/event-stream"?b=c:m==="multipart/form-data"?b=yield c.formData():b=yield c.text(),{data:b,error:null}}catch(r){return{data:null,error:r}}})}}function Wc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vc(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var le={},Dt={},Ut={},Mt={},Nt={},Ft={},zc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ts=zc();const Gc=ts.fetch,Bo=ts.fetch.bind(ts),qo=ts.Headers,Yc=ts.Request,Xc=ts.Response,ss=Object.freeze(Object.defineProperty({__proto__:null,Headers:qo,Request:Yc,Response:Xc,default:Bo,fetch:Gc},Symbol.toStringTag,{value:"Module"})),Qc=Vc(ss);var Ks={},ci;function Ho(){if(ci)return Ks;ci=1,Object.defineProperty(Ks,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Ks.default=t,Ks}var ui;function Ko(){if(ui)return Ft;ui=1;var t=Ft&&Ft.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ft,"__esModule",{value:!0});const e=t(Qc),s=t(Ho());class n{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,m;let b=null,k=null,y=null,f=u.status,x=u.statusText;if(u.ok){if(this.method!=="HEAD"){const _=await u.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=_:k=JSON.parse(_))}const w=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),E=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&E&&E.length>1&&(y=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(b={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,y=null,f=406,x="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const w=await u.text();try{b=JSON.parse(w),Array.isArray(b)&&u.status===404&&(k=[],b=null,f=200,x="OK")}catch{u.status===404&&w===""?(f=204,x="No Content"):b={message:w}}if(b&&this.isMaybeSingle&&(!((m=b==null?void 0:b.details)===null||m===void 0)&&m.includes("0 rows"))&&(b=null,f=200,x="OK"),b&&this.shouldThrowOnError)throw new s.default(b)}return{error:b,data:k,count:y,status:f,statusText:x}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,m;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(m=u==null?void 0:u.code)!==null&&m!==void 0?m:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return Ft.default=n,Ft}var hi;function Jo(){if(hi)return Nt;hi=1;var t=Nt&&Nt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nt,"__esModule",{value:!0});const e=t(Ko());class s extends e.default{select(r){let i=!1;const o=(r??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(r,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${r}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${r}`),this.url.searchParams.set(u,`${i-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:r=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[r?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),m=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${m}"; options=${h};`,u==="json"?this:this}rollback(){var r;return((r=this.headers.Prefer)!==null&&r!==void 0?r:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Nt.default=s,Nt}var di;function Or(){if(di)return Mt;di=1;var t=Mt&&Mt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Mt,"__esModule",{value:!0});const e=t(Jo());class s extends e.default{eq(r,i){return this.url.searchParams.append(r,`eq.${i}`),this}neq(r,i){return this.url.searchParams.append(r,`neq.${i}`),this}gt(r,i){return this.url.searchParams.append(r,`gt.${i}`),this}gte(r,i){return this.url.searchParams.append(r,`gte.${i}`),this}lt(r,i){return this.url.searchParams.append(r,`lt.${i}`),this}lte(r,i){return this.url.searchParams.append(r,`lte.${i}`),this}like(r,i){return this.url.searchParams.append(r,`like.${i}`),this}likeAllOf(r,i){return this.url.searchParams.append(r,`like(all).{${i.join(",")}}`),this}likeAnyOf(r,i){return this.url.searchParams.append(r,`like(any).{${i.join(",")}}`),this}ilike(r,i){return this.url.searchParams.append(r,`ilike.${i}`),this}ilikeAllOf(r,i){return this.url.searchParams.append(r,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(r,i){return this.url.searchParams.append(r,`ilike(any).{${i.join(",")}}`),this}is(r,i){return this.url.searchParams.append(r,`is.${i}`),this}in(r,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(r,`in.(${o})`),this}contains(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cs.{${i.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(i)}`),this}containedBy(r,i){return typeof i=="string"?this.url.searchParams.append(r,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(r,`cd.{${i.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(i)}`),this}rangeGt(r,i){return this.url.searchParams.append(r,`sr.${i}`),this}rangeGte(r,i){return this.url.searchParams.append(r,`nxl.${i}`),this}rangeLt(r,i){return this.url.searchParams.append(r,`sl.${i}`),this}rangeLte(r,i){return this.url.searchParams.append(r,`nxr.${i}`),this}rangeAdjacent(r,i){return this.url.searchParams.append(r,`adj.${i}`),this}overlaps(r,i){return typeof i=="string"?this.url.searchParams.append(r,`ov.${i}`):this.url.searchParams.append(r,`ov.{${i.join(",")}}`),this}textSearch(r,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(r,`${l}fts${u}.${i}`),this}match(r){return Object.entries(r).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(r,i,o){return this.url.searchParams.append(r,`not.${i}.${o}`),this}or(r,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,i,o){return this.url.searchParams.append(r,`${i}.${o}`),this}}return Mt.default=s,Mt}var fi;function Wo(){if(fi)return Ut;fi=1;var t=Ut&&Ut.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ut,"__esModule",{value:!0});const e=t(Or());class s{constructor(r,{headers:i={},schema:o,fetch:a}){this.url=r,this.headers=i,this.schema=o,this.fetch=a}select(r,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const u=(r??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(r,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(r)){const u=r.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}upsert(r,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(r)){const h=r.reduce((m,b)=>m.concat(Object.keys(b)),[]);if(h.length>0){const m=[...new Set(h)].map(b=>`"${b}"`);this.url.searchParams.set("columns",m.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}update(r,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}delete({count:r}={}){const i="DELETE",o=[];return r&&o.push(`count=${r}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Ut.default=s,Ut}var ls={},cs={},pi;function Zc(){return pi||(pi=1,Object.defineProperty(cs,"__esModule",{value:!0}),cs.version=void 0,cs.version="0.0.0-automated"),cs}var gi;function eu(){if(gi)return ls;gi=1,Object.defineProperty(ls,"__esModule",{value:!0}),ls.DEFAULT_HEADERS=void 0;const t=Zc();return ls.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ls}var mi;function tu(){if(mi)return Dt;mi=1;var t=Dt&&Dt.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Dt,"__esModule",{value:!0});const e=t(Wo()),s=t(Or()),n=eu();class r{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const m=new URL(`${this.url}/rpc/${o}`);let b;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([y,f])=>f!==void 0).map(([y,f])=>[y,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([y,f])=>{m.searchParams.append(y,f)})):(h="POST",b=a);const k=Object.assign({},this.headers);return c&&(k.Prefer=`count=${c}`),new s.default({method:h,url:m,headers:k,schema:this.schemaName,body:b,fetch:this.fetch,allowEmpty:!1})}}return Dt.default=r,Dt}var _i;function su(){if(_i)return le;_i=1;var t=le&&le.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(le,"__esModule",{value:!0}),le.PostgrestError=le.PostgrestBuilder=le.PostgrestTransformBuilder=le.PostgrestFilterBuilder=le.PostgrestQueryBuilder=le.PostgrestClient=void 0;const e=t(tu());le.PostgrestClient=e.default;const s=t(Wo());le.PostgrestQueryBuilder=s.default;const n=t(Or());le.PostgrestFilterBuilder=n.default;const r=t(Jo());le.PostgrestTransformBuilder=r.default;const i=t(Ko());le.PostgrestBuilder=i.default;const o=t(Ho());return le.PostgrestError=o.default,le.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:r.default,PostgrestBuilder:i.default,PostgrestError:o.default},le}var nu=su();const ru=Wc(nu),{PostgrestClient:iu,PostgrestQueryBuilder:ff,PostgrestFilterBuilder:pf,PostgrestTransformBuilder:gf,PostgrestBuilder:mf,PostgrestError:_f}=ru;let er;typeof window>"u"?er=require("ws"):er=window.WebSocket;const ou="2.11.10",au={"X-Client-Info":`realtime-js/${ou}`},lu="1.0.0",Vo=1e4,cu=1e3;var Zt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Zt||(Zt={}));var we;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(we||(we={}));var Ne;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ne||(Ne={}));var tr;(function(t){t.websocket="websocket"})(tr||(tr={}));var Pt;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Pt||(Pt={}));class uu{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+r));o=o+r;const l=n.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class zo{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(se||(se={}));const vi=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=hu(o,t,e,r),i),{})},hu=(t,e,s,n)=>{const r=e.find(a=>a.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?Go(i,o):sr(o)},Go=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return gu(e,s)}switch(t){case se.bool:return du(e);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return fu(e);case se.json:case se.jsonb:return pu(e);case se.timestamp:return mu(e);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return sr(e);default:return sr(e)}},sr=t=>t,du=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},fu=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pu=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gu=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Go(e,a))}return t},mu=t=>typeof t=="string"?t.replace(" ","T"):t,Yo=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ln{constructor(e,s,n={},r=Vo){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var yi;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(yi||(yi={}));class ws{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ws.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=ws.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=ws.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const m=c.map(f=>f.presence_ref),b=h.map(f=>f.presence_ref),k=c.filter(f=>b.indexOf(f.presence_ref)<0),y=h.filter(f=>m.indexOf(f.presence_ref)<0);k.length>0&&(a[u]=k),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(b=>b.presence_ref),m=c.filter(b=>h.indexOf(b.presence_ref)<0);e[a].unshift(...m)}n(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,l),u.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bi;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(bi||(bi={}));var wi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(wi||(wi={}));var Ze;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ze||(Ze={}));class Pr{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=we.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ln(this,Ne.join,this.params,this.timeout),this.rejoinTimer=new zo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=we.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=we.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=we.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ne.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new ws(this),this.broadcastEndpointURL=Yo(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(Ze.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(Ze.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(c=>c.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(Ze.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,b=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,k=[];for(let y=0;y<b;y++){const f=m[y],{filter:{event:x,schema:T,table:w,filter:E}}=f,_=c&&c[y];if(_&&_.event===x&&_.schema===T&&_.table===w&&_.filter===E)k.push(Object.assign(Object.assign({},f),{id:_.id}));else{this.unsubscribe(),this.state=we.errored,e==null||e(Ze.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(Ze.SUBSCRIBED);return}}).receive("error",c=>{this.state=we.errored,e==null||e(Ze.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ze.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=we.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ne.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const r=new Ln(this,Ne.leave,{},e);r.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Ln(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ne;if(n&&[a,l,u,c].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,s,n);if(s&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(b=>{var k,y,f;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((f=(y=b.filter)===null||y===void 0?void 0:y.event)===null||f===void 0?void 0:f.toLocaleLowerCase())===o}).map(b=>b.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(b=>{var k,y,f,x,T,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const E=b.id,_=(k=b.filter)===null||k===void 0?void 0:k.event;return E&&((y=s.ids)===null||y===void 0?void 0:y.includes(E))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((f=s.data)===null||f===void 0?void 0:f.type.toLocaleLowerCase()))}else{const E=(T=(x=b==null?void 0:b.filter)===null||x===void 0?void 0:x.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return E==="*"||E===((w=s==null?void 0:s.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof m=="object"&&"ids"in m){const k=m.data,{schema:y,table:f,commit_timestamp:x,type:T,errors:w}=k;m=Object.assign(Object.assign({},{schema:y,table:f,commit_timestamp:x,eventType:T,new:{},old:{},errors:w}),this._getPayloadRecords(k))}b.callback(m,n)})}_isClosed(){return this.state===we.closed}_isJoined(){return this.state===we.joined}_isJoining(){return this.state===we.joining}_isLeaving(){return this.state===we.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Pr.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ne.close,{},e)}_onError(e){this._on(Ne.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=we.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=vi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=vi(e.columns,e.old_record)),s}}const Si=()=>{},_u=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vu{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=au,this.params={},this.timeout=Vo,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Si,this.ref=0,this.logger=Si,this.conn=null,this.sendBuffer=[],this.serializer=new uu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>Ls(async()=>{const{default:l}=await Promise.resolve().then(()=>ss);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${tr.websocket}`,this.httpEndpoint=Yo(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=er),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new yu(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:lu}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zt.connecting:return Pt.Connecting;case Zt.open:return Pt.Open;case Zt.closing:return Pt.Closing;default:return Pt.Closed}}isConnected(){return this.connectionState()===Pt.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new Pr(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{s&&n.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(Ne.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(cu,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(n)).forEach(a=>a._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ne.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([_u],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class yu{constructor(e,s,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Zt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Ar extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ce(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class bu extends Ar{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class nr extends Ar{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var wu=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const Xo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ls(async()=>{const{default:n}=await Promise.resolve().then(()=>ss);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},Su=()=>wu(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ls(()=>Promise.resolve().then(()=>ss),void 0)).Response:Response}),rr=t=>{if(Array.isArray(t))return t.map(s=>rr(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=rr(n)}),e};var jt=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const Dn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ku=(t,e,s)=>jt(void 0,void 0,void 0,function*(){const n=yield Su();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new bu(Dn(r),t.status||500))}).catch(r=>{e(new nr(Dn(r),r))}):e(new nr(Dn(t),t))}),xu=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function Ds(t,e,s,n,r,i){return jt(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,xu(e,n,r,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ku(l,a,n))})})}function ln(t,e,s,n){return jt(this,void 0,void 0,function*(){return Ds(t,"GET",e,s,n)})}function ht(t,e,s,n,r){return jt(this,void 0,void 0,function*(){return Ds(t,"POST",e,n,r,s)})}function Tu(t,e,s,n,r){return jt(this,void 0,void 0,function*(){return Ds(t,"PUT",e,n,r,s)})}function Eu(t,e,s,n){return jt(this,void 0,void 0,function*(){return Ds(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Qo(t,e,s,n,r){return jt(this,void 0,void 0,function*(){return Ds(t,"DELETE",e,n,r,s)})}var Ee=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const Ou={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ki={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Pu{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=Xo(r)}uploadOrUpdate(e,s,n,r){return Ee(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ki),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(s),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(ce(i))return{data:null,error:i};throw i}})}upload(e,s,n){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return Ee(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const u=Object.assign({upsert:ki.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(ce(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return Ee(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield ht(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ar("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}update(e,s,n){return Ee(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Ee(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}copy(e,s,n){return Ee(this,void 0,void 0,function*(){try{return{data:{path:(yield ht(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return Ee(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ht(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return Ee(this,void 0,void 0,function*(){try{const r=yield ht(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}download(e,s){return Ee(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield ln(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ce(a))return{data:null,error:a};throw a}})}info(e){return Ee(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield ln(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:rr(n),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}exists(e){return Ee(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Eu(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ce(n)&&n instanceof nr){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${u}`)}}}remove(e){return Ee(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}list(e,s,n){return Ee(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Ou),s),{prefix:e||""});return{data:yield ht(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Au="2.7.1",Cu={"X-Client-Info":`storage-js/${Au}`};var Bt=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class ju{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},Cu),s),this.fetch=Xo(n)}listBuckets(){return Bt(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ce(e))return{data:null,error:e};throw e}})}getBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield ln(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Bt(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Bt(this,void 0,void 0,function*(){try{return{data:yield Tu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Bt(this,void 0,void 0,function*(){try{return{data:yield Qo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(ce(s))return{data:null,error:s};throw s}})}}class $u extends ju{constructor(e,s={},n){super(e,s,n)}from(e){return new Pu(this.url,this.headers,e,this.fetch)}}const Ru="2.50.0";let fs="";typeof Deno<"u"?fs="deno":typeof document<"u"?fs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?fs="react-native":fs="node";const Iu={"X-Client-Info":`supabase-js-${fs}/${Ru}`},Lu={headers:Iu},Du={schema:"public"},Uu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Mu={};var Nu=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};const Fu=t=>{let e;return t?e=t:typeof fetch>"u"?e=Bo:e=fetch,(...s)=>e(...s)},Bu=()=>typeof Headers>"u"?qo:Headers,qu=(t,e,s)=>{const n=Fu(s),r=Bu();return(i,o)=>Nu(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Hu=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};function Ku(t){return t.endsWith("/")?t:t+"/"}function Ju(t,e){var s,n;const{db:r,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,m={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Hu(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const Zo="2.70.0",Vt=30*1e3,ir=3,Un=ir*Vt,Wu="http://localhost:9999",Vu="supabase.auth.token",zu={"X-Client-Info":`gotrue-js/${Zo}`},or="X-Supabase-Api-Version",ea={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Yu=6e5;class Cr extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function K(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Xu extends Cr{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Qu(t){return K(t)&&t.name==="AuthApiError"}class ta extends Cr{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class vt extends Cr{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class at extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zu(t){return K(t)&&t.name==="AuthSessionMissingError"}class Js extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ws extends vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vs extends vt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eh(t){return K(t)&&t.name==="AuthImplicitGrantRedirectError"}class xi extends vt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ar extends vt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Mn(t){return K(t)&&t.name==="AuthRetryableFetchError"}class Ti extends vt{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Ss extends vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ei=` 	
\r=`.split(""),th=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ei.length;e+=1)t[Ei[e].charCodeAt(0)]=-2;for(let e=0;e<cn.length;e+=1)t[cn[e].charCodeAt(0)]=e;return t})();function Oi(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(cn[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(cn[n]),e.queuedBits-=6}}function sa(t,e,s){const n=th[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Pi(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{rh(o,n,s)};for(let o=0;o<t.length;o+=1)sa(t.charCodeAt(o),r,i);return e.join("")}function sh(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nh(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}sh(n,e)}}function rh(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function ih(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)sa(t.charCodeAt(r),s,n);return new Uint8Array(e)}function oh(t){const e=[];return nh(t,s=>e.push(s)),new Uint8Array(e)}function ah(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>Oi(r,s,n)),Oi(null,s,n),e.join("")}function lh(t){return Math.round(Date.now()/1e3)+t}function ch(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",Tt={tested:!1,writable:!1},ks=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tt.tested)return Tt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Tt.tested=!0,Tt.writable=!0}catch{Tt.tested=!0,Tt.writable=!1}return Tt.writable};function uh(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const na=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Ls(async()=>{const{default:n}=await Promise.resolve().then(()=>ss);return{default:n}},void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},hh=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ra=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},zs=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Gs=async(t,e)=>{await t.removeItem(e)};class wn{constructor(){this.promise=new wn.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}wn.promiseConstructor=Promise;function Nn(t){const e=t.split(".");if(e.length!==3)throw new Ss("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Gu.test(e[n]))throw new Ss("JWT not in base64url format");return{header:JSON.parse(Pi(e[0])),payload:JSON.parse(Pi(e[1])),signature:ih(e[2]),raw:{header:e[0],payload:e[1]}}}async function dh(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function fh(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function ph(t){return("0"+t.toString(16)).substr(-2)}function gh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,ph).join("")}async function mh(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function _h(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await mh(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function qt(t,e,s=!1){const n=gh();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await ra(t,`${e}-code-verifier`,r);const i=await _h(n);return[i,n===i?"plain":"s256"]}const vh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yh(t){const e=t.headers.get(or);if(!e||!e.match(vh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bh(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wh(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ht(t){if(!Sh.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var kh=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const Ot=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xh=[502,503,504];async function Ai(t){var e;if(!hh(t))throw new ar(Ot(t),0);if(xh.includes(t.status))throw new ar(Ot(t),t.status);let s;try{s=await t.json()}catch(i){throw new ta(Ot(i),i)}let n;const r=yh(t);if(r&&r.getTime()>=ea["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Ti(Ot(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new at}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Ti(Ot(s),t.status,s.weak_password.reasons);throw new Xu(Ot(s),t.status||500,n)}const Th=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function G(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[or]||(i[or]=ea["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Eh(t,e,s+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Eh(t,e,s,n,r,i){const o=Th(e,n,r,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new ar(Ot(l),0)}if(a.ok||await Ai(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(l){await Ai(l)}}function Xe(t){var e;let s=null;Ch(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=lh(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Ci(t){const e=Xe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function dt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Oh(t){return{data:t,error:null}}function Ph(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=kh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Ah(t){return t}function Ch(t){return t.access_token&&t.refresh_token&&t.expires_in}const Fn=["global","local","others"];var jh=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class $h{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=na(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Fn[0]){if(Fn.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Fn.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:dt})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=jh(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ph,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(K(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:dt})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:Ah});if(c.error)throw c.error;const h=await c.json(),m=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return b.length>0&&(b.forEach(k=>{const y=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),f=JSON.parse(k.split(";")[1].split("=")[1]);u[`${f}Page`]=y}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(K(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Ht(e);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:dt})}catch(s){if(K(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ht(e);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:dt})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Ht(e);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:dt})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ht(e.userId);try{const{data:s,error:n}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(K(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ht(e.userId),Ht(e.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}}}const Rh={getItem:t=>ks()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ks()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ks()&&globalThis.localStorage.removeItem(t)}};function ji(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Ih(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Kt={debug:!!(globalThis&&ks()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ia extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Lh extends ia{}async function Dh(t,e,s){Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Lh(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Kt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Ih();const Uh={url:Wu,storageKey:Vu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function $i(t,e,s){return await s()}class js{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=js.nextInstanceID,js.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Uh),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new $h({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=na(r.fetch),this.lock=r.lock||$i,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Me()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Dh:this.lock=$i,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:ks()?this.storage=Rh:(this.memoryStorage={},this.storage=ji(this.memoryStorage)):(this.memoryStorage={},this.storage=ji(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zo}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=uh(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Me()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),eh(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return K(s)?{error:s}:{error:new ta("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Xe}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:c,password:h,options:m}=e;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await qt(this.storage,this.storageKey)),i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:c,password:h,data:(s=m==null?void 0:m.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:b,code_challenge_method:k},xform:Xe})}else if("phone"in e){const{phone:c,password:h,options:m}=e;i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(r=m==null?void 0:m.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Xe})}else throw new Ws("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(K(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ci})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ci})}else throw new Ws("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Js}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,a,l,u,c,h,m,b;let k,y;if("message"in e)k=e.message,y=e.signature;else{const{chain:f,wallet:x,statement:T,options:w}=e;let E;if(Me())if(typeof x=="object")E=x;else{const v=window;if("solana"in v&&typeof v.solana=="object"&&("signIn"in v.solana&&typeof v.solana.signIn=="function"||"signMessage"in v.solana&&typeof v.solana.signMessage=="function"))E=v.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const _=new URL((s=w==null?void 0:w.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in E&&E.signIn){const v=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),T?{statement:T}:null));let B;if(Array.isArray(v)&&v[0]&&typeof v[0]=="object")B=v[0];else if(v&&typeof v=="object"&&"signedMessage"in v&&"signature"in v)B=v;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)k=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),y=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${_.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(r=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(c=w==null?void 0:w.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const v=await E.signMessage(new TextEncoder().encode(k),"utf8");if(!v||!(v instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=v}}try{const{data:f,error:x}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:ah(y)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Xe});if(x)throw x;return!f||!f.session||!f.user?{data:{user:null,session:null},error:new Js}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign({},f),error:x})}catch(f){if(K(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const s=await zs(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Xe});if(await Gs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Js}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(K(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,a=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Xe}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Js}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await qt(this.storage,this.storageKey));const{error:h}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Ws("You must provide either an email or phone number.")}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Xe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await qt(this.storage,this.storageKey)),await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Oh})}catch(i){if(K(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new at;const{error:r}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(K(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await G(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:a}=await G(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Ws("You must provide either an email or phone number and a type")}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Un:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:dt}):await this._useSession(async s=>{var n,r,i;const{data:o,error:a}=s;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new at}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:dt})})}catch(s){if(K(s))return Zu(s)&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new at;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await qt(this.storage,this.storageKey));const{data:u,error:c}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:dt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new at;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=Nn(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(K(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new at;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Me())throw new Vs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Vs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new xi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Vs("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new xi("No code detected.");const{data:T,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new Vs("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let m=c+h;l&&(m=parseInt(l));const b=m-c;b*1e3<=Vt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${h}s`);const k=m-h;c-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,m,c):c-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,m,c);const{data:y,error:f}=await this._getUser(i);if(f)throw f;const x={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(K(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await zs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Qu(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Gs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=ch(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await qt(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(K(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(K(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:m}=i;if(m)throw m;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",b,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(r)throw r;return Me()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(K(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(K(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await fh(async r=>(r>0&&await dh(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Xe})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Mn(i)&&Date.now()+o-n<Vt})}catch(n){if(this._debug(s,"error",n),K(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Me()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await zs(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Un;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Un}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Mn(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new at;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new wn;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new at;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),K(i)){const o={session:null,error:i};return Mn(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ra(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Gs(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Vt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Vt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Vt}ms, refresh threshold is ${ir} ticks`),r<=ir&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ia)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await qt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(K(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await G(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(K(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(K(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(K(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Nn(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Yu>Date.now()))return n;const{data:r,error:i}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!r.keys||r.keys.length===0)throw new Ss("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(o=>o.kid===e),!n)throw new Ss("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:b,error:k}=await this.getSession();if(k||!b.session)return{data:null,error:k};n=b.session.access_token}const{header:r,payload:i,signature:o,raw:{header:a,payload:l}}=Nn(n);if(bh(i.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:i,header:r,signature:o},error:null}}const u=wh(r.alg),c=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,oh(`${a}.${l}`)))throw new Ss("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}}js.nextInstanceID=0;const Mh=js;class Nh extends Mh{constructor(e){super(e)}}var Fh=function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(n.next(c))}catch(h){o(h)}}function l(c){try{u(n.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):r(c.value).then(a,l)}u((n=n.apply(t,e||[])).next())})};class Bh{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Ku(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:Du,realtime:Mu,auth:Object.assign(Object.assign({},Uu),{storageKey:u}),global:Lu},h=Ju(n??{},c);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,b)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(b)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=qu(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new iu(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Jc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $u(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Fh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Nh({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new vu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const qh=(t,e,s)=>new Bh(t,e,s),Hh="https://kueodidcmdsxaoctjtug.supabase.co/",Kh="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt1ZW9kaWRjbWRzeGFvY3RqdHVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NzE0NzYsImV4cCI6MjA2NTI0NzQ3Nn0.zuRgrGhf-PwpeX_1yJaUxXda4-uKw4Fk6gxrhcelpZI",jr=qh(Hh,Kh),Jh="admin@monapp.local";async function Wh(t){const{data:e,error:s}=await jr.auth.signInWithPassword({email:Jh,password:t});return s?(console.error("Erreur login:",s.message),!1):!0}const Vh={class:"final-scores"},zh={class:"final-player-name-above"},Gh={key:0},Yh={key:1},Xh={key:2},Qh={key:3},Zh=["src"],ed={class:"final-player-info"},td={class:"final-player-stats"},sd={class:"stat-badge"},nd={class:"stat-badge"},rd={class:"stat-badge"},id={class:"stat-badge"},od={class:"stat-badge"},ad={class:"stat-badge"},ld={class:"stat-badge"},cd={class:"stat-badge"},ud={key:0,class:"stat-badge awsome-badge"},hd={key:1,class:"stat-badge awsome-badge"},dd={key:2,class:"stat-badge awsome-badge"},fd={key:3,class:"stat-badge awsome-badge"},pd={key:4,class:"stat-badge awsome-badge"},gd={class:"final-player-score"},md={key:0,class:"action-buttons"},_d={__name:"GameStats",props:["sortedPlayers","humanPlayersSorted","robotName","stats","role"],setup(t){const e=t;async function s(){const r=Date.now();console.log(e.sortedPlayers);const i=e.sortedPlayers.map(l=>({player_id:l.id,name:l.name,timestamp:r,score:l.totalScore,hits:l.scores})),{data:o,error:a}=await jr.from("scores").insert(i)}function n(){window.location.reload()}return e.role==="admin"&&s(),(r,i)=>(H(),z("div",null,[i[1]||(i[1]=g("h2",null,"Partie termine",-1)),g("ul",Vh,[(H(!0),z(me,null,Os(t.sortedPlayers,(o,a)=>{var l,u,c,h;return H(),z("li",{key:o.name,class:"final-score-item"},[g("div",zh,[o.name!==t.robotName?(H(),z(me,{key:0},[((l=t.humanPlayersSorted[0])==null?void 0:l.name)===o.name?(H(),z("span",Gh,"")):((u=t.humanPlayersSorted[1])==null?void 0:u.name)===o.name?(H(),z("span",Yh,"")):((c=t.humanPlayersSorted[2])==null?void 0:c.name)===o.name?(H(),z("span",Xh,"")):((h=t.humanPlayersSorted[3])==null?void 0:h.name)===o.name?(H(),z("span",Qh,"")):ue("",!0)],64)):ue("",!0),ct(" "+O(o.name),1)]),g("img",{src:o.avatar,alt:"avatar",class:"final-avatar-large"},null,8,Zh),g("div",ed,[g("div",td,[g("span",sd,"Hits : "+O(t.stats(o).hits)+"/"+O(t.stats(o).total),1),g("span",nd,"Hits (F1) : "+O(t.stats(o).hitsF1)+"/"+O(t.stats(o).total/3),1),g("span",rd,"Hits (F2) : "+O(t.stats(o).hitsF2)+"/"+O(t.stats(o).total/3),1),g("span",id,"Hits (F3) : "+O(t.stats(o).hitsF3)+"/"+O(t.stats(o).total/3),1),g("span",od,"Miss : "+O(t.stats(o).miss),1),g("span",ad,"Single : "+O(t.stats(o).single),1),g("span",ld,"Double : "+O(t.stats(o).double),1),g("span",cd,"Triple : "+O(t.stats(o).triple),1),t.stats(o).shangai>=1?(H(),z("span",ud,"Shangai : "+O(t.stats(o).shangai),1)):ue("",!0),t.stats(o).ttt>=1?(H(),z("span",hd,"ttt : "+O(t.stats(o).ttt),1)):ue("",!0),t.stats(o).ddd>=1?(H(),z("span",dd,"ddd : "+O(t.stats(o).ddd),1)):ue("",!0),t.stats(o).tt>=1?(H(),z("span",fd,"tt : "+O(t.stats(o).tt),1)):ue("",!0),t.stats(o).dd>=1?(H(),z("span",pd,"dd : "+O(t.stats(o).dd),1)):ue("",!0)])]),g("span",gd,O(o.totalScore)+" pts",1)])}),128))]),g("p",null,[g("button",{onClick:n},"Rejouer")]),t.role==="admin"?(H(),z("div",md,[g("a",{href:"#",onClick:i[0]||(i[0]=Cs(o=>r.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):ue("",!0)]))}},vd=Is(_d,[["__scopeId","data-v-8d75ab9b"]]),yd={key:0,style:{"font-size":"0.8rem",color:"gray","text-align":"center","margin-bottom":"-10px"}},bd={class:"container"},wd={key:0},Sd={class:"round-circle"},kd={class:"avatar-lineup"},xd=["src","alt"],Td={key:0,class:"buttons"},Ed=["onClick"],Od=["onClick"],Pd=["onClick"],Ad=["onClick"],Cd={key:0},jd={key:1},$d=20,Oe="Number One",Rd="https://cdn-icons-png.flaticon.com/512/4712/4712027.png",Id={__name:"Game",props:{players:Array,role:String},setup(t){let e=0;function s(x){e=x.touches[0].clientY}function n(x){const T=x.touches[0].clientY;window.scrollY===0&&T>e&&x.preventDefault()}_n(()=>{window.addEventListener("touchstart",s,{passive:!1}),window.addEventListener("touchmove",n,{passive:!1})}),go(()=>{window.removeEventListener("touchstart",s),window.removeEventListener("touchmove",n)});const r=t,i=je(1),o=je(0),a=je([0,0,0]);let l=0;ys(()=>r.players.length,x=>{const T=r.players.findIndex(w=>w.name===Oe);x>1&&T===-1?r.players.push({id:0,name:Oe,avatar:Rd,scores:[],totalScore:0}):x<=1&&T!==-1&&(r.players.splice(T,1),o.value>=r.players.length&&(o.value=0))},{immediate:!0}),r.players.forEach(x=>{x.scores||(x.scores=[]),x.totalScore===void 0&&(x.totalScore=0)});function u(x){const T=x.scores.flat(),w=T.length,E=T.filter(U=>U===0).length,_=T.filter(U=>U!==0).length,v=x.scores.map(U=>U[0]).filter(U=>U!==0).length,B=x.scores.map(U=>U[1]).filter(U=>U!==0).length,V=x.scores.map(U=>U[2]).filter(U=>U!==0).length,Te=T.filter(U=>U===1).length,ie=T.filter(U=>U===2).length,de=T.filter(U=>U===3).length,Be=x.scores.filter(U=>U.filter(W=>W===3).length===3).length,ot=x.scores.filter(U=>U.filter(W=>W===3).length===2).length,yt=x.scores.filter(U=>U.filter(W=>W===2).length===3).length,$t=x.scores.filter(U=>U.filter(W=>W===2).length===2).length,ae=x.scores.filter(U=>{const W=new Set(U);return W.has(1)&&W.has(2)&&W.has(3)}).length;return{total:w,hits:_,hitsF1:v,hitsF2:B,hitsF3:V,miss:E,single:Te,double:ie,triple:de,shangai:ae,ttt:Be,ddd:yt,tt:ot,dd:$t}}function c(x,T){a.value[x]=T,navigator.vibrate&&navigator.vibrate(30)}const h=ds(()=>{const x=i.value;return a.value.reduce((T,w)=>T+w*x,0)});function m(){navigator.vibrate&&navigator.vibrate(30);const x=r.players[o.value];if(x.name===Oe){const T=r.players.filter(v=>v.name!==Oe).map(v=>v.scores[v.scores.length-1]),w=T.map(v=>v[0]+v[1]+v[2]),E=w.indexOf(Math.max(...w)),_=T[E];a.value=[..._]}x.scores.push([...a.value]),x.totalScore+=h.value,a.value=[0,0,0],o.value<r.players.length-1?o.value++:(o.value=0,i.value++),l=Math.max(...r.players.filter(T=>T.name!==Oe).map(T=>T.totalScore))}function b(){if(i.value===1&&o.value===0)return;let x=o.value,T=i.value;function w(V){const Te=r.players.length;for(let ie=1;ie<=Te;ie++){const de=(V-ie+Te)%Te;if(r.players[de].name!==Oe)return de}return V}const E=r.players.findIndex(V=>V.name===Oe);let _=!1;if(x===0){if(T===1)return;T-=1,x=w(r.players.length),_=!0}else x=w(x);o.value=x,i.value=T;const v=r.players[x],B=v.scores.pop();if(B){const V=T,Te=B.reduce((ie,de)=>ie+de*V,0);v.totalScore-=Te}if(_&&E!==-1){const V=r.players[E];if(V.scores.length>0){const ie=V.scores[V.scores.length-1].reduce((de,Be)=>de+Be*T,0);V.totalScore-=ie,V.scores.pop()}}a.value=[0,0,0]}const k=ds(()=>i.value>$d),y=ds(()=>[...r.players].sort((x,T)=>T.totalScore-x.totalScore));ys(o,async x=>{r.players[x].name===Oe&&!k.value&&(await io(),m())});const f=ds(()=>r.players.filter(x=>x.name!==Oe).sort((x,T)=>T.totalScore-x.totalScore));return(x,T)=>(H(),z("div",null,[t.role==="admin"?(H(),z("p",yd," Partie officielle et enregistre ")):ue("",!0),g("div",bd,[k.value?(H(),z("div",jd,[ze(vd,{sortedPlayers:y.value,humanPlayersSorted:f.value,robotName:Oe,stats:u,replay:x.replay,role:r.role,onViewScores:T[0]||(T[0]=w=>x.$emit("view-scores"))},null,8,["sortedPlayers","humanPlayersSorted","replay","role"])])):(H(),z("div",wd,[g("h2",Sd,O(i.value),1),g("h1",null,O(r.players[o.value].name),1),T[1]||(T[1]=g("hr",null,null,-1)),g("div",kd,[(H(!0),z(me,null,Os(r.players,(w,E)=>(H(),z("div",{key:w.name,class:"avatar-wrapper"},[g("img",{src:w.avatar,alt:w.name,class:et(["avatar",{current:E===o.value}])},null,10,xd),g("div",{class:et(["score-badge",{"bestscore-badge":w.totalScore===Wn(l)&&w.name!==Oe&&Wn(l)!==0,"score-robot":w.name===Oe}])},O(w.totalScore),3)]))),128))]),T[2]||(T[2]=g("hr",null,null,-1)),(H(!0),z(me,null,Os(a.value,(w,E)=>(H(),z("div",{key:E,class:"dart-controls",style:{display:"flex","align-items":"center",gap:"6px"}},[r.players[o.value].name!==Oe?(H(),z("div",Td,[g("button",{class:et(["dart-button",{active:w===0}]),onClick:_=>c(E,0)},"Miss",10,Ed),g("button",{class:et(["dart-button",{active:w===1}]),onClick:_=>c(E,1)},"Single",10,Od),g("button",{class:et(["dart-button",{active:w===2}]),onClick:_=>c(E,2)},"Double",10,Pd),g("button",{class:et(["dart-button",{active:w===3}]),onClick:_=>c(E,3)},"Triple",10,Ad)])):ue("",!0)]))),128)),r.players[o.value].name!==Oe?(H(),z("p",Cd,[g("button",{onClick:m,class:"validate"},"Valider ce tour (+"+O(h.value)+" pts)",1)])):ue("",!0),g("p",null,[g("button",{onClick:b,class:"undo-button"},"")])]))])]))}},Ld=Is(Id,[["__scopeId","data-v-6c0d4816"]]),Dd={class:"login-container"},Ud={class:"login-box"},Md=["disabled"],Nd={key:0,class:"error"},Fd={__name:"Login",emits:["login"],setup(t,{emit:e}){const s=e,n=je(""),r=je(null),i=je(!1);async function o(){r.value=null,i.value=!0;const l=await Wh(n.value);i.value=!1,l?s("login",{name:"Admin",role:"admin"}):r.value="Mot de passe incorrect."}function a(){s("login",{name:"Visiteur",role:"visiteur"})}return(l,u)=>(H(),z("div",Dd,[g("div",Ud,[g("form",{onSubmit:Cs(o,["prevent"])},[uo(g("input",{"onUpdate:modelValue":u[0]||(u[0]=c=>n.value=c),type:"password",placeholder:"Mot de passe",autocomplete:"current-password"},null,512),[[Fo,n.value]]),g("button",{type:"submit",disabled:i.value},O(i.value?"Connexion...":"Se connecter"),9,Md)],32),g("a",{onClick:Cs(a,["prevent"]),href:"#",class:"visitor-link"}," Continuer en tant que visiteur "),r.value?(H(),z("p",Nd,O(r.value),1)):ue("",!0)])]))}},Bd=Is(Fd,[["__scopeId","data-v-64bd7d6e"]]),qd="/shanghai/img/podium.webp";function Hd(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Kd(t,e){let s;if(e===void 0)for(const n of t)n!=null&&(s<n||s===void 0&&n>=n)&&(s=n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(s<r||s===void 0&&r>=r)&&(s=r)}return s}function Jd(t,e){let s;if(e===void 0)for(const n of t)n!=null&&(s>n||s===void 0&&n>=n)&&(s=n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(s>r||s===void 0&&r>=r)&&(s=r)}return s}function Wd(t,e){let s=0,n=0;if(e===void 0)for(let r of t)r!=null&&(r=+r)>=r&&(++s,n+=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(i=+i)>=i&&(++s,n+=i)}if(s)return n/s}function Vd(t,e){let s=0;if(e===void 0)for(let n of t)(n=+n)&&(s+=n);else{let n=-1;for(let r of t)(r=+e(r,++n,t))&&(s+=r)}return s}const zd={class:"scores-page"},Gd={key:0,class:"podium",style:{position:"relative",display:"inline-block"}},Yd={class:"podium-text text-1"},Xd={style:{"font-size":"0.5rem"}},Qd={class:"podium-text text-2"},Zd={style:{"font-size":"0.5rem"}},ef={class:"podium-text text-3"},tf={style:{"font-size":"0.5rem"}},sf={class:"podium-text text-4"},nf={key:1,class:"players-list"},rf={class:"player-name"},of={class:"score-table"},af={class:"player-card"},lf={class:"player-name"},cf={class:"score-table"},uf={__name:"RecordedStats",setup(t){const e=Object.assign({},{min:Jd,max:Kd,mean:Wd,sum:Vd,ascending:Hd}),s=je([]),n=je([]);async function r(){const{data:k,error:y}=await jr.from("scores").select("*").order("score",{ascending:!1});if(y){console.error("Erreur de rcupration des scores :",y);return}if(!k.length)return;const f=b(k),x=["Number One","Felix"];s.value=f.filter(T=>!x.includes(T.name)),n.value=f.find(T=>T.name==="Number One")}function i(){const k=new Date,y=k.getFullYear(),f=k.getMonth(),T=(f>=8?new Date(y,8,1):new Date(y-1,8,1)).getTime(),E=(f<=6?new Date(y,6,31):new Date(y+1,6,31)).getTime();return{septFirstLastYear:T,july31Next:E}}function o(k){switch(k){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}}function a(k){k=k.flat();let y=0,f=0;for(let x=0;x<k.length;x++)k[x]!==0?(f++,f>y&&(y=f)):f=0;return y}function l(k){return k.filter(y=>{const f=[0,0,0,0];return y.forEach(x=>f[x]++),f[1]===1&&f[2]===1&&f[3]===1}).length}function u(k){return k.filter(y=>{const f=[0,0,0,0];return y.forEach(x=>f[x]++),f[3]===2}).length}function c(k){return k.filter(y=>{const f=[0,0,0,0];return y.forEach(x=>f[x]++),f[3]===3}).length}function h(k){return k.filter(y=>{const f=[0,0,0,0];return y.forEach(x=>f[x]++),f[2]===2}).length}function m(k){return k.filter(y=>{const f=[0,0,0,0];return y.forEach(x=>f[x]++),f[2]===3}).length}function b(k,y=10){let f=[...new Set(k.map(_=>_.name))].map(_=>({name:_}));const x=i(),T=k.filter(_=>_.timestamp>=x.septFirstLastYear).filter(_=>_.timestamp<=x.july31Next),w=k.filter(_=>_.name=="Number One").length,E=T.filter(_=>_.name=="Number One").length;return f=f.map(_=>{const v=k.filter(P=>P.name==_.name),B=T.filter(P=>P.name==_.name),V=v.slice().sort((P,pe)=>e.ascending(P.timestamp,pe.timestamp)).slice(-y),ie=v.map(P=>({name:P.name,score:P.score})).filter(P=>P.name=="Louis CLXXX");console.log(ie);const de=V.filter(P=>P.name=="Louis CLXXX");console.log(ie.slice(-y)),console.log(de);const Be=v.length,ot=B.length,yt=V.length,$t=Math.round(1e3*v.length/w)/10,ae=Math.round(1e3*B.length/E)/10,U=e.mean(v.map(P=>P.score)),W=Math.round(U),qe=e.mean(B.map(P=>P.score)),Rt=Math.round(qe),He=e.mean(V.map(P=>P.score)),$e=Math.round(He),Us=Math.round(e.max(v.map(P=>P.score))),Sn=Math.round(e.max(B.map(P=>P.score))),kn=Math.round(e.max(V.map(P=>P.score))),bt=Math.round(e.sum(v.map(P=>P.score))),It=Math.round(e.sum(B.map(P=>P.score))),ns=Math.round(e.sum(V.map(P=>P.score))),Ms=Math.round(e.min(v.map(P=>P.score))),wt=Math.round(e.min(B.map(P=>P.score))),$r=Math.round(e.min(V.map(P=>P.score))),d=e.max(v.map(P=>JSON.parse(P.hits)).map(P=>P.flat().filter(pe=>pe!=0).length)),p=e.max(B.map(P=>JSON.parse(P.hits)).map(P=>P.flat().filter(pe=>pe!=0).length)),S=e.max(V.map(P=>JSON.parse(P.hits)).map(P=>P.flat().filter(pe=>pe!=0).length)),j=e.max(v.map(P=>JSON.parse(P.hits)).map(P=>e.sum(P.flat().filter(pe=>pe!=0)))),A=e.max(B.map(P=>JSON.parse(P.hits)).map(P=>e.sum(P.flat().filter(pe=>pe!=0)))),C=e.max(V.map(P=>JSON.parse(P.hits)).map(P=>e.sum(P.flat().filter(pe=>pe!=0)))),L=e.max(v.map((P,pe)=>e.max(JSON.parse(P.hits).map((rs,is)=>e.sum(rs)*(is+1))))),I=e.max(B.map((P,pe)=>e.max(JSON.parse(P.hits).map((rs,is)=>e.sum(rs)*(is+1))))),R=e.max(V.map((P,pe)=>e.max(JSON.parse(P.hits).map((rs,is)=>e.sum(rs)*(is+1))))),$=e.max(v.map(P=>JSON.parse(P.hits).flat()).map(P=>a(P))),N=e.max(B.map(P=>JSON.parse(P.hits).flat()).map(P=>a(P))),D=e.max(V.map(P=>JSON.parse(P.hits).flat()).map(P=>a(P))),M=e.sum(v.map(P=>l(JSON.parse(P.hits)))),F=e.sum(B.map(P=>l(JSON.parse(P.hits)))),Y=e.sum(V.map(P=>l(JSON.parse(P.hits)))),ee=e.sum(v.map(P=>u(JSON.parse(P.hits)))),X=e.sum(B.map(P=>u(JSON.parse(P.hits)))),ve=e.sum(V.map(P=>u(JSON.parse(P.hits)))),fe=e.sum(v.map(P=>c(JSON.parse(P.hits)))),Re=e.sum(B.map(P=>c(JSON.parse(P.hits)))),Ie=e.sum(V.map(P=>c(JSON.parse(P.hits)))),St=e.sum(v.map(P=>h(JSON.parse(P.hits)))),Ns=e.sum(B.map(P=>h(JSON.parse(P.hits)))),ye=e.sum(V.map(P=>h(JSON.parse(P.hits)))),Le=e.sum(v.map(P=>m(JSON.parse(P.hits)))),Fs=e.sum(B.map(P=>m(JSON.parse(P.hits)))),oa=e.sum(V.map(P=>m(JSON.parse(P.hits))));return{..._,played_all:Be,mean_all_raw:U,mean_all:W,max_all:Us,min_all:Ms,streak_all:$,assiduity_all:$t,shanghai_all:M,played_year:ot,mean_year_raw:qe,mean_year:Rt,max_year:Sn,min_year:wt,streak_year:N,assiduity_year:ae,shanghai_year:F,played_last:yt,mean_last_raw:He,mean_last:$e,max_last:kn,min_last:$r,streak_last:D,shanghai_last:Y,hits_all:d,hits_year:p,hits_last:S,hits2_all:j,hits2_year:A,hits2_last:C,hitbest_all:L,hitbest_year:I,hitbest_last:R,tt_all:ee,tt_year:X,tt_last:ve,ttt_all:fe,ttt_year:Re,ttt_last:Ie,dd_all:St,dd_year:Ns,dd_last:ye,ddd_all:Le,ddd_year:Fs,ddd_last:oa,cumul_all:bt,cumul_year:It,cumul_last:ns}}),f=[...f].sort((_,v)=>v.max_all-_.max_all).map((_,v)=>({..._,medal_max_all:o(v)})),f=[...f].sort((_,v)=>v.max_year-_.max_year).map((_,v)=>({..._,medal_max_year:o(v)})),f=[...f].sort((_,v)=>v.max_last-_.max_last).map((_,v)=>({..._,medal_max_last:o(v)})),f=[...f].sort((_,v)=>v.cumul_all-_.cumul_all).map((_,v)=>({..._,medal_cumul_all:o(v)})),f=[...f].sort((_,v)=>v.cumul_year-_.cumul_year).map((_,v)=>({..._,medal_cumul_year:o(v)})),f=[...f].sort((_,v)=>v.cumul_last-_.cumul_last).map((_,v)=>({..._,medal_cumul_last:o(v)})),f=[...f].sort((_,v)=>v.streak_all-_.streak_all).map((_,v)=>({..._,medal_streak_all:o(v)})),f=[...f].sort((_,v)=>v.streak_year-_.streak_year).map((_,v)=>({..._,medal_streak_year:o(v)})),f=[...f].sort((_,v)=>v.streak_last-_.streak_last).map((_,v)=>({..._,medal_streak_last:o(v)})),f=[...f].sort((_,v)=>v.hits_all-_.hits_all).map((_,v)=>({..._,medal_hits_all:o(v)})),f=[...f].sort((_,v)=>v.hits_year-_.hits_year).map((_,v)=>({..._,medal_hits_year:o(v)})),f=[...f].sort((_,v)=>v.hits_last-_.hits_last).map((_,v)=>({..._,medal_hits_last:o(v)})),f=[...f].sort((_,v)=>v.hitbest_all-_.hitbest_all).map((_,v)=>({..._,medal_hitbest_all:o(v)})),f=[...f].sort((_,v)=>v.hitbest_year-_.hitbest_year).map((_,v)=>({..._,medal_hitbest_year:o(v)})),f=[...f].sort((_,v)=>v.hitbest_last-_.hitbest_last).map((_,v)=>({..._,medal_hitbest_last:o(v)})),f=[...f].sort((_,v)=>v.hits2_all-_.hits2_all).map((_,v)=>({..._,medal_hits2_all:o(v)})),f=[...f].sort((_,v)=>v.hits2_year-_.hits2_year).map((_,v)=>({..._,medal_hits2_year:o(v)})),f=[...f].sort((_,v)=>v.hits2_last-_.hits2_last).map((_,v)=>({..._,medal_hits2_last:o(v)})),f=[...f].sort((_,v)=>v.mean_all_raw-_.mean_all_raw).map((_,v)=>({..._,medal_mean_all:o(v)})),f=[...f].sort((_,v)=>v.mean_year_raw-_.mean_year_raw).map((_,v)=>({..._,medal_mean_year:o(v)})),f=[...f].sort((_,v)=>v.mean_last_raw-_.mean_last_raw).map((_,v)=>({..._,medal_mean_last:o(v)})),f}return _n(()=>{r()}),(k,y)=>(H(),z("div",zd,[s.value.length>=3?(H(),z("div",Gd,[y[1]||(y[1]=g("img",{src:qd,alt:"Podium",class:"podium-image"},null,-1)),g("div",Yd,[ct(O(s.value[0].name),1),g("span",Xd," ("+O(s.value[0].mean_last)+")",1)]),g("div",Qd,[ct(O(s.value[1].name),1),g("span",Zd," ("+O(s.value[1].mean_last)+")",1)]),g("div",ef,[ct(O(s.value[2].name),1),g("span",tf," ("+O(s.value[2].mean_last)+")",1)]),g("div",sf,"chocolat : "+O(s.value[3].name)+" ("+O(s.value[3].mean_last)+")",1)])):ue("",!0),s.value.length?(H(),z("div",nf,[(H(!0),z(me,null,Os(s.value,(f,x)=>(H(),z("div",{key:x,class:"player-card"},[g("h2",rf,[ct(O(f.medal_mean_last)+" "+O(f.name)+" - ",1),g("small",null,O(f.mean_last)+" pts",1)]),g("table",of,[y[17]||(y[17]=g("thead",null,[g("tr",null,[g("th"),g("th",null,"Sur 10 parties"),g("th",null,"Sur l'anne"),g("th",null,"Hall of Fame")])],-1)),g("tbody",null,[g("tr",null,[y[2]||(y[2]=g("th",null,"Parties",-1)),g("td",null,O(f.played_last),1),g("td",null,O(f.played_year),1),g("td",null,O(f.played_all),1)]),g("tr",null,[y[3]||(y[3]=g("th",null,"Assiduit",-1)),y[4]||(y[4]=g("td",null,"-",-1)),g("td",null,O(f.assiduity_year)+" %",1),g("td",null,O(f.assiduity_all)+" %",1)]),g("tr",null,[y[5]||(y[5]=g("th",null,"Moyenne",-1)),g("td",null,O(f.mean_last)+" "+O(f.medal_mean_last),1),g("td",null,O(f.mean_year)+" "+O(f.medal_mean_year),1),g("td",null,O(f.mean_all)+" "+O(f.medal_mean_all),1)]),g("tr",null,[y[6]||(y[6]=g("th",null,"Cumul",-1)),g("td",null,O(Math.round(f.cumul_last/100)/10+"K")+" "+O(f.medal_cumul_last),1),g("td",null,O(Math.round(f.cumul_year/100)/10+"K")+" "+O(f.medal_cumul_year),1),g("td",null,O(Math.round(f.cumul_all/100)/10+"K")+" "+O(f.medal_cumul_all),1)]),g("tr",null,[y[7]||(y[7]=g("th",null,"Meilleur",-1)),g("td",null,O(f.max_last)+" "+O(f.medal_max_last),1),g("td",null,O(f.max_year)+" "+O(f.medal_max_year),1),g("td",null,O(f.max_all)+" "+O(f.medal_max_all),1)]),g("tr",null,[y[8]||(y[8]=g("th",null,"Streak",-1)),g("td",null,O(f.streak_last)+" "+O(f.medal_streak_last),1),g("td",null,O(f.streak_year)+" "+O(f.medal_streak_year),1),g("td",null,O(f.streak_all)+" "+O(f.medal_streak_alll),1)]),g("tr",null,[y[9]||(y[9]=g("th",null,[ct("Hits "),g("small",null,"(60)")],-1)),g("td",null,O(f.hits_last)+" "+O(f.medal_hits_last),1),g("td",null,O(f.hits_year)+" "+O(f.medal_hits_year),1),g("td",null,O(f.hits_all)+" "+O(f.medal_hits_all),1)]),g("tr",null,[y[10]||(y[10]=g("th",null,[ct("Hits "),g("small",null,"(180)")],-1)),g("td",null,O(f.hits2_last)+" "+O(f.medal_hits2_last),1),g("td",null,O(f.hits2_year)+" "+O(f.medal_hits2_year),1),g("td",null,O(f.hits2_all)+" "+O(f.medal_hits2_all),1)]),g("tr",null,[y[11]||(y[11]=g("th",null,"Meilleur coup",-1)),g("td",null,O(f.hitbest_last)+" "+O(f.medal_hitbest_last),1),g("td",null,O(f.hitbest_year)+" "+O(f.medal_hitbest_last),1),g("td",null,O(f.hitbest_all)+" "+O(f.medal_hitbest_last),1)]),g("tr",null,[y[12]||(y[12]=g("th",null,"Shanghai",-1)),g("td",null,O(f.shanghai_last),1),g("td",null,O(f.shanghai_year),1),g("td",null,O(f.shanghai_all),1)]),g("tr",null,[y[13]||(y[13]=g("th",null,"ttt",-1)),g("td",null,O(f.ttt_last),1),g("td",null,O(f.ttt_year),1),g("td",null,O(f.ttt_all),1)]),g("tr",null,[y[14]||(y[14]=g("th",null,"tt",-1)),g("td",null,O(f.tt_last),1),g("td",null,O(f.tt_year),1),g("td",null,O(f.tt_all),1)]),g("tr",null,[y[15]||(y[15]=g("th",null,"ddd",-1)),g("td",null,O(f.ddd_last),1),g("td",null,O(f.ddd_year),1),g("td",null,O(f.ddd_all),1)]),g("tr",null,[y[16]||(y[16]=g("th",null,"dd",-1)),g("td",null,O(f.dd_last),1),g("td",null,O(f.dd_year),1),g("td",null,O(f.dd_all),1)])])])]))),128)),g("div",af,[g("h2",lf,O(n.value.name),1),g("table",cf,[y[21]||(y[21]=g("thead",null,[g("tr",null,[g("th"),g("th",null,"Sur 10 parties"),g("th",null,"Sur l'anne"),g("th",null,"Hall of Fame")])],-1)),g("tbody",null,[g("tr",null,[y[18]||(y[18]=g("th",null,"Parties",-1)),g("td",null,O(n.value.played_last),1),g("td",null,O(n.value.played_year),1),g("td",null,O(n.value.played_last),1)]),g("tr",null,[y[19]||(y[19]=g("th",null,"Moyenne",-1)),g("td",null,O(n.value.mean_last),1),g("td",null,O(n.value.mean_year),1),g("td",null,O(n.value.mean_all),1)]),g("tr",null,[y[20]||(y[20]=g("th",null,"Meilleur",-1)),g("td",null,O(n.value.max_last),1),g("td",null,O(n.value.max_year),1),g("td",null,O(n.value.max_all),1)])])])])])):ue("",!0),g("button",{onClick:y[0]||(y[0]=f=>k.$emit("back")),class:"back-button"},"Retour")]))}},hf=Is(uf,[["__scopeId","data-v-23f6ffc2"]]),df={__name:"App",setup(t){const e=[{id:1,name:"Matt"},{id:2,name:"Darts Vador",avatar:"/shanghai/img/dartsvador.png"},{id:3,name:"Dart Simpson",avatar:"/shanghai/img/dartsimpson.png"},{id:4,name:"Robull",avatar:"/shanghai/img/ro.jpg"},{id:5,name:"Louis CLXXX",avatar:"/shanghai/img/crown.jpeg"},{id:6,name:"Angelo",avatar:"/shanghai/img/pp_angelo.png"},{id:7,name:"Cramomille",avatar:"/shanghai/img/cramomille.png"}],s=je(null),n=je([]),r=je("login");function i(u){s.value=u,r.value="selection"}function o(u){n.value=u,r.value="game"}function a(){r.value="scores"}function l(){r.value="selection"}return(u,c)=>(H(),z("div",null,[r.value==="login"?(H(),hs(Bd,{key:0,onLogin:i})):r.value==="selection"?(H(),hs(Uc,{key:1,predefinedPlayers:e,role:s.value.role,onStartGame:o,onViewScores:a},null,8,["role"])):r.value==="game"?(H(),hs(Ld,{key:2,players:n.value,role:s.value.role,onViewScores:a},null,8,["players","role"])):r.value==="scores"?(H(),hs(hf,{key:3,onBack:l,onViewScores:a})):ue("",!0)]))}};Sc(df).mount("#app");
