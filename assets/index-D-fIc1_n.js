var zu=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Vv=zu((Qv,Or)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Mi(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const xe={},xn=[],mt=()=>{},Gu=()=>!1,_s=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ii=e=>e.startsWith("onUpdate:"),Ke=Object.assign,ji=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Yu=Object.prototype.hasOwnProperty,be=(e,t)=>Yu.call(e,t),Q=Array.isArray,Sn=e=>wr(e)==="[object Map]",Ma=e=>wr(e)==="[object Set]",co=e=>wr(e)==="[object Date]",ne=e=>typeof e=="function",Ee=e=>typeof e=="string",yt=e=>typeof e=="symbol",Te=e=>e!==null&&typeof e=="object",Ia=e=>(Te(e)||ne(e))&&ne(e.then)&&ne(e.catch),ja=Object.prototype.toString,wr=e=>ja.call(e),Xu=e=>wr(e).slice(8,-1),La=e=>wr(e)==="[object Object]",Li=e=>Ee(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yn=Mi(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vs=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Qu=/-(\w)/g,qt=vs(e=>e.replace(Qu,(t,n)=>n?n.toUpperCase():"")),Zu=/\B([A-Z])/g,an=vs(e=>e.replace(Zu,"-$1").toLowerCase()),Na=vs(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ps=vs(e=>e?`on${Na(e)}`:""),Bt=(e,t)=>!Object.is(e,t),Vr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Da=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ri=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let ho;const ys=()=>ho||(ho=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ni(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ee(r)?rc(r):Ni(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ee(e)||Te(e))return e}const ec=/;(?![^(]*\))/g,tc=/:([^]+)/,nc=/\/\*[^]*?\*\//g;function rc(e){const t={};return e.replace(nc,"").split(ec).forEach(n=>{if(n){const r=n.split(tc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function at(e){let t="";if(Ee(e))t=e;else if(Q(e))for(let n=0;n<e.length;n++){const r=at(e[n]);r&&(t+=r+" ")}else if(Te(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const sc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ic=Mi(sc);function Fa(e){return!!e||e===""}function oc(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Zr(e[r],t[r]);return n}function Zr(e,t){if(e===t)return!0;let n=co(e),r=co(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=yt(e),r=yt(t),n||r)return e===t;if(n=Q(e),r=Q(t),n||r)return n&&r?oc(e,t):!1;if(n=Te(e),r=Te(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Zr(e[o],t[o]))return!1}}return String(e)===String(t)}const Ua=e=>!!(e&&e.__v_isRef===!0),D=e=>Ee(e)?e:e==null?"":Q(e)||Te(e)&&(e.toString===ja||!ne(e.toString))?Ua(e)?D(e.value):JSON.stringify(e,Ba,2):String(e),Ba=(e,t)=>Ua(t)?Ba(e,t.value):Sn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Rs(r,i)+" =>"]=s,n),{})}:Ma(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Rs(n))}:yt(t)?Rs(t):Te(t)&&!Q(t)&&!La(t)?String(t):t,Rs=(e,t="")=>{var n;return yt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xe;class ac{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Xe,!t&&Xe&&(this.index=(Xe.scopes||(Xe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Xe;try{return Xe=this,t()}finally{Xe=n}}}on(){++this._on===1&&(this.prevScope=Xe,Xe=this)}off(){this._on>0&&--this._on===0&&(Xe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function lc(){return Xe}let ke;const Ms=new WeakSet;class qa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Xe&&Xe.active&&Xe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ms.has(this)&&(Ms.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Va(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,fo(this),Ja(this);const t=ke,n=ct;ke=this,ct=!0;try{return this.fn()}finally{Wa(this),ke=t,ct=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ui(t);this.deps=this.depsTail=void 0,fo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ms.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){si(this)&&this.run()}get dirty(){return si(this)}}let Ha=0,Xn,Qn;function Va(e,t=!1){if(e.flags|=8,t){e.next=Qn,Qn=e;return}e.next=Xn,Xn=e}function Di(){Ha++}function Fi(){if(--Ha>0)return;if(Qn){let t=Qn;for(Qn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Xn;){let t=Xn;for(Xn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Ja(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Wa(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ui(r),uc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function si(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ka(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ka(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ar)||(e.globalVersion=ar,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!si(e))))return;e.flags|=2;const t=e.dep,n=ke,r=ct;ke=e,ct=!0;try{Ja(e);const s=e.fn(e._value);(t.version===0||Bt(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{ke=n,ct=r,Wa(e),e.flags&=-3}}function Ui(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ui(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function uc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ct=!0;const za=[];function Ct(){za.push(ct),ct=!1}function Pt(){const e=za.pop();ct=e===void 0?!0:e}function fo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ke;ke=void 0;try{t()}finally{ke=n}}}let ar=0;class cc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bi{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ke||!ct||ke===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ke)n=this.activeLink=new cc(ke,this),ke.deps?(n.prevDep=ke.depsTail,ke.depsTail.nextDep=n,ke.depsTail=n):ke.deps=ke.depsTail=n,Ga(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ke.depsTail,n.nextDep=void 0,ke.depsTail.nextDep=n,ke.depsTail=n,ke.deps===n&&(ke.deps=r)}return n}trigger(t){this.version++,ar++,this.notify(t)}notify(t){Di();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Fi()}}}function Ga(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ga(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ii=new WeakMap,nn=Symbol(""),oi=Symbol(""),lr=Symbol("");function Fe(e,t,n){if(ct&&ke){let r=ii.get(e);r||ii.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Bi),s.map=r,s.key=n),s.track()}}function Ot(e,t,n,r,s,i){const o=ii.get(e);if(!o){ar++;return}const a=l=>{l&&l.trigger()};if(Di(),t==="clear")o.forEach(a);else{const l=Q(e),c=l&&Li(n);if(l&&n==="length"){const u=Number(r);o.forEach((h,f)=>{(f==="length"||f===lr||!yt(f)&&f>=u)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(lr)),t){case"add":l?c&&a(o.get("length")):(a(o.get(nn)),Sn(e)&&a(o.get(oi)));break;case"delete":l||(a(o.get(nn)),Sn(e)&&a(o.get(oi)));break;case"set":Sn(e)&&a(o.get(nn));break}}Fi()}function un(e){const t=we(e);return t===e?t:(Fe(t,"iterate",lr),it(e)?t:t.map(Ie))}function ws(e){return Fe(e=we(e),"iterate",lr),e}const hc={__proto__:null,[Symbol.iterator](){return Is(this,Symbol.iterator,Ie)},concat(...e){return un(this).concat(...e.map(t=>Q(t)?un(t):t))},entries(){return Is(this,"entries",e=>(e[1]=Ie(e[1]),e))},every(e,t){return St(this,"every",e,t,void 0,arguments)},filter(e,t){return St(this,"filter",e,t,n=>n.map(Ie),arguments)},find(e,t){return St(this,"find",e,t,Ie,arguments)},findIndex(e,t){return St(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return St(this,"findLast",e,t,Ie,arguments)},findLastIndex(e,t){return St(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return St(this,"forEach",e,t,void 0,arguments)},includes(...e){return js(this,"includes",e)},indexOf(...e){return js(this,"indexOf",e)},join(e){return un(this).join(e)},lastIndexOf(...e){return js(this,"lastIndexOf",e)},map(e,t){return St(this,"map",e,t,void 0,arguments)},pop(){return Dn(this,"pop")},push(...e){return Dn(this,"push",e)},reduce(e,...t){return po(this,"reduce",e,t)},reduceRight(e,...t){return po(this,"reduceRight",e,t)},shift(){return Dn(this,"shift")},some(e,t){return St(this,"some",e,t,void 0,arguments)},splice(...e){return Dn(this,"splice",e)},toReversed(){return un(this).toReversed()},toSorted(e){return un(this).toSorted(e)},toSpliced(...e){return un(this).toSpliced(...e)},unshift(...e){return Dn(this,"unshift",e)},values(){return Is(this,"values",Ie)}};function Is(e,t,n){const r=ws(e),s=r[t]();return r!==e&&!it(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const fc=Array.prototype;function St(e,t,n,r,s,i){const o=ws(e),a=o!==e&&!it(e),l=o[t];if(l!==fc[t]){const h=l.apply(e,i);return a?Ie(h):h}let c=n;o!==e&&(a?c=function(h,f){return n.call(this,Ie(h),f,e)}:n.length>2&&(c=function(h,f){return n.call(this,h,f,e)}));const u=l.call(o,c,r);return a&&s?s(u):u}function po(e,t,n,r){const s=ws(e);let i=n;return s!==e&&(it(e)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,e)}):i=function(o,a,l){return n.call(this,o,Ie(a),l,e)}),s[t](i,...r)}function js(e,t,n){const r=we(e);Fe(r,"iterate",lr);const s=r[t](...n);return(s===-1||s===!1)&&Ji(n[0])?(n[0]=we(n[0]),r[t](...n)):s}function Dn(e,t,n=[]){Ct(),Di();const r=we(e)[t].apply(e,n);return Fi(),Pt(),r}const dc=Mi("__proto__,__v_isRef,__isVue"),Ya=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yt));function pc(e){yt(e)||(e=String(e));const t=we(this);return Fe(t,"has",e),t.hasOwnProperty(e)}class Xa{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?kc:tl:i?el:Za).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Q(t);if(!s){let l;if(o&&(l=hc[n]))return l;if(n==="hasOwnProperty")return pc}const a=Reflect.get(t,n,Ue(t)?t:r);return(yt(n)?Ya.has(n):dc(n))||(s||Fe(t,"get",n),i)?a:Ue(a)?o&&Li(n)?a:a.value:Te(a)?s?nl(a):Hi(a):a}}class Qa extends Xa{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const l=Ht(i);if(!it(r)&&!Ht(r)&&(i=we(i),r=we(r)),!Q(t)&&Ue(i)&&!Ue(r))return l?!1:(i.value=r,!0)}const o=Q(t)&&Li(n)?Number(n)<t.length:be(t,n),a=Reflect.set(t,n,r,Ue(t)?t:s);return t===we(s)&&(o?Bt(r,i)&&Ot(t,"set",n,r):Ot(t,"add",n,r)),a}deleteProperty(t,n){const r=be(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ot(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!yt(n)||!Ya.has(n))&&Fe(t,"has",n),r}ownKeys(t){return Fe(t,"iterate",Q(t)?"length":nn),Reflect.ownKeys(t)}}class gc extends Xa{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const mc=new Qa,_c=new gc,vc=new Qa(!0),ai=e=>e,Pr=e=>Reflect.getPrototypeOf(e);function yc(e,t,n){return function(...r){const s=this.__v_raw,i=we(s),o=Sn(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=s[e](...r),u=n?ai:t?es:Ie;return!t&&Fe(i,"iterate",l?oi:nn),{next(){const{value:h,done:f}=c.next();return f?{value:h,done:f}:{value:a?[u(h[0]),u(h[1])]:u(h),done:f}},[Symbol.iterator](){return this}}}}function Rr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function wc(e,t){const n={get(s){const i=this.__v_raw,o=we(i),a=we(s);e||(Bt(s,a)&&Fe(o,"get",s),Fe(o,"get",a));const{has:l}=Pr(o),c=t?ai:e?es:Ie;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Fe(we(s),"iterate",nn),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=we(i),a=we(s);return e||(Bt(s,a)&&Fe(o,"has",s),Fe(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=we(a),c=t?ai:e?es:Ie;return!e&&Fe(l,"iterate",nn),a.forEach((u,h)=>s.call(i,c(u),c(h),o))}};return Ke(n,e?{add:Rr("add"),set:Rr("set"),delete:Rr("delete"),clear:Rr("clear")}:{add(s){!t&&!it(s)&&!Ht(s)&&(s=we(s));const i=we(this);return Pr(i).has.call(i,s)||(i.add(s),Ot(i,"add",s,s)),this},set(s,i){!t&&!it(i)&&!Ht(i)&&(i=we(i));const o=we(this),{has:a,get:l}=Pr(o);let c=a.call(o,s);c||(s=we(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?Bt(i,u)&&Ot(o,"set",s,i):Ot(o,"add",s,i),this},delete(s){const i=we(this),{has:o,get:a}=Pr(i);let l=o.call(i,s);l||(s=we(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&Ot(i,"delete",s,void 0),c},clear(){const s=we(this),i=s.size!==0,o=s.clear();return i&&Ot(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=yc(s,e,t)}),n}function qi(e,t){const n=wc(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(be(n,s)&&s in r?n:r,s,i)}const bc={get:qi(!1,!1)},xc={get:qi(!1,!0)},Sc={get:qi(!0,!1)},Za=new WeakMap,el=new WeakMap,tl=new WeakMap,kc=new WeakMap;function Tc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ec(e){return e.__v_skip||!Object.isExtensible(e)?0:Tc(Xu(e))}function Hi(e){return Ht(e)?e:Vi(e,!1,mc,bc,Za)}function Ac(e){return Vi(e,!1,vc,xc,el)}function nl(e){return Vi(e,!0,_c,Sc,tl)}function Vi(e,t,n,r,s){if(!Te(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Ec(e);if(i===0)return e;const o=s.get(e);if(o)return o;const a=new Proxy(e,i===2?r:n);return s.set(e,a),a}function kn(e){return Ht(e)?kn(e.__v_raw):!!(e&&e.__v_isReactive)}function Ht(e){return!!(e&&e.__v_isReadonly)}function it(e){return!!(e&&e.__v_isShallow)}function Ji(e){return e?!!e.__v_raw:!1}function we(e){const t=e&&e.__v_raw;return t?we(t):e}function Oc(e){return!be(e,"__v_skip")&&Object.isExtensible(e)&&Da(e,"__v_skip",!0),e}const Ie=e=>Te(e)?Hi(e):e,es=e=>Te(e)?nl(e):e;function Ue(e){return e?e.__v_isRef===!0:!1}function Re(e){return $c(e,!1)}function $c(e,t){return Ue(e)?e:new Cc(e,t)}class Cc{constructor(t,n){this.dep=new Bi,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:we(t),this._value=n?t:Ie(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||it(t)||Ht(t);t=r?t:we(t),Bt(t,n)&&(this._rawValue=t,this._value=r?t:Ie(t),this.dep.trigger())}}function ur(e){return Ue(e)?e.value:e}const Pc={get:(e,t,n)=>t==="__v_raw"?e:ur(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Ue(s)&&!Ue(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function rl(e){return kn(e)?e:new Proxy(e,Pc)}class Rc{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Bi(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ar-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return Va(this,!0),!0}get value(){const t=this.dep.track();return Ka(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Mc(e,t,n=!1){let r,s;return ne(e)?r=e:(r=e.get,s=e.set),new Rc(r,s,n)}const Mr={},ts=new WeakMap;let Yt;function Ic(e,t=!1,n=Yt){if(n){let r=ts.get(n);r||ts.set(n,r=[]),r.push(e)}}function jc(e,t,n=xe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,c=p=>s?p:it(p)||s===!1||s===0?$t(p,1):$t(p);let u,h,f,m,v=!1,E=!1;if(Ue(e)?(h=()=>e.value,v=it(e)):kn(e)?(h=()=>c(e),v=!0):Q(e)?(E=!0,v=e.some(p=>kn(p)||it(p)),h=()=>e.map(p=>{if(Ue(p))return p.value;if(kn(p))return c(p);if(ne(p))return l?l(p,2):p()})):ne(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){Ct();try{f()}finally{Pt()}}const p=Yt;Yt=u;try{return l?l(e,3,[m]):e(m)}finally{Yt=p}}:h=mt,t&&s){const p=h,b=s===!0?1/0:s;h=()=>$t(p(),b)}const k=lc(),M=()=>{u.stop(),k&&k.active&&ji(k.effects,u)};if(i&&t){const p=t;t=(...b)=>{p(...b),M()}}let H=E?new Array(e.length).fill(Mr):Mr;const d=p=>{if(!(!(u.flags&1)||!u.dirty&&!p))if(t){const b=u.run();if(s||v||(E?b.some((A,V)=>Bt(A,H[V])):Bt(b,H))){f&&f();const A=Yt;Yt=u;try{const V=[b,H===Mr?void 0:E&&H[0]===Mr?[]:H,m];H=b,l?l(t,3,V):t(...V)}finally{Yt=A}}}else u.run()};return a&&a(d),u=new qa(h),u.scheduler=o?()=>o(d,!1):d,m=p=>Ic(p,!1,u),f=u.onStop=()=>{const p=ts.get(u);if(p){if(l)l(p,4);else for(const b of p)b();ts.delete(u)}},t?r?d(!0):H=u.run():o?o(d.bind(null,!0),!0):u.run(),M.pause=u.pause.bind(u),M.resume=u.resume.bind(u),M.stop=M,M}function $t(e,t=1/0,n){if(t<=0||!Te(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ue(e))$t(e.value,t,n);else if(Q(e))for(let r=0;r<e.length;r++)$t(e[r],t,n);else if(Ma(e)||Sn(e))e.forEach(r=>{$t(r,t,n)});else if(La(e)){for(const r in e)$t(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&$t(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function br(e,t,n,r){try{return r?e(...r):e()}catch(s){bs(s,t,n)}}function wt(e,t,n,r){if(ne(e)){const s=br(e,t,n,r);return s&&Ia(s)&&s.catch(i=>{bs(i,t,n)}),s}if(Q(e)){const s=[];for(let i=0;i<e.length;i++)s.push(wt(e[i],t,n,r));return s}}function bs(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||xe;if(t){let a=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,l,c)===!1)return}a=a.parent}if(i){Ct(),br(i,null,10,[e,l,c]),Pt();return}}Lc(e,n,s,r,o)}function Lc(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const Ve=[];let pt=-1;const Tn=[];let Lt=null,yn=0;const sl=Promise.resolve();let ns=null;function il(e){const t=ns||sl;return e?t.then(this?e.bind(this):e):t}function Nc(e){let t=pt+1,n=Ve.length;for(;t<n;){const r=t+n>>>1,s=Ve[r],i=cr(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Wi(e){if(!(e.flags&1)){const t=cr(e),n=Ve[Ve.length-1];!n||!(e.flags&2)&&t>=cr(n)?Ve.push(e):Ve.splice(Nc(t),0,e),e.flags|=1,ol()}}function ol(){ns||(ns=sl.then(ll))}function Dc(e){Q(e)?Tn.push(...e):Lt&&e.id===-1?Lt.splice(yn+1,0,e):e.flags&1||(Tn.push(e),e.flags|=1),ol()}function go(e,t,n=pt+1){for(;n<Ve.length;n++){const r=Ve[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ve.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function al(e){if(Tn.length){const t=[...new Set(Tn)].sort((n,r)=>cr(n)-cr(r));if(Tn.length=0,Lt){Lt.push(...t);return}for(Lt=t,yn=0;yn<Lt.length;yn++){const n=Lt[yn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Lt=null,yn=0}}const cr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ll(e){try{for(pt=0;pt<Ve.length;pt++){const t=Ve[pt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),br(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;pt<Ve.length;pt++){const t=Ve[pt];t&&(t.flags&=-2)}pt=-1,Ve.length=0,al(),ns=null,(Ve.length||Tn.length)&&ll()}}let st=null,ul=null;function rs(e){const t=st;return st=e,ul=e&&e.type.__scopeId||null,t}function Fc(e,t=st,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&ko(-1);const i=rs(t);let o;try{o=e(...s)}finally{rs(i),r._d&&ko(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function rn(e,t){if(st===null)return e;const n=Es(st),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,l=xe]=t[s];i&&(ne(i)&&(i={mounted:i,updated:i}),i.deep&&$t(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Wt(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ct(),wt(l,n,8,[e.el,a,e,t]),Pt())}}const Uc=Symbol("_vte"),Bc=e=>e.__isTeleport;function Ki(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ki(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function cl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ss(e,t,n,r,s=!1){if(Q(e)){e.forEach((v,E)=>ss(v,t&&(Q(t)?t[E]:t),n,r,s));return}if(Zn(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ss(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Es(r.component):r.el,o=s?null:i,{i:a,r:l}=e,c=t&&t.r,u=a.refs===xe?a.refs={}:a.refs,h=a.setupState,f=we(h),m=h===xe?()=>!1:v=>be(f,v);if(c!=null&&c!==l&&(Ee(c)?(u[c]=null,m(c)&&(h[c]=null)):Ue(c)&&(c.value=null)),ne(l))br(l,a,12,[o,u]);else{const v=Ee(l),E=Ue(l);if(v||E){const k=()=>{if(e.f){const M=v?m(l)?h[l]:u[l]:l.value;s?Q(M)&&ji(M,i):Q(M)?M.includes(i)||M.push(i):v?(u[l]=[i],m(l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else v?(u[l]=o,m(l)&&(h[l]=o)):E&&(l.value=o,e.k&&(u[e.k]=o))};o?(k.id=-1,Ze(k,n)):k()}}}ys().requestIdleCallback;ys().cancelIdleCallback;const Zn=e=>!!e.type.__asyncLoader,hl=e=>e.type.__isKeepAlive;function qc(e,t){fl(e,"a",t)}function Hc(e,t){fl(e,"da",t)}function fl(e,t,n=Je){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(xs(t,r,n),n){let s=n.parent;for(;s&&s.parent;)hl(s.parent.vnode)&&Vc(r,t,n,s),s=s.parent}}function Vc(e,t,n,r){const s=xs(t,e,r,!0);pl(()=>{ji(r[t],s)},n)}function xs(e,t,n=Je,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{Ct();const a=xr(n),l=wt(t,n,e,o);return a(),Pt(),l});return r?s.unshift(i):s.push(i),i}}const Mt=e=>(t,n=Je)=>{(!fr||e==="sp")&&xs(e,(...r)=>t(...r),n)},Jc=Mt("bm"),Ss=Mt("m"),Wc=Mt("bu"),Kc=Mt("u"),dl=Mt("bum"),pl=Mt("um"),zc=Mt("sp"),Gc=Mt("rtg"),Yc=Mt("rtc");function Xc(e,t=Je){xs("ec",e,t)}const Qc=Symbol.for("v-ndc");function Cn(e,t,n,r){let s;const i=n,o=Q(e);if(o||Ee(e)){const a=o&&kn(e);let l=!1,c=!1;a&&(l=!it(e),c=Ht(e),e=ws(e)),s=new Array(e.length);for(let u=0,h=e.length;u<h;u++)s[u]=t(l?c?es(Ie(e[u])):Ie(e[u]):e[u],u,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,i)}else if(Te(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,i));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=t(e[u],u,l,i)}}else s=[];return s}const li=e=>e?jl(e)?Es(e):li(e.parent):null,er=Ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>li(e.parent),$root:e=>li(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ml(e),$forceUpdate:e=>e.f||(e.f=()=>{Wi(e.update)}),$nextTick:e=>e.n||(e.n=il.bind(e.proxy)),$watch:e=>wh.bind(e)}),Ls=(e,t)=>e!==xe&&!e.__isScriptSetup&&be(e,t),Zc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let c;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Ls(r,t))return o[t]=1,r[t];if(s!==xe&&be(s,t))return o[t]=2,s[t];if((c=e.propsOptions[0])&&be(c,t))return o[t]=3,i[t];if(n!==xe&&be(n,t))return o[t]=4,n[t];ui&&(o[t]=0)}}const u=er[t];let h,f;if(u)return t==="$attrs"&&Fe(e.attrs,"get",""),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==xe&&be(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,be(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Ls(s,t)?(s[t]=n,!0):r!==xe&&be(r,t)?(r[t]=n,!0):be(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==xe&&be(e,o)||Ls(t,o)||(a=i[0])&&be(a,o)||be(r,o)||be(er,o)||be(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:be(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function mo(e){return Q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ui=!0;function eh(e){const t=ml(e),n=e.proxy,r=e.ctx;ui=!1,t.beforeCreate&&_o(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:f,beforeUpdate:m,updated:v,activated:E,deactivated:k,beforeDestroy:M,beforeUnmount:H,destroyed:d,unmounted:p,render:b,renderTracked:A,renderTriggered:V,errorCaptured:ee,serverPrefetch:de,expose:pe,inheritAttrs:ae,components:R,directives:$,filters:B}=t;if(c&&th(c,r,null),o)for(const le in o){const re=o[le];ne(re)&&(r[le]=re.bind(n))}if(s){const le=s.call(n,n);Te(le)&&(e.data=Hi(le))}if(ui=!0,i)for(const le in i){const re=i[le],Oe=ne(re)?re.bind(n,n):ne(re.get)?re.get.bind(n,n):mt,S=!ne(re)&&ne(re.set)?re.set.bind(n):mt,w=Jn({get:Oe,set:S});Object.defineProperty(r,le,{enumerable:!0,configurable:!0,get:()=>w.value,set:q=>w.value=q})}if(a)for(const le in a)gl(a[le],r,n,le);if(l){const le=ne(l)?l.call(n):l;Reflect.ownKeys(le).forEach(re=>{ah(re,le[re])})}u&&_o(u,e,"c");function ve(le,re){Q(re)?re.forEach(Oe=>le(Oe.bind(n))):re&&le(re.bind(n))}if(ve(Jc,h),ve(Ss,f),ve(Wc,m),ve(Kc,v),ve(qc,E),ve(Hc,k),ve(Xc,ee),ve(Yc,A),ve(Gc,V),ve(dl,H),ve(pl,p),ve(zc,de),Q(pe))if(pe.length){const le=e.exposed||(e.exposed={});pe.forEach(re=>{Object.defineProperty(le,re,{get:()=>n[re],set:Oe=>n[re]=Oe})})}else e.exposed||(e.exposed={});b&&e.render===mt&&(e.render=b),ae!=null&&(e.inheritAttrs=ae),R&&(e.components=R),$&&(e.directives=$),de&&cl(e)}function th(e,t,n=mt){Q(e)&&(e=ci(e));for(const r in e){const s=e[r];let i;Te(s)?"default"in s?i=Jr(s.from||r,s.default,!0):i=Jr(s.from||r):i=Jr(s),Ue(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function _o(e,t,n){wt(Q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function gl(e,t,n,r){let s=r.includes(".")?$l(n,r):()=>n[r];if(Ee(e)){const i=t[e];ne(i)&&tr(s,i)}else if(ne(e))tr(s,e.bind(n));else if(Te(e))if(Q(e))e.forEach(i=>gl(i,t,n,r));else{const i=ne(e.handler)?e.handler.bind(n):t[e.handler];ne(i)&&tr(s,i,e)}}function ml(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(c=>is(l,c,o,!0)),is(l,t,o)),Te(t)&&i.set(t,l),l}function is(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&is(e,i,n,!0),s&&s.forEach(o=>is(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=nh[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const nh={data:vo,props:yo,emits:yo,methods:Hn,computed:Hn,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:Hn,directives:Hn,watch:sh,provide:vo,inject:rh};function vo(e,t){return t?e?function(){return Ke(ne(e)?e.call(this,this):e,ne(t)?t.call(this,this):t)}:t:e}function rh(e,t){return Hn(ci(e),ci(t))}function ci(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qe(e,t){return e?[...new Set([].concat(e,t))]:t}function Hn(e,t){return e?Ke(Object.create(null),e,t):t}function yo(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:Ke(Object.create(null),mo(e),mo(t??{})):t}function sh(e,t){if(!e)return t;if(!t)return e;const n=Ke(Object.create(null),e);for(const r in t)n[r]=qe(e[r],t[r]);return n}function _l(){return{app:null,config:{isNativeTag:Gu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ih=0;function oh(e,t){return function(r,s=null){ne(r)||(r=Ke({},r)),s!=null&&!Te(s)&&(s=null);const i=_l(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:ih++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Uh,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&ne(u.install)?(o.add(u),u.install(c,...h)):ne(u)&&(o.add(u),u(c,...h))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,h){return h?(i.components[u]=h,c):i.components[u]},directive(u,h){return h?(i.directives[u]=h,c):i.directives[u]},mount(u,h,f){if(!l){const m=c._ceVNode||_t(r,s);return m.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),e(m,u,f),l=!0,c._container=u,u.__vue_app__=c,Es(m.component)}},onUnmount(u){a.push(u)},unmount(){l&&(wt(a,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return i.provides[u]=h,c},runWithContext(u){const h=En;En=c;try{return u()}finally{En=h}}};return c}}let En=null;function ah(e,t){if(Je){let n=Je.provides;const r=Je.parent&&Je.parent.provides;r===n&&(n=Je.provides=Object.create(r)),n[e]=t}}function Jr(e,t,n=!1){const r=Je||st;if(r||En){let s=En?En._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ne(t)?t.call(r&&r.proxy):t}}const vl={},yl=()=>Object.create(vl),wl=e=>Object.getPrototypeOf(e)===vl;function lh(e,t,n,r=!1){const s={},i=yl();e.propsDefaults=Object.create(null),bl(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:Ac(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function uh(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=we(s),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let f=u[h];if(ks(e.emitsOptions,f))continue;const m=t[f];if(l)if(be(i,f))m!==i[f]&&(i[f]=m,c=!0);else{const v=qt(f);s[v]=hi(l,a,v,m,e,!1)}else m!==i[f]&&(i[f]=m,c=!0)}}}else{bl(e,t,s,i)&&(c=!0);let u;for(const h in a)(!t||!be(t,h)&&((u=an(h))===h||!be(t,u)))&&(l?n&&(n[h]!==void 0||n[u]!==void 0)&&(s[h]=hi(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!be(t,h))&&(delete i[h],c=!0)}c&&Ot(e.attrs,"set","")}function bl(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(Yn(l))continue;const c=t[l];let u;s&&be(s,u=qt(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:ks(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=we(n),c=a||xe;for(let u=0;u<i.length;u++){const h=i[u];n[h]=hi(s,l,h,c[h],e,!be(c,h))}}return o}function hi(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=be(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ne(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=xr(s);r=c[n]=l.call(null,t),u()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===an(n))&&(r=!0))}return r}const ch=new WeakMap;function xl(e,t,n=!1){const r=n?ch:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!ne(e)){const u=h=>{l=!0;const[f,m]=xl(h,t,!0);Ke(o,f),m&&a.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return Te(e)&&r.set(e,xn),xn;if(Q(i))for(let u=0;u<i.length;u++){const h=qt(i[u]);wo(h)&&(o[h]=xe)}else if(i)for(const u in i){const h=qt(u);if(wo(h)){const f=i[u],m=o[h]=Q(f)||ne(f)?{type:f}:Ke({},f),v=m.type;let E=!1,k=!0;if(Q(v))for(let M=0;M<v.length;++M){const H=v[M],d=ne(H)&&H.name;if(d==="Boolean"){E=!0;break}else d==="String"&&(k=!1)}else E=ne(v)&&v.name==="Boolean";m[0]=E,m[1]=k,(E||be(m,"default"))&&a.push(h)}}const c=[o,a];return Te(e)&&r.set(e,c),c}function wo(e){return e[0]!=="$"&&!Yn(e)}const zi=e=>e[0]==="_"||e==="$stable",Gi=e=>Q(e)?e.map(gt):[gt(e)],hh=(e,t,n)=>{if(t._n)return t;const r=Fc((...s)=>Gi(t(...s)),n);return r._c=!1,r},Sl=(e,t,n)=>{const r=e._ctx;for(const s in e){if(zi(s))continue;const i=e[s];if(ne(i))t[s]=hh(s,i,r);else if(i!=null){const o=Gi(i);t[s]=()=>o}}},kl=(e,t)=>{const n=Gi(t);e.slots.default=()=>n},Tl=(e,t,n)=>{for(const r in t)(n||!zi(r))&&(e[r]=t[r])},fh=(e,t,n)=>{const r=e.slots=yl();if(e.vnode.shapeFlag&32){const s=t._;s?(Tl(r,t,n),n&&Da(r,"_",s,!0)):Sl(t,r)}else t&&kl(e,t)},dh=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=xe;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:Tl(s,t,n):(i=!t.$stable,Sl(t,s)),o=t}else t&&(kl(e,t),o={default:1});if(i)for(const a in s)!zi(a)&&o[a]==null&&delete s[a]},Ze=Ah;function ph(e){return gh(e)}function gh(e,t){const n=ys();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:f,setScopeId:m=mt,insertStaticContent:v}=e,E=(g,y,x,C=null,O=null,P=null,N=void 0,L=null,j=!!y.dynamicChildren)=>{if(g===y)return;g&&!Fn(g,y)&&(C=K(g),q(g,O,P,!0),g=null),y.patchFlag===-2&&(j=!1,y.dynamicChildren=null);const{type:I,ref:G,shapeFlag:U}=y;switch(I){case Ts:k(g,y,x,C);break;case Vt:M(g,y,x,C);break;case Ds:g==null&&H(y,x,C,N);break;case je:R(g,y,x,C,O,P,N,L,j);break;default:U&1?b(g,y,x,C,O,P,N,L,j):U&6?$(g,y,x,C,O,P,N,L,j):(U&64||U&128)&&I.process(g,y,x,C,O,P,N,L,j,ce)}G!=null&&O&&ss(G,g&&g.ref,P,y||g,!y)},k=(g,y,x,C)=>{if(g==null)r(y.el=a(y.children),x,C);else{const O=y.el=g.el;y.children!==g.children&&c(O,y.children)}},M=(g,y,x,C)=>{g==null?r(y.el=l(y.children||""),x,C):y.el=g.el},H=(g,y,x,C)=>{[g.el,g.anchor]=v(g.children,y,x,C,g.el,g.anchor)},d=({el:g,anchor:y},x,C)=>{let O;for(;g&&g!==y;)O=f(g),r(g,x,C),g=O;r(y,x,C)},p=({el:g,anchor:y})=>{let x;for(;g&&g!==y;)x=f(g),s(g),g=x;s(y)},b=(g,y,x,C,O,P,N,L,j)=>{y.type==="svg"?N="svg":y.type==="math"&&(N="mathml"),g==null?A(y,x,C,O,P,N,L,j):de(g,y,O,P,N,L,j)},A=(g,y,x,C,O,P,N,L)=>{let j,I;const{props:G,shapeFlag:U,transition:W,dirs:Y}=g;if(j=g.el=o(g.type,P,G&&G.is,G),U&8?u(j,g.children):U&16&&ee(g.children,j,null,C,O,Ns(g,P),N,L),Y&&Wt(g,null,C,"created"),V(j,g,g.scopeId,N,C),G){for(const ye in G)ye!=="value"&&!Yn(ye)&&i(j,ye,null,G[ye],P,C);"value"in G&&i(j,"value",null,G.value,P),(I=G.onVnodeBeforeMount)&&ft(I,C,g)}Y&&Wt(g,null,C,"beforeMount");const se=mh(O,W);se&&W.beforeEnter(j),r(j,y,x),((I=G&&G.onVnodeMounted)||se||Y)&&Ze(()=>{I&&ft(I,C,g),se&&W.enter(j),Y&&Wt(g,null,C,"mounted")},O)},V=(g,y,x,C,O)=>{if(x&&m(g,x),C)for(let P=0;P<C.length;P++)m(g,C[P]);if(O){let P=O.subTree;if(y===P||Pl(P.type)&&(P.ssContent===y||P.ssFallback===y)){const N=O.vnode;V(g,N,N.scopeId,N.slotScopeIds,O.parent)}}},ee=(g,y,x,C,O,P,N,L,j=0)=>{for(let I=j;I<g.length;I++){const G=g[I]=L?Nt(g[I]):gt(g[I]);E(null,G,y,x,C,O,P,N,L)}},de=(g,y,x,C,O,P,N)=>{const L=y.el=g.el;let{patchFlag:j,dynamicChildren:I,dirs:G}=y;j|=g.patchFlag&16;const U=g.props||xe,W=y.props||xe;let Y;if(x&&Kt(x,!1),(Y=W.onVnodeBeforeUpdate)&&ft(Y,x,y,g),G&&Wt(y,g,x,"beforeUpdate"),x&&Kt(x,!0),(U.innerHTML&&W.innerHTML==null||U.textContent&&W.textContent==null)&&u(L,""),I?pe(g.dynamicChildren,I,L,x,C,Ns(y,O),P):N||re(g,y,L,null,x,C,Ns(y,O),P,!1),j>0){if(j&16)ae(L,U,W,x,O);else if(j&2&&U.class!==W.class&&i(L,"class",null,W.class,O),j&4&&i(L,"style",U.style,W.style,O),j&8){const se=y.dynamicProps;for(let ye=0;ye<se.length;ye++){const he=se[ye],$e=U[he],Ae=W[he];(Ae!==$e||he==="value")&&i(L,he,$e,Ae,O,x)}}j&1&&g.children!==y.children&&u(L,y.children)}else!N&&I==null&&ae(L,U,W,x,O);((Y=W.onVnodeUpdated)||G)&&Ze(()=>{Y&&ft(Y,x,y,g),G&&Wt(y,g,x,"updated")},C)},pe=(g,y,x,C,O,P,N)=>{for(let L=0;L<y.length;L++){const j=g[L],I=y[L],G=j.el&&(j.type===je||!Fn(j,I)||j.shapeFlag&198)?h(j.el):x;E(j,I,G,null,C,O,P,N,!0)}},ae=(g,y,x,C,O)=>{if(y!==x){if(y!==xe)for(const P in y)!Yn(P)&&!(P in x)&&i(g,P,y[P],null,O,C);for(const P in x){if(Yn(P))continue;const N=x[P],L=y[P];N!==L&&P!=="value"&&i(g,P,L,N,O,C)}"value"in x&&i(g,"value",y.value,x.value,O)}},R=(g,y,x,C,O,P,N,L,j)=>{const I=y.el=g?g.el:a(""),G=y.anchor=g?g.anchor:a("");let{patchFlag:U,dynamicChildren:W,slotScopeIds:Y}=y;Y&&(L=L?L.concat(Y):Y),g==null?(r(I,x,C),r(G,x,C),ee(y.children||[],x,G,O,P,N,L,j)):U>0&&U&64&&W&&g.dynamicChildren?(pe(g.dynamicChildren,W,x,O,P,N,L),(y.key!=null||O&&y===O.subTree)&&El(g,y,!0)):re(g,y,x,G,O,P,N,L,j)},$=(g,y,x,C,O,P,N,L,j)=>{y.slotScopeIds=L,g==null?y.shapeFlag&512?O.ctx.activate(y,x,C,N,j):B(y,x,C,O,P,N,j):me(g,y,j)},B=(g,y,x,C,O,P,N)=>{const L=g.component=Ih(g,C,O);if(hl(g)&&(L.ctx.renderer=ce),jh(L,!1,N),L.asyncDep){if(O&&O.registerDep(L,ve,N),!g.el){const j=L.subTree=_t(Vt);M(null,j,y,x)}}else ve(L,g,y,x,O,P,N)},me=(g,y,x)=>{const C=y.component=g.component;if(Th(g,y,x))if(C.asyncDep&&!C.asyncResolved){le(C,y,x);return}else C.next=y,C.update();else y.el=g.el,C.vnode=y},ve=(g,y,x,C,O,P,N)=>{const L=()=>{if(g.isMounted){let{next:U,bu:W,u:Y,parent:se,vnode:ye}=g;{const ze=Al(g);if(ze){U&&(U.el=ye.el,le(g,U,N)),ze.asyncDep.then(()=>{g.isUnmounted||L()});return}}let he=U,$e;Kt(g,!1),U?(U.el=ye.el,le(g,U,N)):U=ye,W&&Vr(W),($e=U.props&&U.props.onVnodeBeforeUpdate)&&ft($e,se,U,ye),Kt(g,!0);const Ae=xo(g),Le=g.subTree;g.subTree=Ae,E(Le,Ae,h(Le.el),K(Le),g,O,P),U.el=Ae.el,he===null&&Eh(g,Ae.el),Y&&Ze(Y,O),($e=U.props&&U.props.onVnodeUpdated)&&Ze(()=>ft($e,se,U,ye),O)}else{let U;const{el:W,props:Y}=y,{bm:se,m:ye,parent:he,root:$e,type:Ae}=g,Le=Zn(y);Kt(g,!1),se&&Vr(se),!Le&&(U=Y&&Y.onVnodeBeforeMount)&&ft(U,he,y),Kt(g,!0);{$e.ce&&$e.ce._injectChildStyle(Ae);const ze=g.subTree=xo(g);E(null,ze,x,C,g,O,P),y.el=ze.el}if(ye&&Ze(ye,O),!Le&&(U=Y&&Y.onVnodeMounted)){const ze=y;Ze(()=>ft(U,he,ze),O)}(y.shapeFlag&256||he&&Zn(he.vnode)&&he.vnode.shapeFlag&256)&&g.a&&Ze(g.a,O),g.isMounted=!0,y=x=C=null}};g.scope.on();const j=g.effect=new qa(L);g.scope.off();const I=g.update=j.run.bind(j),G=g.job=j.runIfDirty.bind(j);G.i=g,G.id=g.uid,j.scheduler=()=>Wi(G),Kt(g,!0),I()},le=(g,y,x)=>{y.component=g;const C=g.vnode.props;g.vnode=y,g.next=null,uh(g,y.props,C,x),dh(g,y.children,x),Ct(),go(g),Pt()},re=(g,y,x,C,O,P,N,L,j=!1)=>{const I=g&&g.children,G=g?g.shapeFlag:0,U=y.children,{patchFlag:W,shapeFlag:Y}=y;if(W>0){if(W&128){S(I,U,x,C,O,P,N,L,j);return}else if(W&256){Oe(I,U,x,C,O,P,N,L,j);return}}Y&8?(G&16&&X(I,O,P),U!==I&&u(x,U)):G&16?Y&16?S(I,U,x,C,O,P,N,L,j):X(I,O,P,!0):(G&8&&u(x,""),Y&16&&ee(U,x,C,O,P,N,L,j))},Oe=(g,y,x,C,O,P,N,L,j)=>{g=g||xn,y=y||xn;const I=g.length,G=y.length,U=Math.min(I,G);let W;for(W=0;W<U;W++){const Y=y[W]=j?Nt(y[W]):gt(y[W]);E(g[W],Y,x,null,O,P,N,L,j)}I>G?X(g,O,P,!0,!1,U):ee(y,x,C,O,P,N,L,j,U)},S=(g,y,x,C,O,P,N,L,j)=>{let I=0;const G=y.length;let U=g.length-1,W=G-1;for(;I<=U&&I<=W;){const Y=g[I],se=y[I]=j?Nt(y[I]):gt(y[I]);if(Fn(Y,se))E(Y,se,x,null,O,P,N,L,j);else break;I++}for(;I<=U&&I<=W;){const Y=g[U],se=y[W]=j?Nt(y[W]):gt(y[W]);if(Fn(Y,se))E(Y,se,x,null,O,P,N,L,j);else break;U--,W--}if(I>U){if(I<=W){const Y=W+1,se=Y<G?y[Y].el:C;for(;I<=W;)E(null,y[I]=j?Nt(y[I]):gt(y[I]),x,se,O,P,N,L,j),I++}}else if(I>W)for(;I<=U;)q(g[I],O,P,!0),I++;else{const Y=I,se=I,ye=new Map;for(I=se;I<=W;I++){const Be=y[I]=j?Nt(y[I]):gt(y[I]);Be.key!=null&&ye.set(Be.key,I)}let he,$e=0;const Ae=W-se+1;let Le=!1,ze=0;const xt=new Array(Ae);for(I=0;I<Ae;I++)xt[I]=0;for(I=Y;I<=U;I++){const Be=g[I];if($e>=Ae){q(Be,O,P,!0);continue}let rt;if(Be.key!=null)rt=ye.get(Be.key);else for(he=se;he<=W;he++)if(xt[he-se]===0&&Fn(Be,y[he])){rt=he;break}rt===void 0?q(Be,O,P,!0):(xt[rt-se]=I+1,rt>=ze?ze=rt:Le=!0,E(Be,y[rt],x,null,O,P,N,L,j),$e++)}const $r=Le?_h(xt):xn;for(he=$r.length-1,I=Ae-1;I>=0;I--){const Be=se+I,rt=y[Be],Cr=Be+1<G?y[Be+1].el:C;xt[I]===0?E(null,rt,x,Cr,O,P,N,L,j):Le&&(he<0||I!==$r[he]?w(rt,x,Cr,2):he--)}}},w=(g,y,x,C,O=null)=>{const{el:P,type:N,transition:L,children:j,shapeFlag:I}=g;if(I&6){w(g.component.subTree,y,x,C);return}if(I&128){g.suspense.move(y,x,C);return}if(I&64){N.move(g,y,x,ce);return}if(N===je){r(P,y,x);for(let U=0;U<j.length;U++)w(j[U],y,x,C);r(g.anchor,y,x);return}if(N===Ds){d(g,y,x);return}if(C!==2&&I&1&&L)if(C===0)L.beforeEnter(P),r(P,y,x),Ze(()=>L.enter(P),O);else{const{leave:U,delayLeave:W,afterLeave:Y}=L,se=()=>{g.ctx.isUnmounted?s(P):r(P,y,x)},ye=()=>{U(P,()=>{se(),Y&&Y()})};W?W(P,se,ye):ye()}else r(P,y,x)},q=(g,y,x,C=!1,O=!1)=>{const{type:P,props:N,ref:L,children:j,dynamicChildren:I,shapeFlag:G,patchFlag:U,dirs:W,cacheIndex:Y}=g;if(U===-2&&(O=!1),L!=null&&(Ct(),ss(L,null,x,g,!0),Pt()),Y!=null&&(y.renderCache[Y]=void 0),G&256){y.ctx.deactivate(g);return}const se=G&1&&W,ye=!Zn(g);let he;if(ye&&(he=N&&N.onVnodeBeforeUnmount)&&ft(he,y,g),G&6)J(g.component,x,C);else{if(G&128){g.suspense.unmount(x,C);return}se&&Wt(g,null,y,"beforeUnmount"),G&64?g.type.remove(g,y,x,ce,C):I&&!I.hasOnce&&(P!==je||U>0&&U&64)?X(I,y,x,!1,!0):(P===je&&U&384||!O&&G&16)&&X(j,y,x),C&&z(g)}(ye&&(he=N&&N.onVnodeUnmounted)||se)&&Ze(()=>{he&&ft(he,y,g),se&&Wt(g,null,y,"unmounted")},x)},z=g=>{const{type:y,el:x,anchor:C,transition:O}=g;if(y===je){F(x,C);return}if(y===Ds){p(g);return}const P=()=>{s(x),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(g.shapeFlag&1&&O&&!O.persisted){const{leave:N,delayLeave:L}=O,j=()=>N(x,P);L?L(g.el,P,j):j()}else P()},F=(g,y)=>{let x;for(;g!==y;)x=f(g),s(g),g=x;s(y)},J=(g,y,x)=>{const{bum:C,scope:O,job:P,subTree:N,um:L,m:j,a:I,parent:G,slots:{__:U}}=g;bo(j),bo(I),C&&Vr(C),G&&Q(U)&&U.forEach(W=>{G.renderCache[W]=void 0}),O.stop(),P&&(P.flags|=8,q(N,g,y,x)),L&&Ze(L,y),Ze(()=>{g.isUnmounted=!0},y),y&&y.pendingBranch&&!y.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===y.pendingId&&(y.deps--,y.deps===0&&y.resolve())},X=(g,y,x,C=!1,O=!1,P=0)=>{for(let N=P;N<g.length;N++)q(g[N],y,x,C,O)},K=g=>{if(g.shapeFlag&6)return K(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const y=f(g.anchor||g.el),x=y&&y[Uc];return x?f(x):y};let Z=!1;const ue=(g,y,x)=>{g==null?y._vnode&&q(y._vnode,null,null,!0):E(y._vnode||null,g,y,null,null,null,x),y._vnode=g,Z||(Z=!0,go(),al(),Z=!1)},ce={p:E,um:q,m:w,r:z,mt:B,mc:ee,pc:re,pbc:pe,n:K,o:e};return{render:ue,hydrate:void 0,createApp:oh(ue)}}function Ns({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Kt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function mh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function El(e,t,n=!1){const r=e.children,s=t.children;if(Q(r)&&Q(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Nt(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&El(o,a)),a.type===Ts&&(a.el=o.el),a.type===Vt&&!a.el&&(a.el=o.el)}}function _h(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(s=n[n.length-1],e[s]<c){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<c?i=a+1:o=a;c<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Al(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Al(t)}function bo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const vh=Symbol.for("v-scx"),yh=()=>Jr(vh);function tr(e,t,n){return Ol(e,t,n)}function Ol(e,t,n=xe){const{immediate:r,deep:s,flush:i,once:o}=n,a=Ke({},n),l=t&&r||!t&&i!=="post";let c;if(fr){if(i==="sync"){const m=yh();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=mt,m.resume=mt,m.pause=mt,m}}const u=Je;a.call=(m,v,E)=>wt(m,u,v,E);let h=!1;i==="post"?a.scheduler=m=>{Ze(m,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(m,v)=>{v?m():Wi(m)}),a.augmentJob=m=>{t&&(m.flags|=4),h&&(m.flags|=2,u&&(m.id=u.uid,m.i=u))};const f=jc(e,t,a);return fr&&(c?c.push(f):l&&f()),f}function wh(e,t,n){const r=this.proxy,s=Ee(e)?e.includes(".")?$l(r,e):()=>r[e]:e.bind(r,r);let i;ne(t)?i=t:(i=t.handler,n=t);const o=xr(this),a=Ol(s,i.bind(r),n);return o(),a}function $l(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const bh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${qt(t)}Modifiers`]||e[`${an(t)}Modifiers`];function xh(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||xe;let s=n;const i=t.startsWith("update:"),o=i&&bh(r,t.slice(7));o&&(o.trim&&(s=n.map(u=>Ee(u)?u.trim():u)),o.number&&(s=n.map(ri)));let a,l=r[a=Ps(t)]||r[a=Ps(qt(t))];!l&&i&&(l=r[a=Ps(an(t))]),l&&wt(l,e,6,s);const c=r[a+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,wt(c,e,6,s)}}function Cl(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!ne(e)){const l=c=>{const u=Cl(c,t,!0);u&&(a=!0,Ke(o,u))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(Te(e)&&r.set(e,null),null):(Q(i)?i.forEach(l=>o[l]=null):Ke(o,i),Te(e)&&r.set(e,o),o)}function ks(e,t){return!e||!_s(t)?!1:(t=t.slice(2).replace(/Once$/,""),be(e,t[0].toLowerCase()+t.slice(1))||be(e,an(t))||be(e,t))}function xo(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:h,data:f,setupState:m,ctx:v,inheritAttrs:E}=e,k=rs(e);let M,H;try{if(n.shapeFlag&4){const p=s||r,b=p;M=gt(c.call(b,p,u,h,m,f,v)),H=a}else{const p=t;M=gt(p.length>1?p(h,{attrs:a,slots:o,emit:l}):p(h,null)),H=t.props?a:Sh(a)}}catch(p){nr.length=0,bs(p,e,1),M=_t(Vt)}let d=M;if(H&&E!==!1){const p=Object.keys(H),{shapeFlag:b}=d;p.length&&b&7&&(i&&p.some(Ii)&&(H=kh(H,i)),d=Pn(d,H,!1,!0))}return n.dirs&&(d=Pn(d,null,!1,!0),d.dirs=d.dirs?d.dirs.concat(n.dirs):n.dirs),n.transition&&Ki(d,n.transition),M=d,rs(k),M}const Sh=e=>{let t;for(const n in e)(n==="class"||n==="style"||_s(n))&&((t||(t={}))[n]=e[n]);return t},kh=(e,t)=>{const n={};for(const r in e)(!Ii(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Th(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,c=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?So(r,o,c):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const f=u[h];if(o[f]!==r[f]&&!ks(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?So(r,o,c):!0:!!o;return!1}function So(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!ks(n,i))return!0}return!1}function Eh({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Pl=e=>e.__isSuspense;function Ah(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):Dc(e)}const je=Symbol.for("v-fgt"),Ts=Symbol.for("v-txt"),Vt=Symbol.for("v-cmt"),Ds=Symbol.for("v-stc"),nr=[];let tt=null;function ie(e=!1){nr.push(tt=e?null:[])}function Oh(){nr.pop(),tt=nr[nr.length-1]||null}let hr=1;function ko(e,t=!1){hr+=e,e<0&&tt&&t&&(tt.hasOnce=!0)}function Rl(e){return e.dynamicChildren=hr>0?tt||xn:null,Oh(),hr>0&&tt&&tt.push(e),e}function fe(e,t,n,r,s,i){return Rl(_(e,t,n,r,s,i,!0))}function Vn(e,t,n,r,s){return Rl(_t(e,t,n,r,s,!0))}function Ml(e){return e?e.__v_isVNode===!0:!1}function Fn(e,t){return e.type===t.type&&e.key===t.key}const Il=({key:e})=>e??null,Wr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ee(e)||Ue(e)||ne(e)?{i:st,r:e,k:t,f:!!n}:e:null);function _(e,t=null,n=null,r=0,s=null,i=e===je?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Il(t),ref:t&&Wr(t),scopeId:ul,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:st};return a?(Yi(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=Ee(n)?8:16),hr>0&&!o&&tt&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&tt.push(l),l}const _t=$h;function $h(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Qc)&&(e=Vt),Ml(e)){const a=Pn(e,t,!0);return n&&Yi(a,n),hr>0&&!i&&tt&&(a.shapeFlag&6?tt[tt.indexOf(e)]=a:tt.push(a)),a.patchFlag=-2,a}if(Fh(e)&&(e=e.__vccOpts),t){t=Ch(t);let{class:a,style:l}=t;a&&!Ee(a)&&(t.class=at(a)),Te(l)&&(Ji(l)&&!Q(l)&&(l=Ke({},l)),t.style=Ni(l))}const o=Ee(e)?1:Pl(e)?128:Bc(e)?64:Te(e)?4:ne(e)?2:0;return _(e,t,n,r,s,o,i,!0)}function Ch(e){return e?Ji(e)||wl(e)?Ke({},e):e:null}function Pn(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=e,c=t?Ph(s||{},t):s,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Il(c),ref:t&&t.ref?n&&i?Q(i)?i.concat(Wr(t)):[i,Wr(t)]:Wr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==je?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pn(e.ssContent),ssFallback:e.ssFallback&&Pn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Ki(u,l.clone(u)),u}function et(e=" ",t=0){return _t(Ts,null,e,t)}function We(e="",t=!1){return t?(ie(),Vn(Vt,null,e)):_t(Vt,null,e)}function gt(e){return e==null||typeof e=="boolean"?_t(Vt):Q(e)?_t(je,null,e.slice()):Ml(e)?Nt(e):_t(Ts,null,String(e))}function Nt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pn(e)}function Yi(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Q(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Yi(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!wl(t)?t._ctx=st:s===3&&st&&(st.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ne(t)?(t={default:t,_ctx:st},n=32):(t=String(t),r&64?(n=16,t=[et(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ph(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=at([t.class,r.class]));else if(s==="style")t.style=Ni([t.style,r.style]);else if(_s(s)){const i=t[s],o=r[s];o&&i!==o&&!(Q(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function ft(e,t,n,r=null){wt(e,t,7,[n,r])}const Rh=_l();let Mh=0;function Ih(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Rh,i={uid:Mh++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new ac(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xl(r,s),emitsOptions:Cl(r,s),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:r.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=xh.bind(null,i),e.ce&&e.ce(i),i}let Je=null,os,fi;{const e=ys(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};os=t("__VUE_INSTANCE_SETTERS__",n=>Je=n),fi=t("__VUE_SSR_SETTERS__",n=>fr=n)}const xr=e=>{const t=Je;return os(e),e.scope.on(),()=>{e.scope.off(),os(t)}},To=()=>{Je&&Je.scope.off(),os(null)};function jl(e){return e.vnode.shapeFlag&4}let fr=!1;function jh(e,t=!1,n=!1){t&&fi(t);const{props:r,children:s}=e.vnode,i=jl(e);lh(e,r,i,t),fh(e,s,n||t);const o=i?Lh(e,t):void 0;return t&&fi(!1),o}function Lh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Zc);const{setup:r}=n;if(r){Ct();const s=e.setupContext=r.length>1?Dh(e):null,i=xr(e),o=br(r,e,0,[e.props,s]),a=Ia(o);if(Pt(),i(),(a||e.sp)&&!Zn(e)&&cl(e),a){if(o.then(To,To),t)return o.then(l=>{Eo(e,l)}).catch(l=>{bs(l,e,0)});e.asyncDep=o}else Eo(e,o)}else Ll(e)}function Eo(e,t,n){ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Te(t)&&(e.setupState=rl(t)),Ll(e)}function Ll(e,t,n){const r=e.type;e.render||(e.render=r.render||mt);{const s=xr(e);Ct();try{eh(e)}finally{Pt(),s()}}}const Nh={get(e,t){return Fe(e,"get",""),e[t]}};function Dh(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Nh),slots:e.slots,emit:e.emit,expose:t}}function Es(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(rl(Oc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in er)return er[n](e)},has(t,n){return n in t||n in er}})):e.proxy}function Fh(e){return ne(e)&&"__vccOpts"in e}const Jn=(e,t)=>Mc(e,t,fr),Uh="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let di;const Ao=typeof window<"u"&&window.trustedTypes;if(Ao)try{di=Ao.createPolicy("vue",{createHTML:e=>e})}catch{}const Nl=di?e=>di.createHTML(e):e=>e,Bh="http://www.w3.org/2000/svg",qh="http://www.w3.org/1998/Math/MathML",Et=typeof document<"u"?document:null,Oo=Et&&Et.createElement("template"),Hh={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Et.createElementNS(Bh,e):t==="mathml"?Et.createElementNS(qh,e):n?Et.createElement(e,{is:n}):Et.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Et.createTextNode(e),createComment:e=>Et.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Et.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Oo.innerHTML=Nl(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=Oo.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Vh=Symbol("_vtc");function Jh(e,t,n){const r=e[Vh];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const $o=Symbol("_vod"),Wh=Symbol("_vsh"),Kh=Symbol(""),zh=/(^|;)\s*display\s*:/;function Gh(e,t,n){const r=e.style,s=Ee(n);let i=!1;if(n&&!s){if(t)if(Ee(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Kr(r,a,"")}else for(const o in t)n[o]==null&&Kr(r,o,"");for(const o in n)o==="display"&&(i=!0),Kr(r,o,n[o])}else if(s){if(t!==n){const o=r[Kh];o&&(n+=";"+o),r.cssText=n,i=zh.test(n)}}else t&&e.removeAttribute("style");$o in e&&(e[$o]=i?r.display:"",e[Wh]&&(r.display="none"))}const Co=/\s*!important$/;function Kr(e,t,n){if(Q(n))n.forEach(r=>Kr(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Yh(e,t);Co.test(n)?e.setProperty(an(r),n.replace(Co,""),"important"):e[r]=n}}const Po=["Webkit","Moz","ms"],Fs={};function Yh(e,t){const n=Fs[t];if(n)return n;let r=qt(t);if(r!=="filter"&&r in e)return Fs[t]=r;r=Na(r);for(let s=0;s<Po.length;s++){const i=Po[s]+r;if(i in e)return Fs[t]=i}return t}const Ro="http://www.w3.org/1999/xlink";function Mo(e,t,n,r,s,i=ic(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Ro,t.slice(6,t.length)):e.setAttributeNS(Ro,t,n):n==null||i&&!Fa(n)?e.removeAttribute(t):e.setAttribute(t,i?"":yt(n)?String(n):n)}function Io(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Nl(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Fa(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function Zt(e,t,n,r){e.addEventListener(t,n,r)}function Xh(e,t,n,r){e.removeEventListener(t,n,r)}const jo=Symbol("_vei");function Qh(e,t,n,r,s=null){const i=e[jo]||(e[jo]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=Zh(t);if(r){const c=i[t]=nf(r,s);Zt(e,a,c,l)}else o&&(Xh(e,a,o,l),i[t]=void 0)}}const Lo=/(?:Once|Passive|Capture)$/;function Zh(e){let t;if(Lo.test(e)){t={};let r;for(;r=e.match(Lo);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):an(e.slice(2)),t]}let Us=0;const ef=Promise.resolve(),tf=()=>Us||(ef.then(()=>Us=0),Us=Date.now());function nf(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;wt(rf(r,n.value),t,5,[r])};return n.value=e,n.attached=tf(),n}function rf(e,t){if(Q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const No=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,sf=(e,t,n,r,s,i)=>{const o=s==="svg";t==="class"?Jh(e,r,o):t==="style"?Gh(e,n,r):_s(t)?Ii(t)||Qh(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):of(e,t,r,o))?(Io(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Mo(e,t,r,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ee(r))?Io(e,qt(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Mo(e,t,r,o))};function of(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&No(t)&&ne(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return No(t)&&Ee(n)?!1:t in e}const as=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?n=>Vr(t,n):t};function af(e){e.target.composing=!0}function Do(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const An=Symbol("_assign"),Dl={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[An]=as(s);const i=r||s.props&&s.props.type==="number";Zt(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=ri(a)),e[An](a)}),n&&Zt(e,"change",()=>{e.value=e.value.trim()}),t||(Zt(e,"compositionstart",af),Zt(e,"compositionend",Do),Zt(e,"change",Do))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(e[An]=as(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?ri(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===l)||(e.value=l))}},rr={created(e,{value:t},n){e.checked=Zr(t,n.props.value),e[An]=as(n),Zt(e,"change",()=>{e[An](lf(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[An]=as(r),t!==n&&(e.checked=Zr(t,r.props.value))}};function lf(e){return"_value"in e?e._value:e.value}const uf=["ctrl","shift","alt","meta"],cf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>uf.some(n=>e[`${n}Key`]&&!t.includes(n))},dr=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=cf[t[o]];if(a&&a(s,t))return}return e(s,...i)})},hf=Ke({patchProp:sf},Hh);let Fo;function ff(){return Fo||(Fo=ph(hf))}const df=(...e)=>{const t=ff().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=gf(r);if(!s)return;const i=t._component;!ne(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,pf(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function pf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function gf(e){return Ee(e)?document.querySelector(e):e}const Fl=[{id:1,name:"Matt"},{id:2,name:"Darts Vador",avatar:"/shanghai/img/dartsvador.png"},{id:3,name:"Dart Simpson",avatar:"/shanghai/img/dartsimpson.png"},{id:4,name:"Robull",avatar:"/shanghai/img/ro.jpg"},{id:5,name:"Louis CLXXX",avatar:"/shanghai/img/crown.jpeg"},{id:7,name:"Cramomille",avatar:"/shanghai/img/cramomille.png"},{id:8,name:"Chlo",avatar:"/shanghai/img/ponpon.png"}],Ul=[{id:1001,name:"Hugues",avatar:void 0},{id:1002,name:"Elina",avatar:void 0},{id:1003,name:"Mattia",avatar:"/shanghai/img/archi.jpg"}],mf=[{id:null,name:"Olivier",avatar:void 0}],Sr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},_f={key:0,class:"action-buttons"},vf={id:"playerOptions"},yf=["value"],wf=["disabled"],bf={class:"players-grid"},xf={class:"avatar-placeholder"},Sf=["src"],kf={class:"player-name"},Tf={class:"player-actions"},Ef=["onClick"],Af=["onClick"],Of=["onClick"],$f={class:"action-buttons"},Cf={__name:"PlayerSelector",props:{predefinedPlayers:Array,role:String},emits:["start-game"],setup(e,{emit:t}){const n=e,r=t,s=Re([]),i=Re(""),o=[...Fl,...Ul,...mf],a=["/shanghai/img/invite_1.jpg","/shanghai/img/invite_2.png","/shanghai/img/invite_3.png","/shanghai/img/invite_4.png","/shanghai/img/invite_5.png","/shanghai/img/invite_6.png","/shanghai/img/invite_7.png","/shanghai/img/invite_8.png","/shanghai/img/invite_9.png","/shanghai/img/invite_10.png","/shanghai/img/invite_11.png"];let l=[...a];function c(){l.length===0&&(l=[...a]);const d=Math.floor(Math.random()*l.length);return l.splice(d,1)[0]}function u(){const d=i.value.trim();if(d===""||s.value.some(b=>b.name.toLowerCase()===d.toLowerCase()))return;const p=o.find(b=>b.name.toLowerCase()===d.toLowerCase());s.value.push({id:(p==null?void 0:p.id)||null,name:d,avatar:(p==null?void 0:p.avatar)||c()}),i.value=""}function h(){u()}function f(){s.value=n.predefinedPlayers.map(d=>({id:d.id,name:d.name,avatar:d.avatar||c()}))}function m(d){s.value=s.value.filter(p=>p.name!==d)}function v(d){const p=s.value.findIndex(b=>b.name===d);p<=0||([s.value[p-1],s.value[p]]=[s.value[p],s.value[p-1]])}function E(d){const p=s.value.findIndex(b=>b.name===d);p===-1||p>=s.value.length-1||([s.value[p+1],s.value[p]]=[s.value[p],s.value[p+1]])}function k(){for(let d=s.value.length-1;d>0;d--){const p=Math.floor(Math.random()*(d+1));[s.value[d],s.value[p]]=[s.value[p],s.value[d]]}}function M(){const d=document.documentElement;d.requestFullscreen?d.requestFullscreen():d.mozRequestFullScreen?d.mozRequestFullScreen():d.webkitRequestFullscreen?d.webkitRequestFullscreen():d.msRequestFullscreen&&d.msRequestFullscreen()}function H(){M(),r("start-game",s.value)}return Ss(()=>{n.role==="admin"&&f()}),(d,p)=>(ie(),fe(je,null,[p[3]||(p[3]=_("h1",null,"Shanghai ",-1)),e.role==="admin"?(ie(),fe("div",_f,[_("a",{href:"#",onClick:p[0]||(p[0]=dr(b=>d.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):We("",!0),_("form",{onSubmit:dr(u,["prevent"])},[rn(_("input",{list:"playerOptions",type:"text","onUpdate:modelValue":p[1]||(p[1]=b=>i.value=b),placeholder:"Ajouter un joueur",onChange:h},null,544),[[Dl,i.value]]),_("datalist",vf,[(ie(),fe(je,null,Cn(o,b=>_("option",{key:b.name,value:b.name},null,8,yf)),64))]),_("button",{disabled:i.value.length===0},"Ajouter",8,wf)],32),_("ul",bf,[(ie(!0),fe(je,null,Cn(s.value,b=>(ie(),fe("li",{key:b.name,class:"player-card"},[_("div",xf,[_("img",{src:b.avatar,alt:"avatar",class:"avatar-img"},null,8,Sf)]),_("div",kf,D(b.name),1),_("div",Tf,[_("button",{onClick:A=>v(b.name)},"",8,Ef),_("button",{onClick:A=>m(b.name)},"",8,Af),_("button",{onClick:A=>E(b.name)},"",8,Of)])]))),128))]),_("div",$f,[s.value.length>=2?(ie(),fe("button",{key:0,onClick:p[2]||(p[2]=b=>k())},"Ordre alatoire")):We("",!0),s.value.length>=1?(ie(),fe("button",{key:1,onClick:H,class:"jouer-button"},"JOUER")):We("",!0)]),p[4]||(p[4]=_("br",null,null,-1))],64))}},Pf=Sr(Cf,[["__scopeId","data-v-b907b58f"]]),Rf="modulepreload",Mf=function(e){return"/shanghai/"+e},Uo={},kr=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(c=>{if(c=Mf(c),c in Uo)return;Uo[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":Rf,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,v)=>{f.addEventListener("load",m),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},If=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>kr(async()=>{const{default:r}=await Promise.resolve().then(()=>jn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Xi extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class jf extends Xi{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Lf extends Xi{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Nf extends Xi{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var pi;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(pi||(pi={}));var Df=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class Ff{constructor(t,{headers:n={},customFetch:r,region:s=pi.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=If(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Df(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(v=>{throw new jf(v)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Lf(u);if(!u.ok)throw new Nf(u);let f=((r=u.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield u.json():f==="application/octet-stream"?m=yield u.blob():f==="text/event-stream"?m=u:f==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}function Uf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bf(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Ce={},cn={},hn={},fn={},dn={},pn={},qf=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Rn=qf();const Hf=Rn.fetch,Bl=Rn.fetch.bind(Rn),ql=Rn.Headers,Vf=Rn.Request,Jf=Rn.Response,jn=Object.freeze(Object.defineProperty({__proto__:null,Headers:ql,Request:Vf,Response:Jf,default:Bl,fetch:Hf},Symbol.toStringTag,{value:"Module"})),Wf=Bf(jn);var Ir={},Bo;function Hl(){if(Bo)return Ir;Bo=1,Object.defineProperty(Ir,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Ir.default=e,Ir}var qo;function Vl(){if(qo)return pn;qo=1;var e=pn&&pn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(pn,"__esModule",{value:!0});const t=e(Wf),n=e(Hl());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,f;let m=null,v=null,E=null,k=c.status,M=c.statusText;if(c.ok){if(this.method!=="HEAD"){const b=await c.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?v=b:v=JSON.parse(b))}const d=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),p=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");d&&p&&p.length>1&&(E=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(m={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,E=null,k=406,M="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const d=await c.text();try{m=JSON.parse(d),Array.isArray(m)&&c.status===404&&(v=[],m=null,k=200,M="OK")}catch{c.status===404&&d===""?(k=204,M="No Content"):m={message:d}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,k=200,M="OK"),m&&this.shouldThrowOnError)throw new n.default(m)}return{error:m,data:v,count:E,status:k,statusText:M}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,h,f;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=c==null?void 0:c.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return pn.default=r,pn}var Ho;function Jl(){if(Ho)return dn;Ho=1;var e=dn&&dn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(dn,"__esModule",{value:!0});const t=e(Vl());class n extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`,c==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return dn.default=n,dn}var Vo;function Qi(){if(Vo)return fn;Vo=1;var e=fn&&fn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fn,"__esModule",{value:!0});const t=e(Jl());class n extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${c}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return fn.default=n,fn}var Jo;function Wl(){if(Jo)return hn;Jo=1;var e=hn&&hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hn,"__esModule",{value:!0});const t=e(Qi());class n{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=i,this.schema=o,this.fetch=a}select(s,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const c=(s??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const c=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&u.push(this.headers.Prefer),a&&u.push(`count=${a}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",o=[];return s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return hn.default=n,hn}var Un={},Bn={},Wo;function Kf(){return Wo||(Wo=1,Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.version=void 0,Bn.version="0.0.0-automated"),Bn}var Ko;function zf(){if(Ko)return Un;Ko=1,Object.defineProperty(Un,"__esModule",{value:!0}),Un.DEFAULT_HEADERS=void 0;const e=Kf();return Un.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Un}var zo;function Gf(){if(zo)return cn;zo=1;var e=cn&&cn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(cn,"__esModule",{value:!0});const t=e(Wl()),n=e(Qi()),r=zf();class s{constructor(o,{headers:a={},schema:l,fetch:c}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=c}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:c=!1,count:u}={}){let h;const f=new URL(`${this.url}/rpc/${o}`);let m;l||c?(h=l?"HEAD":"GET",Object.entries(a).filter(([E,k])=>k!==void 0).map(([E,k])=>[E,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([E,k])=>{f.searchParams.append(E,k)})):(h="POST",m=a);const v=Object.assign({},this.headers);return u&&(v.Prefer=`count=${u}`),new n.default({method:h,url:f,headers:v,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return cn.default=s,cn}var Go;function Yf(){if(Go)return Ce;Go=1;var e=Ce&&Ce.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.PostgrestError=Ce.PostgrestBuilder=Ce.PostgrestTransformBuilder=Ce.PostgrestFilterBuilder=Ce.PostgrestQueryBuilder=Ce.PostgrestClient=void 0;const t=e(Gf());Ce.PostgrestClient=t.default;const n=e(Wl());Ce.PostgrestQueryBuilder=n.default;const r=e(Qi());Ce.PostgrestFilterBuilder=r.default;const s=e(Jl());Ce.PostgrestTransformBuilder=s.default;const i=e(Vl());Ce.PostgrestBuilder=i.default;const o=e(Hl());return Ce.PostgrestError=o.default,Ce.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},Ce}var Xf=Yf();const Qf=Uf(Xf),{PostgrestClient:Zf,PostgrestQueryBuilder:Wv,PostgrestFilterBuilder:Kv,PostgrestTransformBuilder:zv,PostgrestBuilder:Gv,PostgrestError:Yv}=Qf;let gi;typeof window>"u"?gi=require("ws"):gi=window.WebSocket;const ed="2.11.10",td={"X-Client-Info":`realtime-js/${ed}`},nd="1.0.0",Kl=1e4,rd=1e3;var On;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(On||(On={}));var He;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(He||(He={}));var lt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(lt||(lt={}));var mi;(function(e){e.websocket="websocket"})(mi||(mi={}));var en;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(en||(en={}));class sd{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}let zl=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Se||(Se={}));const Yo=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=id(o,e,t,s),i),{})},id=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Gl(i,o):_i(o)},Gl=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return ud(t,n)}switch(e){case Se.bool:return od(t);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return ad(t);case Se.json:case Se.jsonb:return ld(t);case Se.timestamp:return cd(t);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return _i(t);default:return _i(t)}},_i=e=>e,od=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ad=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},ld=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},ud=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Gl(t,a))}return e},cd=e=>typeof e=="string"?e.replace(" ","T"):e,Yl=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Bs{constructor(t,n,r={},s=Kl){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Xo;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Xo||(Xo={}));class sr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=sr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=sr.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=sr.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=i[c];if(h){const f=u.map(k=>k.presence_ref),m=h.map(k=>k.presence_ref),v=u.filter(k=>m.indexOf(k.presence_ref)<0),E=h.filter(k=>f.indexOf(k.presence_ref)<0);v.length>0&&(a[c]=v),E.length>0&&(l[c]=E)}else a[c]=u}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){const h=t[a].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);t[a].unshift(...f)}r(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,s(a,c,l),c.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qo;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Qo||(Qo={}));var Zo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Zo||(Zo={}));var At;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(At||(At={}));class Zi{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=He.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Bs(this,lt.join,this.params,this.timeout),this.rejoinTimer=new zl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=He.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=He.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this._on(lt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new sr(this),this.broadcastEndpointURL=Yl(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(u=>t==null?void 0:t(At.CHANNEL_ERROR,u)),this._onClose(()=>t==null?void 0:t(At.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(u=>u.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){t==null||t(At.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,v=[];for(let E=0;E<m;E++){const k=f[E],{filter:{event:M,schema:H,table:d,filter:p}}=k,b=u&&u[E];if(b&&b.event===M&&b.schema===H&&b.table===d&&b.filter===p)v.push(Object.assign(Object.assign({},k),{id:b.id}));else{this.unsubscribe(),this.state=He.errored,t==null||t(At.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(At.SUBSCRIBED);return}}).receive("error",u=>{this.state=He.errored,t==null||t(At.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(At.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=He.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(lt.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new Bs(this,lt.leave,{},t);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Bs(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=lt;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,E,k;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(E=m.filter)===null||E===void 0?void 0:E.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(m=>m.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var v,E,k,M,H,d;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const p=m.id,b=(v=m.filter)===null||v===void 0?void 0:v.event;return p&&((E=n.ids)===null||E===void 0?void 0:E.includes(p))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const p=(H=(M=m==null?void 0:m.filter)===null||M===void 0?void 0:M.event)===null||H===void 0?void 0:H.toLocaleLowerCase();return p==="*"||p===((d=n==null?void 0:n.event)===null||d===void 0?void 0:d.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:E,table:k,commit_timestamp:M,type:H,errors:d}=v;f=Object.assign(Object.assign({},{schema:E,table:k,commit_timestamp:M,eventType:H,new:{},old:{},errors:d}),this._getPayloadRecords(v))}m.callback(f,r)})}_isClosed(){return this.state===He.closed}_isJoined(){return this.state===He.joined}_isJoining(){return this.state===He.joining}_isLeaving(){return this.state===He.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Zi.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(lt.close,{},t)}_onError(t){this._on(lt.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=He.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Yo(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Yo(t.columns,t.old_record)),n}}const ea=()=>{},hd=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fd{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=td,this.params={},this.timeout=Kl,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ea,this.ref=0,this.logger=ea,this.conn=null,this.sendBuffer=[],this.serializer=new sd,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>kr(async()=>{const{default:l}=await Promise.resolve().then(()=>jn);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${mi.websocket}`,this.httpEndpoint=Yl(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=gi),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new dd(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nd}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case On.connecting:return en.Connecting;case On.open:return en.Open;case On.closing:return en.Closing;default:return en.Closed}}isConnected(){return this.connectionState()===en.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Zi(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(lt.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(rd,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(lt.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([hd],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class dd{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=On.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class eo extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class pd extends eo{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vi extends eo{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var gd=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const Xl=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>kr(async()=>{const{default:r}=await Promise.resolve().then(()=>jn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},md=()=>gd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kr(()=>Promise.resolve().then(()=>jn),void 0)).Response:Response}),yi=e=>{if(Array.isArray(e))return e.map(n=>yi(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=yi(r)}),t};var ln=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const qs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_d=(e,t,n)=>ln(void 0,void 0,void 0,function*(){const r=yield md();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new pd(qs(s),e.status||500))}).catch(s=>{t(new vi(qs(s),s))}):t(new vi(qs(e),e))}),vd=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Tr(e,t,n,r,s,i){return ln(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,vd(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>_d(l,a,r))})})}function ls(e,t,n,r){return ln(this,void 0,void 0,function*(){return Tr(e,"GET",t,n,r)})}function Dt(e,t,n,r,s){return ln(this,void 0,void 0,function*(){return Tr(e,"POST",t,r,s,n)})}function yd(e,t,n,r,s){return ln(this,void 0,void 0,function*(){return Tr(e,"PUT",t,r,s,n)})}function wd(e,t,n,r){return ln(this,void 0,void 0,function*(){return Tr(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ql(e,t,n,r,s){return ln(this,void 0,void 0,function*(){return Tr(e,"DELETE",t,r,s,n)})}var Ge=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const bd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ta={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class xd{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Xl(s)}uploadOrUpdate(t,n,r,s){return Ge(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ta),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Pe(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Ge(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:ta.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Dt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new eo("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Dt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Ge(this,void 0,void 0,function*(){try{const s=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}download(t,n){return Ge(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield ls(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Pe(a))return{data:null,error:a};throw a}})}info(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield ls(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:yi(r),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}exists(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield wd(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Pe(r)&&r instanceof vi){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},bd),n),{prefix:t||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const Sd="2.7.1",kd={"X-Client-Info":`storage-js/${Sd}`};var gn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class Td{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},kd),n),this.fetch=Xl(r)}listBuckets(){return gn(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Pe(t))return{data:null,error:t};throw t}})}getBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield ls(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return gn(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return gn(this,void 0,void 0,function*(){try{return{data:yield yd(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}deleteBucket(t){return gn(this,void 0,void 0,function*(){try{return{data:yield Ql(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}}class Ed extends Td{constructor(t,n={},r){super(t,n,r)}from(t){return new xd(this.url,this.headers,t,this.fetch)}}const Ad="2.50.0";let Wn="";typeof Deno<"u"?Wn="deno":typeof document<"u"?Wn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wn="react-native":Wn="node";const Od={"X-Client-Info":`supabase-js-${Wn}/${Ad}`},$d={headers:Od},Cd={schema:"public"},Pd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Rd={};var Md=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};const Id=e=>{let t;return e?t=e:typeof fetch>"u"?t=Bl:t=fetch,(...n)=>t(...n)},jd=()=>typeof Headers>"u"?ql:Headers,Ld=(e,t,n)=>{const r=Id(n),s=jd();return(i,o)=>Md(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var Nd=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};function Dd(e){return e.endsWith("/")?e:e+"/"}function Fd(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:c,realtime:u,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Nd(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Zl="2.70.0",wn=30*1e3,wi=3,Hs=wi*wn,Ud="http://localhost:9999",Bd="supabase.auth.token",qd={"X-Client-Info":`gotrue-js/${Zl}`},bi="X-Supabase-Api-Version",eu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hd=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vd=6e5;class to extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function te(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Jd extends to{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Wd(e){return te(e)&&e.name==="AuthApiError"}class tu extends to{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Jt extends to{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class jt extends Jt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Kd(e){return te(e)&&e.name==="AuthSessionMissingError"}class jr extends Jt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Lr extends Jt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Nr extends Jt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zd(e){return te(e)&&e.name==="AuthImplicitGrantRedirectError"}class na extends Jt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class xi extends Jt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Vs(e){return te(e)&&e.name==="AuthRetryableFetchError"}class ra extends Jt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ir extends Jt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const us="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sa=` 	
\r=`.split(""),Gd=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<sa.length;t+=1)e[sa[t].charCodeAt(0)]=-2;for(let t=0;t<us.length;t+=1)e[us[t].charCodeAt(0)]=t;return e})();function ia(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(us[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(us[r]),t.queuedBits-=6}}function nu(e,t,n){const r=Gd[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function oa(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Qd(o,r,n)};for(let o=0;o<e.length;o+=1)nu(e.charCodeAt(o),s,i);return t.join("")}function Yd(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Xd(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Yd(r,t)}}function Qd(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Zd(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)nu(e.charCodeAt(s),n,r);return new Uint8Array(t)}function ep(e){const t=[];return Xd(e,n=>t.push(n)),new Uint8Array(t)}function tp(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>ia(s,n,r)),ia(null,n,r),t.join("")}function np(e){return Math.round(Date.now()/1e3)+e}function rp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ot=()=>typeof window<"u"&&typeof document<"u",zt={tested:!1,writable:!1},or=()=>{if(!ot())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zt.tested)return zt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zt.tested=!0,zt.writable=!0}catch{zt.tested=!0,zt.writable=!1}return zt.writable};function sp(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const ru=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>kr(async()=>{const{default:r}=await Promise.resolve().then(()=>jn);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},ip=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",su=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Dr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Fr=async(e,t)=>{await e.removeItem(t)};class As{constructor(){this.promise=new As.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}As.promiseConstructor=Promise;function Js(e){const t=e.split(".");if(t.length!==3)throw new ir("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Hd.test(t[r]))throw new ir("JWT not in base64url format");return{header:JSON.parse(oa(t[0])),payload:JSON.parse(oa(t[1])),signature:Zd(t[2]),raw:{header:t[0],payload:t[1]}}}async function op(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function ap(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function lp(e){return("0"+e.toString(16)).substr(-2)}function up(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,lp).join("")}async function cp(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function hp(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await cp(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mn(e,t,n=!1){const r=up();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await su(e,`${t}-code-verifier`,s);const i=await hp(r);return[i,r===i?"plain":"s256"]}const fp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function dp(e){const t=e.headers.get(bi);if(!t||!t.match(fp))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function pp(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function gp(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function _n(e){if(!mp.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var _p=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Xt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),vp=[502,503,504];async function aa(e){var t;if(!ip(e))throw new xi(Xt(e),0);if(vp.includes(e.status))throw new xi(Xt(e),e.status);let n;try{n=await e.json()}catch(i){throw new tu(Xt(i),i)}let r;const s=dp(e);if(s&&s.getTime()>=eu["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ra(Xt(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new jt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ra(Xt(n),e.status,n.weak_password.reasons);throw new Jd(Xt(n),e.status||500,r)}const yp=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function oe(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[bi]||(i[bi]=eu["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await wp(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function wp(e,t,n,r,s,i){const o=yp(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new xi(Xt(l),0)}if(a.ok||await aa(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await aa(l)}}function Tt(e){var t;let n=null;kp(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=np(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function la(e){const t=Tt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ut(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function bp(e){return{data:e,error:null}}function xp(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=_p(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Sp(e){return e}function kp(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ws=["global","local","others"];var Tp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class Ep{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=ru(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Ws[0]){if(Ws.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ws.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ut})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=Tp(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:xp,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(te(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ut})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Sp});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const E=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);c[`${k}Page`]=E}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(te(c))return{data:{users:[]},error:c};throw c}}async getUserById(t){_n(t);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ut})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){_n(t);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ut})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){_n(t);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ut})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){_n(t.userId);try{const{data:n,error:r}=await oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(te(n))return{data:null,error:n};throw n}}async _deleteFactor(t){_n(t.userId),_n(t.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}}const Ap={getItem:e=>or()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{or()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{or()&&globalThis.localStorage.removeItem(e)}};function ua(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function Op(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const vn={debug:!!(globalThis&&or()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class iu extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class $p extends iu{}async function Cp(e,t,n){vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),vn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw vn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new $p(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(vn.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}Op();const Pp={url:Ud,storageKey:Bd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:qd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ca(e,t,n){return await n()}class pr{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=pr.nextInstanceID,pr.nextInstanceID+=1,this.instanceID>0&&ot()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Pp),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ep({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ru(s.fetch),this.lock=s.lock||ca,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ot()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Cp:this.lock=ca,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:or()?this.storage=Ap:(this.memoryStorage={},this.storage=ua(this.memoryStorage)):(this.memoryStorage={},this.storage=ua(this.memoryStorage)),ot()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zl}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=sp(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ot()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),zd(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return te(n)?{error:n}:{error:new tu("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Tt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:u,password:h,options:f}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await mn(this.storage,this.storageKey)),i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:Tt})}else if("phone"in t){const{phone:u,password:h,options:f}=t;i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Tt})}else throw new Lr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:la})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:la})}else throw new Lr("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new jr}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,l,c,u,h,f,m;let v,E;if("message"in t)v=t.message,E=t.signature;else{const{chain:k,wallet:M,statement:H,options:d}=t;let p;if(ot())if(typeof M=="object")p=M;else{const A=window;if("solana"in A&&typeof A.solana=="object"&&("signIn"in A.solana&&typeof A.solana.signIn=="function"||"signMessage"in A.solana&&typeof A.solana.signMessage=="function"))p=A.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof M!="object"||!(d!=null&&d.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=M}const b=new URL((n=d==null?void 0:d.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in p&&p.signIn){const A=await p.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},d==null?void 0:d.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),H?{statement:H}:null));let V;if(Array.isArray(A)&&A[0]&&typeof A[0]=="object")V=A[0];else if(A&&typeof A=="object"&&"signedMessage"in A&&"signature"in A)V=A;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)v=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),E=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in p)||typeof p.signMessage!="function"||!("publicKey"in p)||typeof p!="object"||!p.publicKey||!("toBase58"in p.publicKey)||typeof p.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${b.host} wants you to sign in with your Solana account:`,p.publicKey.toBase58(),...H?["",H,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(s=(r=d==null?void 0:d.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=d==null?void 0:d.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${d.signInWithSolana.notBefore}`]:[],...!((o=d==null?void 0:d.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${d.signInWithSolana.expirationTime}`]:[],...!((a=d==null?void 0:d.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${d.signInWithSolana.chainId}`]:[],...!((l=d==null?void 0:d.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${d.signInWithSolana.nonce}`]:[],...!((c=d==null?void 0:d.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${d.signInWithSolana.requestId}`]:[],...!((h=(u=d==null?void 0:d.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...d.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const A=await p.signMessage(new TextEncoder().encode(v),"utf8");if(!A||!(A instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=A}}try{const{data:k,error:M}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:tp(E)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Tt});if(M)throw M;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new jr}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:M})}catch(k){if(te(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(t){const n=await Dr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Tt});if(await Fr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new jr}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(te(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Tt}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new jr}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await mn(this.storage,this.storageKey));const{error:h}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:c,error:u}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Lr("You must provide either an email or phone number.")}catch(a){if(te(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Tt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await mn(this.storage,this.storageKey)),await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:bp})}catch(i){if(te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new jt;const{error:s}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Lr("You must provide either an email or phone number and a type")}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Dr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Hs:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ut}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jt}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ut})})}catch(n){if(te(n))return Kd(n)&&(await this._removeSession(),await Fr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new jt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await mn(this.storage,this.storageKey));const{data:c,error:u}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ut});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new jt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Js(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(te(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new jt;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!ot())throw new Nr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Nr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new na("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Nr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new na("No code detected.");const{data:H,error:d}=await this._exchangeCodeForSession(t.code);if(d)throw d;const p=new URL(window.location.href);return p.searchParams.delete("code"),window.history.replaceState(window.history.state,"",p.toString()),{data:{session:H.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=t;if(!i||!a||!o||!c)throw new Nr("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;l&&(f=parseInt(l));const m=f-u;m*1e3<=wn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,u);const{data:E,error:k}=await this._getUser(i);if(k)throw k;const M={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:M,redirectType:t.type},error:null}}catch(r){if(te(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Dr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(Wd(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Fr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=rp(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await mn(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ot()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(te(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ap(async s=>(s>0&&await op(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Tt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Vs(i)&&Date.now()+o-r<wn})}catch(r){if(this._debug(n,"error",r),te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ot()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Dr(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Hs;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Hs}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Vs(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new As;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new jt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),te(i)){const o={session:null,error:i};return Vs(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await su(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Fr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ot()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),wn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${wn}ms, refresh threshold is ${wi} ticks`),s<=wi&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof iu)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ot()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await mn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:c}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Js(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r||(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+Vd>Date.now()))return r;const{data:s,error:i}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new ir("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===t),!r)throw new ir("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};r=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Js(r);if(pp(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const c=gp(s.alg),u=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,ep(`${a}.${l}`)))throw new ir("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}}pr.nextInstanceID=0;const Rp=pr;class Mp extends Rp{constructor(t){super(t)}}var Ip=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(e,t||[])).next())})};class jp{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Dd(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:Cd,realtime:Rd,auth:Object.assign(Object.assign({},Pd),{storageKey:c}),global:$d},h=Fd(r??{},u);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Ld(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Zf(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ff(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ed(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Ip(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Mp({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new fd(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Lp=(e,t,n)=>new jp(e,t,n),Np="https://kueodidcmdsxaoctjtug.supabase.co/",Dp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt1ZW9kaWRjbWRzeGFvY3RqdHVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NzE0NzYsImV4cCI6MjA2NTI0NzQ3Nn0.zuRgrGhf-PwpeX_1yJaUxXda4-uKw4Fk6gxrhcelpZI",no=Lp(Np,Dp),Fp="admin@monapp.local";async function Up(e){const{data:t,error:n}=await no.auth.signInWithPassword({email:Fp,password:e});return n?(console.error("Erreur login:",n.message),!1):!0}function ou(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function au(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Bp(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&++n}return n}class qp extends Map{constructor(t,n=Jp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(ha(this,t))}has(t){return super.has(ha(this,t))}set(t,n){return super.set(Hp(this,t),n)}delete(t){return super.delete(Vp(this,t))}}function ha({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Hp({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Vp({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Jp(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fa(e){return e}function Wp(e,...t){return Kp(e,fa,fa,t)}function Kp(e,t,n,r){return function s(i,o){if(o>=r.length)return n(i);const a=new qp,l=r[o++];let c=-1;for(const u of i){const h=l(u,++c,i),f=a.get(h);f?f.push(u):a.set(h,[u])}for(const[u,h]of a)a.set(u,s(h,o));return t(a)}(e,0)}function lu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function zp(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function uu(e,t){let n=0,r=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(++n,r+=s);else{let s=-1;for(let i of e)(i=t(i,++s,e))!=null&&(i=+i)>=i&&(++n,r+=i)}if(n)return r/n}function Gp(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++r<s;)i[r]=e+r*n;return i}function Si(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let s of e)(s=+t(s,++r,e))&&(n+=s)}return n}var Yp={value:()=>{}};function cu(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zr(n)}function zr(e){this._=e}function Xp(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zr.prototype=cu.prototype={constructor:zr,on:function(e,t){var n=this._,r=Xp(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=Qp(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=da(n[s],e.name,t);else if(t==null)for(s in n)n[s]=da(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new zr(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function Qp(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function da(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Yp,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ki="http://www.w3.org/1999/xhtml";const pa={svg:"http://www.w3.org/2000/svg",xhtml:ki,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Os(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pa.hasOwnProperty(t)?{space:pa[t],local:e}:e}function Zp(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ki&&t.documentElement.namespaceURI===ki?t.createElement(e):t.createElementNS(n,e)}}function eg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ro(e){var t=Os(e);return(t.local?eg:Zp)(t)}function tg(){}function so(e){return e==null?tg:function(){return this.querySelector(e)}}function ng(e){typeof e!="function"&&(e=so(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),l,c,u=0;u<o;++u)(l=i[u])&&(c=e.call(l,l.__data__,u,i))&&("__data__"in l&&(c.__data__=l.__data__),a[u]=c);return new nt(r,this._parents)}function rg(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function sg(){return[]}function hu(e){return e==null?sg:function(){return this.querySelectorAll(e)}}function ig(e){return function(){return rg(e.apply(this,arguments))}}function og(e){typeof e=="function"?e=ig(e):e=hu(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&(r.push(e.call(l,l.__data__,c,o)),s.push(l));return new nt(r,s)}function fu(e){return function(){return this.matches(e)}}function du(e){return function(t){return t.matches(e)}}var ag=Array.prototype.find;function lg(e){return function(){return ag.call(this.children,e)}}function ug(){return this.firstElementChild}function cg(e){return this.select(e==null?ug:lg(typeof e=="function"?e:du(e)))}var hg=Array.prototype.filter;function fg(){return Array.from(this.children)}function dg(e){return function(){return hg.call(this.children,e)}}function pg(e){return this.selectAll(e==null?fg:dg(typeof e=="function"?e:du(e)))}function gg(e){typeof e!="function"&&(e=fu(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new nt(r,this._parents)}function pu(e){return new Array(e.length)}function mg(){return new nt(this._enter||this._groups.map(pu),this._parents)}function cs(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}cs.prototype={constructor:cs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function _g(e){return function(){return e}}function vg(e,t,n,r,s,i){for(var o=0,a,l=t.length,c=i.length;o<c;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new cs(e,i[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function yg(e,t,n,r,s,i,o){var a,l,c=new Map,u=t.length,h=i.length,f=new Array(u),m;for(a=0;a<u;++a)(l=t[a])&&(f[a]=m=o.call(l,l.__data__,a,t)+"",c.has(m)?s[a]=l:c.set(m,l));for(a=0;a<h;++a)m=o.call(e,i[a],a,i)+"",(l=c.get(m))?(r[a]=l,l.__data__=i[a],c.delete(m)):n[a]=new cs(e,i[a]);for(a=0;a<u;++a)(l=t[a])&&c.get(f[a])===l&&(s[a]=l)}function wg(e){return e.__data__}function bg(e,t){if(!arguments.length)return Array.from(this,wg);var n=t?yg:vg,r=this._parents,s=this._groups;typeof e!="function"&&(e=_g(e));for(var i=s.length,o=new Array(i),a=new Array(i),l=new Array(i),c=0;c<i;++c){var u=r[c],h=s[c],f=h.length,m=xg(e.call(u,u&&u.__data__,c,r)),v=m.length,E=a[c]=new Array(v),k=o[c]=new Array(v),M=l[c]=new Array(f);n(u,h,E,k,M,m,t);for(var H=0,d=0,p,b;H<v;++H)if(p=E[H]){for(H>=d&&(d=H+1);!(b=k[d])&&++d<v;);p._next=b||null}}return o=new nt(o,r),o._enter=a,o._exit=l,o}function xg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Sg(){return new nt(this._exit||this._groups.map(pu),this._parents)}function kg(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function Tg(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),l=0;l<o;++l)for(var c=n[l],u=r[l],h=c.length,f=a[l]=new Array(h),m,v=0;v<h;++v)(m=c[v]||u[v])&&(f[v]=m);for(;l<s;++l)a[l]=n[l];return new nt(a,this._parents)}function Eg(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Ag(e){e||(e=Og);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,l=s[i]=new Array(a),c,u=0;u<a;++u)(c=o[u])&&(l[u]=c);l.sort(t)}return new nt(s,this._parents).order()}function Og(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $g(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Cg(){return Array.from(this)}function Pg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function Rg(){let e=0;for(const t of this)++e;return e}function Mg(){return!this.node()}function Ig(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function jg(e){return function(){this.removeAttribute(e)}}function Lg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ng(e,t){return function(){this.setAttribute(e,t)}}function Dg(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Fg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ug(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Bg(e,t){var n=Os(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Lg:jg:typeof t=="function"?n.local?Ug:Fg:n.local?Dg:Ng)(n,t))}function gu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function qg(e){return function(){this.style.removeProperty(e)}}function Hg(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Vg(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Jg(e,t,n){return arguments.length>1?this.each((t==null?qg:typeof t=="function"?Vg:Hg)(e,t,n??"")):Mn(this.node(),e)}function Mn(e,t){return e.style.getPropertyValue(t)||gu(e).getComputedStyle(e,null).getPropertyValue(t)}function Wg(e){return function(){delete this[e]}}function Kg(e,t){return function(){this[e]=t}}function zg(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Gg(e,t){return arguments.length>1?this.each((t==null?Wg:typeof t=="function"?zg:Kg)(e,t)):this.node()[e]}function mu(e){return e.trim().split(/^|\s+/)}function io(e){return e.classList||new _u(e)}function _u(e){this._node=e,this._names=mu(e.getAttribute("class")||"")}_u.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vu(e,t){for(var n=io(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function yu(e,t){for(var n=io(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Yg(e){return function(){vu(this,e)}}function Xg(e){return function(){yu(this,e)}}function Qg(e,t){return function(){(t.apply(this,arguments)?vu:yu)(this,e)}}function Zg(e,t){var n=mu(e+"");if(arguments.length<2){for(var r=io(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?Qg:t?Yg:Xg)(n,t))}function em(){this.textContent=""}function tm(e){return function(){this.textContent=e}}function nm(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function rm(e){return arguments.length?this.each(e==null?em:(typeof e=="function"?nm:tm)(e)):this.node().textContent}function sm(){this.innerHTML=""}function im(e){return function(){this.innerHTML=e}}function om(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function am(e){return arguments.length?this.each(e==null?sm:(typeof e=="function"?om:im)(e)):this.node().innerHTML}function lm(){this.nextSibling&&this.parentNode.appendChild(this)}function um(){return this.each(lm)}function cm(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hm(){return this.each(cm)}function fm(e){var t=typeof e=="function"?e:ro(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function dm(){return null}function pm(e,t){var n=typeof e=="function"?e:ro(e),r=t==null?dm:typeof t=="function"?t:so(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function gm(){var e=this.parentNode;e&&e.removeChild(this)}function mm(){return this.each(gm)}function _m(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vm(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ym(e){return this.select(e?vm:_m)}function wm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function bm(e){return function(t){e.call(this,t,this.__data__)}}function xm(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Sm(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function km(e,t,n){return function(){var r=this.__on,s,i=bm(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function Tm(e,t,n){var r=xm(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,c=a.length,u;l<c;++l)for(s=0,u=a[l];s<i;++s)if((o=r[s]).type===u.type&&o.name===u.name)return u.value}return}for(a=t?km:Sm,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function wu(e,t,n){var r=gu(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function Em(e,t){return function(){return wu(this,e,t)}}function Am(e,t){return function(){return wu(this,e,t.apply(this,arguments))}}function Om(e,t){return this.each((typeof t=="function"?Am:Em)(e,t))}function*$m(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var bu=[null];function nt(e,t){this._groups=e,this._parents=t}function Er(){return new nt([[document.documentElement]],bu)}function Cm(){return this}nt.prototype=Er.prototype={constructor:nt,select:ng,selectAll:og,selectChild:cg,selectChildren:pg,filter:gg,data:bg,enter:mg,exit:Sg,join:kg,merge:Tg,selection:Cm,order:Eg,sort:Ag,call:$g,nodes:Cg,node:Pg,size:Rg,empty:Mg,each:Ig,attr:Bg,style:Jg,property:Gg,classed:Zg,text:rm,html:am,raise:um,lower:hm,append:fm,insert:pm,remove:mm,clone:ym,datum:wm,on:Tm,dispatch:Om,[Symbol.iterator]:$m};function Pm(e){return typeof e=="string"?new nt([[document.querySelector(e)]],[document.documentElement]):new nt([[e]],bu)}function Rm(e){return Pm(ro(e).call(document.documentElement))}function oo(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ar(){}var gr=.7,hs=1/gr,$n="\\s*([+-]?\\d+)\\s*",mr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Mm=/^#([0-9a-f]{3,8})$/,Im=new RegExp(`^rgb\\(${$n},${$n},${$n}\\)$`),jm=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),Lm=new RegExp(`^rgba\\(${$n},${$n},${$n},${mr}\\)$`),Nm=new RegExp(`^rgba\\(${vt},${vt},${vt},${mr}\\)$`),Dm=new RegExp(`^hsl\\(${mr},${vt},${vt}\\)$`),Fm=new RegExp(`^hsla\\(${mr},${vt},${vt},${mr}\\)$`),ga={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};oo(Ar,_r,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ma,formatHex:ma,formatHex8:Um,formatHsl:Bm,formatRgb:_a,toString:_a});function ma(){return this.rgb().formatHex()}function Um(){return this.rgb().formatHex8()}function Bm(){return Su(this).formatHsl()}function _a(){return this.rgb().formatRgb()}function _r(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Mm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?va(t):n===3?new Qe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ur(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ur(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Im.exec(e))?new Qe(t[1],t[2],t[3],1):(t=jm.exec(e))?new Qe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Lm.exec(e))?Ur(t[1],t[2],t[3],t[4]):(t=Nm.exec(e))?Ur(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Dm.exec(e))?ba(t[1],t[2]/100,t[3]/100,1):(t=Fm.exec(e))?ba(t[1],t[2]/100,t[3]/100,t[4]):ga.hasOwnProperty(e)?va(ga[e]):e==="transparent"?new Qe(NaN,NaN,NaN,0):null}function va(e){return new Qe(e>>16&255,e>>8&255,e&255,1)}function Ur(e,t,n,r){return r<=0&&(e=t=n=NaN),new Qe(e,t,n,r)}function qm(e){return e instanceof Ar||(e=_r(e)),e?(e=e.rgb(),new Qe(e.r,e.g,e.b,e.opacity)):new Qe}function Ti(e,t,n,r){return arguments.length===1?qm(e):new Qe(e,t,n,r??1)}function Qe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}oo(Qe,Ti,xu(Ar,{brighter(e){return e=e==null?hs:Math.pow(hs,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qe(sn(this.r),sn(this.g),sn(this.b),fs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ya,formatHex:ya,formatHex8:Hm,formatRgb:wa,toString:wa}));function ya(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function Hm(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function wa(){const e=fs(this.opacity);return`${e===1?"rgb(":"rgba("}${sn(this.r)}, ${sn(this.g)}, ${sn(this.b)}${e===1?")":`, ${e})`}`}function fs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tn(e){return e=sn(e),(e<16?"0":"")+e.toString(16)}function ba(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ut(e,t,n,r)}function Su(e){if(e instanceof ut)return new ut(e.h,e.s,e.l,e.opacity);if(e instanceof Ar||(e=_r(e)),!e)return new ut;if(e instanceof ut)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new ut(o,a,l,e.opacity)}function Vm(e,t,n,r){return arguments.length===1?Su(e):new ut(e,t,n,r??1)}function ut(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}oo(ut,Vm,xu(Ar,{brighter(e){return e=e==null?hs:Math.pow(hs,e),new ut(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?gr:Math.pow(gr,e),new ut(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Qe(Ks(e>=240?e-240:e+120,s,r),Ks(e,s,r),Ks(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new ut(xa(this.h),Br(this.s),Br(this.l),fs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fs(this.opacity);return`${e===1?"hsl(":"hsla("}${xa(this.h)}, ${Br(this.s)*100}%, ${Br(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xa(e){return e=(e||0)%360,e<0?e+360:e}function Br(e){return Math.max(0,Math.min(1,e||0))}function Ks(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ku=e=>()=>e;function Jm(e,t){return function(n){return e+n*t}}function Wm(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Km(e){return(e=+e)==1?Tu:function(t,n){return n-t?Wm(t,n,e):ku(isNaN(t)?n:t)}}function Tu(e,t){var n=t-e;return n?Jm(e,n):ku(isNaN(e)?t:e)}const Sa=function e(t){var n=Km(t);function r(s,i){var o=n((s=Ti(s)).r,(i=Ti(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),c=Tu(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=a(u),s.b=l(u),s.opacity=c(u),s+""}}return r.gamma=e,r}(1);function Ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ei=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zs=new RegExp(Ei.source,"g");function zm(e){return function(){return e}}function Gm(e){return function(t){return e(t)+""}}function Ym(e,t){var n=Ei.lastIndex=zs.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Ei.exec(e))&&(s=zs.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Ft(r,s)})),n=zs.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?Gm(l[0].x):zm(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)a[(h=l[u]).i]=h.x(c);return a.join("")})}var ka=180/Math.PI,Ai={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Eu(e,t,n,r,s,i){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*ka,skewX:Math.atan(l)*ka,scaleX:o,scaleY:a}}var qr;function Xm(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ai:Eu(t.a,t.b,t.c,t.d,t.e,t.f)}function Qm(e){return e==null||(qr||(qr=document.createElementNS("http://www.w3.org/2000/svg","g")),qr.setAttribute("transform",e),!(e=qr.transform.baseVal.consolidate()))?Ai:(e=e.matrix,Eu(e.a,e.b,e.c,e.d,e.e,e.f))}function Au(e,t,n,r){function s(c){return c.length?c.pop()+" ":""}function i(c,u,h,f,m,v){if(c!==h||u!==f){var E=m.push("translate(",null,t,null,n);v.push({i:E-4,x:Ft(c,h)},{i:E-2,x:Ft(u,f)})}else(h||f)&&m.push("translate("+h+t+f+n)}function o(c,u,h,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:h.push(s(h)+"rotate(",null,r)-2,x:Ft(c,u)})):u&&h.push(s(h)+"rotate("+u+r)}function a(c,u,h,f){c!==u?f.push({i:h.push(s(h)+"skewX(",null,r)-2,x:Ft(c,u)}):u&&h.push(s(h)+"skewX("+u+r)}function l(c,u,h,f,m,v){if(c!==h||u!==f){var E=m.push(s(m)+"scale(",null,",",null,")");v.push({i:E-4,x:Ft(c,h)},{i:E-2,x:Ft(u,f)})}else(h!==1||f!==1)&&m.push(s(m)+"scale("+h+","+f+")")}return function(c,u){var h=[],f=[];return c=e(c),u=e(u),i(c.translateX,c.translateY,u.translateX,u.translateY,h,f),o(c.rotate,u.rotate,h,f),a(c.skewX,u.skewX,h,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,f),c=u=null,function(m){for(var v=-1,E=f.length,k;++v<E;)h[(k=f[v]).i]=k.x(m);return h.join("")}}}var Zm=Au(Xm,"px, ","px)","deg)"),e_=Au(Qm,", ",")",")"),In=0,Kn=0,qn=0,Ou=1e3,ds,zn,ps=0,on=0,$s=0,vr=typeof performance=="object"&&performance.now?performance:Date,$u=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ao(){return on||($u(t_),on=vr.now()+$s)}function t_(){on=0}function gs(){this._call=this._time=this._next=null}gs.prototype=Cu.prototype={constructor:gs,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ao():+n)+(t==null?0:+t),!this._next&&zn!==this&&(zn?zn._next=this:ds=this,zn=this),this._call=e,this._time=n,Oi()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oi())}};function Cu(e,t,n){var r=new gs;return r.restart(e,t,n),r}function n_(){ao(),++In;for(var e=ds,t;e;)(t=on-e._time)>=0&&e._call.call(void 0,t),e=e._next;--In}function Ta(){on=(ps=vr.now())+$s,In=Kn=0;try{n_()}finally{In=0,s_(),on=0}}function r_(){var e=vr.now(),t=e-ps;t>Ou&&($s-=t,ps=e)}function s_(){for(var e,t=ds,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:ds=n);zn=e,Oi(r)}function Oi(e){if(!In){Kn&&(Kn=clearTimeout(Kn));var t=e-on;t>24?(e<1/0&&(Kn=setTimeout(Ta,e-vr.now()-$s)),qn&&(qn=clearInterval(qn))):(qn||(ps=vr.now(),qn=setInterval(r_,Ou)),In=1,$u(Ta))}}function Ea(e,t,n){var r=new gs;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var i_=cu("start","end","cancel","interrupt"),o_=[],Pu=0,Aa=1,$i=2,Gr=3,Oa=4,Ci=5,Yr=6;function Cs(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;a_(e,n,{name:t,index:r,group:s,on:i_,tween:o_,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Pu})}function lo(e,t){var n=ht(e,t);if(n.state>Pu)throw new Error("too late; already scheduled");return n}function bt(e,t){var n=ht(e,t);if(n.state>Gr)throw new Error("too late; already running");return n}function ht(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function a_(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Cu(i,0,n.time);function i(c){n.state=Aa,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var u,h,f,m;if(n.state!==Aa)return l();for(u in r)if(m=r[u],m.name===n.name){if(m.state===Gr)return Ea(o);m.state===Oa?(m.state=Yr,m.timer.stop(),m.on.call("interrupt",e,e.__data__,m.index,m.group),delete r[u]):+u<t&&(m.state=Yr,m.timer.stop(),m.on.call("cancel",e,e.__data__,m.index,m.group),delete r[u])}if(Ea(function(){n.state===Gr&&(n.state=Oa,n.timer.restart(a,n.delay,n.time),a(c))}),n.state=$i,n.on.call("start",e,e.__data__,n.index,n.group),n.state===$i){for(n.state=Gr,s=new Array(f=n.tween.length),u=0,h=-1;u<f;++u)(m=n.tween[u].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=m);s.length=h+1}}function a(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=Ci,1),h=-1,f=s.length;++h<f;)s[h].call(e,u);n.state===Ci&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Yr,n.timer.stop(),delete r[t];for(var c in r)return;delete e.__transition}}function l_(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>$i&&r.state<Ci,r.state=Yr,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function u_(e){return this.each(function(){l_(this,e)})}function c_(e,t){var n,r;return function(){var s=bt(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function h_(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=bt(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},l=0,c=s.length;l<c;++l)if(s[l].name===t){s[l]=a;break}l===c&&s.push(a)}i.tween=s}}function f_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ht(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?c_:h_)(n,e,t))}function uo(e,t,n){var r=e._id;return e.each(function(){var s=bt(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return ht(s,r).value[t]}}function Ru(e,t){var n;return(typeof t=="number"?Ft:t instanceof _r?Sa:(n=_r(t))?(t=n,Sa):Ym)(e,t)}function d_(e){return function(){this.removeAttribute(e)}}function p_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function g_(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function m_(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function __(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function v_(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function y_(e,t){var n=Os(e),r=n==="transform"?e_:Ru;return this.attrTween(e,typeof t=="function"?(n.local?v_:__)(n,r,uo(this,"attr."+e,t)):t==null?(n.local?p_:d_)(n):(n.local?m_:g_)(n,r,t))}function w_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function b_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function x_(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&b_(e,i)),n}return s._value=t,s}function S_(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&w_(e,i)),n}return s._value=t,s}function k_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Os(e);return this.tween(n,(r.local?x_:S_)(r,t))}function T_(e,t){return function(){lo(this,e).delay=+t.apply(this,arguments)}}function E_(e,t){return t=+t,function(){lo(this,e).delay=t}}function A_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?T_:E_)(t,e)):ht(this.node(),t).delay}function O_(e,t){return function(){bt(this,e).duration=+t.apply(this,arguments)}}function $_(e,t){return t=+t,function(){bt(this,e).duration=t}}function C_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?O_:$_)(t,e)):ht(this.node(),t).duration}function P_(e,t){if(typeof t!="function")throw new Error;return function(){bt(this,e).ease=t}}function R_(e){var t=this._id;return arguments.length?this.each(P_(t,e)):ht(this.node(),t).ease}function M_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;bt(this,e).ease=n}}function I_(e){if(typeof e!="function")throw new Error;return this.each(M_(this._id,e))}function j_(e){typeof e!="function"&&(e=fu(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,c=0;c<o;++c)(l=i[c])&&e.call(l,l.__data__,c,i)&&a.push(l);return new Rt(r,this._parents,this._name,this._id)}function L_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var l=t[a],c=n[a],u=l.length,h=o[a]=new Array(u),f,m=0;m<u;++m)(f=l[m]||c[m])&&(h[m]=f);for(;a<r;++a)o[a]=t[a];return new Rt(o,this._parents,this._name,this._id)}function N_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function D_(e,t,n){var r,s,i=N_(t)?lo:bt;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function F_(e,t){var n=this._id;return arguments.length<2?ht(this.node(),n).on.on(e):this.each(D_(n,e,t))}function U_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function B_(){return this.on("end.remove",U_(this._id))}function q_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=so(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],l=a.length,c=i[o]=new Array(l),u,h,f=0;f<l;++f)(u=a[f])&&(h=e.call(u,u.__data__,f,a))&&("__data__"in u&&(h.__data__=u.__data__),c[f]=h,Cs(c[f],t,n,f,c,ht(u,n)));return new Rt(i,this._parents,t,n)}function H_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=hu(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var l=r[a],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var f=e.call(u,u.__data__,h,l),m,v=ht(u,n),E=0,k=f.length;E<k;++E)(m=f[E])&&Cs(m,t,n,E,f,v);i.push(f),o.push(u)}return new Rt(i,o,t,n)}var V_=Er.prototype.constructor;function J_(){return new V_(this._groups,this._parents)}function W_(e,t){var n,r,s;return function(){var i=Mn(this,e),o=(this.style.removeProperty(e),Mn(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function Mu(e){return function(){this.style.removeProperty(e)}}function K_(e,t,n){var r,s=n+"",i;return function(){var o=Mn(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function z_(e,t,n){var r,s,i;return function(){var o=Mn(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Mn(this,e))),o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a))}}function G_(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var l=bt(this,e),c=l.on,u=l.value[i]==null?a||(a=Mu(t)):void 0;(c!==n||s!==u)&&(r=(n=c).copy()).on(o,s=u),l.on=r}}function Y_(e,t,n){var r=(e+="")=="transform"?Zm:Ru;return t==null?this.styleTween(e,W_(e,r)).on("end.style."+e,Mu(e)):typeof t=="function"?this.styleTween(e,z_(e,r,uo(this,"style."+e,t))).each(G_(this._id,e)):this.styleTween(e,K_(e,r,t),n).on("end.style."+e,null)}function X_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Q_(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&X_(e,o,n)),r}return i._value=t,i}function Z_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Q_(e,t,n??""))}function e0(e){return function(){this.textContent=e}}function t0(e){return function(){var t=e(this);this.textContent=t??""}}function n0(e){return this.tween("text",typeof e=="function"?t0(uo(this,"text",e)):e0(e==null?"":e+""))}function r0(e){return function(t){this.textContent=e.call(this,t)}}function s0(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&r0(s)),t}return r._value=e,r}function i0(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,s0(e))}function o0(){for(var e=this._name,t=this._id,n=Iu(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)if(l=o[c]){var u=ht(l,t);Cs(l,e,n,c,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Rt(r,this._parents,e,n)}function a0(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--s===0&&i()}};n.each(function(){var c=bt(this,r),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),c.on=t}),s===0&&i()})}var l0=0;function Rt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Iu(){return++l0}var kt=Er.prototype;Rt.prototype={constructor:Rt,select:q_,selectAll:H_,selectChild:kt.selectChild,selectChildren:kt.selectChildren,filter:j_,merge:L_,selection:J_,transition:o0,call:kt.call,nodes:kt.nodes,node:kt.node,size:kt.size,empty:kt.empty,each:kt.each,on:F_,attr:y_,attrTween:k_,style:Y_,styleTween:Z_,text:n0,textTween:i0,remove:B_,tween:f_,delay:A_,duration:C_,ease:R_,easeVarying:I_,end:a0,[Symbol.iterator]:kt[Symbol.iterator]};function u0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var c0={time:null,delay:0,duration:250,ease:u0};function h0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function f0(e){var t,n;e instanceof Rt?(t=e._id,e=e._name):(t=Iu(),(n=c0).time=ao(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,c=0;c<a;++c)(l=o[c])&&Cs(l,e,t,c,o,n||h0(l,t));return new Rt(r,this._parents,e,t)}Er.prototype.interrupt=u_;Er.prototype.transition=f0;const Pi=Math.PI,Ri=2*Pi,Qt=1e-6,d0=Ri-Qt;function ju(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function p0(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ju;const n=10**t;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class g0{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ju:p0(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,s){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(t,n,r,s,i,o){this._append`C${+t},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,s,i){if(t=+t,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=r-t,c=s-n,u=o-t,h=a-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Qt)if(!(Math.abs(h*l-c*u)>Qt)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let m=r-o,v=s-a,E=l*l+c*c,k=m*m+v*v,M=Math.sqrt(E),H=Math.sqrt(f),d=i*Math.tan((Pi-Math.acos((E+f-k)/(2*M*H)))/2),p=d/H,b=d/M;Math.abs(p-1)>Qt&&this._append`L${t+p*u},${n+p*h}`,this._append`A${i},${i},0,0,${+(h*m>u*v)},${this._x1=t+b*l},${this._y1=n+b*c}`}}arc(t,n,r,s,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(s),l=r*Math.sin(s),c=t+a,u=n+l,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>Qt||Math.abs(this._y1-u)>Qt)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%Ri+Ri),f>d0?this._append`A${r},${r},0,1,${h},${t-a},${n-l}A${r},${r},0,1,${h},${this._x1=c},${this._y1=u}`:f>Qt&&this._append`A${r},${r},0,${+(f>=Pi)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function It(e){return function(){return e}}const $a=Math.abs,De=Math.atan2,Gt=Math.cos,m0=Math.max,Gs=Math.min,dt=Math.sin,bn=Math.sqrt,Ye=1e-12,yr=Math.PI,ms=yr/2,_0=2*yr;function v0(e){return e>1?0:e<-1?yr:Math.acos(e)}function Ca(e){return e>=1?ms:e<=-1?-ms:Math.asin(e)}function y0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new g0(t)}function w0(e){return e.innerRadius}function b0(e){return e.outerRadius}function x0(e){return e.startAngle}function S0(e){return e.endAngle}function k0(e){return e&&e.padAngle}function T0(e,t,n,r,s,i,o,a){var l=n-e,c=r-t,u=o-s,h=a-i,f=h*l-u*c;if(!(f*f<Ye))return f=(u*(t-i)-h*(e-s))/f,[e+f*l,t+f*c]}function Hr(e,t,n,r,s,i,o){var a=e-n,l=t-r,c=(o?i:-i)/bn(a*a+l*l),u=c*l,h=-c*a,f=e+u,m=t+h,v=n+u,E=r+h,k=(f+v)/2,M=(m+E)/2,H=v-f,d=E-m,p=H*H+d*d,b=s-i,A=f*E-v*m,V=(d<0?-1:1)*bn(m0(0,b*b*p-A*A)),ee=(A*d-H*V)/p,de=(-A*H-d*V)/p,pe=(A*d+H*V)/p,ae=(-A*H+d*V)/p,R=ee-k,$=de-M,B=pe-k,me=ae-M;return R*R+$*$>B*B+me*me&&(ee=pe,de=ae),{cx:ee,cy:de,x01:-u,y01:-h,x11:ee*(s/b-1),y11:de*(s/b-1)}}function E0(){var e=w0,t=b0,n=It(0),r=null,s=x0,i=S0,o=k0,a=null,l=y0(c);function c(){var u,h,f=+e.apply(this,arguments),m=+t.apply(this,arguments),v=s.apply(this,arguments)-ms,E=i.apply(this,arguments)-ms,k=$a(E-v),M=E>v;if(a||(a=u=l()),m<f&&(h=m,m=f,f=h),!(m>Ye))a.moveTo(0,0);else if(k>_0-Ye)a.moveTo(m*Gt(v),m*dt(v)),a.arc(0,0,m,v,E,!M),f>Ye&&(a.moveTo(f*Gt(E),f*dt(E)),a.arc(0,0,f,E,v,M));else{var H=v,d=E,p=v,b=E,A=k,V=k,ee=o.apply(this,arguments)/2,de=ee>Ye&&(r?+r.apply(this,arguments):bn(f*f+m*m)),pe=Gs($a(m-f)/2,+n.apply(this,arguments)),ae=pe,R=pe,$,B;if(de>Ye){var me=Ca(de/f*dt(ee)),ve=Ca(de/m*dt(ee));(A-=me*2)>Ye?(me*=M?1:-1,p+=me,b-=me):(A=0,p=b=(v+E)/2),(V-=ve*2)>Ye?(ve*=M?1:-1,H+=ve,d-=ve):(V=0,H=d=(v+E)/2)}var le=m*Gt(H),re=m*dt(H),Oe=f*Gt(b),S=f*dt(b);if(pe>Ye){var w=m*Gt(d),q=m*dt(d),z=f*Gt(p),F=f*dt(p),J;if(k<yr)if(J=T0(le,re,z,F,w,q,Oe,S)){var X=le-J[0],K=re-J[1],Z=w-J[0],ue=q-J[1],ce=1/dt(v0((X*Z+K*ue)/(bn(X*X+K*K)*bn(Z*Z+ue*ue)))/2),_e=bn(J[0]*J[0]+J[1]*J[1]);ae=Gs(pe,(f-_e)/(ce-1)),R=Gs(pe,(m-_e)/(ce+1))}else ae=R=0}V>Ye?R>Ye?($=Hr(z,F,le,re,m,R,M),B=Hr(w,q,Oe,S,m,R,M),a.moveTo($.cx+$.x01,$.cy+$.y01),R<pe?a.arc($.cx,$.cy,R,De($.y01,$.x01),De(B.y01,B.x01),!M):(a.arc($.cx,$.cy,R,De($.y01,$.x01),De($.y11,$.x11),!M),a.arc(0,0,m,De($.cy+$.y11,$.cx+$.x11),De(B.cy+B.y11,B.cx+B.x11),!M),a.arc(B.cx,B.cy,R,De(B.y11,B.x11),De(B.y01,B.x01),!M))):(a.moveTo(le,re),a.arc(0,0,m,H,d,!M)):a.moveTo(le,re),!(f>Ye)||!(A>Ye)?a.lineTo(Oe,S):ae>Ye?($=Hr(Oe,S,w,q,f,-ae,M),B=Hr(le,re,z,F,f,-ae,M),a.lineTo($.cx+$.x01,$.cy+$.y01),ae<pe?a.arc($.cx,$.cy,ae,De($.y01,$.x01),De(B.y01,B.x01),!M):(a.arc($.cx,$.cy,ae,De($.y01,$.x01),De($.y11,$.x11),!M),a.arc(0,0,f,De($.cy+$.y11,$.cx+$.x11),De(B.cy+B.y11,B.cx+B.x11),M),a.arc(B.cx,B.cy,ae,De(B.y11,B.x11),De(B.y01,B.x01),!M))):a.arc(0,0,f,b,p,M)}if(a.closePath(),u)return a=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+s.apply(this,arguments)+ +i.apply(this,arguments))/2-yr/2;return[Gt(h)*u,dt(h)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:It(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:It(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:It(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:It(+u),c):r},c.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:It(+u),c):s},c.endAngle=function(u){return arguments.length?(i=typeof u=="function"?u:It(+u),c):i},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:It(+u),c):o},c.context=function(u){return arguments.length?(a=u??null,c):a},c}function Gn(e,t,n){this.k=e,this.x=t,this.y=n}Gn.prototype={constructor:Gn,scale:function(e){return e===1?this:new Gn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Gn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Gn.prototype;function Lu(e,t=null,n=800,r=!0){const s=A0(e),i=s.find(R=>R.id=="stats").parties,o=n??"100%",a=n+0,l=n??600,c=o/2,u=a/2,h=n*.45,f={bullOuter:h*.16,tripleInner:h*.4,tripleOuter:h*.45,doubleInner:h*.81,doubleOuter:h*.86},m=[11,14,9,12,5,20,1,18,4,13,6,10,15,2,17,3,19,7,16,8],v=20,E=2*Math.PI/v,k=Gp(v).map(R=>{const $=-Math.PI/2-E/2+R*E,B=$+E;return{index:R,number:m[R],start:$,end:B}}),M=Rm("svg").attr("viewBox",`0 0 ${l} ${l+0}`).style("width","100%").style("height","100%");M.append("rect").attr("x",0).attr("y",0).attr("width",l).attr("height",l+200).attr("fill","white").attr("rx",20).attr("ry",20);const H=r?30:0,d=M.append("g").attr("transform",`translate(${c},${u+H})`);function p(R,$){return E0().innerRadius(R).outerRadius($).startAngle(B=>B.start).endAngle(B=>B.end)}const b="white",A=1;d.selectAll(".segment").data(k).join("path").attr("class","segment").attr("id",R=>`segment-${R.number}`).attr("d",p(f.bullOuter,f.doubleOuter)).attr("fill",R=>{var $;return($=s.find(B=>B.id==R.number))==null?void 0:$.color}).attr("fill-opacity",1).attr("stroke",b).attr("stroke-width",A),d.selectAll(".single-inner").data(k).join("path").attr("class","single-inner").attr("id",R=>`single-inner-${R.number}`).attr("d",p(f.bullOuter,f.tripleInner)).attr("fill","none").attr("stroke",b).attr("stroke-width",A),d.selectAll(".single-outer").data(k).join("path").attr("class","single-outer").attr("id",R=>`single-outer-${R.number}`).attr("d",p(f.tripleOuter,f.doubleInner)).attr("fill","none").attr("stroke",b).attr("stroke-width",A),d.selectAll(".triple").data(k).join("path").attr("class","triple").attr("id",R=>`triple-${R.number}`).attr("d",p(f.tripleInner,f.tripleOuter)).attr("fill","none").attr("stroke",b).attr("stroke-width",A),d.selectAll(".double").data(k).join("path").attr("class","double").attr("id",R=>`double-${R.number}`).attr("d",p(f.doubleInner,f.doubleOuter)).attr("fill","none").attr("stroke",b).attr("stroke-width",A);const V=(f.doubleInner+f.doubleOuter)/2;d.selectAll(".double-point").data(k).join("circle").attr("class","double-point").attr("cx",R=>{const $=-Math.PI/2+R.index*E-Math.PI/2;return Math.cos($)*V}).attr("cy",R=>{const $=-Math.PI/2+R.index*E-Math.PI/2;return Math.sin($)*V}).attr("r",R=>{var B;const $=(B=s.find(me=>me.id==R.number))==null?void 0:B.double;if(i===1)return $*8;if($<.2)return 0;if($>=.2&&$<.3)return 8;if($>=.3)return 18}).attr("fill","#FFD700").attr("stroke","black").attr("stroke-width",2);const ee=(f.tripleInner+f.tripleOuter)/2;d.selectAll(".triple-point").data(k).join("circle").attr("class","triple-point").attr("cx",R=>{const $=-Math.PI/2+R.index*E-Math.PI/2;return Math.cos($)*ee}).attr("cy",R=>{const $=-Math.PI/2+R.index*E-Math.PI/2;return Math.sin($)*ee}).attr("r",R=>{var B;const $=(B=s.find(me=>me.id==R.number))==null?void 0:B.triple;if(i===1)return $*8;if($<.2)return 0;if($>=.2&&$<.3)return 8;if($>=.3)return 18}).attr("fill","#FFD700").attr("stroke","black").attr("stroke-width",2);const de=f.doubleOuter+20,pe=d.selectAll(".label-group").data(k).join("g").attr("class","label-group").attr("id",R=>`label-${R.number}`).attr("transform",R=>{const $=-Math.PI/2+R.index*E-Math.PI/2,B=Math.cos($)*de,me=Math.sin($)*de;return`translate(${B},${me})`});pe.append("circle").attr("r",15).attr("fill",R=>{var $;return(($=s.find(B=>B.id==R.number))==null?void 0:$.shanghai)>=1?"black":"none"}).attr("stroke","none"),pe.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",R=>{var $;return(($=s.find(B=>B.id==R.number))==null?void 0:$.shanghai)>=1?20:16}).attr("fill",R=>{var $;return(($=s.find(B=>B.id==R.number))==null?void 0:$.shanghai)>=1?"#FFD700":"#616161"}).attr("opacity",R=>{var $;return(($=s.find(B=>B.id==R.number))==null?void 0:$.hits)>=.75?1:0}).attr("font-weight",600).attr("font-family","Arial, Helvetica, sans-serif").text(R=>R.number),d.append("text").attr("class","center-text").attr("x",0).attr("y",-15).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",32).attr("fill","#521a3a").attr("font-weight","bold").attr("font-family","Arial, Helvetica, sans-serif").attr("stroke","white").attr("stroke-width",7).attr("stroke-linejoin","round").style("paint-order","stroke").text(Math.round(s.find(R=>R.id=="stats").hits)+"/60");let ae=[0,0,0];for(const R of i==1?e:e.flat())for(let $=0;$<3;$++)R[$]!==0&&ae[$]++;if(ae=ae.map(R=>R/i).map(R=>Math.round(R)),d.append("text").attr("class","center-text").attr("x",0).attr("y",11).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",20).attr("fill","#521a3a").attr("font-weight","bold").attr("font-family","Arial, Helvetica, sans-serif").attr("stroke","white").attr("stroke-width",7).attr("stroke-linejoin","round").style("paint-order","stroke").text(""+ae.join(" ")),d.append("text").attr("class","center-text").attr("x",0).attr("y",35).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",16).attr("fill","#521a3a").attr("font-weight","bold").attr("font-family","Arial, Helvetica, sans-serif").attr("stroke","white").attr("stroke-width",7).attr("stroke-linejoin","round").style("paint-order","stroke").text("("+s.find(R=>R.id=="stats").streak+")"),r){const R=Math.round(s.find(B=>B.id=="stats").score)+" points",$=t?t+" : "+R:R;M.append("text").attr("x",o/2).attr("y",40).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",40).attr("fill","#521a3a").attr("font-weight","bold").attr("font-family","Arial, Helvetica, sans-serif").text($)}return M.node()}function A0(e){let t,n,r=[],s=null,i=null,o;if(O0(e))o=R0,t=1,r=e;else if(Ys(e)){o=M0,i=lu(e.map(a=>Pa(a))),t=e.length;for(let a=0;a<20;a++){let l=e.map(c=>c[a]);r.push(l)}}return Ys(e)&&(s=P0(r),r=r.map(a=>a.flat())),n=r.map((a,l)=>{const c=new Set(a);return{id:l+1,hits:a.filter(u=>u!==0).length/t,single:a.filter(u=>u===1).length/t,double:a.filter(u=>u===2).length/t,triple:a.filter(u=>u===3).length/t,shanghai:s?s[l]:+(c.has(1)&&c.has(2)&&c.has(3)),color:o(a.filter(u=>u!==0).length/t)}}),n.push({id:"stats",parties:t,score:C0(r)/t,hits:$0(r)/t,streak:Ys(e)?i:Pa(r)}),n}function O0(e){return!Array.isArray(e)||e.length!==20?!1:e.every(t=>Array.isArray(t)&&t.length===3)}function Ys(e){return Array.isArray(e)?e.every(t=>Array.isArray(t)&&t.length===20&&t.every(n=>Array.isArray(n)&&n.length===3)):!1}function Pa(e){e=e.flat();let t=0,n=0;for(let r=0;r<e.length;r++)e[r]!==0?(n++,n>t&&(t=n)):n=0;return t}function $0(e){return e.flat().filter(t=>t!=0).length}function C0(e){return Si(e.map((t,n)=>Si(t)*(n+1)))}function P0(e){return e.map((t,n)=>t.reduce((s,i)=>{const o=new Set(i);return s+(o.has(1)&&o.has(2)&&o.has(3)?1:0)},0))}function R0(e){let t=["#fcc5c0","#f768a1","#7a0177"];switch(e){case 0:return"#FFFFFF";case 1:return t[0];case 2:return t[1];case 3:return t[2];default:return"#CCCCCC"}}function M0(e){let t=["#f2f2f2","#fde0dd","#fa9fb5","#ae017e","#49006a"];return e<.75?"white":e>=.75&&e<1?t[0]:e>=1&&e<1.25?t[1]:e>=1.25&&e<1.5?t[2]:e>=1.5&&e<1.75?t[3]:(e>=1.75&&e<=2,t[4])}const I0={class:"final-scores"},j0=["src"],L0={class:"final-player-info"},N0=["innerHTML"],D0={key:0,class:"action-buttons"},F0={__name:"GameStats",props:["sortedPlayers","humanPlayersSorted","robotName","stats","role","site"],setup(e){const t=e;async function n(){const i=Date.now(),o=t.sortedPlayers.map(c=>({player_id:c.id,name:c.name,timestamp:i,score:c.totalScore,hits:c.scores,site:t.site})),{data:a,error:l}=await no.from("scores").insert(o)}function r(){window.location.reload()}t.role==="admin"&&n();function s(i){return Lu(i.scores,i.name,600).outerHTML}return(i,o)=>(ie(),fe("div",null,[o[1]||(o[1]=_("h2",null,"Partie termine",-1)),_("ul",I0,[(ie(!0),fe(je,null,Cn(e.sortedPlayers,(a,l)=>(ie(),fe("li",{key:a.name,class:"final-score-item"},[a.name!==e.robotName?(ie(),fe(je,{key:0},[_("img",{src:a.avatar,alt:"avatar",class:"final-avatar-large"},null,8,j0),_("div",L0,[_("div",{class:"dartboard-container",innerHTML:s(a)},null,8,N0)])],64)):We("",!0)]))),128))]),_("p",null,[_("button",{onClick:r},"Rejouer")]),e.role==="admin"?(ie(),fe("div",D0,[_("a",{href:"#",onClick:o[0]||(o[0]=dr(a=>i.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):We("",!0)]))}},U0=Sr(F0,[["__scopeId","data-v-6977cd8c"]]),Nu=Object.assign({},{mean:uu,descending:au});function Xr(e){e=e.flat();let t=0,n=0;for(let r=0;r<e.length;r++)e[r]!==0?(n++,n>t&&(t=n)):n=0;return t}function Qr(e){e=e.flat();let t=0,n=0;for(let r=0;r<e.length;r++)e[r]===0?(n++,n>t&&(t=n)):n=0;return t}function Ra(){const e=new Date,t=e.getFullYear(),n=e.getMonth(),s=(n>=8?new Date(t,8,1):new Date(t-1,8,1)).getTime(),o=(n<=6?new Date(t,6,31):new Date(t+1,6,31)).getTime();return{septFirstLastYear:s,july31Next:o}}function Xs(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[1]===1&&n[2]===1&&n[3]===1}).length}function Qs(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[3]===2}).length}function Zs(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[3]===3}).length}function ei(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[2]===2}).length}function ti(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[2]===3}).length}function ni(e,t,n){let r=n.filter(i=>t.map(o=>o.timestamp).includes(i.timestamp)).map(i=>({timestamp:i.timestamp,name:i.name,score:i.score})),s=0;return t.map(i=>i.timestamp).forEach(i=>{var a;((a=r.filter(l=>l.timestamp==i).slice().sort((l,c)=>Nu.descending(l.score,c.score)).map(l=>l)[1])==null?void 0:a.name)==e&&s++}),s/t.length*100}function B0(e){const t=[...new Set(e.map(s=>s.name))];let n=[];return t.forEach(s=>{const i=e.filter(o=>o.name==s).map(o=>o.score).sort((o,a)=>a-o).slice(0,10);n.push({name:s,scores:i,mean:Nu.mean(i)})}),n.filter(s=>s.scores.length>=10).sort((s,i)=>i.mean-s.mean).filter(s=>s.name!=="Number One")}function q0(e){let t="<table>";return t+="<tbody>",[...e].forEach((n,r)=>{if(t+=`<tr><td>${ge(r+1)} ${n.name}</td><td>${n.mean}</td></tr>`,n.scores&&n.scores.length){const s=n.scores.sort().join(", ");t+=`<tr><td colspan="2" style="font-size: 0.75em; color: #666;">${s}</td></tr>`}}),t+="</tbody>",t+="</table>",t}function H0(e){let t="<table>";return t+="<tbody>",[...e].forEach((n,r)=>{if(t+=`<tr><td>${ge(r+1)} ${n.name}</td><td>${n.mean_last}</td></tr>`,n.data_last&&n.data_last.length){const s=n.data_last.join(", ");t+=`<tr><td colspan="2" style="font-size: 0.75em; color: #666;">${s}</td></tr>`}}),t+="</tbody>",t+="</table>",t}function ge(e){switch(e){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}}var Or={};(function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!t.OffscreenCanvas)return!1;var S=new OffscreenCanvas(1,1),w=S.getContext("2d");w.fillRect(0,0,1,1);var q=S.transferToImageBitmap();try{w.createPattern(q,"no-repeat")}catch{return!1}return!0}();function l(){}function c(S){var w=n.exports.Promise,q=w!==void 0?w:t.Promise;return typeof q=="function"?new q(S):(S(l,l),null)}var u=function(S,w){return{transform:function(q){if(S)return q;if(w.has(q))return w.get(q);var z=new OffscreenCanvas(q.width,q.height),F=z.getContext("2d");return F.drawImage(q,0,0),w.set(q,z),z},clear:function(){w.clear()}}}(a,new Map),h=function(){var S=Math.floor(16.666666666666668),w,q,z={},F=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(J){var X=Math.random();return z[X]=requestAnimationFrame(function K(Z){F===Z||F+S-1<Z?(F=Z,delete z[X],J()):z[X]=requestAnimationFrame(K)}),X},q=function(J){z[J]&&cancelAnimationFrame(z[J])}):(w=function(J){return setTimeout(J,S)},q=function(J){return clearTimeout(J)}),{frame:w,cancel:q}}(),f=function(){var S,w,q={};function z(F){function J(X,K){F.postMessage({options:X||{},callback:K})}F.init=function(K){var Z=K.transferControlToOffscreen();F.postMessage({canvas:Z},[Z])},F.fire=function(K,Z,ue){if(w)return J(K,null),w;var ce=Math.random().toString(36).slice(2);return w=c(function(_e){function g(y){y.data.callback===ce&&(delete q[ce],F.removeEventListener("message",g),w=null,u.clear(),ue(),_e())}F.addEventListener("message",g),J(K,ce),q[ce]=g.bind(null,{data:{callback:ce}})}),w},F.reset=function(){F.postMessage({reset:!0});for(var K in q)q[K](),delete q[K]}}return function(){if(S)return S;if(!r&&i){var F=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{S=new Worker(URL.createObjectURL(new Blob([F])))}catch(J){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",J),null}z(S)}return S}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(S,w){return w?w(S):S}function E(S){return S!=null}function k(S,w,q){return v(S&&E(S[w])?S[w]:m[w],q)}function M(S){return S<0?0:Math.floor(S)}function H(S,w){return Math.floor(Math.random()*(w-S))+S}function d(S){return parseInt(S,16)}function p(S){return S.map(b)}function b(S){var w=String(S).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:d(w.substring(0,2)),g:d(w.substring(2,4)),b:d(w.substring(4,6))}}function A(S){var w=k(S,"origin",Object);return w.x=k(w,"x",Number),w.y=k(w,"y",Number),w}function V(S){S.width=document.documentElement.clientWidth,S.height=document.documentElement.clientHeight}function ee(S){var w=S.getBoundingClientRect();S.width=w.width,S.height=w.height}function de(S){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=S,w}function pe(S,w,q,z,F,J,X,K,Z){S.save(),S.translate(w,q),S.rotate(J),S.scale(z,F),S.arc(0,0,1,X,K,Z),S.restore()}function ae(S){var w=S.angle*(Math.PI/180),q=S.spread*(Math.PI/180);return{x:S.x,y:S.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:S.startVelocity*.5+Math.random()*S.startVelocity,angle2D:-w+(.5*q-Math.random()*q),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:S.color,shape:S.shape,tick:0,totalTicks:S.ticks,decay:S.decay,drift:S.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:S.gravity*3,ovalScalar:.6,scalar:S.scalar,flat:S.flat}}function R(S,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.velocity*=w.decay,w.flat?(w.wobble=0,w.wobbleX=w.x+10*w.scalar,w.wobbleY=w.y+10*w.scalar,w.tiltSin=0,w.tiltCos=0,w.random=1):(w.wobble+=w.wobbleSpeed,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble),w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2);var q=w.tick++/w.totalTicks,z=w.x+w.random*w.tiltCos,F=w.y+w.random*w.tiltSin,J=w.wobbleX+w.random*w.tiltCos,X=w.wobbleY+w.random*w.tiltSin;if(S.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-q)+")",S.beginPath(),o&&w.shape.type==="path"&&typeof w.shape.path=="string"&&Array.isArray(w.shape.matrix))S.fill(le(w.shape.path,w.shape.matrix,w.x,w.y,Math.abs(J-z)*.1,Math.abs(X-F)*.1,Math.PI/10*w.wobble));else if(w.shape.type==="bitmap"){var K=Math.PI/10*w.wobble,Z=Math.abs(J-z)*.1,ue=Math.abs(X-F)*.1,ce=w.shape.bitmap.width*w.scalar,_e=w.shape.bitmap.height*w.scalar,g=new DOMMatrix([Math.cos(K)*Z,Math.sin(K)*Z,-Math.sin(K)*ue,Math.cos(K)*ue,w.x,w.y]);g.multiplySelf(new DOMMatrix(w.shape.matrix));var y=S.createPattern(u.transform(w.shape.bitmap),"no-repeat");y.setTransform(g),S.globalAlpha=1-q,S.fillStyle=y,S.fillRect(w.x-ce/2,w.y-_e/2,ce,_e),S.globalAlpha=1}else if(w.shape==="circle")S.ellipse?S.ellipse(w.x,w.y,Math.abs(J-z)*w.ovalScalar,Math.abs(X-F)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):pe(S,w.x,w.y,Math.abs(J-z)*w.ovalScalar,Math.abs(X-F)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var x=Math.PI/2*3,C=4*w.scalar,O=8*w.scalar,P=w.x,N=w.y,L=5,j=Math.PI/L;L--;)P=w.x+Math.cos(x)*O,N=w.y+Math.sin(x)*O,S.lineTo(P,N),x+=j,P=w.x+Math.cos(x)*C,N=w.y+Math.sin(x)*C,S.lineTo(P,N),x+=j;else S.moveTo(Math.floor(w.x),Math.floor(w.y)),S.lineTo(Math.floor(w.wobbleX),Math.floor(F)),S.lineTo(Math.floor(J),Math.floor(X)),S.lineTo(Math.floor(z),Math.floor(w.wobbleY));return S.closePath(),S.fill(),w.tick<w.totalTicks}function $(S,w,q,z,F){var J=w.slice(),X=S.getContext("2d"),K,Z,ue=c(function(ce){function _e(){K=Z=null,X.clearRect(0,0,z.width,z.height),u.clear(),F(),ce()}function g(){r&&!(z.width===s.width&&z.height===s.height)&&(z.width=S.width=s.width,z.height=S.height=s.height),!z.width&&!z.height&&(q(S),z.width=S.width,z.height=S.height),X.clearRect(0,0,z.width,z.height),J=J.filter(function(y){return R(X,y)}),J.length?K=h.frame(g):_e()}K=h.frame(g),Z=_e});return{addFettis:function(ce){return J=J.concat(ce),ue},canvas:S,promise:ue,reset:function(){K&&h.cancel(K),Z&&Z()}}}function B(S,w){var q=!S,z=!!k(w||{},"resize"),F=!1,J=k(w,"disableForReducedMotion",Boolean),X=i&&!!k(w||{},"useWorker"),K=X?f():null,Z=q?V:ee,ue=S&&K?!!S.__confetti_initialized:!1,ce=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,_e;function g(x,C,O){for(var P=k(x,"particleCount",M),N=k(x,"angle",Number),L=k(x,"spread",Number),j=k(x,"startVelocity",Number),I=k(x,"decay",Number),G=k(x,"gravity",Number),U=k(x,"drift",Number),W=k(x,"colors",p),Y=k(x,"ticks",Number),se=k(x,"shapes"),ye=k(x,"scalar"),he=!!k(x,"flat"),$e=A(x),Ae=P,Le=[],ze=S.width*$e.x,xt=S.height*$e.y;Ae--;)Le.push(ae({x:ze,y:xt,angle:N,spread:L,startVelocity:j,color:W[Ae%W.length],shape:se[H(0,se.length)],ticks:Y,decay:I,gravity:G,drift:U,scalar:ye,flat:he}));return _e?_e.addFettis(Le):(_e=$(S,Le,Z,C,O),_e.promise)}function y(x){var C=J||k(x,"disableForReducedMotion",Boolean),O=k(x,"zIndex",Number);if(C&&ce)return c(function(j){j()});q&&_e?S=_e.canvas:q&&!S&&(S=de(O),document.body.appendChild(S)),z&&!ue&&Z(S);var P={width:S.width,height:S.height};K&&!ue&&K.init(S),ue=!0,K&&(S.__confetti_initialized=!0);function N(){if(K){var j={getBoundingClientRect:function(){if(!q)return S.getBoundingClientRect()}};Z(j),K.postMessage({resize:{width:j.width,height:j.height}});return}P.width=P.height=null}function L(){_e=null,z&&(F=!1,t.removeEventListener("resize",N)),q&&S&&(document.body.contains(S)&&document.body.removeChild(S),S=null,ue=!1)}return z&&!F&&(F=!0,t.addEventListener("resize",N,!1)),K?K.fire(x,P,L):g(x,P,L)}return y.reset=function(){K&&K.reset(),_e&&_e.reset()},y}var me;function ve(){return me||(me=B(null,{useWorker:!0,resize:!0})),me}function le(S,w,q,z,F,J,X){var K=new Path2D(S),Z=new Path2D;Z.addPath(K,new DOMMatrix(w));var ue=new Path2D;return ue.addPath(Z,new DOMMatrix([Math.cos(X)*F,Math.sin(X)*F,-Math.sin(X)*J,Math.cos(X)*J,q,z])),ue}function re(S){if(!o)throw new Error("path confetti are not supported in this browser");var w,q;typeof S=="string"?w=S:(w=S.path,q=S.matrix);var z=new Path2D(w),F=document.createElement("canvas"),J=F.getContext("2d");if(!q){for(var X=1e3,K=X,Z=X,ue=0,ce=0,_e,g,y=0;y<X;y+=2)for(var x=0;x<X;x+=2)J.isPointInPath(z,y,x,"nonzero")&&(K=Math.min(K,y),Z=Math.min(Z,x),ue=Math.max(ue,y),ce=Math.max(ce,x));_e=ue-K,g=ce-Z;var C=10,O=Math.min(C/_e,C/g);q=[O,0,0,O,-Math.round(_e/2+K)*O,-Math.round(g/2+Z)*O]}return{type:"path",path:w,matrix:q}}function Oe(S){var w,q=1,z="#000000",F='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof S=="string"?w=S:(w=S.text,q="scalar"in S?S.scalar:q,F="fontFamily"in S?S.fontFamily:F,z="color"in S?S.color:z);var J=10*q,X=""+J+"px "+F,K=new OffscreenCanvas(J,J),Z=K.getContext("2d");Z.font=X;var ue=Z.measureText(w),ce=Math.ceil(ue.actualBoundingBoxRight+ue.actualBoundingBoxLeft),_e=Math.ceil(ue.actualBoundingBoxAscent+ue.actualBoundingBoxDescent),g=2,y=ue.actualBoundingBoxLeft+g,x=ue.actualBoundingBoxAscent+g;ce+=g+g,_e+=g+g,K=new OffscreenCanvas(ce,_e),Z=K.getContext("2d"),Z.font=X,Z.fillStyle=z,Z.fillText(w,y,x);var C=1/q;return{type:"bitmap",bitmap:K.transferToImageBitmap(),matrix:[C,0,0,C,-ce*C/2,-_e*C/2]}}n.exports=function(){return ve().apply(this,arguments)},n.exports.reset=function(){ve().reset()},n.exports.create=B,n.exports.shapeFromPath=re,n.exports.shapeFromText=Oe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Or,!1);const V0=Or.exports;Or.exports.create;const J0={key:0,style:{"font-size":"0.8rem",color:"gray","text-align":"center","margin-bottom":"-10px"}},W0={class:"container"},K0={key:0},z0={class:"avatar-lineup"},G0=["src","alt"],Y0={key:0,class:"buttons"},X0=["onClick"],Q0=["onClick"],Z0=["onClick"],ev=["onClick"],tv={key:0,id:"submitScoreContainer"},nv={key:1},rv=20,Me="Number One",sv="https://cdn-icons-png.flaticon.com/512/4712/4712027.png",iv={__name:"Game",props:{players:Array,role:String,site:String},setup(e){let t=0;function n(b){t=b.touches[0].clientY}function r(b){const A=b.touches[0].clientY;window.scrollY===0&&A>t&&b.preventDefault()}Ss(()=>{window.addEventListener("touchstart",n,{passive:!1}),window.addEventListener("touchmove",r,{passive:!1})}),dl(()=>{window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",r)});function s(){const b=document.documentElement;document.fullscreenElement?document.exitFullscreen():b.requestFullscreen().catch(A=>{console.warn(`Erreur lors du passage en plein cran : ${A.message}`)})}const i=e,o=Re(1),a=Re(0),l=Re([0,0,0]);let c=0;tr(()=>i.players.length,b=>{const A=i.players.findIndex(V=>V.name===Me);b>1&&A===-1?i.players.push({id:0,name:Me,avatar:sv,scores:[],totalScore:0}):b<=1&&A!==-1&&(i.players.splice(A,1),a.value>=i.players.length&&(a.value=0))},{immediate:!0}),i.players.forEach(b=>{b.scores||(b.scores=[]),b.curses||(b.curses=0),b.totalScore===void 0&&(b.totalScore=0)});function u(b){const A=b.scores.flat(),V=Xr(A),ee=Qr(A),de=A.length,pe=A.filter(F=>F===0).length,ae=A.filter(F=>F!==0).length,R=b.scores.map(F=>F[0]).filter(F=>F!==0).length,$=b.scores.map(F=>F[1]).filter(F=>F!==0).length,B=b.scores.map(F=>F[2]).filter(F=>F!==0).length,me=A.filter(F=>F===1).length,ve=A.filter(F=>F===2).length,le=A.filter(F=>F===3).length,re=b.scores.filter(F=>F.filter(J=>J===3).length===3).length,Oe=b.scores.filter(F=>F.filter(J=>J===3).length===2).length,S=b.scores.filter(F=>F.filter(J=>J===2).length===3).length,w=b.scores.filter(F=>F.filter(J=>J===2).length===2).length,q=b.scores.filter(F=>{const J=new Set(F);return J.has(1)&&J.has(2)&&J.has(3)}).length,z=b.curses;return{total:de,hits:ae,hitsF1:R,hitsF2:$,hitsF3:B,miss:pe,single:me,double:ve,triple:le,shangai:q,ttt:re,ddd:S,tt:Oe,dd:w,strk:V,strkloose:ee,curses:z}}function h(b,A){l.value[b]=A,navigator.vibrate&&navigator.vibrate(30)}const f=Jn(()=>{const b=o.value;return l.value.reduce((A,V)=>A+V*b,0)});function m(){navigator.vibrate&&navigator.vibrate(30);const b=i.players[a.value];if(b.name===Me){const ee=i.players.filter(R=>R.name!==Me).map(R=>R.scores[R.scores.length-1]),de=ee.map(R=>R[0]+R[1]+R[2]),pe=de.indexOf(Math.max(...de)),ae=ee[pe];l.value=[...ae]}const A=[...l.value];b.scores.push(A),b.totalScore+=f.value,new Set(A).has(1)&&new Set(A).has(2)&&new Set(A).has(3)&&b.name!==Me&&V0({particleCount:150,spread:90,origin:{y:.6}}),l.value=[0,0,0],a.value<i.players.length-1?a.value++:(a.value=0,o.value++),c=Math.max(...i.players.filter(ee=>ee.name!==Me).map(ee=>ee.totalScore))}function v(){if(o.value===1&&a.value===0)return;let b=a.value,A=o.value;function V(R){const $=i.players.length;for(let B=1;B<=$;B++){const me=(R-B+$)%$;if(i.players[me].name!==Me)return me}return R}const ee=i.players.findIndex(R=>R.name===Me);let de=!1;if(b===0){if(A===1)return;A-=1,b=V(i.players.length),de=!0}else b=V(b);a.value=b,o.value=A;const pe=i.players[b],ae=pe.scores.pop();if(ae){const R=A,$=ae.reduce((B,me)=>B+me*R,0);pe.totalScore-=$}if(de&&ee!==-1){const R=i.players[ee];if(R.scores.length>0){const B=R.scores[R.scores.length-1].reduce((me,ve)=>me+ve*A,0);R.totalScore-=B,R.scores.pop()}}l.value=[0,0,0]}function E(){const b=i.players[a.value];b.name!==Me&&(b.curses+=1)}const k=Jn(()=>o.value>rv),M=Jn(()=>[...i.players].sort((b,A)=>A.totalScore-b.totalScore));tr(a,async b=>{i.players[b].name===Me&&!k.value&&(await il(),m())});const H=Jn(()=>i.players.filter(b=>b.name!==Me).sort((b,A)=>A.totalScore-b.totalScore));function d(b){const A=new Map([[1,"Ain"],[2,"Aisne"],[3,"Allier"],[4,"Alpes-de-Haute-Provence"],[5,"Hautes-Alpes"],[6,"Alpes-Maritimes"],[7,"Ardche"],[8,"Ardennes"],[9,"Arige"],[10,"Aube"],[11,"Aude"],[12,"Aveyron"],[13,"Bouches-du-Rhne"],[14,"Calvados"],[15,"Cantal"],[16,"Charente"],[17,"Charente-Maritime"],[18,"Cher"],[19,"Corrze"],[20,"Corse (2A Corse-du-Sud, 2B Haute-Corse)"],[21,"Cte-d'Or"],[22,"Ctes-d'Armor"],[23,"Creuse"],[24,"Dordogne"],[25,"Doubs"],[26,"Drme"],[27,"Eure"],[28,"Eure-et-Loir"],[29,"Finistre"],[30,"Gard"],[31,"Haute-Garonne"],[32,"Gers"],[33,"Gironde"],[34,"Hrault"],[35,"Ille-et-Vilaine"],[36,"Indre"],[37,"Indre-et-Loire"],[38,"Isre"],[39,"Jura"],[40,"Landes"],[41,"Loir-et-Cher"],[42,"Loire"],[43,"Haute-Loire"],[44,"Loire-Atlantique"],[45,"Loiret"],[46,"Lot"],[47,"Lot-et-Garonne"],[48,"Lozre"],[49,"Maine-et-Loire"],[50,"Manche"],[51,"Marne"],[52,"Haute-Marne"],[53,"Mayenne"],[54,"Meurthe-et-Moselle"],[55,"Meuse"],[56,"Morbihan"],[57,"Moselle"],[58,"Nivre"],[59,"Nord"],[60,"Oise"],[61,"Orne"],[62,"Pas-de-Calais"],[63,"Puy-de-Dme"],[64,"Pyrnes-Atlantiques"],[65,"Hautes-Pyrnes"],[66,"Pyrnes-Orientales"],[67,"Bas-Rhin"],[68,"Haut-Rhin"],[69,"Rhne"],[70,"Haute-Sane"],[71,"Sane-et-Loire"],[72,"Sarthe"],[73,"Savoie"],[74,"Haute-Savoie"],[75,"Paris"],[76,"Seine-Maritime"],[77,"Seine-et-Marne"],[78,"Yvelines"],[79,"Deux-Svres"],[80,"Somme"],[81,"Tarn"],[82,"Tarn-et-Garonne"],[83,"Var"],[84,"Vaucluse"],[85,"Vende"],[86,"Vienne"],[87,"Haute-Vienne"],[88,"Vosges"],[89,"Yonne"],[90,"Territoire de Belfort"],[91,"Essonne"],[92,"Hauts-de-Seine"],[93,"Seine-Saint-Denis"],[94,"Val-de-Marne"],[95,"Val-d'Oise"]]);if(b<=0||b>95&&b<100)return"";if(b<=95)return"| "+A.get(b);if(b>=100&&b<200)return"| Barrire de la honte";if(b>=200&&b<300)return"| Barrire de l'honneur";if(b>=300&&b<400)return"| Bien jou  ";if(b>=400&&b<500)return"|  Quel talent ";if(b>=500&&b<600)return"|  Lgendaire ";if(b>=600)return"|  G.O.A.T "}function p(b){if(b<100)return"neutral";if(b>=100&&b<200)return"ultra1";if(b>=200&&b<300)return"ultra2";if(b>=300&&b<400)return"ultra3";if(b>=400&&b<500)return"ultra4";if(b>=500)return"ultra5"}return(b,A)=>(ie(),fe("div",null,[e.role==="admin"?(ie(),fe("p",J0," Partie officielle et enregistre ")):We("",!0),_("div",W0,[k.value?(ie(),fe("div",nv,[_t(U0,{sortedPlayers:M.value,humanPlayersSorted:H.value,robotName:Me,stats:u,replay:b.replay,role:i.role,site:i.site,onViewScores:A[0]||(A[0]=V=>b.$emit("view-scores"))},null,8,["sortedPlayers","humanPlayersSorted","replay","role","site"])])):(ie(),fe("div",K0,[_("h2",{class:"round-circle",onClick:s},D(o.value),1),_("h1",null,D(i.players[a.value].name),1),_("div",{class:at(["dept-badge",p(i.players[a.value].totalScore+f.value)])},[A[1]||(A[1]=et(" Score : ")),_("b",null,D(i.players[a.value].totalScore+f.value),1),et(" "+D(d(i.players[a.value].totalScore+f.value)),1)],2),_("div",z0,[(ie(!0),fe(je,null,Cn(i.players,(V,ee)=>(ie(),fe("div",{key:V.name,class:"avatar-wrapper"},[_("img",{src:V.avatar,alt:V.name,class:at(["avatar",{current:ee===a.value}])},null,10,G0),_("div",{class:at(["score-badge",{"bestscore-badge":V.totalScore===ur(c)&&V.name!==Me&&ur(c)!==0,"score-robot":V.name===Me}])},D(V.totalScore),3),V.name!==Me&&V.totalScore>=100?(ie(),fe("div",{key:0,class:at(["score-dot",p(V.totalScore)])},null,2)):We("",!0)]))),128))]),A[2]||(A[2]=_("hr",null,null,-1)),(ie(!0),fe(je,null,Cn(l.value,(V,ee)=>(ie(),fe("div",{key:ee,class:"dart-controls",style:{display:"flex","align-items":"center",gap:"6px"}},[i.players[a.value].name!==Me?(ie(),fe("div",Y0,[_("button",{class:at(["dart-button",{active:V===0}]),onClick:de=>h(ee,0)},"Miss",10,X0),_("button",{class:at(["dart-button",{active:V===1}]),onClick:de=>h(ee,1)},"Single",10,Q0),_("button",{class:at(["dart-button",{active:V===2}]),onClick:de=>h(ee,2)},"Double",10,Z0),_("button",{class:at(["dart-button",{active:V===3}]),onClick:de=>h(ee,3)},"Triple",10,ev)])):We("",!0)]))),128)),i.players[a.value].name!==Me?(ie(),fe("p",tv,[_("button",{onClick:E,class:"curseCounter"}," ! "+D(i.players[a.value].curses),1),_("button",{onClick:m,class:"validate"},"Valider ce tour (+"+D(f.value)+" pts)",1)])):We("",!0),_("p",null,[_("button",{onClick:v,class:"undo-button"},"")])]))])]))}},ov=Sr(iv,[["__scopeId","data-v-8d09ca16"]]),av={class:"login-container"},lv={class:"login-box"},uv={class:"radio-group"},cv={class:"radio-label"},hv={class:"radio-label"},fv=["disabled"],dv={key:0,class:"error"},pv={__name:"Login",emits:["login"],setup(e,{emit:t}){const n=t,r=Re(""),s=Re("Riate"),i=Re(null),o=Re(!1);async function a(){i.value=null,o.value=!0;const c=await Up(r.value);o.value=!1,c?n("login",{name:"Admin",role:"admin",site:s.value}):i.value="Mot de passe incorrect."}function l(){n("login",{name:"Visiteur",role:"visiteur",site:s.value})}return(c,u)=>(ie(),fe("div",av,[_("div",lv,[_("form",{onSubmit:dr(a,["prevent"])},[_("div",uv,[_("label",cv,[rn(_("input",{type:"radio",value:"Riate","onUpdate:modelValue":u[0]||(u[0]=h=>s.value=h)},null,512),[[rr,s.value]]),u[3]||(u[3]=_("span",null,"Riate",-1))]),_("label",hv,[rn(_("input",{type:"radio",value:"Condorcet","onUpdate:modelValue":u[1]||(u[1]=h=>s.value=h)},null,512),[[rr,s.value]]),u[4]||(u[4]=_("span",null,"Condorcet",-1))])]),rn(_("input",{"onUpdate:modelValue":u[2]||(u[2]=h=>r.value=h),type:"password",placeholder:"Mot de passe",autocomplete:"current-password"},null,512),[[Dl,r.value]]),_("button",{type:"submit",disabled:o.value},D(o.value?"Connexion...":"Se connecter"),9,fv)],32),_("a",{onClick:dr(l,["prevent"]),href:"#",class:"visitor-link"}," Continuer en tant que visiteur "),i.value?(ie(),fe("p",dv,D(i.value),1)):We("",!0)])]))}},gv=Sr(pv,[["__scopeId","data-v-220c4406"]]),mv="/shanghai/img/podium.webp";function Du(){const e=new Date,t=e.getFullYear(),n=e.getMonth(),s=(n>=8?new Date(t,8,1):new Date(t-1,8,1)).getTime(),o=(n<=6?new Date(t,6,31):new Date(t+1,6,31)).getTime();return{septFirstLastYear:s,july31Next:o}}function _v(e){const t=Du();return e.filter(n=>n.timestamp>=t.septFirstLastYear).filter(n=>n.timestamp<=t.july31Next)}function vv(e,t=10){const n=Du(),r=new Date,s=new Date;s.setMonth(r.getMonth()-1);let i=e.filter(c=>c.timestamp>=n.septFirstLastYear).filter(c=>c.timestamp<=n.july31Next).sort((c,u)=>ou(c.timestamp,u.timestamp)),a=[...new Set(i.map(c=>c.name))].filter(c=>c!=="Number One").map(c=>i.filter(u=>u.name==c).slice(-t)),l;return a[0].map(c=>c.timestamp).at(-1)>=s?l=a.flat():(l=[]).filter(c=>c.length>=10),l}const yv={class:"scores-page"},wv={key:0},bv={key:1},xv={key:0,class:"podium",style:{position:"relative",display:"inline-block"}},Sv={class:"podium-text text-1"},kv={style:{"font-size":"0.5rem"}},Tv={class:"podium-text text-2"},Ev={style:{"font-size":"0.5rem"}},Av={class:"podium-text text-3"},Ov={style:{"font-size":"0.5rem"}},$v={class:"podium-text text-4"},Cv={align:"center"},Pv=["innerHTML"],Rv={key:1,class:"players-list"},Mv=["innerHTML"],Iv={class:"player-name"},jv={class:"mode-selector"},Lv=["innerHTML"],Nv={class:"score-table"},Dv={class:"player-card"},Fv={class:"player-name"},Uv={class:"score-table"},Bv={__name:"RecordedStats",setup(e){const t=Object.assign({},{min:zp,max:lu,mean:uu,sum:Si,ascending:ou,descending:au,count:Bp,group:Wp}),n=Re([]),r=Re("Last10"),s=Re([]),i=Re([]),o=Re([]);async function a(){console.log("fetchScores called");const{data:u,error:h}=await no.from("scores").select("*").order("score",{ascending:!1});if(h){console.error("Erreur de rcupration des scores :",h);return}if(!u.length)return;console.log(u),o.value=u;const f=Ra(),m=Array.from(t.group(u,k=>k.name)).filter(([k,M])=>M.length>=10).filter(([k,M])=>M.name!="Number One").map(([k])=>k),v=l(u.filter(k=>m.includes(k.name)));i.value=B0(u.filter(k=>k.timestamp>=f.septFirstLastYear).filter(k=>k.timestamp<=f.july31Next));const E=["Number One"];n.value=v.filter(k=>k.data_last.length>=10).filter(k=>!E.includes(k.name)),s.value=v.find(k=>k.name==="Number One")}function l(u,h=10){const f=new Date,m=new Date;m.setMonth(f.getMonth()-1);let v=[...new Set(u.map(d=>d.name))].map(d=>({name:d}));const E=Ra(),k=u.filter(d=>d.timestamp>=E.septFirstLastYear).filter(d=>d.timestamp<=E.july31Next),M=u.filter(d=>d.name=="Number One").length,H=k.filter(d=>d.name=="Number One").length;return v=v.map(d=>{const p=u.filter(T=>T.name==d.name),b=k.filter(T=>T.name==d.name);let A=b.slice().sort((T,Ne)=>t.ascending(T.timestamp,Ne.timestamp)).slice(-h);console.log(A),A=A.at(-1).timestamp>=m?A:[];const V=d.name,ee=ni(V,p,u),de=ni(V,b,u),pe=ni(V,A,u),ae=p.length,R=b.length,$=A.length,B=Math.round(1e3*p.length/M)/10,me=Math.round(1e3*b.length/H)/10,ve=t.mean(p.map(T=>T.score)),le=Math.round(ve),re=t.mean(b.map(T=>T.score)),Oe=Math.round(re),S=t.mean(A.map(T=>T.score)),w=Math.round(S),q=Math.round(t.max(p.map(T=>T.score))),z=Math.round(t.max(b.map(T=>T.score))),F=Math.round(t.max(A.map(T=>T.score))),J=Math.round(t.sum(p.map(T=>T.score))),X=Math.round(t.sum(b.map(T=>T.score))),K=Math.round(t.sum(A.map(T=>T.score))),Z=Math.round(t.min(p.map(T=>T.score))),ue=Math.round(t.min(b.map(T=>T.score))),ce=Math.round(t.min(A.map(T=>T.score))),_e=t.max(p.map(T=>JSON.parse(T.hits)).map(T=>T.flat().filter(Ne=>Ne!=0).length)),g=t.max(b.map(T=>JSON.parse(T.hits)).map(T=>T.flat().filter(Ne=>Ne!=0).length)),y=t.max(A.map(T=>JSON.parse(T.hits)).map(T=>T.flat().filter(Ne=>Ne!=0).length)),x=t.max(p.map(T=>JSON.parse(T.hits)).map(T=>t.sum(T.flat().filter(Ne=>Ne!=0)))),C=t.max(b.map(T=>JSON.parse(T.hits)).map(T=>t.sum(T.flat().filter(Ne=>Ne!=0)))),O=t.max(A.map(T=>JSON.parse(T.hits)).map(T=>t.sum(T.flat().filter(Ne=>Ne!=0)))),P=t.max(p.map((T,Ne)=>t.max(JSON.parse(T.hits).map((Ln,Nn)=>t.sum(Ln)*(Nn+1))))),N=t.max(b.map((T,Ne)=>t.max(JSON.parse(T.hits).map((Ln,Nn)=>t.sum(Ln)*(Nn+1))))),L=t.max(A.map((T,Ne)=>t.max(JSON.parse(T.hits).map((Ln,Nn)=>t.sum(Ln)*(Nn+1))))),j=t.max(p.map(T=>JSON.parse(T.hits).flat()).map(T=>Xr(T))),I=t.max(b.map(T=>JSON.parse(T.hits).flat()).map(T=>Xr(T))),G=t.max(A.map(T=>JSON.parse(T.hits).flat()).map(T=>Xr(T))),U=t.max(p.map(T=>JSON.parse(T.hits).flat()).map(T=>Qr(T))),W=t.max(b.map(T=>JSON.parse(T.hits).flat()).map(T=>Qr(T))),Y=t.max(A.map(T=>JSON.parse(T.hits).flat()).map(T=>Qr(T))),se=Math.round(p.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==3).length/ae*10)/10,ye=Math.round(b.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==3).length/R*10)/10,he=Math.round(A.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==3).length/$*10)/10,$e=Math.round(p.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==2).length/ae*10)/10,Ae=Math.round(b.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==2).length/R*10)/10,Le=Math.round(A.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==2).length/$*10)/10,ze=t.sum(p.map(T=>Xs(JSON.parse(T.hits)))),xt=t.sum(b.map(T=>Xs(JSON.parse(T.hits)))),$r=t.sum(A.map(T=>Xs(JSON.parse(T.hits)))),Be=t.sum(p.map(T=>Qs(JSON.parse(T.hits)))),rt=t.sum(b.map(T=>Qs(JSON.parse(T.hits)))),Cr=t.sum(A.map(T=>Qs(JSON.parse(T.hits)))),Fu=t.sum(p.map(T=>Zs(JSON.parse(T.hits)))),Uu=t.sum(b.map(T=>Zs(JSON.parse(T.hits)))),Bu=t.sum(A.map(T=>Zs(JSON.parse(T.hits)))),qu=t.sum(p.map(T=>ei(JSON.parse(T.hits)))),Hu=t.sum(b.map(T=>ei(JSON.parse(T.hits)))),Vu=t.sum(A.map(T=>ei(JSON.parse(T.hits)))),Ju=t.sum(p.map(T=>ti(JSON.parse(T.hits)))),Wu=t.sum(b.map(T=>ti(JSON.parse(T.hits)))),Ku=t.sum(A.map(T=>ti(JSON.parse(T.hits))));return{...d,played_all:ae,mean_all_raw:ve,mean_all:le,max_all:q,min_all:Z,streak_all:j,assiduity_all:B,shanghai_all:ze,played_year:R,mean_year_raw:re,mean_year:Oe,max_year:z,min_year:ue,streak_year:I,assiduity_year:me,shanghai_year:xt,played_last:$,mean_last_raw:S,mean_last:w,max_last:F,min_last:ce,streak_last:G,shanghai_last:$r,hits_all:_e,hits_year:g,hits_last:y,hits2_all:x,hits2_year:C,hits2_last:O,hitbest_all:P,hitbest_year:N,hitbest_last:L,tt_all:Be,tt_year:rt,tt_last:Cr,ttt_all:Fu,ttt_year:Uu,ttt_last:Bu,dd_all:qu,dd_year:Hu,dd_last:Vu,ddd_all:Ju,ddd_year:Wu,ddd_last:Ku,cumul_all:J,cumul_year:X,cumul_last:K,triple_all:se,triple_year:ye,triple_last:he,double_all:$e,double_year:Ae,double_last:Le,win_all:ee,win_year:de,win_last:pe,data_last:A.map(T=>T.score),streakloose_all:U,streakloose_year:W,streakloose_last:Y}}),v=[...v].sort((d,p)=>p.max_all-d.max_all).map((d,p)=>({...d,medal_max_all:ge(p)})),v=[...v].sort((d,p)=>p.max_year-d.max_year).map((d,p)=>({...d,medal_max_year:ge(p)})),v=[...v].sort((d,p)=>p.max_last-d.max_last).map((d,p)=>({...d,medal_max_last:ge(p)})),v=[...v].sort((d,p)=>p.cumul_all-d.cumul_all).map((d,p)=>({...d,medal_cumul_all:ge(p)})),v=[...v].sort((d,p)=>p.cumul_year-d.cumul_year).map((d,p)=>({...d,medal_cumul_year:ge(p)})),v=[...v].sort((d,p)=>p.cumul_last-d.cumul_last).map((d,p)=>({...d,medal_cumul_last:ge(p)})),v=[...v].sort((d,p)=>p.streak_all-d.streak_all).map((d,p)=>({...d,medal_streak_all:ge(p)})),v=[...v].sort((d,p)=>p.streak_year-d.streak_year).map((d,p)=>({...d,medal_streak_year:ge(p)})),v=[...v].sort((d,p)=>p.streak_last-d.streak_last).map((d,p)=>({...d,medal_streak_last:ge(p)})),v=[...v].sort((d,p)=>p.streakloose_all-d.streakloose_all).map((d,p)=>({...d,medal_streakloose_all:ge(p)})),v=[...v].sort((d,p)=>p.streakloose_year-d.streakloose_year).map((d,p)=>({...d,medal_streakloose_year:ge(p)})),v=[...v].sort((d,p)=>p.streakloose_last-d.streakloose_last).map((d,p)=>({...d,medal_streakloose_last:ge(p)})),v=[...v].sort((d,p)=>p.hits_all-d.hits_all).map((d,p)=>({...d,medal_hits_all:ge(p)})),v=[...v].sort((d,p)=>p.hits_year-d.hits_year).map((d,p)=>({...d,medal_hits_year:ge(p)})),v=[...v].sort((d,p)=>p.hits_last-d.hits_last).map((d,p)=>({...d,medal_hits_last:ge(p)})),v=[...v].sort((d,p)=>p.hitbest_all-d.hitbest_all).map((d,p)=>({...d,medal_hitbest_all:ge(p)})),v=[...v].sort((d,p)=>p.hitbest_year-d.hitbest_year).map((d,p)=>({...d,medal_hitbest_year:ge(p)})),v=[...v].sort((d,p)=>p.hitbest_last-d.hitbest_last).map((d,p)=>({...d,medal_hitbest_last:ge(p)})),v=[...v].sort((d,p)=>p.hits2_all-d.hits2_all).map((d,p)=>({...d,medal_hits2_all:ge(p)})),v=[...v].sort((d,p)=>p.hits2_year-d.hits2_year).map((d,p)=>({...d,medal_hits2_year:ge(p)})),v=[...v].sort((d,p)=>p.hits2_last-d.hits2_last).map((d,p)=>({...d,medal_hits2_last:ge(p)})),v=[...v].sort((d,p)=>p.triple_all-d.triple_all).map((d,p)=>({...d,medal_triple_all:ge(p)})),v=[...v].sort((d,p)=>p.triple_year-d.triple_year).map((d,p)=>({...d,medal_triple_year:ge(p)})),v=[...v].sort((d,p)=>p.triple_last-d.triple_last).map((d,p)=>({...d,medal_triple_last:ge(p)})),v=[...v].sort((d,p)=>p.double_all-d.double_all).map((d,p)=>({...d,medal_double_all:ge(p)})),v=[...v].sort((d,p)=>p.double_year-d.double_year).map((d,p)=>({...d,medal_double_year:ge(p)})),v=[...v].sort((d,p)=>p.double_last-d.double_last).map((d,p)=>({...d,medal_double_last:ge(p)})),v=[...v].sort((d,p)=>p.mean_all_raw-d.mean_all_raw).map((d,p)=>({...d,medal_mean_all:ge(p)})),v=[...v].sort((d,p)=>p.mean_year_raw-d.mean_year_raw).map((d,p)=>({...d,medal_mean_year:ge(p)})),v=[...v].sort((d,p)=>p.mean_last_raw-d.mean_last_raw).map((d,p)=>({...d,medal_mean_last:ge(p)})),v}Ss(()=>{a()});function c(u){let h=[];return r.value==="Last10"?h=vv(o.value).filter(f=>f.name===u).map(f=>JSON.parse(f.hits)):r.value==="Saison"?h=_v(o.value).filter(f=>f.name===u).map(f=>JSON.parse(f.hits)):r.value==="Hall of fame"&&(h=o.value.filter(f=>f.name===u).map(f=>JSON.parse(f.hits))),Lu(h,"",800,!0).outerHTML}return(u,h)=>(ie(),fe("div",yv,[h[38]||(h[38]=_("h1",null,[_("ins",null,"Classement glissant")],-1)),h[39]||(h[39]=_("p",null,[et("Sur les 10 dernires parties"),_("br"),_("small",null,[_("i",null,"(au moins une partie depuis un mois)")])],-1)),n.value.length==0?(ie(),fe("div",wv,h[4]||(h[4]=[_("h1",null,"Dbut de saison, repassez plus tard !",-1)]))):We("",!0),n.value.length>0?(ie(),fe("div",bv,[n.value.length>=3?(ie(),fe("div",xv,[h[5]||(h[5]=_("img",{src:mv,alt:"Podium",class:"podium-image"},null,-1)),_("div",Sv,[et(D(n.value[0].name),1),_("span",kv," ("+D(n.value[0].mean_last)+")",1)]),_("div",Tv,[et(D(n.value[1].name),1),_("span",Ev," ("+D(n.value[1].mean_last)+")",1)]),_("div",Av,[et(D(n.value[2].name),1),_("span",Ov," ("+D(n.value[2].mean_last)+")",1)]),_("div",$v,"Chocolat : "+D(n.value[3].name)+" ("+D(n.value[3].mean_last)+")",1)])):We("",!0),h[35]||(h[35]=et(" > ")),_("div",Cv,[_("div",{class:"player-card",innerHTML:ur(H0)(n.value)},null,8,Pv)]),h[36]||(h[36]=_("h1",null,[_("ins",null,"Classement de la saison")],-1)),h[37]||(h[37]=_("p",null,"Moyenne des 10 meilleurs scores",-1)),n.value.length?(ie(),fe("div",Rv,[_("div",{class:"player-card",innerHTML:ur(q0)(i.value)},null,8,Mv),h[34]||(h[34]=_("h1",null,[_("ins",null,"Fiches individuelles")],-1)),(ie(!0),fe(je,null,Cn(n.value,(f,m)=>(ie(),fe("div",{key:m,class:"player-card"},[_("h2",Iv,D(f.name),1),_("div",jv,[_("label",null,[rn(_("input",{type:"radio","onUpdate:modelValue":h[0]||(h[0]=v=>r.value=v),value:"Last10"},null,512),[[rr,r.value]]),h[6]||(h[6]=et(" Last 10 "))]),_("label",null,[rn(_("input",{type:"radio","onUpdate:modelValue":h[1]||(h[1]=v=>r.value=v),value:"Saison"},null,512),[[rr,r.value]]),h[7]||(h[7]=et(" Saison "))]),_("label",null,[rn(_("input",{type:"radio","onUpdate:modelValue":h[2]||(h[2]=v=>r.value=v),value:"Hall of fame"},null,512),[[rr,r.value]]),h[8]||(h[8]=et(" Hall of fame "))])]),_("div",{innerHTML:c(f.name)},null,8,Lv),h[29]||(h[29]=_("div",{class:"last-scores"},null,-1)),_("table",Nv,[h[28]||(h[28]=_("thead",null,[_("tr",null,[_("th"),_("th",null,"Sur 10 parties"),_("th",null,"Sur l'anne"),_("th",null,"Hall of Fame")])],-1)),_("tbody",null,[_("tr",null,[h[9]||(h[9]=_("th",null,"Parties",-1)),_("td",null,D(f.played_last),1),_("td",null,D(f.played_year),1),_("td",null,D(f.played_all),1)]),_("tr",null,[h[10]||(h[10]=_("th",null,"Win",-1)),_("td",null,D(Math.round(f.win_last*10)/10)+" %",1),_("td",null,D(Math.round(f.win_year*10)/10)+" %",1),_("td",null,D(Math.round(f.win_all*10)/10)+" %",1)]),_("tr",null,[h[11]||(h[11]=_("th",null,"Assiduit",-1)),h[12]||(h[12]=_("td",null,"-",-1)),_("td",null,D(f.assiduity_year)+" %",1),_("td",null,D(f.assiduity_all)+" %",1)]),_("tr",null,[h[13]||(h[13]=_("th",null,"Moyenne",-1)),_("td",null,D(f.mean_last),1),_("td",null,D(f.mean_year),1),_("td",null,D(f.mean_all),1)]),_("tr",null,[h[14]||(h[14]=_("th",null,"Cumul",-1)),_("td",null,D(Math.round(f.cumul_last/100)/10+"K"),1),_("td",null,D(Math.round(f.cumul_year/100)/10+"K"),1),_("td",null,D(Math.round(f.cumul_all/100)/10+"K"),1)]),_("tr",null,[h[15]||(h[15]=_("th",null,"Meilleur",-1)),_("td",null,D(f.max_last),1),_("td",null,D(f.max_year),1),_("td",null,D(f.max_all),1)]),_("tr",null,[h[16]||(h[16]=_("th",null,"Streak",-1)),_("td",null,D(f.streak_last),1),_("td",null,D(f.streak_year),1),_("td",null,D(f.streak_all),1)]),_("tr",null,[h[17]||(h[17]=_("th",null,"Streak Loose",-1)),_("td",null,D(f.streakloose_last),1),_("td",null,D(f.streakloose_year),1),_("td",null,D(f.streakloose_all),1)]),_("tr",null,[h[18]||(h[18]=_("th",null,[et("Hits "),_("small",null,"(60)")],-1)),_("td",null,D(f.hits_last),1),_("td",null,D(f.hits_year),1),_("td",null,D(f.hits_all),1)]),_("tr",null,[h[19]||(h[19]=_("th",null,[et("Hits "),_("small",null,"(180)")],-1)),_("td",null,D(f.hits2_last),1),_("td",null,D(f.hits2_year),1),_("td",null,D(f.hits2_all),1)]),_("tr",null,[h[20]||(h[20]=_("th",null,"Meilleur coup",-1)),_("td",null,D(f.hitbest_last),1),_("td",null,D(f.hitbest_year),1),_("td",null,D(f.hitbest_all),1)]),_("tr",null,[h[21]||(h[21]=_("th",null,"Triples",-1)),_("td",null,D(f.triple_last)+" %",1),_("td",null,D(f.triple_year)+" %",1),_("td",null,D(f.triple_all)+" %",1)]),_("tr",null,[h[22]||(h[22]=_("th",null,"Doubles",-1)),_("td",null,D(f.double_last)+" %",1),_("td",null,D(f.double_year)+" %",1),_("td",null,D(f.double_all)+" %",1)]),_("tr",null,[h[23]||(h[23]=_("th",null,"Shanghai",-1)),_("td",null,D(f.shanghai_last),1),_("td",null,D(f.shanghai_year),1),_("td",null,D(f.shanghai_all),1)]),_("tr",null,[h[24]||(h[24]=_("th",null,"ttt",-1)),_("td",null,D(f.ttt_last),1),_("td",null,D(f.ttt_year),1),_("td",null,D(f.ttt_all),1)]),_("tr",null,[h[25]||(h[25]=_("th",null,"tt",-1)),_("td",null,D(f.tt_last),1),_("td",null,D(f.tt_year),1),_("td",null,D(f.tt_all),1)]),_("tr",null,[h[26]||(h[26]=_("th",null,"ddd",-1)),_("td",null,D(f.ddd_last),1),_("td",null,D(f.ddd_year),1),_("td",null,D(f.ddd_all),1)]),_("tr",null,[h[27]||(h[27]=_("th",null,"dd",-1)),_("td",null,D(f.dd_last),1),_("td",null,D(f.dd_year),1),_("td",null,D(f.dd_all),1)])])])]))),128)),_("div",Dv,[_("h2",Fv,D(s.value.name),1),_("table",Uv,[h[33]||(h[33]=_("thead",null,[_("tr",null,[_("th"),_("th",null,"Sur 10 parties"),_("th",null,"Sur l'anne"),_("th",null,"Hall of Fame")])],-1)),_("tbody",null,[_("tr",null,[h[30]||(h[30]=_("th",null,"Parties",-1)),_("td",null,D(s.value.played_last),1),_("td",null,D(s.value.played_year),1),_("td",null,D(s.value.played_all),1)]),_("tr",null,[h[31]||(h[31]=_("th",null,"Moyenne",-1)),_("td",null,D(s.value.mean_last),1),_("td",null,D(s.value.mean_year),1),_("td",null,D(s.value.mean_all),1)]),_("tr",null,[h[32]||(h[32]=_("th",null,"Meilleur",-1)),_("td",null,D(s.value.max_last),1),_("td",null,D(s.value.max_year),1),_("td",null,D(s.value.max_all),1)])])])])])):We("",!0)])):We("",!0),_("button",{onClick:h[3]||(h[3]=f=>u.$emit("back")),class:"back-button"},"Retour")]))}},qv=Sr(Bv,[["__scopeId","data-v-b8c2920a"]]),Hv={__name:"App",setup(e){const t=Re(null),n=Re([]),r=Re([]),s=Re("login");function i(c){t.value=c,c.site==="Riate"?n.value=Fl:c.site==="Condorcet"?n.value=Ul:n.value=[],s.value="selection"}function o(c){r.value=c,s.value="game"}function a(){s.value="scores"}function l(){s.value="selection"}return(c,u)=>(ie(),fe("div",null,[s.value==="login"?(ie(),Vn(gv,{key:0,onLogin:i})):s.value==="selection"?(ie(),Vn(Pf,{key:1,predefinedPlayers:n.value,role:t.value.role,onStartGame:o,onViewScores:a},null,8,["predefinedPlayers","role"])):s.value==="game"?(ie(),Vn(ov,{key:2,players:r.value,role:t.value.role,site:t.value.site,onViewScores:a},null,8,["players","role","site"])):s.value==="scores"?(ie(),Vn(qv,{key:3,onBack:l,onViewScores:a})):We("",!0)]))}};df(Hv).mount("#app")});export default Vv();
