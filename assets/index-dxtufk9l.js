(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function sn(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const te={},Kt=[],We=()=>{},sa=()=>!1,nr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),rn=t=>t.startsWith("onUpdate:"),Ee=Object.assign,nn=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},ra=Object.prototype.hasOwnProperty,Z=(t,e)=>ra.call(t,e),B=Array.isArray,Vt=t=>ir(t)==="[object Map]",Ai=t=>ir(t)==="[object Set]",K=t=>typeof t=="function",oe=t=>typeof t=="string",mt=t=>typeof t=="symbol",ne=t=>t!==null&&typeof t=="object",Ci=t=>(ne(t)||K(t))&&K(t.then)&&K(t.catch),ji=Object.prototype.toString,ir=t=>ji.call(t),na=t=>ir(t).slice(8,-1),$i=t=>ir(t)==="[object Object]",on=t=>oe(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,us=sn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),or=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},ia=/-(\w)/g,pt=or(t=>t.replace(ia,(e,s)=>s?s.toUpperCase():"")),oa=/\B([A-Z])/g,Pt=or(t=>t.replace(oa,"-$1").toLowerCase()),Ri=or(t=>t.charAt(0).toUpperCase()+t.slice(1)),vr=or(t=>t?`on${Ri(t)}`:""),ft=(t,e)=>!Object.is(t,e),Ws=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Ii=(t,e,s,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:s})},Lr=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let An;const ar=()=>An||(An=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function an(t){if(B(t)){const e={};for(let s=0;s<t.length;s++){const r=t[s],n=oe(r)?ua(r):an(r);if(n)for(const i in n)e[i]=n[i]}return e}else if(oe(t)||ne(t))return t}const aa=/;(?![^(]*\))/g,la=/:([^]+)/,ca=/\/\*[^]*?\*\//g;function ua(t){const e={};return t.replace(ca,"").split(aa).forEach(s=>{if(s){const r=s.split(la);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function et(t){let e="";if(oe(t))e=t;else if(B(t))for(let s=0;s<t.length;s++){const r=et(t[s]);r&&(e+=r+" ")}else if(ne(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const ha="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",da=sn(ha);function Li(t){return!!t||t===""}const Di=t=>!!(t&&t.__v_isRef===!0),A=t=>oe(t)?t:t==null?"":B(t)||ne(t)&&(t.toString===ji||!K(t.toString))?Di(t)?A(t.value):JSON.stringify(t,Ui,2):String(t),Ui=(t,e)=>Di(e)?Ui(t,e.value):Vt(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[r,n],i)=>(s[yr(r,i)+" =>"]=n,s),{})}:Ai(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>yr(s))}:mt(e)?yr(e):ne(e)&&!B(e)&&!$i(e)?String(e):e,yr=(t,e="")=>{var s;return mt(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ae;class fa{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ae,!e&&Ae&&(this.index=(Ae.scopes||(Ae.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=Ae;try{return Ae=this,e()}finally{Ae=s}}}on(){++this._on===1&&(this.prevScope=Ae,Ae=this)}off(){this._on>0&&--this._on===0&&(Ae=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function pa(){return Ae}let re;const br=new WeakSet;class Mi{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ae&&Ae.active&&Ae.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,br.has(this)&&(br.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fi(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Cn(this),Bi(this);const e=re,s=Fe;re=this,Fe=!0;try{return this.fn()}finally{qi(this),re=e,Fe=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)un(e);this.deps=this.depsTail=void 0,Cn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?br.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Dr(this)&&this.run()}get dirty(){return Dr(this)}}let Ni=0,hs,ds;function Fi(t,e=!1){if(t.flags|=8,e){t.next=ds,ds=t;return}t.next=hs,hs=t}function ln(){Ni++}function cn(){if(--Ni>0)return;if(ds){let e=ds;for(ds=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;hs;){let e=hs;for(hs=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=s}}if(t)throw t}function Bi(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function qi(t){let e,s=t.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),un(r),ga(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}t.deps=e,t.depsTail=s}function Dr(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hi(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Hi(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ws)||(t.globalVersion=ws,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Dr(t))))return;t.flags|=2;const e=t.dep,s=re,r=Fe;re=t,Fe=!0;try{Bi(t);const n=t.fn(t._value);(e.version===0||ft(n,t._value))&&(t.flags|=128,t._value=n,e.version++)}catch(n){throw e.version++,n}finally{re=s,Fe=r,qi(t),t.flags&=-3}}function un(t,e=!1){const{dep:s,prevSub:r,nextSub:n}=t;if(r&&(r.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=r,t.nextSub=void 0),s.subs===t&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)un(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function ga(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let Fe=!0;const Ji=[];function rt(){Ji.push(Fe),Fe=!1}function nt(){const t=Ji.pop();Fe=t===void 0?!0:t}function Cn(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=re;re=void 0;try{e()}finally{re=s}}}let ws=0;class _a{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class hn{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!re||!Fe||re===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==re)s=this.activeLink=new _a(re,this),re.deps?(s.prevDep=re.depsTail,re.depsTail.nextDep=s,re.depsTail=s):re.deps=re.depsTail=s,Wi(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=re.depsTail,s.nextDep=void 0,re.depsTail.nextDep=s,re.depsTail=s,re.deps===s&&(re.deps=r)}return s}trigger(e){this.version++,ws++,this.notify(e)}notify(e){ln();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{cn()}}}function Wi(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Wi(r)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Ur=new WeakMap,Ot=Symbol(""),Mr=Symbol(""),Ss=Symbol("");function me(t,e,s){if(Fe&&re){let r=Ur.get(t);r||Ur.set(t,r=new Map);let n=r.get(s);n||(r.set(s,n=new hn),n.map=r,n.key=s),n.track()}}function tt(t,e,s,r,n,i){const o=Ur.get(t);if(!o){ws++;return}const a=l=>{l&&l.trigger()};if(ln(),e==="clear")o.forEach(a);else{const l=B(t),u=l&&on(s);if(l&&s==="length"){const c=Number(r);o.forEach((h,g)=>{(g==="length"||g===Ss||!mt(g)&&g>=c)&&a(h)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),u&&a(o.get(Ss)),e){case"add":l?u&&a(o.get("length")):(a(o.get(Ot)),Vt(t)&&a(o.get(Mr)));break;case"delete":l||(a(o.get(Ot)),Vt(t)&&a(o.get(Mr)));break;case"set":Vt(t)&&a(o.get(Ot));break}}cn()}function Rt(t){const e=X(t);return e===t?e:(me(e,"iterate",Ss),Ue(t)?e:e.map(fe))}function lr(t){return me(t=X(t),"iterate",Ss),t}const ma={__proto__:null,[Symbol.iterator](){return wr(this,Symbol.iterator,fe)},concat(...t){return Rt(this).concat(...t.map(e=>B(e)?Rt(e):e))},entries(){return wr(this,"entries",t=>(t[1]=fe(t[1]),t))},every(t,e){return Ye(this,"every",t,e,void 0,arguments)},filter(t,e){return Ye(this,"filter",t,e,s=>s.map(fe),arguments)},find(t,e){return Ye(this,"find",t,e,fe,arguments)},findIndex(t,e){return Ye(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ye(this,"findLast",t,e,fe,arguments)},findLastIndex(t,e){return Ye(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ye(this,"forEach",t,e,void 0,arguments)},includes(...t){return Sr(this,"includes",t)},indexOf(...t){return Sr(this,"indexOf",t)},join(t){return Rt(this).join(t)},lastIndexOf(...t){return Sr(this,"lastIndexOf",t)},map(t,e){return Ye(this,"map",t,e,void 0,arguments)},pop(){return ss(this,"pop")},push(...t){return ss(this,"push",t)},reduce(t,...e){return jn(this,"reduce",t,e)},reduceRight(t,...e){return jn(this,"reduceRight",t,e)},shift(){return ss(this,"shift")},some(t,e){return Ye(this,"some",t,e,void 0,arguments)},splice(...t){return ss(this,"splice",t)},toReversed(){return Rt(this).toReversed()},toSorted(t){return Rt(this).toSorted(t)},toSpliced(...t){return Rt(this).toSpliced(...t)},unshift(...t){return ss(this,"unshift",t)},values(){return wr(this,"values",fe)}};function wr(t,e,s){const r=lr(t),n=r[e]();return r!==t&&!Ue(t)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const va=Array.prototype;function Ye(t,e,s,r,n,i){const o=lr(t),a=o!==t&&!Ue(t),l=o[e];if(l!==va[e]){const h=l.apply(t,i);return a?fe(h):h}let u=s;o!==t&&(a?u=function(h,g){return s.call(this,fe(h),g,t)}:s.length>2&&(u=function(h,g){return s.call(this,h,g,t)}));const c=l.call(o,u,r);return a&&n?n(c):c}function jn(t,e,s,r){const n=lr(t);let i=s;return n!==t&&(Ue(t)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,t)}):i=function(o,a,l){return s.call(this,o,fe(a),l,t)}),n[e](i,...r)}function Sr(t,e,s){const r=X(t);me(r,"iterate",Ss);const n=r[e](...s);return(n===-1||n===!1)&&gn(s[0])?(s[0]=X(s[0]),r[e](...s)):n}function ss(t,e,s=[]){rt(),ln();const r=X(t)[e].apply(t,s);return cn(),nt(),r}const ya=sn("__proto__,__v_isRef,__isVue"),Ki=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(mt));function ba(t){mt(t)||(t=String(t));const e=X(this);return me(e,"has",t),e.hasOwnProperty(t)}class Vi{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,r){if(s==="__v_skip")return e.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?Ca:Qi:i?Yi:Gi).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=B(e);if(!n){let l;if(o&&(l=ma[s]))return l;if(s==="hasOwnProperty")return ba}const a=Reflect.get(e,s,ye(e)?e:r);return(mt(s)?Ki.has(s):ya(s))||(n||me(e,"get",s),i)?a:ye(a)?o&&on(s)?a:a.value:ne(a)?n?Xi(a):fn(a):a}}class zi extends Vi{constructor(e=!1){super(!1,e)}set(e,s,r,n){let i=e[s];if(!this._isShallow){const l=gt(i);if(!Ue(r)&&!gt(r)&&(i=X(i),r=X(r)),!B(e)&&ye(i)&&!ye(r))return l?!1:(i.value=r,!0)}const o=B(e)&&on(s)?Number(s)<e.length:Z(e,s),a=Reflect.set(e,s,r,ye(e)?e:n);return e===X(n)&&(o?ft(r,i)&&tt(e,"set",s,r):tt(e,"add",s,r)),a}deleteProperty(e,s){const r=Z(e,s);e[s];const n=Reflect.deleteProperty(e,s);return n&&r&&tt(e,"delete",s,void 0),n}has(e,s){const r=Reflect.has(e,s);return(!mt(s)||!Ki.has(s))&&me(e,"has",s),r}ownKeys(e){return me(e,"iterate",B(e)?"length":Ot),Reflect.ownKeys(e)}}class wa extends Vi{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Sa=new zi,ka=new wa,xa=new zi(!0);const Nr=t=>t,Ds=t=>Reflect.getPrototypeOf(t);function Ta(t,e,s){return function(...r){const n=this.__v_raw,i=X(n),o=Vt(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,u=n[t](...r),c=s?Nr:e?Gs:fe;return!e&&me(i,"iterate",l?Mr:Ot),{next(){const{value:h,done:g}=u.next();return g?{value:h,done:g}:{value:a?[c(h[0]),c(h[1])]:c(h),done:g}},[Symbol.iterator](){return this}}}}function Us(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Ea(t,e){const s={get(n){const i=this.__v_raw,o=X(i),a=X(n);t||(ft(n,a)&&me(o,"get",n),me(o,"get",a));const{has:l}=Ds(o),u=e?Nr:t?Gs:fe;if(l.call(o,n))return u(i.get(n));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!t&&me(X(n),"iterate",Ot),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,o=X(i),a=X(n);return t||(ft(n,a)&&me(o,"has",n),me(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=X(a),u=e?Nr:t?Gs:fe;return!t&&me(l,"iterate",Ot),a.forEach((c,h)=>n.call(i,u(c),u(h),o))}};return Ee(s,t?{add:Us("add"),set:Us("set"),delete:Us("delete"),clear:Us("clear")}:{add(n){!e&&!Ue(n)&&!gt(n)&&(n=X(n));const i=X(this);return Ds(i).has.call(i,n)||(i.add(n),tt(i,"add",n,n)),this},set(n,i){!e&&!Ue(i)&&!gt(i)&&(i=X(i));const o=X(this),{has:a,get:l}=Ds(o);let u=a.call(o,n);u||(n=X(n),u=a.call(o,n));const c=l.call(o,n);return o.set(n,i),u?ft(i,c)&&tt(o,"set",n,i):tt(o,"add",n,i),this},delete(n){const i=X(this),{has:o,get:a}=Ds(i);let l=o.call(i,n);l||(n=X(n),l=o.call(i,n)),a&&a.call(i,n);const u=i.delete(n);return l&&tt(i,"delete",n,void 0),u},clear(){const n=X(this),i=n.size!==0,o=n.clear();return i&&tt(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Ta(n,t,e)}),s}function dn(t,e){const s=Ea(t,e);return(r,n,i)=>n==="__v_isReactive"?!t:n==="__v_isReadonly"?t:n==="__v_raw"?r:Reflect.get(Z(s,n)&&n in r?s:r,n,i)}const Oa={get:dn(!1,!1)},Pa={get:dn(!1,!0)},Aa={get:dn(!0,!1)};const Gi=new WeakMap,Yi=new WeakMap,Qi=new WeakMap,Ca=new WeakMap;function ja(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $a(t){return t.__v_skip||!Object.isExtensible(t)?0:ja(na(t))}function fn(t){return gt(t)?t:pn(t,!1,Sa,Oa,Gi)}function Ra(t){return pn(t,!1,xa,Pa,Yi)}function Xi(t){return pn(t,!0,ka,Aa,Qi)}function pn(t,e,s,r,n){if(!ne(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=$a(t);if(i===0)return t;const o=n.get(t);if(o)return o;const a=new Proxy(t,i===2?r:s);return n.set(t,a),a}function zt(t){return gt(t)?zt(t.__v_raw):!!(t&&t.__v_isReactive)}function gt(t){return!!(t&&t.__v_isReadonly)}function Ue(t){return!!(t&&t.__v_isShallow)}function gn(t){return t?!!t.__v_raw:!1}function X(t){const e=t&&t.__v_raw;return e?X(e):t}function Ia(t){return!Z(t,"__v_skip")&&Object.isExtensible(t)&&Ii(t,"__v_skip",!0),t}const fe=t=>ne(t)?fn(t):t,Gs=t=>ne(t)?Xi(t):t;function ye(t){return t?t.__v_isRef===!0:!1}function Ce(t){return La(t,!1)}function La(t,e){return ye(t)?t:new Da(t,e)}class Da{constructor(e,s){this.dep=new hn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:X(e),this._value=s?e:fe(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,r=this.__v_isShallow||Ue(e)||gt(e);e=r?e:X(e),ft(e,s)&&(this._rawValue=e,this._value=r?e:fe(e),this.dep.trigger())}}function Fr(t){return ye(t)?t.value:t}const Ua={get:(t,e,s)=>e==="__v_raw"?t:Fr(Reflect.get(t,e,s)),set:(t,e,s,r)=>{const n=t[e];return ye(n)&&!ye(s)?(n.value=s,!0):Reflect.set(t,e,s,r)}};function Zi(t){return zt(t)?t:new Proxy(t,Ua)}class Ma{constructor(e,s,r){this.fn=e,this.setter=s,this._value=void 0,this.dep=new hn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ws-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&re!==this)return Fi(this,!0),!0}get value(){const e=this.dep.track();return Hi(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Na(t,e,s=!1){let r,n;return K(t)?r=t:(r=t.get,n=t.set),new Ma(r,n,s)}const Ms={},Ys=new WeakMap;let xt;function Fa(t,e=!1,s=xt){if(s){let r=Ys.get(s);r||Ys.set(s,r=[]),r.push(t)}}function Ba(t,e,s=te){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,u=E=>n?E:Ue(E)||n===!1||n===0?st(E,1):st(E);let c,h,g,v,x=!1,y=!1;if(ye(t)?(h=()=>t.value,x=Ue(t)):zt(t)?(h=()=>u(t),x=!0):B(t)?(y=!0,x=t.some(E=>zt(E)||Ue(E)),h=()=>t.map(E=>{if(ye(E))return E.value;if(zt(E))return u(E);if(K(E))return l?l(E,2):E()})):K(t)?e?h=l?()=>l(t,2):t:h=()=>{if(g){rt();try{g()}finally{nt()}}const E=xt;xt=c;try{return l?l(t,3,[v]):t(v)}finally{xt=E}}:h=We,e&&n){const E=h,m=n===!0?1/0:n;h=()=>st(E(),m)}const f=pa(),T=()=>{c.stop(),f&&f.active&&nn(f.effects,c)};if(i&&e){const E=e;e=(...m)=>{E(...m),T()}}let S=y?new Array(t.length).fill(Ms):Ms;const b=E=>{if(!(!(c.flags&1)||!c.dirty&&!E))if(e){const m=c.run();if(n||x||(y?m.some((w,q)=>ft(w,S[q])):ft(m,S))){g&&g();const w=xt;xt=c;try{const q=[m,S===Ms?void 0:y&&S[0]===Ms?[]:S,v];S=m,l?l(e,3,q):e(...q)}finally{xt=w}}}else c.run()};return a&&a(b),c=new Mi(h),c.scheduler=o?()=>o(b,!1):b,v=E=>Fa(E,!1,c),g=c.onStop=()=>{const E=Ys.get(c);if(E){if(l)l(E,4);else for(const m of E)m();Ys.delete(c)}},e?r?b(!0):S=c.run():o?o(b.bind(null,!0),!0):c.run(),T.pause=c.pause.bind(c),T.resume=c.resume.bind(c),T.stop=T,T}function st(t,e=1/0,s){if(e<=0||!ne(t)||t.__v_skip||(s=s||new Set,s.has(t)))return t;if(s.add(t),e--,ye(t))st(t.value,e,s);else if(B(t))for(let r=0;r<t.length;r++)st(t[r],e,s);else if(Ai(t)||Vt(t))t.forEach(r=>{st(r,e,s)});else if($i(t)){for(const r in t)st(t[r],e,s);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&st(t[r],e,s)}return t}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function As(t,e,s,r){try{return r?t(...r):t()}catch(n){cr(n,e,s)}}function Ve(t,e,s,r){if(K(t)){const n=As(t,e,s,r);return n&&Ci(n)&&n.catch(i=>{cr(i,e,s)}),n}if(B(t)){const n=[];for(let i=0;i<t.length;i++)n.push(Ve(t[i],e,s,r));return n}}function cr(t,e,s,r=!0){const n=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||te;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](t,l,u)===!1)return}a=a.parent}if(i){rt(),As(i,null,10,[t,l,u]),nt();return}}qa(t,s,n,r,o)}function qa(t,e,s,r=!0,n=!1){if(n)throw t;console.error(t)}const xe=[];let He=-1;const Gt=[];let ct=null,Ht=0;const eo=Promise.resolve();let Qs=null;function to(t){const e=Qs||eo;return t?e.then(this?t.bind(this):t):e}function Ha(t){let e=He+1,s=xe.length;for(;e<s;){const r=e+s>>>1,n=xe[r],i=ks(n);i<t||i===t&&n.flags&2?e=r+1:s=r}return e}function _n(t){if(!(t.flags&1)){const e=ks(t),s=xe[xe.length-1];!s||!(t.flags&2)&&e>=ks(s)?xe.push(t):xe.splice(Ha(e),0,t),t.flags|=1,so()}}function so(){Qs||(Qs=eo.then(no))}function Ja(t){B(t)?Gt.push(...t):ct&&t.id===-1?ct.splice(Ht+1,0,t):t.flags&1||(Gt.push(t),t.flags|=1),so()}function $n(t,e,s=He+1){for(;s<xe.length;s++){const r=xe[s];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;xe.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ro(t){if(Gt.length){const e=[...new Set(Gt)].sort((s,r)=>ks(s)-ks(r));if(Gt.length=0,ct){ct.push(...e);return}for(ct=e,Ht=0;Ht<ct.length;Ht++){const s=ct[Ht];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}ct=null,Ht=0}}const ks=t=>t.id==null?t.flags&2?-1:1/0:t.id;function no(t){try{for(He=0;He<xe.length;He++){const e=xe[He];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),As(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;He<xe.length;He++){const e=xe[He];e&&(e.flags&=-2)}He=-1,xe.length=0,ro(),Qs=null,(xe.length||Gt.length)&&no()}}let De=null,io=null;function Xs(t){const e=De;return De=t,io=t&&t.type.__scopeId||null,e}function Wa(t,e=De,s){if(!e||t._n)return t;const r=(...n)=>{r._d&&Bn(-1);const i=Xs(e);let o;try{o=t(...n)}finally{Xs(i),r._d&&Bn(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function oo(t,e){if(De===null)return t;const s=pr(De),r=t.dirs||(t.dirs=[]);for(let n=0;n<e.length;n++){let[i,o,a,l=te]=e[n];i&&(K(i)&&(i={mounted:i,updated:i}),i.deep&&st(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function wt(t,e,s,r){const n=t.dirs,i=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(rt(),Ve(l,s,8,[t.el,a,t,e]),nt())}}const Ka=Symbol("_vte"),Va=t=>t.__isTeleport;function mn(t,e){t.shapeFlag&6&&t.component?(t.transition=e,mn(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ao(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Zs(t,e,s,r,n=!1){if(B(t)){t.forEach((x,y)=>Zs(x,e&&(B(e)?e[y]:e),s,r,n));return}if(fs(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Zs(t,e,s,r.component.subTree);return}const i=r.shapeFlag&4?pr(r.component):r.el,o=n?null:i,{i:a,r:l}=t,u=e&&e.r,c=a.refs===te?a.refs={}:a.refs,h=a.setupState,g=X(h),v=h===te?()=>!1:x=>Z(g,x);if(u!=null&&u!==l&&(oe(u)?(c[u]=null,v(u)&&(h[u]=null)):ye(u)&&(u.value=null)),K(l))As(l,a,12,[o,c]);else{const x=oe(l),y=ye(l);if(x||y){const f=()=>{if(t.f){const T=x?v(l)?h[l]:c[l]:l.value;n?B(T)&&nn(T,i):B(T)?T.includes(i)||T.push(i):x?(c[l]=[i],v(l)&&(h[l]=c[l])):(l.value=[i],t.k&&(c[t.k]=l.value))}else x?(c[l]=o,v(l)&&(h[l]=o)):y&&(l.value=o,t.k&&(c[t.k]=o))};o?(f.id=-1,je(f,s)):f()}}}ar().requestIdleCallback;ar().cancelIdleCallback;const fs=t=>!!t.type.__asyncLoader,lo=t=>t.type.__isKeepAlive;function za(t,e){co(t,"a",e)}function Ga(t,e){co(t,"da",e)}function co(t,e,s=Te){const r=t.__wdc||(t.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return t()});if(ur(e,r,s),s){let n=s.parent;for(;n&&n.parent;)lo(n.parent.vnode)&&Ya(r,e,s,n),n=n.parent}}function Ya(t,e,s,r){const n=ur(e,t,r,!0);ho(()=>{nn(r[e],n)},s)}function ur(t,e,s=Te,r=!1){if(s){const n=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...o)=>{rt();const a=Cs(s),l=Ve(e,s,t,o);return a(),nt(),l});return r?n.unshift(i):n.push(i),i}}const it=t=>(e,s=Te)=>{(!Es||t==="sp")&&ur(t,(...r)=>e(...r),s)},Qa=it("bm"),hr=it("m"),Xa=it("bu"),Za=it("u"),uo=it("bum"),ho=it("um"),el=it("sp"),tl=it("rtg"),sl=it("rtc");function rl(t,e=Te){ur("ec",t,e)}const nl=Symbol.for("v-ndc");function xs(t,e,s,r){let n;const i=s,o=B(t);if(o||oe(t)){const a=o&&zt(t);let l=!1,u=!1;a&&(l=!Ue(t),u=gt(t),t=lr(t)),n=new Array(t.length);for(let c=0,h=t.length;c<h;c++)n[c]=e(l?u?Gs(fe(t[c])):fe(t[c]):t[c],c,void 0,i)}else if(typeof t=="number"){n=new Array(t);for(let a=0;a<t;a++)n[a]=e(a+1,a,void 0,i)}else if(ne(t))if(t[Symbol.iterator])n=Array.from(t,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(t);n=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];n[l]=e(t[c],c,l,i)}}else n=[];return n}const Br=t=>t?Ro(t)?pr(t):Br(t.parent):null,ps=Ee(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Br(t.parent),$root:t=>Br(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>po(t),$forceUpdate:t=>t.f||(t.f=()=>{_n(t.update)}),$nextTick:t=>t.n||(t.n=to.bind(t.proxy)),$watch:t=>El.bind(t)}),kr=(t,e)=>t!==te&&!t.__isScriptSetup&&Z(t,e),il={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=t;let u;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return r[e];case 2:return n[e];case 4:return s[e];case 3:return i[e]}else{if(kr(r,e))return o[e]=1,r[e];if(n!==te&&Z(n,e))return o[e]=2,n[e];if((u=t.propsOptions[0])&&Z(u,e))return o[e]=3,i[e];if(s!==te&&Z(s,e))return o[e]=4,s[e];qr&&(o[e]=0)}}const c=ps[e];let h,g;if(c)return e==="$attrs"&&me(t.attrs,"get",""),c(t);if((h=a.__cssModules)&&(h=h[e]))return h;if(s!==te&&Z(s,e))return o[e]=4,s[e];if(g=l.config.globalProperties,Z(g,e))return g[e]},set({_:t},e,s){const{data:r,setupState:n,ctx:i}=t;return kr(n,e)?(n[e]=s,!0):r!==te&&Z(r,e)?(r[e]=s,!0):Z(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:r,appContext:n,propsOptions:i}},o){let a;return!!s[o]||t!==te&&Z(t,o)||kr(e,o)||(a=i[0])&&Z(a,o)||Z(r,o)||Z(ps,o)||Z(n.config.globalProperties,o)},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Z(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Rn(t){return B(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let qr=!0;function ol(t){const e=po(t),s=t.proxy,r=t.ctx;qr=!1,e.beforeCreate&&In(e.beforeCreate,t,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:g,beforeUpdate:v,updated:x,activated:y,deactivated:f,beforeDestroy:T,beforeUnmount:S,destroyed:b,unmounted:E,render:m,renderTracked:w,renderTriggered:q,errorCaptured:z,serverPrefetch:be,expose:ae,inheritAttrs:pe,components:Be,directives:ot,filters:at}=e;if(u&&al(u,r,null),o)for(const U in o){const W=o[U];K(W)&&(r[U]=W.bind(s))}if(n){const U=n.call(s,s);ne(U)&&(t.data=fn(U))}if(qr=!0,i)for(const U in i){const W=i[U],ze=K(W)?W.bind(s,s):K(W.get)?W.get.bind(s,s):We,jt=!K(W)&&K(W.set)?W.set.bind(s):We,Ge=ls({get:ze,set:jt});Object.defineProperty(r,U,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:Re=>Ge.value=Re})}if(a)for(const U in a)fo(a[U],r,s,U);if(l){const U=K(l)?l.call(s):l;Reflect.ownKeys(U).forEach(W=>{fl(W,U[W])})}c&&In(c,t,"c");function ie(U,W){B(W)?W.forEach(ze=>U(ze.bind(s))):W&&U(W.bind(s))}if(ie(Qa,h),ie(hr,g),ie(Xa,v),ie(Za,x),ie(za,y),ie(Ga,f),ie(rl,z),ie(sl,w),ie(tl,q),ie(uo,S),ie(ho,E),ie(el,be),B(ae))if(ae.length){const U=t.exposed||(t.exposed={});ae.forEach(W=>{Object.defineProperty(U,W,{get:()=>s[W],set:ze=>s[W]=ze})})}else t.exposed||(t.exposed={});m&&t.render===We&&(t.render=m),pe!=null&&(t.inheritAttrs=pe),Be&&(t.components=Be),ot&&(t.directives=ot),be&&ao(t)}function al(t,e,s=We){B(t)&&(t=Hr(t));for(const r in t){const n=t[r];let i;ne(n)?"default"in n?i=Ks(n.from||r,n.default,!0):i=Ks(n.from||r):i=Ks(n),ye(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function In(t,e,s){Ve(B(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,s)}function fo(t,e,s,r){let n=r.includes(".")?Oo(s,r):()=>s[r];if(oe(t)){const i=e[t];K(i)&&gs(n,i)}else if(K(t))gs(n,t.bind(s));else if(ne(t))if(B(t))t.forEach(i=>fo(i,e,s,r));else{const i=K(t.handler)?t.handler.bind(s):e[t.handler];K(i)&&gs(n,i,t)}}function po(t){const e=t.type,{mixins:s,extends:r}=e,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!n.length&&!s&&!r?l=e:(l={},n.length&&n.forEach(u=>er(l,u,o,!0)),er(l,e,o)),ne(e)&&i.set(e,l),l}function er(t,e,s,r=!1){const{mixins:n,extends:i}=e;i&&er(t,i,s,!0),n&&n.forEach(o=>er(t,o,s,!0));for(const o in e)if(!(r&&o==="expose")){const a=ll[o]||s&&s[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const ll={data:Ln,props:Dn,emits:Dn,methods:os,computed:os,beforeCreate:Se,created:Se,beforeMount:Se,mounted:Se,beforeUpdate:Se,updated:Se,beforeDestroy:Se,beforeUnmount:Se,destroyed:Se,unmounted:Se,activated:Se,deactivated:Se,errorCaptured:Se,serverPrefetch:Se,components:os,directives:os,watch:ul,provide:Ln,inject:cl};function Ln(t,e){return e?t?function(){return Ee(K(t)?t.call(this,this):t,K(e)?e.call(this,this):e)}:e:t}function cl(t,e){return os(Hr(t),Hr(e))}function Hr(t){if(B(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Se(t,e){return t?[...new Set([].concat(t,e))]:e}function os(t,e){return t?Ee(Object.create(null),t,e):e}function Dn(t,e){return t?B(t)&&B(e)?[...new Set([...t,...e])]:Ee(Object.create(null),Rn(t),Rn(e??{})):e}function ul(t,e){if(!t)return e;if(!e)return t;const s=Ee(Object.create(null),t);for(const r in e)s[r]=Se(t[r],e[r]);return s}function go(){return{app:null,config:{isNativeTag:sa,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let hl=0;function dl(t,e){return function(r,n=null){K(r)||(r=Ee({},r)),n!=null&&!ne(n)&&(n=null);const i=go(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:hl++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:Kl,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&K(c.install)?(o.add(c),c.install(u,...h)):K(c)&&(o.add(c),c(u,...h))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,h){return h?(i.components[c]=h,u):i.components[c]},directive(c,h){return h?(i.directives[c]=h,u):i.directives[c]},mount(c,h,g){if(!l){const v=u._ceVNode||Ke(r,n);return v.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),t(v,c,g),l=!0,u._container=c,c.__vue_app__=u,pr(v.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Ve(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,h){return i.provides[c]=h,u},runWithContext(c){const h=Yt;Yt=u;try{return c()}finally{Yt=h}}};return u}}let Yt=null;function fl(t,e){if(Te){let s=Te.provides;const r=Te.parent&&Te.parent.provides;r===s&&(s=Te.provides=Object.create(r)),s[t]=e}}function Ks(t,e,s=!1){const r=Te||De;if(r||Yt){let n=Yt?Yt._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&t in n)return n[t];if(arguments.length>1)return s&&K(e)?e.call(r&&r.proxy):e}}const _o={},mo=()=>Object.create(_o),vo=t=>Object.getPrototypeOf(t)===_o;function pl(t,e,s,r=!1){const n={},i=mo();t.propsDefaults=Object.create(null),yo(t,e,n,i);for(const o in t.propsOptions[0])o in n||(n[o]=void 0);s?t.props=r?n:Ra(n):t.type.props?t.props=n:t.props=i,t.attrs=i}function gl(t,e,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=t,a=X(n),[l]=t.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=t.vnode.dynamicProps;for(let h=0;h<c.length;h++){let g=c[h];if(dr(t.emitsOptions,g))continue;const v=e[g];if(l)if(Z(i,g))v!==i[g]&&(i[g]=v,u=!0);else{const x=pt(g);n[x]=Jr(l,a,x,v,t,!1)}else v!==i[g]&&(i[g]=v,u=!0)}}}else{yo(t,e,n,i)&&(u=!0);let c;for(const h in a)(!e||!Z(e,h)&&((c=Pt(h))===h||!Z(e,c)))&&(l?s&&(s[h]!==void 0||s[c]!==void 0)&&(n[h]=Jr(l,a,h,void 0,t,!0)):delete n[h]);if(i!==a)for(const h in i)(!e||!Z(e,h))&&(delete i[h],u=!0)}u&&tt(t.attrs,"set","")}function yo(t,e,s,r){const[n,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(us(l))continue;const u=e[l];let c;n&&Z(n,c=pt(l))?!i||!i.includes(c)?s[c]=u:(a||(a={}))[c]=u:dr(t.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=X(s),u=a||te;for(let c=0;c<i.length;c++){const h=i[c];s[h]=Jr(n,l,h,u[h],t,!Z(u,h))}}return o}function Jr(t,e,s,r,n,i){const o=t[s];if(o!=null){const a=Z(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&K(l)){const{propsDefaults:u}=n;if(s in u)r=u[s];else{const c=Cs(n);r=u[s]=l.call(null,e),c()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Pt(s))&&(r=!0))}return r}const _l=new WeakMap;function bo(t,e,s=!1){const r=s?_l:e.propsCache,n=r.get(t);if(n)return n;const i=t.props,o={},a=[];let l=!1;if(!K(t)){const c=h=>{l=!0;const[g,v]=bo(h,e,!0);Ee(o,g),v&&a.push(...v)};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!i&&!l)return ne(t)&&r.set(t,Kt),Kt;if(B(i))for(let c=0;c<i.length;c++){const h=pt(i[c]);Un(h)&&(o[h]=te)}else if(i)for(const c in i){const h=pt(c);if(Un(h)){const g=i[c],v=o[h]=B(g)||K(g)?{type:g}:Ee({},g),x=v.type;let y=!1,f=!0;if(B(x))for(let T=0;T<x.length;++T){const S=x[T],b=K(S)&&S.name;if(b==="Boolean"){y=!0;break}else b==="String"&&(f=!1)}else y=K(x)&&x.name==="Boolean";v[0]=y,v[1]=f,(y||Z(v,"default"))&&a.push(h)}}const u=[o,a];return ne(t)&&r.set(t,u),u}function Un(t){return t[0]!=="$"&&!us(t)}const vn=t=>t[0]==="_"||t==="$stable",yn=t=>B(t)?t.map(Je):[Je(t)],ml=(t,e,s)=>{if(e._n)return e;const r=Wa((...n)=>yn(e(...n)),s);return r._c=!1,r},wo=(t,e,s)=>{const r=t._ctx;for(const n in t){if(vn(n))continue;const i=t[n];if(K(i))e[n]=ml(n,i,r);else if(i!=null){const o=yn(i);e[n]=()=>o}}},So=(t,e)=>{const s=yn(e);t.slots.default=()=>s},ko=(t,e,s)=>{for(const r in e)(s||!vn(r))&&(t[r]=e[r])},vl=(t,e,s)=>{const r=t.slots=mo();if(t.vnode.shapeFlag&32){const n=e._;n?(ko(r,e,s),s&&Ii(r,"_",n,!0)):wo(e,r)}else e&&So(t,e)},yl=(t,e,s)=>{const{vnode:r,slots:n}=t;let i=!0,o=te;if(r.shapeFlag&32){const a=e._;a?s&&a===1?i=!1:ko(n,e,s):(i=!e.$stable,wo(e,n)),o=e}else e&&(So(t,e),o={default:1});if(i)for(const a in n)!vn(a)&&o[a]==null&&delete n[a]},je=Rl;function bl(t){return wl(t)}function wl(t,e){const s=ar();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:g,setScopeId:v=We,insertStaticContent:x}=t,y=(d,p,k,j=null,O=null,C=null,L=void 0,I=null,R=!!p.dynamicChildren)=>{if(d===p)return;d&&!rs(d,p)&&(j=$t(d),Re(d,O,C,!0),d=null),p.patchFlag===-2&&(R=!1,p.dynamicChildren=null);const{type:$,ref:N,shapeFlag:D}=p;switch($){case fr:f(d,p,k,j);break;case _t:T(d,p,k,j);break;case Tr:d==null&&S(p,k,j,L);break;case ve:Be(d,p,k,j,O,C,L,I,R);break;default:D&1?m(d,p,k,j,O,C,L,I,R):D&6?ot(d,p,k,j,O,C,L,I,R):(D&64||D&128)&&$.process(d,p,k,j,O,C,L,I,R,bt)}N!=null&&O&&Zs(N,d&&d.ref,C,p||d,!p)},f=(d,p,k,j)=>{if(d==null)r(p.el=a(p.children),k,j);else{const O=p.el=d.el;p.children!==d.children&&u(O,p.children)}},T=(d,p,k,j)=>{d==null?r(p.el=l(p.children||""),k,j):p.el=d.el},S=(d,p,k,j)=>{[d.el,d.anchor]=x(d.children,p,k,j,d.el,d.anchor)},b=({el:d,anchor:p},k,j)=>{let O;for(;d&&d!==p;)O=g(d),r(d,k,j),d=O;r(p,k,j)},E=({el:d,anchor:p})=>{let k;for(;d&&d!==p;)k=g(d),n(d),d=k;n(p)},m=(d,p,k,j,O,C,L,I,R)=>{p.type==="svg"?L="svg":p.type==="math"&&(L="mathml"),d==null?w(p,k,j,O,C,L,I,R):be(d,p,O,C,L,I,R)},w=(d,p,k,j,O,C,L,I)=>{let R,$;const{props:N,shapeFlag:D,transition:M,dirs:F}=d;if(R=d.el=o(d.type,C,N&&N.is,N),D&8?c(R,d.children):D&16&&z(d.children,R,null,j,O,xr(d,C),L,I),F&&wt(d,null,j,"created"),q(R,d,d.scopeId,L,j),N){for(const ee in N)ee!=="value"&&!us(ee)&&i(R,ee,null,N[ee],C,j);"value"in N&&i(R,"value",null,N.value,C),($=N.onVnodeBeforeMount)&&qe($,j,d)}F&&wt(d,null,j,"beforeMount");const Y=Sl(O,M);Y&&M.beforeEnter(R),r(R,p,k),(($=N&&N.onVnodeMounted)||Y||F)&&je(()=>{$&&qe($,j,d),Y&&M.enter(R),F&&wt(d,null,j,"mounted")},O)},q=(d,p,k,j,O)=>{if(k&&v(d,k),j)for(let C=0;C<j.length;C++)v(d,j[C]);if(O){let C=O.subTree;if(p===C||Ao(C.type)&&(C.ssContent===p||C.ssFallback===p)){const L=O.vnode;q(d,L,L.scopeId,L.slotScopeIds,O.parent)}}},z=(d,p,k,j,O,C,L,I,R=0)=>{for(let $=R;$<d.length;$++){const N=d[$]=I?ut(d[$]):Je(d[$]);y(null,N,p,k,j,O,C,L,I)}},be=(d,p,k,j,O,C,L)=>{const I=p.el=d.el;let{patchFlag:R,dynamicChildren:$,dirs:N}=p;R|=d.patchFlag&16;const D=d.props||te,M=p.props||te;let F;if(k&&St(k,!1),(F=M.onVnodeBeforeUpdate)&&qe(F,k,p,d),N&&wt(p,d,k,"beforeUpdate"),k&&St(k,!0),(D.innerHTML&&M.innerHTML==null||D.textContent&&M.textContent==null)&&c(I,""),$?ae(d.dynamicChildren,$,I,k,j,xr(p,O),C):L||W(d,p,I,null,k,j,xr(p,O),C,!1),R>0){if(R&16)pe(I,D,M,k,O);else if(R&2&&D.class!==M.class&&i(I,"class",null,M.class,O),R&4&&i(I,"style",D.style,M.style,O),R&8){const Y=p.dynamicProps;for(let ee=0;ee<Y.length;ee++){const Q=Y[ee],we=D[Q],ge=M[Q];(ge!==we||Q==="value")&&i(I,Q,we,ge,O,k)}}R&1&&d.children!==p.children&&c(I,p.children)}else!L&&$==null&&pe(I,D,M,k,O);((F=M.onVnodeUpdated)||N)&&je(()=>{F&&qe(F,k,p,d),N&&wt(p,d,k,"updated")},j)},ae=(d,p,k,j,O,C,L)=>{for(let I=0;I<p.length;I++){const R=d[I],$=p[I],N=R.el&&(R.type===ve||!rs(R,$)||R.shapeFlag&198)?h(R.el):k;y(R,$,N,null,j,O,C,L,!0)}},pe=(d,p,k,j,O)=>{if(p!==k){if(p!==te)for(const C in p)!us(C)&&!(C in k)&&i(d,C,p[C],null,O,j);for(const C in k){if(us(C))continue;const L=k[C],I=p[C];L!==I&&C!=="value"&&i(d,C,I,L,O,j)}"value"in k&&i(d,"value",p.value,k.value,O)}},Be=(d,p,k,j,O,C,L,I,R)=>{const $=p.el=d?d.el:a(""),N=p.anchor=d?d.anchor:a("");let{patchFlag:D,dynamicChildren:M,slotScopeIds:F}=p;F&&(I=I?I.concat(F):F),d==null?(r($,k,j),r(N,k,j),z(p.children||[],k,N,O,C,L,I,R)):D>0&&D&64&&M&&d.dynamicChildren?(ae(d.dynamicChildren,M,k,O,C,L,I),(p.key!=null||O&&p===O.subTree)&&xo(d,p,!0)):W(d,p,k,N,O,C,L,I,R)},ot=(d,p,k,j,O,C,L,I,R)=>{p.slotScopeIds=I,d==null?p.shapeFlag&512?O.ctx.activate(p,k,j,L,R):at(p,k,j,O,C,L,R):Ct(d,p,R)},at=(d,p,k,j,O,C,L)=>{const I=d.component=Fl(d,j,O);if(lo(d)&&(I.ctx.renderer=bt),Bl(I,!1,L),I.asyncDep){if(O&&O.registerDep(I,ie,L),!d.el){const R=I.subTree=Ke(_t);T(null,R,p,k)}}else ie(I,d,p,k,O,C,L)},Ct=(d,p,k)=>{const j=p.component=d.component;if(jl(d,p,k))if(j.asyncDep&&!j.asyncResolved){U(j,p,k);return}else j.next=p,j.update();else p.el=d.el,j.vnode=p},ie=(d,p,k,j,O,C,L)=>{const I=()=>{if(d.isMounted){let{next:D,bu:M,u:F,parent:Y,vnode:ee}=d;{const Le=To(d);if(Le){D&&(D.el=ee.el,U(d,D,L)),Le.asyncDep.then(()=>{d.isUnmounted||I()});return}}let Q=D,we;St(d,!1),D?(D.el=ee.el,U(d,D,L)):D=ee,M&&Ws(M),(we=D.props&&D.props.onVnodeBeforeUpdate)&&qe(we,Y,D,ee),St(d,!0);const ge=Nn(d),Ie=d.subTree;d.subTree=ge,y(Ie,ge,h(Ie.el),$t(Ie),d,O,C),D.el=ge.el,Q===null&&$l(d,ge.el),F&&je(F,O),(we=D.props&&D.props.onVnodeUpdated)&&je(()=>qe(we,Y,D,ee),O)}else{let D;const{el:M,props:F}=p,{bm:Y,m:ee,parent:Q,root:we,type:ge}=d,Ie=fs(p);St(d,!1),Y&&Ws(Y),!Ie&&(D=F&&F.onVnodeBeforeMount)&&qe(D,Q,p),St(d,!0);{we.ce&&we.ce._injectChildStyle(ge);const Le=d.subTree=Nn(d);y(null,Le,k,j,d,O,C),p.el=Le.el}if(ee&&je(ee,O),!Ie&&(D=F&&F.onVnodeMounted)){const Le=p;je(()=>qe(D,Q,Le),O)}(p.shapeFlag&256||Q&&fs(Q.vnode)&&Q.vnode.shapeFlag&256)&&d.a&&je(d.a,O),d.isMounted=!0,p=k=j=null}};d.scope.on();const R=d.effect=new Mi(I);d.scope.off();const $=d.update=R.run.bind(R),N=d.job=R.runIfDirty.bind(R);N.i=d,N.id=d.uid,R.scheduler=()=>_n(N),St(d,!0),$()},U=(d,p,k)=>{p.component=d;const j=d.vnode.props;d.vnode=p,d.next=null,gl(d,p.props,j,k),yl(d,p.children,k),rt(),$n(d),nt()},W=(d,p,k,j,O,C,L,I,R=!1)=>{const $=d&&d.children,N=d?d.shapeFlag:0,D=p.children,{patchFlag:M,shapeFlag:F}=p;if(M>0){if(M&128){jt($,D,k,j,O,C,L,I,R);return}else if(M&256){ze($,D,k,j,O,C,L,I,R);return}}F&8?(N&16&&yt($,O,C),D!==$&&c(k,D)):N&16?F&16?jt($,D,k,j,O,C,L,I,R):yt($,O,C,!0):(N&8&&c(k,""),F&16&&z(D,k,j,O,C,L,I,R))},ze=(d,p,k,j,O,C,L,I,R)=>{d=d||Kt,p=p||Kt;const $=d.length,N=p.length,D=Math.min($,N);let M;for(M=0;M<D;M++){const F=p[M]=R?ut(p[M]):Je(p[M]);y(d[M],F,k,null,O,C,L,I,R)}$>N?yt(d,O,C,!0,!1,D):z(p,k,j,O,C,L,I,R,D)},jt=(d,p,k,j,O,C,L,I,R)=>{let $=0;const N=p.length;let D=d.length-1,M=N-1;for(;$<=D&&$<=M;){const F=d[$],Y=p[$]=R?ut(p[$]):Je(p[$]);if(rs(F,Y))y(F,Y,k,null,O,C,L,I,R);else break;$++}for(;$<=D&&$<=M;){const F=d[D],Y=p[M]=R?ut(p[M]):Je(p[M]);if(rs(F,Y))y(F,Y,k,null,O,C,L,I,R);else break;D--,M--}if($>D){if($<=M){const F=M+1,Y=F<N?p[F].el:j;for(;$<=M;)y(null,p[$]=R?ut(p[$]):Je(p[$]),k,Y,O,C,L,I,R),$++}}else if($>M)for(;$<=D;)Re(d[$],O,C,!0),$++;else{const F=$,Y=$,ee=new Map;for($=Y;$<=M;$++){const le=p[$]=R?ut(p[$]):Je(p[$]);le.key!=null&&ee.set(le.key,$)}let Q,we=0;const ge=M-Y+1;let Ie=!1,Le=0;const P=new Array(ge);for($=0;$<ge;$++)P[$]=0;for($=F;$<=D;$++){const le=d[$];if(we>=ge){Re(le,O,C,!0);continue}let _e;if(le.key!=null)_e=ee.get(le.key);else for(Q=Y;Q<=M;Q++)if(P[Q-Y]===0&&rs(le,p[Q])){_e=Q;break}_e===void 0?Re(le,O,C,!0):(P[_e-Y]=$+1,_e>=Le?Le=_e:Ie=!0,y(le,p[_e],k,null,O,C,L,I,R),we++)}const de=Ie?kl(P):Kt;for(Q=de.length-1,$=ge-1;$>=0;$--){const le=Y+$,_e=p[le],Pn=le+1<N?p[le+1].el:j;P[$]===0?y(null,_e,k,Pn,O,C,L,I,R):Ie&&(Q<0||$!==de[Q]?Ge(_e,k,Pn,2):Q--)}}},Ge=(d,p,k,j,O=null)=>{const{el:C,type:L,transition:I,children:R,shapeFlag:$}=d;if($&6){Ge(d.component.subTree,p,k,j);return}if($&128){d.suspense.move(p,k,j);return}if($&64){L.move(d,p,k,bt);return}if(L===ve){r(C,p,k);for(let D=0;D<R.length;D++)Ge(R[D],p,k,j);r(d.anchor,p,k);return}if(L===Tr){b(d,p,k);return}if(j!==2&&$&1&&I)if(j===0)I.beforeEnter(C),r(C,p,k),je(()=>I.enter(C),O);else{const{leave:D,delayLeave:M,afterLeave:F}=I,Y=()=>{d.ctx.isUnmounted?n(C):r(C,p,k)},ee=()=>{D(C,()=>{Y(),F&&F()})};M?M(C,Y,ee):ee()}else r(C,p,k)},Re=(d,p,k,j=!1,O=!1)=>{const{type:C,props:L,ref:I,children:R,dynamicChildren:$,shapeFlag:N,patchFlag:D,dirs:M,cacheIndex:F}=d;if(D===-2&&(O=!1),I!=null&&(rt(),Zs(I,null,k,d,!0),nt()),F!=null&&(p.renderCache[F]=void 0),N&256){p.ctx.deactivate(d);return}const Y=N&1&&M,ee=!fs(d);let Q;if(ee&&(Q=L&&L.onVnodeBeforeUnmount)&&qe(Q,p,d),N&6)mr(d.component,k,j);else{if(N&128){d.suspense.unmount(k,j);return}Y&&wt(d,null,p,"beforeUnmount"),N&64?d.type.remove(d,p,k,bt,j):$&&!$.hasOnce&&(C!==ve||D>0&&D&64)?yt($,p,k,!1,!0):(C===ve&&D&384||!O&&N&16)&&yt(R,p,k),j&&Is(d)}(ee&&(Q=L&&L.onVnodeUnmounted)||Y)&&je(()=>{Q&&qe(Q,p,d),Y&&wt(d,null,p,"unmounted")},k)},Is=d=>{const{type:p,el:k,anchor:j,transition:O}=d;if(p===ve){_r(k,j);return}if(p===Tr){E(d);return}const C=()=>{n(k),O&&!O.persisted&&O.afterLeave&&O.afterLeave()};if(d.shapeFlag&1&&O&&!O.persisted){const{leave:L,delayLeave:I}=O,R=()=>L(k,C);I?I(d.el,C,R):R()}else C()},_r=(d,p)=>{let k;for(;d!==p;)k=g(d),n(d),d=k;n(p)},mr=(d,p,k)=>{const{bum:j,scope:O,job:C,subTree:L,um:I,m:R,a:$,parent:N,slots:{__:D}}=d;Mn(R),Mn($),j&&Ws(j),N&&B(D)&&D.forEach(M=>{N.renderCache[M]=void 0}),O.stop(),C&&(C.flags|=8,Re(L,d,p,k)),I&&je(I,p),je(()=>{d.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},yt=(d,p,k,j=!1,O=!1,C=0)=>{for(let L=C;L<d.length;L++)Re(d[L],p,k,j,O)},$t=d=>{if(d.shapeFlag&6)return $t(d.component.subTree);if(d.shapeFlag&128)return d.suspense.next();const p=g(d.anchor||d.el),k=p&&p[Ka];return k?g(k):p};let ts=!1;const Ls=(d,p,k)=>{d==null?p._vnode&&Re(p._vnode,null,null,!0):y(p._vnode||null,d,p,null,null,null,k),p._vnode=d,ts||(ts=!0,$n(),ro(),ts=!1)},bt={p:y,um:Re,m:Ge,r:Is,mt:at,mc:z,pc:W,pbc:ae,n:$t,o:t};return{render:Ls,hydrate:void 0,createApp:dl(Ls)}}function xr({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function St({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Sl(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function xo(t,e,s=!1){const r=t.children,n=e.children;if(B(r)&&B(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=ut(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&xo(o,a)),a.type===fr&&(a.el=o.el),a.type===_t&&!a.el&&(a.el=o.el)}}function kl(t){const e=t.slice(),s=[0];let r,n,i,o,a;const l=t.length;for(r=0;r<l;r++){const u=t[r];if(u!==0){if(n=s[s.length-1],t[n]<u){e[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,t[s[a]]<u?i=a+1:o=a;u<t[s[i]]&&(i>0&&(e[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=e[o];return s}function To(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:To(e)}function Mn(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const xl=Symbol.for("v-scx"),Tl=()=>Ks(xl);function gs(t,e,s){return Eo(t,e,s)}function Eo(t,e,s=te){const{immediate:r,deep:n,flush:i,once:o}=s,a=Ee({},s),l=e&&r||!e&&i!=="post";let u;if(Es){if(i==="sync"){const v=Tl();u=v.__watcherHandles||(v.__watcherHandles=[])}else if(!l){const v=()=>{};return v.stop=We,v.resume=We,v.pause=We,v}}const c=Te;a.call=(v,x,y)=>Ve(v,c,x,y);let h=!1;i==="post"?a.scheduler=v=>{je(v,c&&c.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(v,x)=>{x?v():_n(v)}),a.augmentJob=v=>{e&&(v.flags|=4),h&&(v.flags|=2,c&&(v.id=c.uid,v.i=c))};const g=Ba(t,e,a);return Es&&(u?u.push(g):l&&g()),g}function El(t,e,s){const r=this.proxy,n=oe(t)?t.includes(".")?Oo(r,t):()=>r[t]:t.bind(r,r);let i;K(e)?i=e:(i=e.handler,s=e);const o=Cs(this),a=Eo(n,i.bind(r),s);return o(),a}function Oo(t,e){const s=e.split(".");return()=>{let r=t;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const Ol=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${pt(e)}Modifiers`]||t[`${Pt(e)}Modifiers`];function Pl(t,e,...s){if(t.isUnmounted)return;const r=t.vnode.props||te;let n=s;const i=e.startsWith("update:"),o=i&&Ol(r,e.slice(7));o&&(o.trim&&(n=s.map(c=>oe(c)?c.trim():c)),o.number&&(n=s.map(Lr)));let a,l=r[a=vr(e)]||r[a=vr(pt(e))];!l&&i&&(l=r[a=vr(Pt(e))]),l&&Ve(l,t,6,n);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ve(u,t,6,n)}}function Po(t,e,s=!1){const r=e.emitsCache,n=r.get(t);if(n!==void 0)return n;const i=t.emits;let o={},a=!1;if(!K(t)){const l=u=>{const c=Po(u,e,!0);c&&(a=!0,Ee(o,c))};!s&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(ne(t)&&r.set(t,null),null):(B(i)?i.forEach(l=>o[l]=null):Ee(o,i),ne(t)&&r.set(t,o),o)}function dr(t,e){return!t||!nr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Z(t,e[0].toLowerCase()+e.slice(1))||Z(t,Pt(e))||Z(t,e))}function Nn(t){const{type:e,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:g,setupState:v,ctx:x,inheritAttrs:y}=t,f=Xs(t);let T,S;try{if(s.shapeFlag&4){const E=n||r,m=E;T=Je(u.call(m,E,c,h,v,g,x)),S=a}else{const E=e;T=Je(E.length>1?E(h,{attrs:a,slots:o,emit:l}):E(h,null)),S=e.props?a:Al(a)}}catch(E){_s.length=0,cr(E,t,1),T=Ke(_t)}let b=T;if(S&&y!==!1){const E=Object.keys(S),{shapeFlag:m}=b;E.length&&m&7&&(i&&E.some(rn)&&(S=Cl(S,i)),b=Xt(b,S,!1,!0))}return s.dirs&&(b=Xt(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(s.dirs):s.dirs),s.transition&&mn(b,s.transition),T=b,Xs(f),T}const Al=t=>{let e;for(const s in t)(s==="class"||s==="style"||nr(s))&&((e||(e={}))[s]=t[s]);return e},Cl=(t,e)=>{const s={};for(const r in t)(!rn(r)||!(r.slice(9)in e))&&(s[r]=t[r]);return s};function jl(t,e,s){const{props:r,children:n,component:i}=t,{props:o,children:a,patchFlag:l}=e,u=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?Fn(r,o,u):!!o;if(l&8){const c=e.dynamicProps;for(let h=0;h<c.length;h++){const g=c[h];if(o[g]!==r[g]&&!dr(u,g))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Fn(r,o,u):!0:!!o;return!1}function Fn(t,e,s){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(e[i]!==t[i]&&!dr(s,i))return!0}return!1}function $l({vnode:t,parent:e},s){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=s,e=e.parent;else break}}const Ao=t=>t.__isSuspense;function Rl(t,e){e&&e.pendingBranch?B(t)?e.effects.push(...t):e.effects.push(t):Ja(t)}const ve=Symbol.for("v-fgt"),fr=Symbol.for("v-txt"),_t=Symbol.for("v-cmt"),Tr=Symbol.for("v-stc"),_s=[];let $e=null;function H(t=!1){_s.push($e=t?null:[])}function Il(){_s.pop(),$e=_s[_s.length-1]||null}let Ts=1;function Bn(t,e=!1){Ts+=t,t<0&&$e&&e&&($e.hasOnce=!0)}function Co(t){return t.dynamicChildren=Ts>0?$e||Kt:null,Il(),Ts>0&&$e&&$e.push(t),t}function V(t,e,s,r,n,i){return Co(_(t,e,s,r,n,i,!0))}function as(t,e,s,r,n){return Co(Ke(t,e,s,r,n,!0))}function jo(t){return t?t.__v_isVNode===!0:!1}function rs(t,e){return t.type===e.type&&t.key===e.key}const $o=({key:t})=>t??null,Vs=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?oe(t)||ye(t)||K(t)?{i:De,r:t,k:e,f:!!s}:t:null);function _(t,e=null,s=null,r=0,n=null,i=t===ve?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$o(e),ref:e&&Vs(e),scopeId:io,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:De};return a?(bn(l,s),i&128&&t.normalize(l)):s&&(l.shapeFlag|=oe(s)?8:16),Ts>0&&!o&&$e&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&$e.push(l),l}const Ke=Ll;function Ll(t,e=null,s=null,r=0,n=null,i=!1){if((!t||t===nl)&&(t=_t),jo(t)){const a=Xt(t,e,!0);return s&&bn(a,s),Ts>0&&!i&&$e&&(a.shapeFlag&6?$e[$e.indexOf(t)]=a:$e.push(a)),a.patchFlag=-2,a}if(Wl(t)&&(t=t.__vccOpts),e){e=Dl(e);let{class:a,style:l}=e;a&&!oe(a)&&(e.class=et(a)),ne(l)&&(gn(l)&&!B(l)&&(l=Ee({},l)),e.style=an(l))}const o=oe(t)?1:Ao(t)?128:Va(t)?64:ne(t)?4:K(t)?2:0;return _(t,e,s,r,n,o,i,!0)}function Dl(t){return t?gn(t)||vo(t)?Ee({},t):t:null}function Xt(t,e,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=t,u=e?Ul(n||{},e):n,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&$o(u),ref:e&&e.ref?s&&i?B(i)?i.concat(Vs(e)):[i,Vs(e)]:Vs(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ve?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Xt(t.ssContent),ssFallback:t.ssFallback&&Xt(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&mn(c,l.clone(c)),c}function ms(t=" ",e=0){return Ke(fr,null,t,e)}function he(t="",e=!1){return e?(H(),as(_t,null,t)):Ke(_t,null,t)}function Je(t){return t==null||typeof t=="boolean"?Ke(_t):B(t)?Ke(ve,null,t.slice()):jo(t)?ut(t):Ke(fr,null,String(t))}function ut(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Xt(t)}function bn(t,e){let s=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(B(e))s=16;else if(typeof e=="object")if(r&65){const n=e.default;n&&(n._c&&(n._d=!1),bn(t,n()),n._c&&(n._d=!0));return}else{s=32;const n=e._;!n&&!vo(e)?e._ctx=De:n===3&&De&&(De.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else K(e)?(e={default:e,_ctx:De},s=32):(e=String(e),r&64?(s=16,e=[ms(e)]):s=8);t.children=e,t.shapeFlag|=s}function Ul(...t){const e={};for(let s=0;s<t.length;s++){const r=t[s];for(const n in r)if(n==="class")e.class!==r.class&&(e.class=et([e.class,r.class]));else if(n==="style")e.style=an([e.style,r.style]);else if(nr(n)){const i=e[n],o=r[n];o&&i!==o&&!(B(i)&&i.includes(o))&&(e[n]=i?[].concat(i,o):o)}else n!==""&&(e[n]=r[n])}return e}function qe(t,e,s,r=null){Ve(t,e,7,[s,r])}const Ml=go();let Nl=0;function Fl(t,e,s){const r=t.type,n=(e?e.appContext:t.appContext)||Ml,i={uid:Nl++,vnode:t,type:r,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bo(r,n),emitsOptions:Po(r,n),emit:null,emitted:null,propsDefaults:te,inheritAttrs:r.inheritAttrs,ctx:te,data:te,props:te,attrs:te,slots:te,refs:te,setupState:te,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Pl.bind(null,i),t.ce&&t.ce(i),i}let Te=null,tr,Wr;{const t=ar(),e=(s,r)=>{let n;return(n=t[s])||(n=t[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};tr=e("__VUE_INSTANCE_SETTERS__",s=>Te=s),Wr=e("__VUE_SSR_SETTERS__",s=>Es=s)}const Cs=t=>{const e=Te;return tr(t),t.scope.on(),()=>{t.scope.off(),tr(e)}},qn=()=>{Te&&Te.scope.off(),tr(null)};function Ro(t){return t.vnode.shapeFlag&4}let Es=!1;function Bl(t,e=!1,s=!1){e&&Wr(e);const{props:r,children:n}=t.vnode,i=Ro(t);pl(t,r,i,e),vl(t,n,s||e);const o=i?ql(t,e):void 0;return e&&Wr(!1),o}function ql(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,il);const{setup:r}=s;if(r){rt();const n=t.setupContext=r.length>1?Jl(t):null,i=Cs(t),o=As(r,t,0,[t.props,n]),a=Ci(o);if(nt(),i(),(a||t.sp)&&!fs(t)&&ao(t),a){if(o.then(qn,qn),e)return o.then(l=>{Hn(t,l)}).catch(l=>{cr(l,t,0)});t.asyncDep=o}else Hn(t,o)}else Io(t)}function Hn(t,e,s){K(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ne(e)&&(t.setupState=Zi(e)),Io(t)}function Io(t,e,s){const r=t.type;t.render||(t.render=r.render||We);{const n=Cs(t);rt();try{ol(t)}finally{nt(),n()}}}const Hl={get(t,e){return me(t,"get",""),t[e]}};function Jl(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Hl),slots:t.slots,emit:t.emit,expose:e}}function pr(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(Zi(Ia(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in ps)return ps[s](t)},has(e,s){return s in e||s in ps}})):t.proxy}function Wl(t){return K(t)&&"__vccOpts"in t}const ls=(t,e)=>Na(t,e,Es),Kl="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kr;const Jn=typeof window<"u"&&window.trustedTypes;if(Jn)try{Kr=Jn.createPolicy("vue",{createHTML:t=>t})}catch{}const Lo=Kr?t=>Kr.createHTML(t):t=>t,Vl="http://www.w3.org/2000/svg",zl="http://www.w3.org/1998/Math/MathML",Xe=typeof document<"u"?document:null,Wn=Xe&&Xe.createElement("template"),Gl={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,r)=>{const n=e==="svg"?Xe.createElementNS(Vl,t):e==="mathml"?Xe.createElementNS(zl,t):s?Xe.createElement(t,{is:s}):Xe.createElement(t);return t==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:t=>Xe.createTextNode(t),createComment:t=>Xe.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Xe.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,r,n,i){const o=s?s.previousSibling:e.lastChild;if(n&&(n===i||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{Wn.innerHTML=Lo(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Wn.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,s)}return[o?o.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},Yl=Symbol("_vtc");function Ql(t,e,s){const r=t[Yl];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const Kn=Symbol("_vod"),Xl=Symbol("_vsh"),Zl=Symbol(""),ec=/(^|;)\s*display\s*:/;function tc(t,e,s){const r=t.style,n=oe(s);let i=!1;if(s&&!n){if(e)if(oe(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&zs(r,a,"")}else for(const o in e)s[o]==null&&zs(r,o,"");for(const o in s)o==="display"&&(i=!0),zs(r,o,s[o])}else if(n){if(e!==s){const o=r[Zl];o&&(s+=";"+o),r.cssText=s,i=ec.test(s)}}else e&&t.removeAttribute("style");Kn in t&&(t[Kn]=i?r.display:"",t[Xl]&&(r.display="none"))}const Vn=/\s*!important$/;function zs(t,e,s){if(B(s))s.forEach(r=>zs(t,e,r));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const r=sc(t,e);Vn.test(s)?t.setProperty(Pt(r),s.replace(Vn,""),"important"):t[r]=s}}const zn=["Webkit","Moz","ms"],Er={};function sc(t,e){const s=Er[e];if(s)return s;let r=pt(e);if(r!=="filter"&&r in t)return Er[e]=r;r=Ri(r);for(let n=0;n<zn.length;n++){const i=zn[n]+r;if(i in t)return Er[e]=i}return e}const Gn="http://www.w3.org/1999/xlink";function Yn(t,e,s,r,n,i=da(e)){r&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(Gn,e.slice(6,e.length)):t.setAttributeNS(Gn,e,s):s==null||i&&!Li(s)?t.removeAttribute(e):t.setAttribute(e,i?"":mt(s)?String(s):s)}function Qn(t,e,s,r,n){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Lo(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?t.getAttribute("value")||"":t.value,l=s==null?t.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in t))&&(t.value=l),s==null&&t.removeAttribute(e),t._value=s;return}let o=!1;if(s===""||s==null){const a=typeof t[e];a==="boolean"?s=Li(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{t[e]=s}catch{}o&&t.removeAttribute(n||e)}function Jt(t,e,s,r){t.addEventListener(e,s,r)}function rc(t,e,s,r){t.removeEventListener(e,s,r)}const Xn=Symbol("_vei");function nc(t,e,s,r,n=null){const i=t[Xn]||(t[Xn]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=ic(e);if(r){const u=i[e]=lc(r,n);Jt(t,a,u,l)}else o&&(rc(t,a,o,l),i[e]=void 0)}}const Zn=/(?:Once|Passive|Capture)$/;function ic(t){let e;if(Zn.test(t)){e={};let r;for(;r=t.match(Zn);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Pt(t.slice(2)),e]}let Or=0;const oc=Promise.resolve(),ac=()=>Or||(oc.then(()=>Or=0),Or=Date.now());function lc(t,e){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;Ve(cc(r,s.value),e,5,[r])};return s.value=t,s.attached=ac(),s}function cc(t,e){if(B(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(r=>n=>!n._stopped&&r&&r(n))}else return e}const ei=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,uc=(t,e,s,r,n,i)=>{const o=n==="svg";e==="class"?Ql(t,r,o):e==="style"?tc(t,s,r):nr(e)?rn(e)||nc(t,e,s,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hc(t,e,r,o))?(Qn(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Yn(t,e,r,o,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!oe(r))?Qn(t,pt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Yn(t,e,r,o))};function hc(t,e,s,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&ei(e)&&K(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=t.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return ei(e)&&oe(s)?!1:e in t}const ti=t=>{const e=t.props["onUpdate:modelValue"]||!1;return B(e)?s=>Ws(e,s):e};function dc(t){t.target.composing=!0}function si(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Pr=Symbol("_assign"),Do={created(t,{modifiers:{lazy:e,trim:s,number:r}},n){t[Pr]=ti(n);const i=r||n.props&&n.props.type==="number";Jt(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;s&&(a=a.trim()),i&&(a=Lr(a)),t[Pr](a)}),s&&Jt(t,"change",()=>{t.value=t.value.trim()}),e||(Jt(t,"compositionstart",dc),Jt(t,"compositionend",si),Jt(t,"change",si))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(t[Pr]=ti(o),t.composing)return;const a=(i||t.type==="number")&&!/^0\d/.test(t.value)?Lr(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===s||n&&t.value.trim()===l)||(t.value=l))}},fc=["ctrl","shift","alt","meta"],pc={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>fc.some(s=>t[`${s}Key`]&&!e.includes(s))},Os=(t,e)=>{const s=t._withMods||(t._withMods={}),r=e.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<e.length;o++){const a=pc[e[o]];if(a&&a(n,e))return}return t(n,...i)})},gc=Ee({patchProp:uc},Gl);let ri;function _c(){return ri||(ri=bl(gc))}const mc=(...t)=>{const e=_c().createApp(...t),{mount:s}=e;return e.mount=r=>{const n=yc(r);if(!n)return;const i=e._component;!K(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,vc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function vc(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function yc(t){return oe(t)?document.querySelector(t):t}const js=(t,e)=>{const s=t.__vccOpts||t;for(const[r,n]of e)s[r]=n;return s},bc={key:0,class:"action-buttons"},wc=["disabled"],Sc={class:"players-grid"},kc={class:"avatar-placeholder"},xc=["src"],Tc={class:"player-name"},Ec={class:"player-actions"},Oc=["onClick"],Pc=["onClick"],Ac=["onClick"],Cc={class:"action-buttons"},jc={__name:"PlayerSelector",props:{predefinedPlayers:Array,role:String},emits:["start-game"],setup(t,{emit:e}){const s=t,r=e,n=Ce([]),i=Ce(""),o=["/shanghai/img/invite_1.jpg","/shanghai/img/invite_2.png","/shanghai/img/invite_3.png","/shanghai/img/invite_4.png","/shanghai/img/invite_5.png","/shanghai/img/invite_6.png","/shanghai/img/invite_7.png","/shanghai/img/invite_8.png","/shanghai/img/invite_9.png","/shanghai/img/invite_10.png","/shanghai/img/invite_11.png"];let a=[...o];function l(){a.length===0&&(a=[...o]);const S=Math.floor(Math.random()*a.length);return a.splice(S,1)[0]}function u(){const S=i.value.trim();if(S===""||n.value.some(E=>E.name===S))return;const b=s.predefinedPlayers.find(E=>E.name===S);n.value.push({name:S,avatar:(b==null?void 0:b.avatar)||l()}),i.value=""}function c(){u()}function h(){n.value=s.predefinedPlayers.map(S=>({id:S.id,name:S.name,avatar:S.avatar||l()}))}function g(S){n.value=n.value.filter(b=>b.name!==S)}function v(S){const b=n.value.findIndex(E=>E.name===S);b<=0||([n.value[b-1],n.value[b]]=[n.value[b],n.value[b-1]])}function x(S){const b=n.value.findIndex(E=>E.name===S);b===-1||b>=n.value.length-1||([n.value[b+1],n.value[b]]=[n.value[b],n.value[b+1]])}function y(){for(let S=n.value.length-1;S>0;S--){const b=Math.floor(Math.random()*(S+1));[n.value[S],n.value[b]]=[n.value[b],n.value[S]]}}function f(){const S=document.documentElement;S.requestFullscreen?S.requestFullscreen():S.mozRequestFullScreen?S.mozRequestFullScreen():S.webkitRequestFullscreen?S.webkitRequestFullscreen():S.msRequestFullscreen&&S.msRequestFullscreen()}function T(){f(),r("start-game",n.value)}return hr(()=>{s.role==="admin"&&h()}),(S,b)=>(H(),V(ve,null,[b[3]||(b[3]=_("h1",null,"Shanghai ",-1)),t.role==="admin"?(H(),V("div",bc,[_("a",{href:"#",onClick:b[0]||(b[0]=Os(E=>S.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):he("",!0),_("form",{onSubmit:Os(u,["prevent"])},[oo(_("input",{type:"text","onUpdate:modelValue":b[1]||(b[1]=E=>i.value=E),placeholder:"Ajouter un joueur",onChange:c},null,544),[[Do,i.value]]),_("button",{disabled:i.value.length===0},"Ajouter",8,wc)],32),_("ul",Sc,[(H(!0),V(ve,null,xs(n.value,E=>(H(),V("li",{key:E.name,class:"player-card"},[_("div",kc,[_("img",{src:E.avatar,alt:"avatar",class:"avatar-img"},null,8,xc)]),_("div",Tc,A(E.name),1),_("div",Ec,[_("button",{onClick:m=>v(E.name)},"",8,Oc),_("button",{onClick:m=>g(E.name)},"",8,Pc),_("button",{onClick:m=>x(E.name)},"",8,Ac)])]))),128))]),_("div",Cc,[n.value.length>=2?(H(),V("button",{key:0,onClick:b[2]||(b[2]=E=>y())},"Ordre alatoire")):he("",!0),n.value.length>=1?(H(),V("button",{key:1,onClick:T,class:"jouer-button"},"JOUER")):he("",!0)]),b[4]||(b[4]=_("br",null,null,-1))],64))}},$c=js(jc,[["__scopeId","data-v-91569e23"]]),Rc="modulepreload",Ic=function(t){return"/shanghai/"+t},ni={},$s=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(s.map(u=>{if(u=Ic(u),u in ni)return;ni[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const g=document.createElement("link");if(g.rel=c?"stylesheet":Rc,c||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),c)return new Promise((v,x)=>{g.addEventListener("load",v),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Lc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>$s(async()=>{const{default:r}=await Promise.resolve().then(()=>es);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)};class wn extends Error{constructor(e,s="FunctionsError",r){super(e),this.name=s,this.context=r}}class Dc extends wn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Uc extends wn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mc extends wn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vr;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Vr||(Vr={}));var Nc=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Fc{constructor(e,{headers:s={},customFetch:r,region:n=Vr.Any}={}){this.url=e,this.headers=s,this.region=n,this.fetch=Lc(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var r;return Nc(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=s;let a={},{region:l}=s;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:u}).catch(x=>{throw new Dc(x)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Uc(c);if(!c.ok)throw new Mc(c);let g=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),v;return g==="application/json"?v=yield c.json():g==="application/octet-stream"?v=yield c.blob():g==="text/event-stream"?v=c:g==="multipart/form-data"?v=yield c.formData():v=yield c.text(),{data:v,error:null}}catch(n){return{data:null,error:n}}})}}function Bc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qc(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var s=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}),s}var ce={},It={},Lt={},Dt={},Ut={},Mt={},Hc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Zt=Hc();const Jc=Zt.fetch,Uo=Zt.fetch.bind(Zt),Mo=Zt.Headers,Wc=Zt.Request,Kc=Zt.Response,es=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mo,Request:Wc,Response:Kc,default:Uo,fetch:Jc},Symbol.toStringTag,{value:"Module"})),Vc=qc(es);var Ns={},ii;function No(){if(ii)return Ns;ii=1,Object.defineProperty(Ns,"__esModule",{value:!0});class t extends Error{constructor(s){super(s.message),this.name="PostgrestError",this.details=s.details,this.hint=s.hint,this.code=s.code}}return Ns.default=t,Ns}var oi;function Fo(){if(oi)return Mt;oi=1;var t=Mt&&Mt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Mt,"__esModule",{value:!0});const e=t(Vc),s=t(No());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,g;let v=null,x=null,y=null,f=u.status,T=u.statusText;if(u.ok){if(this.method!=="HEAD"){const m=await u.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?x=m:x=JSON.parse(m))}const b=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),E=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");b&&E&&E.length>1&&(y=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(v={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,y=null,f=406,T="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const b=await u.text();try{v=JSON.parse(b),Array.isArray(v)&&u.status===404&&(x=[],v=null,f=200,T="OK")}catch{u.status===404&&b===""?(f=204,T="No Content"):v={message:b}}if(v&&this.isMaybeSingle&&(!((g=v==null?void 0:v.details)===null||g===void 0)&&g.includes("0 rows"))&&(v=null,f=200,T="OK"),v&&this.shouldThrowOnError)throw new s.default(v)}return{error:v,data:x,count:y,status:f,statusText:T}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,g;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(g=u==null?void 0:u.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return Mt.default=r,Mt}var ai;function Bo(){if(ai)return Ut;ai=1;var t=Ut&&Ut.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ut,"__esModule",{value:!0});const e=t(Fo());class s extends e.default{select(n){let i=!1;const o=(n??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(u,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[n?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),g=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${g}"; options=${h};`,u==="json"?this:this}rollback(){var n;return((n=this.headers.Prefer)!==null&&n!==void 0?n:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ut.default=s,Ut}var li;function Sn(){if(li)return Dt;li=1;var t=Dt&&Dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dt,"__esModule",{value:!0});const e=t(Bo());class s extends e.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${l}fts${u}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return Dt.default=s,Dt}var ci;function qo(){if(ci)return Lt;ci=1;var t=Lt&&Lt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Lt,"__esModule",{value:!0});const e=t(Sn());class s{constructor(n,{headers:i={},schema:o,fetch:a}){this.url=n,this.headers=i,this.schema=o,this.fetch=a}select(n,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const u=(n??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(n,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(n)){const u=n.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(n)){const h=n.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(h.length>0){const g=[...new Set(h)].map(v=>`"${v}"`);this.url.searchParams.set("columns",g.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}update(n,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:n}={}){const i="DELETE",o=[];return n&&o.push(`count=${n}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Lt.default=s,Lt}var ns={},is={},ui;function zc(){return ui||(ui=1,Object.defineProperty(is,"__esModule",{value:!0}),is.version=void 0,is.version="0.0.0-automated"),is}var hi;function Gc(){if(hi)return ns;hi=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.DEFAULT_HEADERS=void 0;const t=zc();return ns.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},ns}var di;function Yc(){if(di)return It;di=1;var t=It&&It.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(It,"__esModule",{value:!0});const e=t(qo()),s=t(Sn()),r=Gc();class n{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const g=new URL(`${this.url}/rpc/${o}`);let v;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([y,f])=>f!==void 0).map(([y,f])=>[y,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([y,f])=>{g.searchParams.append(y,f)})):(h="POST",v=a);const x=Object.assign({},this.headers);return c&&(x.Prefer=`count=${c}`),new s.default({method:h,url:g,headers:x,schema:this.schemaName,body:v,fetch:this.fetch,allowEmpty:!1})}}return It.default=n,It}var fi;function Qc(){if(fi)return ce;fi=1;var t=ce&&ce.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(ce,"__esModule",{value:!0}),ce.PostgrestError=ce.PostgrestBuilder=ce.PostgrestTransformBuilder=ce.PostgrestFilterBuilder=ce.PostgrestQueryBuilder=ce.PostgrestClient=void 0;const e=t(Yc());ce.PostgrestClient=e.default;const s=t(qo());ce.PostgrestQueryBuilder=s.default;const r=t(Sn());ce.PostgrestFilterBuilder=r.default;const n=t(Bo());ce.PostgrestTransformBuilder=n.default;const i=t(Fo());ce.PostgrestBuilder=i.default;const o=t(No());return ce.PostgrestError=o.default,ce.default={PostgrestClient:e.default,PostgrestQueryBuilder:s.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:o.default},ce}var Xc=Qc();const Zc=Bc(Xc),{PostgrestClient:eu,PostgrestQueryBuilder:sf,PostgrestFilterBuilder:rf,PostgrestTransformBuilder:nf,PostgrestBuilder:of,PostgrestError:af}=Zc;let zr;typeof window>"u"?zr=require("ws"):zr=window.WebSocket;const tu="2.11.10",su={"X-Client-Info":`realtime-js/${tu}`},ru="1.0.0",Ho=1e4,nu=1e3;var Qt;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Qt||(Qt={}));var ke;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ke||(ke={}));var Ne;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ne||(Ne={}));var Gr;(function(t){t.websocket="websocket"})(Gr||(Gr={}));var Et;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Et||(Et={}));class iu{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,s,r)}_decodeBroadcast(e,s,r){const n=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+n));o=o+n;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class Jo{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var se;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(se||(se={}));const pi=(t,e,s={})=>{var r;const n=(r=s.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=ou(o,t,e,n),i),{})},ou=(t,e,s,r)=>{const n=e.find(a=>a.name===t),i=n==null?void 0:n.type,o=s[t];return i&&!r.includes(i)?Wo(i,o):Yr(o)},Wo=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return uu(e,s)}switch(t){case se.bool:return au(e);case se.float4:case se.float8:case se.int2:case se.int4:case se.int8:case se.numeric:case se.oid:return lu(e);case se.json:case se.jsonb:return cu(e);case se.timestamp:return hu(e);case se.abstime:case se.date:case se.daterange:case se.int4range:case se.int8range:case se.money:case se.reltime:case se.text:case se.time:case se.timestamptz:case se.timetz:case se.tsrange:case se.tstzrange:return Yr(e);default:return Yr(e)}},Yr=t=>t,au=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lu=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cu=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},uu=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,r=t[s];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Wo(e,a))}return t},hu=t=>typeof t=="string"?t.replace(" ","T"):t,Ko=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Ar{constructor(e,s,r={},n=Ho){this.channel=e,this.event=s,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var r;return this._hasReceived(e)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var gi;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(gi||(gi={}));class vs{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vs.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=vs.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=vs.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,r,n){const i=this.cloneDeep(e),o=this.transformState(s),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const g=c.map(f=>f.presence_ref),v=h.map(f=>f.presence_ref),x=c.filter(f=>v.indexOf(f.presence_ref)<0),y=h.filter(f=>g.indexOf(f.presence_ref)<0);x.length>0&&(a[u]=x),y.length>0&&(l[u]=y)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(e,s,r,n){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),c.length>0){const h=e[a].map(v=>v.presence_ref),g=c.filter(v=>h.indexOf(v.presence_ref)<0);e[a].unshift(...g)}r(a,c,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=u,n(a,u,l),u.length===0&&delete e[a]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(r=>s(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,r)=>{const n=e[r];return"metas"in n?s[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[r]=n,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var _i;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(_i||(_i={}));var mi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(mi||(mi={}));var Ze;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ze||(Ze={}));class kn{constructor(e,s={config:{}},r){this.topic=e,this.params=s,this.socket=r,this.bindings={},this.state=ke.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Ar(this,Ne.join,this.params,this.timeout),this.rejoinTimer=new Jo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ke.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ke.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ke.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ne.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new vs(this),this.broadcastEndpointURL=Ko(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>e==null?void 0:e(Ze.CHANNEL_ERROR,c)),this._onClose(()=>e==null?void 0:e(Ze.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&n!==void 0?n:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){e==null||e(Ze.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(h=g==null?void 0:g.length)!==null&&h!==void 0?h:0,x=[];for(let y=0;y<v;y++){const f=g[y],{filter:{event:T,schema:S,table:b,filter:E}}=f,m=c&&c[y];if(m&&m.event===T&&m.schema===S&&m.table===b&&m.filter===E)x.push(Object.assign(Object.assign({},f),{id:m.id}));else{this.unsubscribe(),this.state=ke.errored,e==null||e(Ze.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Ze.SUBSCRIBED);return}}).receive("error",c=>{this.state=ke.errored,e==null||e(Ze.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ze.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,r){return this._on(e,s,r)}async send(e,s={}){var r,n;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ke.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ne.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const n=new Ar(this,Ne.leave,{},e);n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:n.signal}));return clearTimeout(i),o}_push(e,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Ar(this,e,s,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,s,r){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,r){var n,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=Ne;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,s,r);if(s&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(v=>{var x,y,f;return((x=v.filter)===null||x===void 0?void 0:x.event)==="*"||((f=(y=v.filter)===null||y===void 0?void 0:y.event)===null||f===void 0?void 0:f.toLocaleLowerCase())===o}).map(v=>v.callback(g,r)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var x,y,f,T,S,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const E=v.id,m=(x=v.filter)===null||x===void 0?void 0:x.event;return E&&((y=s.ids)===null||y===void 0?void 0:y.includes(E))&&(m==="*"||(m==null?void 0:m.toLocaleLowerCase())===((f=s.data)===null||f===void 0?void 0:f.type.toLocaleLowerCase()))}else{const E=(S=(T=v==null?void 0:v.filter)===null||T===void 0?void 0:T.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return E==="*"||E===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof g=="object"&&"ids"in g){const x=g.data,{schema:y,table:f,commit_timestamp:T,type:S,errors:b}=x;g=Object.assign(Object.assign({},{schema:y,table:f,commit_timestamp:T,eventType:S,new:{},old:{},errors:b}),this._getPayloadRecords(x))}v.callback(g,r)})}_isClosed(){return this.state===ke.closed}_isJoined(){return this.state===ke.joined}_isJoining(){return this.state===ke.joining}_isLeaving(){return this.state===ke.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,r){const n=e.toLocaleLowerCase(),i={type:n,filter:s,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,s){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&kn.isEqual(n.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const r in e)if(e[r]!==s[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ne.close,{},e)}_onError(e){this._on(Ne.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ke.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=pi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=pi(e.columns,e.old_record)),s}}const vi=()=>{},du=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class fu{constructor(e,s){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=su,this.params={},this.timeout=Ho,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=vi,this.ref=0,this.logger=vi,this.conn=null,this.sendBuffer=[],this.serializer=new iu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>$s(async()=>{const{default:l}=await Promise.resolve().then(()=>es);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Gr.websocket}`,this.httpEndpoint=Ko(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.headers&&(this.headers=Object.assign(Object.assign({},this.headers),s.headers)),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=(r=s==null?void 0:s.params)===null||r===void 0?void 0:r.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Jo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=zr),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new pu(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ru}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==e._joinRef),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,r){this.logger(e,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Qt.connecting:return Et.Connecting;case Qt.open:return Et.Open;case Qt.closing:return Et.Closing;default:return Et.Closed}}isConnected(){return this.connectionState()===Et.Open}channel(e,s={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new kn(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${s} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(r=>{s&&r.updateJoinPayload({access_token:s,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(Ne.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(nu,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:r,event:n,payload:i,ref:o}=s;r==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${n} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(n,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(s))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ne.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const r=e.match(/\?/)?"&":"?",n=new URLSearchParams(s);return`${e}${r}${n}`}_workerObjectUrl(e){let s;if(e)s=e;else{const r=new Blob([du],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}}class pu{constructor(e,s,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Qt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class xn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ue(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class gu extends xn{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Qr extends xn{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var _u=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Vo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>$s(async()=>{const{default:r}=await Promise.resolve().then(()=>es);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},mu=()=>_u(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield $s(()=>Promise.resolve().then(()=>es),void 0)).Response:Response}),Xr=t=>{if(Array.isArray(t))return t.map(s=>Xr(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,r])=>{const n=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[n]=Xr(r)}),e};var At=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Cr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),vu=(t,e,s)=>At(void 0,void 0,void 0,function*(){const r=yield mu();t instanceof r&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{e(new gu(Cr(n),t.status||500))}).catch(n=>{e(new Qr(Cr(n),n))}):e(new Qr(Cr(t),t))}),yu=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(n.body=JSON.stringify(r)),Object.assign(Object.assign({},n),s))};function Rs(t,e,s,r,n,i){return At(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(s,yu(e,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>vu(l,a,r))})})}function sr(t,e,s,r){return At(this,void 0,void 0,function*(){return Rs(t,"GET",e,s,r)})}function ht(t,e,s,r,n){return At(this,void 0,void 0,function*(){return Rs(t,"POST",e,r,n,s)})}function bu(t,e,s,r,n){return At(this,void 0,void 0,function*(){return Rs(t,"PUT",e,r,n,s)})}function wu(t,e,s,r){return At(this,void 0,void 0,function*(){return Rs(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}function zo(t,e,s,r,n){return At(this,void 0,void 0,function*(){return Rs(t,"DELETE",e,r,n,s)})}var Oe=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Su={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},yi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ku{constructor(e,s={},r,n){this.url=e,this.headers=s,this.bucketId=r,this.fetch=Vo(n)}uploadOrUpdate(e,s,r,n){return Oe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},yi),n);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const u=this._removeEmptyFolders(s),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield h.json();return h.ok?{data:{path:u,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(i){if(ue(i))return{data:null,error:i};throw i}})}upload(e,s,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,r)})}uploadToSignedUrl(e,s,r,n){return Oe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",s);try{let l;const u=Object.assign({upsert:yi.upsert},n),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),g=yield h.json();return h.ok?{data:{path:i,fullPath:g.Key},error:null}:{data:null,error:g}}catch(l){if(ue(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return Oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);s!=null&&s.upsert&&(n["x-upsert"]="true");const i=yield ht(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new xn("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}update(e,s,r){return Oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,r)})}move(e,s,r){return Oe(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}copy(e,s,r){return Oe(this,void 0,void 0,function*(){try{return{data:{path:(yield ht(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}createSignedUrl(e,s,r){return Oe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),i=yield ht(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:s},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}createSignedUrls(e,s,r){return Oe(this,void 0,void 0,function*(){try{const n=yield ht(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}download(e,s){return Oe(this,void 0,void 0,function*(){const n=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield sr(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(ue(a))return{data:null,error:a};throw a}})}info(e){return Oe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const r=yield sr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Xr(r),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}exists(e){return Oe(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield wu(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ue(r)&&r instanceof Qr){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,s){const r=this._getFinalPath(e),n=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&n.push(i);const a=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return Oe(this,void 0,void 0,function*(){try{return{data:yield zo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}list(e,s,r){return Oe(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Su),s),{prefix:e||""});return{data:yield ht(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const xu="2.7.1",Tu={"X-Client-Info":`storage-js/${xu}`};var Nt=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Eu{constructor(e,s={},r){this.url=e,this.headers=Object.assign(Object.assign({},Tu),s),this.fetch=Vo(r)}listBuckets(){return Nt(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ue(e))return{data:null,error:e};throw e}})}getBucket(e){return Nt(this,void 0,void 0,function*(){try{return{data:yield sr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Nt(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}updateBucket(e,s){return Nt(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Nt(this,void 0,void 0,function*(){try{return{data:yield ht(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Nt(this,void 0,void 0,function*(){try{return{data:yield zo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(ue(s))return{data:null,error:s};throw s}})}}class Ou extends Eu{constructor(e,s={},r){super(e,s,r)}from(e){return new ku(this.url,this.headers,e,this.fetch)}}const Pu="2.50.0";let cs="";typeof Deno<"u"?cs="deno":typeof document<"u"?cs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?cs="react-native":cs="node";const Au={"X-Client-Info":`supabase-js-${cs}/${Pu}`},Cu={headers:Au},ju={schema:"public"},$u={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ru={};var Iu=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const Lu=t=>{let e;return t?e=t:typeof fetch>"u"?e=Uo:e=fetch,(...s)=>e(...s)},Du=()=>typeof Headers>"u"?Mo:Headers,Uu=(t,e,s)=>{const r=Lu(s),n=Du();return(i,o)=>Iu(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Mu=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function Nu(t){return t.endsWith("/")?t:t+"/"}function Fu(t,e){var s,r;const{db:n,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:c,global:h}=e,g={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Mu(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const Go="2.70.0",Wt=30*1e3,Zr=3,jr=Zr*Wt,Bu="http://localhost:9999",qu="supabase.auth.token",Hu={"X-Client-Info":`gotrue-js/${Go}`},en="X-Supabase-Api-Version",Yo={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ju=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Wu=6e5;class Tn extends Error{constructor(e,s,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function J(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Ku extends Tn{constructor(e,s,r){super(e,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function Vu(t){return J(t)&&t.name==="AuthApiError"}class Qo extends Tn{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class vt extends Tn{constructor(e,s,r,n){super(e,r,n),this.name=s,this.status=r}}class lt extends vt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function zu(t){return J(t)&&t.name==="AuthSessionMissingError"}class Fs extends vt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Bs extends vt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qs extends vt{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Gu(t){return J(t)&&t.name==="AuthImplicitGrantRedirectError"}class bi extends vt{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tn extends vt{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function $r(t){return J(t)&&t.name==="AuthRetryableFetchError"}class wi extends vt{constructor(e,s,r){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class ys extends vt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Si=` 	
\r=`.split(""),Yu=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Si.length;e+=1)t[Si[e].charCodeAt(0)]=-2;for(let e=0;e<rr.length;e+=1)t[rr[e].charCodeAt(0)]=e;return t})();function ki(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(rr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;s(rr[r]),e.queuedBits-=6}}function Xo(t,e,s){const r=Yu[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function xi(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{Zu(o,r,s)};for(let o=0;o<t.length;o+=1)Xo(t.charCodeAt(o),n,i);return e.join("")}function Qu(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Xu(t,e){for(let s=0;s<t.length;s+=1){let r=t.charCodeAt(s);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(t.charCodeAt(s+1)-56320&65535|n)+65536,s+=1}Qu(r,e)}}function Zu(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function eh(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};for(let n=0;n<t.length;n+=1)Xo(t.charCodeAt(n),s,r);return new Uint8Array(e)}function th(t){const e=[];return Xu(t,s=>e.push(s)),new Uint8Array(e)}function sh(t){const e=[],s={queue:0,queuedBits:0},r=n=>{e.push(n)};return t.forEach(n=>ki(n,s,r)),ki(null,s,r),e.join("")}function rh(t){return Math.round(Date.now()/1e3)+t}function nh(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Me=()=>typeof window<"u"&&typeof document<"u",kt={tested:!1,writable:!1},bs=()=>{if(!Me())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(kt.tested)return kt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),kt.tested=!0,kt.writable=!0}catch{kt.tested=!0,kt.writable=!1}return kt.writable};function ih(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((n,i)=>{e[i]=n})}catch{}return s.searchParams.forEach((r,n)=>{e[n]=r}),e}const Zo=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>$s(async()=>{const{default:r}=await Promise.resolve().then(()=>es);return{default:r}},void 0).then(({default:r})=>r(...s)):e=fetch,(...s)=>e(...s)},oh=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ea=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Hs=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Js=async(t,e)=>{await t.removeItem(e)};class gr{constructor(){this.promise=new gr.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}gr.promiseConstructor=Promise;function Rr(t){const e=t.split(".");if(e.length!==3)throw new ys("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Ju.test(e[r]))throw new ys("JWT not in base64url format");return{header:JSON.parse(xi(e[0])),payload:JSON.parse(xi(e[1])),signature:eh(e[2]),raw:{header:e[0],payload:e[1]}}}async function ah(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function lh(t,e){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){n(o);return}}})()})}function ch(t){return("0"+t.toString(16)).substr(-2)}function uh(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let n="";for(let i=0;i<56;i++)n+=s.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(e),Array.from(e,ch).join("")}async function hh(t){const s=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",s),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function dh(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await hh(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ft(t,e,s=!1){const r=uh();let n=r;s&&(n+="/PASSWORD_RECOVERY"),await ea(t,`${e}-code-verifier`,n);const i=await dh(r);return[i,r===i?"plain":"s256"]}const fh=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ph(t){const e=t.headers.get(en);if(!e||!e.match(fh))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gh(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function _h(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mh=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Bt(t){if(!mh.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var vh=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};const Tt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yh=[502,503,504];async function Ti(t){var e;if(!oh(t))throw new tn(Tt(t),0);if(yh.includes(t.status))throw new tn(Tt(t),t.status);let s;try{s=await t.json()}catch(i){throw new Qo(Tt(i),i)}let r;const n=ph(t);if(n&&n.getTime()>=Yo["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new wi(Tt(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new lt}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new wi(Tt(s),t.status,s.weak_password.reasons);throw new Ku(Tt(s),t.status||500,r)}const bh=(t,e,s,r)=>{const n={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),s))};async function G(t,e,s,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[en]||(i[en]=Yo["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await wh(t,e,s+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function wh(t,e,s,r,n,i){const o=bh(e,r,n,i);let a;try{a=await t(s,Object.assign({},o))}catch(l){throw console.error(l),new tn(Tt(l),0)}if(a.ok||await Ti(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Ti(l)}}function Qe(t){var e;let s=null;Th(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=rh(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:r},error:null}}function Ei(t){const e=Qe(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function dt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Sh(t){return{data:t,error:null}}function kh(t){const{action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i}=t,o=vh(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:s,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function xh(t){return t}function Th(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ir=["global","local","others"];var Eh=function(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(t,r[n])&&(s[r[n]]=t[r[n]]);return s};class Oh{constructor({url:e="",headers:s={},fetch:r}){this.url=e,this.headers=s,this.fetch=Zo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Ir[0]){if(Ir.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ir.join(", ")}`);try{return await G(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,s={}){try{return await G(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:dt})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:s}=e,r=Eh(e,["options"]),n=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await G(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:kh,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(J(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await G(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:dt})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,r,n,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await G(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=e==null?void 0:e.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:xh});if(c.error)throw c.error;const h=await c.json(),g=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return v.length>0&&(v.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),f=JSON.parse(x.split(";")[1].split("=")[1]);u[`${f}Page`]=y}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(J(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Bt(e);try{return await G(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:dt})}catch(s){if(J(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Bt(e);try{return await G(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:dt})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,s=!1){Bt(e);try{return await G(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:dt})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Bt(e.userId);try{const{data:s,error:r}=await G(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:s,error:r}}catch(s){if(J(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Bt(e.userId),Bt(e.id);try{return{data:await G(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}}const Ph={getItem:t=>bs()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{bs()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{bs()&&globalThis.localStorage.removeItem(t)}};function Oi(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Ah(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const qt={debug:!!(globalThis&&bs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ta extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ch extends ta{}async function jh(t,e,s){qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),qt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,n.name);try{return await s()}finally{qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,n.name)}}else{if(e===0)throw qt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ch(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(qt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Ah();const $h={url:Bu,storageKey:qu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Pi(t,e,s){return await s()}class Ps{constructor(e){var s,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ps.nextInstanceID,Ps.nextInstanceID+=1,this.instanceID>0&&Me()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},$h),e);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Oh({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Zo(n.fetch),this.lock=n.lock||Pi,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:Me()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=jh:this.lock=Pi,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:bs()?this.storage=Ph:(this.memoryStorage={},this.storage=Oi(this.memoryStorage)):(this.memoryStorage={},this.storage=Oi(this.memoryStorage)),Me()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Go}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=ih(window.location.href);let r="none";if(this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce"),Me()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(s,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Gu(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return J(s)?{error:s}:{error:new Qo("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,r,n;try{const i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.captchaToken}},xform:Qe}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,r,n;try{let i;if("email"in e){const{email:c,password:h,options:g}=e;let v=null,x=null;this.flowType==="pkce"&&([v,x]=await Ft(this.storage,this.storageKey)),i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:c,password:h,data:(s=g==null?void 0:g.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:v,code_challenge_method:x},xform:Qe})}else if("phone"in e){const{phone:c,password:h,options:g}=e;i=await G(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(n=g==null?void 0:g.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Qe})}else throw new Bs("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(J(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:a}=e;s=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ei})}else if("phone"in e){const{phone:i,password:o,options:a}=e;s=await G(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ei})}else throw new Bs("You must provide either an email or phone number and a password");const{data:r,error:n}=s;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Fs}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=e.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,r,n,i,o,a,l,u,c,h,g,v;let x,y;if("message"in e)x=e.message,y=e.signature;else{const{chain:f,wallet:T,statement:S,options:b}=e;let E;if(Me())if(typeof T=="object")E=T;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))E=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=T}const m=new URL((s=b==null?void 0:b.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in E&&E.signIn){const w=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:m.host,uri:m.href}),S?{statement:S}:null));let q;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")q=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)q=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in q&&"signature"in q&&(typeof q.signedMessage=="string"||q.signedMessage instanceof Uint8Array)&&q.signature instanceof Uint8Array)x=typeof q.signedMessage=="string"?q.signedMessage:new TextDecoder().decode(q.signedMessage),y=q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${m.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${m.href}`,`Issued At: ${(n=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(c=b==null?void 0:b.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(q=>`- ${q}`)]:[]].join(`
`);const w=await E.signMessage(new TextEncoder().encode(x),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=w}}try{const{data:f,error:T}=await G(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:sh(y)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Qe});if(T)throw T;return!f||!f.session||!f.user?{data:{user:null,session:null},error:new Fs}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign({},f),error:T})}catch(f){if(J(f))return{data:{user:null,session:null},error:f};throw f}}async _exchangeCodeForSession(e){const s=await Hs(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(s??"").split("/");try{const{data:i,error:o}=await G(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Qe});if(await Js(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Fs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(J(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:r,token:n,access_token:i,nonce:o}=e,a=await G(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Qe}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Fs}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,r,n,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await Ft(this.storage,this.storageKey));const{error:h}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:c}=await G(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Bs("You must provide either an email or phone number.")}catch(a){if(J(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var s,r;try{let n,i;"options"in e&&(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await G(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Qe});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(J(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var s,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ft(this.storage,this.storageKey)),await G(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=e==null?void 0:e.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Sh})}catch(i){if(J(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:r}=e;if(r)throw r;if(!s)throw new lt;const{error:n}=await G(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:n}})}catch(e){if(J(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await G(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:a}=await G(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Bs("You must provide either an email or phone number and a type")}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<jr:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:dt}):await this._useSession(async s=>{var r,n,i;const{data:o,error:a}=s;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new lt}:await G(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:dt})})}catch(s){if(J(s))return zu(s)&&(await this._removeSession(),await Js(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new lt;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ft(this.storage,this.storageKey));const{data:u,error:c}=await G(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:dt});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(J(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new lt;const s=Date.now()/1e3;let r=s,n=!0,i=null;const{payload:o}=Rr(e.access_token);if(o.exp&&(r=o.exp,n=r<=s),n){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(J(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var r;if(!e){const{data:o,error:a}=s;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new lt;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(J(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Me())throw new qs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new bi("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qs("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new bi("No code detected.");const{data:S,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new qs("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let g=c+h;l&&(g=parseInt(l));const v=g-c;v*1e3<=Wt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const x=g-h;c-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,g,c):c-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,g,c);const{data:y,error:f}=await this._getUser(i);if(f)throw f;const T={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:g,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(J(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Hs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Vu(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Js(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=nh(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,n;try{const{data:{session:i},error:o}=s;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await Ft(this.storage,this.storageKey,!0));try{return await G(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(J(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(J(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:g}=i;if(g)throw g;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await G(this.fetch,"GET",v,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(n)throw n;return Me()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(J(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)throw o;return await G(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await lh(async n=>(n>0&&await ah(200*Math.pow(2,n-1)),this._debug(s,"refreshing attempt",n),await G(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Qe})),(n,i)=>{const o=200*Math.pow(2,n);return i&&$r(i)&&Date.now()+o-r<Wt})}catch(r){if(this._debug(s,"error",r),J(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),Me()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const r=await Hs(this.storage,this.storageKey);if(this._debug(s,"session from storage",r),!this._isValidSession(r)){this._debug(s,"session is not valid"),r!==null&&await this._removeSession();return}const n=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<jr;if(this._debug(s,`session has${n?"":" not"} expired with margin of ${jr}s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),$r(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(s,"error",r),console.error(r);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,r;if(!e)throw new lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new gr;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new lt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),J(i)){const o={session:null,error:i};return $r(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,s,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,s)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ea(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Js(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Me()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-e)/Wt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Wt}ms, refresh threshold is ${Zr} ticks`),n<=Zr&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof ta)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Me()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,r){const n=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ft(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await G(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,n;const{data:i,error:o}=s;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await G(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(J(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:a}=await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(s){if(J(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var r;const{data:n,error:i}=s;return i?{data:null,error:i}:await G(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(J(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(e==null?void 0:e.factors)||[],n=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Rr(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(s=n.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(e,s={keys:[]}){let r=s.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+Wu>Date.now()))return r;const{data:n,error:i}=await G(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new ys("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),r=n.keys.find(o=>o.kid===e),!r)throw new ys("No matching signing key found in JWKS");return r}async getClaims(e,s={keys:[]}){try{let r=e;if(!r){const{data:v,error:x}=await this.getSession();if(x||!v.session)return{data:null,error:x};r=v.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=Rr(r);if(gh(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:i,header:n,signature:o},error:null}}const u=_h(n.alg),c=await this.fetchJwk(n.kid,s),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,th(`${a}.${l}`)))throw new ys("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(J(r))return{data:null,error:r};throw r}}}Ps.nextInstanceID=0;const Rh=Ps;class Ih extends Rh{constructor(e){super(e)}}var Lh=function(t,e,s,r){function n(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):n(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class Dh{constructor(e,s,r){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const a=Nu(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:ju,realtime:Ru,auth:Object.assign(Object.assign({},$u),{storageKey:u}),global:Cu},h=Fu(r??{},c);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Uu(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new eu(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Fc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ou(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},r={}){return this.rest.rpc(e,s,r)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Lh(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(s=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,storageKey:i,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ih({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:r,storage:n,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new fu(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,r)=>{this._handleTokenChanged(s,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,s,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Uh=(t,e,s)=>new Dh(t,e,s),Mh="https://kueodidcmdsxaoctjtug.supabase.co/",Nh="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt1ZW9kaWRjbWRzeGFvY3RqdHVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NzE0NzYsImV4cCI6MjA2NTI0NzQ3Nn0.zuRgrGhf-PwpeX_1yJaUxXda4-uKw4Fk6gxrhcelpZI",En=Uh(Mh,Nh),Fh="admin@monapp.local";async function Bh(t){const{data:e,error:s}=await En.auth.signInWithPassword({email:Fh,password:t});return s?(console.error("Erreur login:",s.message),!1):!0}const qh={class:"final-scores"},Hh={class:"final-player-name-above"},Jh={key:0},Wh={key:1},Kh={key:2},Vh={key:3},zh=["src"],Gh={class:"final-player-info"},Yh={class:"final-player-stats"},Qh={class:"stat-badge"},Xh={class:"stat-badge"},Zh={class:"stat-badge"},ed={class:"stat-badge"},td={class:"stat-badge"},sd={class:"stat-badge"},rd={class:"stat-badge"},nd={class:"stat-badge"},id={key:0,class:"stat-badge awsome-badge"},od={key:1,class:"stat-badge awsome-badge"},ad={key:2,class:"stat-badge awsome-badge"},ld={key:3,class:"stat-badge awsome-badge"},cd={key:4,class:"stat-badge awsome-badge"},ud={class:"final-player-score"},hd={key:0,class:"action-buttons"},dd={__name:"GameStats",props:["sortedPlayers","humanPlayersSorted","robotName","stats","role"],setup(t){const e=t;async function s(){const n=Date.now();console.log(e.sortedPlayers);const i=e.sortedPlayers.map(l=>({player_id:l.id,name:l.name,timestamp:n,score:l.totalScore,hits:l.scores})),{data:o,error:a}=await En.from("scores").insert(i)}function r(){window.location.reload()}return e.role==="admin"&&s(),(n,i)=>(H(),V("div",null,[i[1]||(i[1]=_("h2",null,"Partie termine",-1)),_("ul",qh,[(H(!0),V(ve,null,xs(t.sortedPlayers,(o,a)=>{var l,u,c,h;return H(),V("li",{key:o.name,class:"final-score-item"},[_("div",Hh,[o.name!==t.robotName?(H(),V(ve,{key:0},[((l=t.humanPlayersSorted[0])==null?void 0:l.name)===o.name?(H(),V("span",Jh,"")):((u=t.humanPlayersSorted[1])==null?void 0:u.name)===o.name?(H(),V("span",Wh,"")):((c=t.humanPlayersSorted[2])==null?void 0:c.name)===o.name?(H(),V("span",Kh,"")):((h=t.humanPlayersSorted[3])==null?void 0:h.name)===o.name?(H(),V("span",Vh,"")):he("",!0)],64)):he("",!0),ms(" "+A(o.name),1)]),_("img",{src:o.avatar,alt:"avatar",class:"final-avatar-large"},null,8,zh),_("div",Gh,[_("div",Yh,[_("span",Qh,"Hits : "+A(t.stats(o).hits)+"/"+A(t.stats(o).total),1),_("span",Xh,"Hits (F1) : "+A(t.stats(o).hitsF1)+"/"+A(t.stats(o).total/3),1),_("span",Zh,"Hits (F2) : "+A(t.stats(o).hitsF2)+"/"+A(t.stats(o).total/3),1),_("span",ed,"Hits (F3) : "+A(t.stats(o).hitsF3)+"/"+A(t.stats(o).total/3),1),_("span",td,"Miss : "+A(t.stats(o).miss),1),_("span",sd,"Single : "+A(t.stats(o).single),1),_("span",rd,"Double : "+A(t.stats(o).double),1),_("span",nd,"Triple : "+A(t.stats(o).triple),1),t.stats(o).shangai>=1?(H(),V("span",id,"Shangai : "+A(t.stats(o).shangai),1)):he("",!0),t.stats(o).ttt>=1?(H(),V("span",od,"ttt : "+A(t.stats(o).ttt),1)):he("",!0),t.stats(o).ddd>=1?(H(),V("span",ad,"ddd : "+A(t.stats(o).ddd),1)):he("",!0),t.stats(o).tt>=1?(H(),V("span",ld,"tt : "+A(t.stats(o).tt),1)):he("",!0),t.stats(o).dd>=1?(H(),V("span",cd,"dd : "+A(t.stats(o).dd),1)):he("",!0)])]),_("span",ud,A(o.totalScore)+" pts",1)])}),128))]),_("p",null,[_("button",{onClick:r},"Rejouer")]),t.role==="admin"?(H(),V("div",hd,[_("a",{href:"#",onClick:i[0]||(i[0]=Os(o=>n.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):he("",!0)]))}},fd=js(dd,[["__scopeId","data-v-8d75ab9b"]]),pd={key:0,style:{"font-size":"0.8rem",color:"gray","text-align":"center","margin-bottom":"-10px"}},gd={class:"container"},_d={key:0},md={class:"round-circle"},vd={class:"avatar-lineup"},yd=["src","alt"],bd={key:0,class:"buttons"},wd=["onClick"],Sd=["onClick"],kd=["onClick"],xd=["onClick"],Td={key:0},Ed={key:1},Od=20,Pe="Number One",Pd="https://cdn-icons-png.flaticon.com/512/4712/4712027.png",Ad={__name:"Game",props:{players:Array,role:String},setup(t){let e=0;function s(T){e=T.touches[0].clientY}function r(T){const S=T.touches[0].clientY;window.scrollY===0&&S>e&&T.preventDefault()}hr(()=>{window.addEventListener("touchstart",s,{passive:!1}),window.addEventListener("touchmove",r,{passive:!1})}),uo(()=>{window.removeEventListener("touchstart",s),window.removeEventListener("touchmove",r)});const n=t,i=Ce(1),o=Ce(0),a=Ce([0,0,0]);let l=0;gs(()=>n.players.length,T=>{const S=n.players.findIndex(b=>b.name===Pe);T>1&&S===-1?n.players.push({id:0,name:Pe,avatar:Pd,scores:[],totalScore:0}):T<=1&&S!==-1&&(n.players.splice(S,1),o.value>=n.players.length&&(o.value=0))},{immediate:!0}),n.players.forEach(T=>{T.scores||(T.scores=[]),T.totalScore===void 0&&(T.totalScore=0)});function u(T){const S=T.scores.flat(),b=S.length,E=S.filter(U=>U===0).length,m=S.filter(U=>U!==0).length,w=T.scores.map(U=>U[0]).filter(U=>U!==0).length,q=T.scores.map(U=>U[1]).filter(U=>U!==0).length,z=T.scores.map(U=>U[2]).filter(U=>U!==0).length,be=S.filter(U=>U===1).length,ae=S.filter(U=>U===2).length,pe=S.filter(U=>U===3).length,Be=T.scores.filter(U=>U.filter(W=>W===3).length===3).length,ot=T.scores.filter(U=>U.filter(W=>W===3).length===2).length,at=T.scores.filter(U=>U.filter(W=>W===2).length===3).length,Ct=T.scores.filter(U=>U.filter(W=>W===2).length===2).length,ie=T.scores.filter(U=>{const W=new Set(U);return W.has(1)&&W.has(2)&&W.has(3)}).length;return{total:b,hits:m,hitsF1:w,hitsF2:q,hitsF3:z,miss:E,single:be,double:ae,triple:pe,shangai:ie,ttt:Be,ddd:at,tt:ot,dd:Ct}}function c(T,S){a.value[T]=S,navigator.vibrate&&navigator.vibrate(30)}const h=ls(()=>{const T=i.value;return a.value.reduce((S,b)=>S+b*T,0)});function g(){navigator.vibrate&&navigator.vibrate(30);const T=n.players[o.value];if(T.name===Pe){const S=n.players.filter(w=>w.name!==Pe).map(w=>w.scores[w.scores.length-1]),b=S.map(w=>w[0]+w[1]+w[2]),E=b.indexOf(Math.max(...b)),m=S[E];a.value=[...m]}T.scores.push([...a.value]),T.totalScore+=h.value,a.value=[0,0,0],o.value<n.players.length-1?o.value++:(o.value=0,i.value++),l=Math.max(...n.players.filter(S=>S.name!==Pe).map(S=>S.totalScore))}function v(){if(i.value===1&&o.value===0)return;let T=o.value,S=i.value;function b(z){const be=n.players.length;for(let ae=1;ae<=be;ae++){const pe=(z-ae+be)%be;if(n.players[pe].name!==Pe)return pe}return z}const E=n.players.findIndex(z=>z.name===Pe);let m=!1;if(T===0){if(S===1)return;S-=1,T=b(n.players.length),m=!0}else T=b(T);o.value=T,i.value=S;const w=n.players[T],q=w.scores.pop();if(q){const z=S,be=q.reduce((ae,pe)=>ae+pe*z,0);w.totalScore-=be}if(m&&E!==-1){const z=n.players[E];if(z.scores.length>0){const ae=z.scores[z.scores.length-1].reduce((pe,Be)=>pe+Be*S,0);z.totalScore-=ae,z.scores.pop()}}a.value=[0,0,0]}const x=ls(()=>i.value>Od),y=ls(()=>[...n.players].sort((T,S)=>S.totalScore-T.totalScore));gs(o,async T=>{n.players[T].name===Pe&&!x.value&&(await to(),g())});const f=ls(()=>n.players.filter(T=>T.name!==Pe).sort((T,S)=>S.totalScore-T.totalScore));return(T,S)=>(H(),V("div",null,[t.role==="admin"?(H(),V("p",pd," Partie officielle et enregistre ")):he("",!0),_("div",gd,[x.value?(H(),V("div",Ed,[Ke(fd,{sortedPlayers:y.value,humanPlayersSorted:f.value,robotName:Pe,stats:u,replay:T.replay,role:n.role,onViewScores:S[0]||(S[0]=b=>T.$emit("view-scores"))},null,8,["sortedPlayers","humanPlayersSorted","replay","role"])])):(H(),V("div",_d,[_("h2",md,A(i.value),1),_("h1",null,A(n.players[o.value].name),1),S[1]||(S[1]=_("hr",null,null,-1)),_("div",vd,[(H(!0),V(ve,null,xs(n.players,(b,E)=>(H(),V("div",{key:b.name,class:"avatar-wrapper"},[_("img",{src:b.avatar,alt:b.name,class:et(["avatar",{current:E===o.value}])},null,10,yd),_("div",{class:et(["score-badge",{"bestscore-badge":b.totalScore===Fr(l)&&b.name!==Pe&&Fr(l)!==0,"score-robot":b.name===Pe}])},A(b.totalScore),3)]))),128))]),S[2]||(S[2]=_("hr",null,null,-1)),(H(!0),V(ve,null,xs(a.value,(b,E)=>(H(),V("div",{key:E,class:"dart-controls",style:{display:"flex","align-items":"center",gap:"6px"}},[n.players[o.value].name!==Pe?(H(),V("div",bd,[_("button",{class:et(["dart-button",{active:b===0}]),onClick:m=>c(E,0)},"Miss",10,wd),_("button",{class:et(["dart-button",{active:b===1}]),onClick:m=>c(E,1)},"Single",10,Sd),_("button",{class:et(["dart-button",{active:b===2}]),onClick:m=>c(E,2)},"Double",10,kd),_("button",{class:et(["dart-button",{active:b===3}]),onClick:m=>c(E,3)},"Triple",10,xd)])):he("",!0)]))),128)),n.players[o.value].name!==Pe?(H(),V("p",Td,[_("button",{onClick:g,class:"validate"},"Valider ce tour (+"+A(h.value)+" pts)",1)])):he("",!0),_("p",null,[_("button",{onClick:v,class:"undo-button"},"")])]))])]))}},Cd=js(Ad,[["__scopeId","data-v-6c0d4816"]]),jd={class:"login-container"},$d={class:"login-box"},Rd=["disabled"],Id={key:0,class:"error"},Ld={__name:"Login",emits:["login"],setup(t,{emit:e}){const s=e,r=Ce(""),n=Ce(null),i=Ce(!1);async function o(){n.value=null,i.value=!0;const l=await Bh(r.value);i.value=!1,l?s("login",{name:"Admin",role:"admin"}):n.value="Mot de passe incorrect."}function a(){s("login",{name:"Visiteur",role:"visiteur"})}return(l,u)=>(H(),V("div",jd,[_("div",$d,[_("form",{onSubmit:Os(o,["prevent"])},[oo(_("input",{"onUpdate:modelValue":u[0]||(u[0]=c=>r.value=c),type:"password",placeholder:"Mot de passe",autocomplete:"current-password"},null,512),[[Do,r.value]]),_("button",{type:"submit",disabled:i.value},A(i.value?"Connexion...":"Se connecter"),9,Rd)],32),_("a",{onClick:Os(a,["prevent"]),href:"#",class:"visitor-link"}," Continuer en tant que visiteur "),n.value?(H(),V("p",Id,A(n.value),1)):he("",!0)])]))}},Dd=js(Ld,[["__scopeId","data-v-64bd7d6e"]]),Ud="/shanghai/img/podium.webp";function Md(t,e){let s;if(e===void 0)for(const r of t)r!=null&&(s<r||s===void 0&&r>=r)&&(s=r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(s<n||s===void 0&&n>=n)&&(s=n)}return s}function Nd(t,e){let s;if(e===void 0)for(const r of t)r!=null&&(s>r||s===void 0&&r>=r)&&(s=r);else{let r=-1;for(let n of t)(n=e(n,++r,t))!=null&&(s>n||s===void 0&&n>=n)&&(s=n)}return s}function Fd(t,e){let s=0,r=0;if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(++s,r+=n);else{let n=-1;for(let i of t)(i=e(i,++n,t))!=null&&(i=+i)>=i&&(++s,r+=i)}if(s)return r/s}function Bd(t,e){let s=0;if(e===void 0)for(let r of t)(r=+r)&&(s+=r);else{let r=-1;for(let n of t)(n=+e(n,++r,t))&&(s+=n)}return s}const qd={class:"scores-page"},Hd={key:0,class:"podium",style:{position:"relative",display:"inline-block"}},Jd={class:"podium-text text-1"},Wd={class:"podium-text text-2"},Kd={class:"podium-text text-3"},Vd={key:1,class:"players-list"},zd={class:"player-name"},Gd={class:"score-table"},Yd={class:"player-card"},Qd={class:"player-name"},Xd={class:"score-table"},Zd={__name:"RecordedStats",setup(t){const e=Object.assign({},{min:Nd,max:Md,mean:Fd,sum:Bd}),s=Ce([]),r=Ce([]);Ce(null);async function n(){const{data:x,error:y}=await En.from("scores").select("*").order("score",{ascending:!1});if(y){console.error("Erreur de rcupration des scores :",y);return}if(!x.length)return;const f=v(x),T=["Number One","Felix"];s.value=f.filter(S=>!T.includes(S.name)),r.value=f.find(S=>S.name==="Number One"),s.value.sort((S,b)=>b.mean_last-S.mean_last),s.value.forEach(S=>{S.highlight=S.name==="Number One"})}function i(){const x=new Date,y=x.getFullYear(),f=x.getMonth(),S=(f>=8?new Date(y,8,1):new Date(y-1,8,1)).getTime(),E=(f<=6?new Date(y,6,31):new Date(y+1,6,31)).getTime();return{septFirstLastYear:S,july31Next:E}}function o(x){switch(x){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}}function a(x){x=x.flat();let y=0,f=0;for(let T=0;T<x.length;T++)x[T]!==0?(f++,f>y&&(y=f)):f=0;return y}function l(x){return x.filter(y=>{const f=[0,0,0,0];return y.forEach(T=>f[T]++),f[1]===1&&f[2]===1&&f[3]===1}).length}function u(x){return x.filter(y=>{const f=[0,0,0,0];return y.forEach(T=>f[T]++),f[3]===2}).length}function c(x){return x.filter(y=>{const f=[0,0,0,0];return y.forEach(T=>f[T]++),f[3]===3}).length}function h(x){return x.filter(y=>{const f=[0,0,0,0];return y.forEach(T=>f[T]++),f[2]===2}).length}function g(x){return x.filter(y=>{const f=[0,0,0,0];return y.forEach(T=>f[T]++),f[2]===3}).length}function v(x,y=10){let f=[...new Set(x.map(m=>m.name))].map(m=>({name:m}));const T=i(),S=x.filter(m=>m.timestamp>=T.septFirstLastYear).filter(m=>m.timestamp<=T.july31Next),b=x.filter(m=>m.name=="Number One").length,E=S.filter(m=>m.name=="Number One").length;return f=f.map(m=>{const w=x.filter(P=>P.name==m.name),q=S.filter(P=>P.name==m.name),z=w.slice(-y),be=w.length,ae=q.length,pe=z.length,Be=Math.round(1e3*w.length/b)/10,ot=Math.round(1e3*q.length/E)/10,at=e.mean(w.map(P=>P.score)),Ct=Math.round(at),ie=e.mean(q.map(P=>P.score)),U=Math.round(ie),W=e.mean(z.map(P=>P.score)),ze=Math.round(W),jt=Math.round(e.max(w.map(P=>P.score))),Ge=Math.round(e.max(q.map(P=>P.score))),Re=Math.round(e.max(z.map(P=>P.score))),Is=Math.round(e.min(w.map(P=>P.score))),_r=Math.round(e.min(q.map(P=>P.score))),mr=Math.round(e.min(z.map(P=>P.score))),yt=e.max(w.map(P=>JSON.parse(P.hits)).map(P=>P.flat().filter(de=>de!=0).length)),$t=e.max(q.map(P=>JSON.parse(P.hits)).map(P=>P.flat().filter(de=>de!=0).length)),ts=e.max(z.map(P=>JSON.parse(P.hits)).map(P=>P.flat().filter(de=>de!=0).length)),Ls=e.max(w.map(P=>JSON.parse(P.hits)).map(P=>e.sum(P.flat().filter(de=>de!=0)))),bt=e.max(q.map(P=>JSON.parse(P.hits)).map(P=>e.sum(P.flat().filter(de=>de!=0)))),On=e.max(z.map(P=>JSON.parse(P.hits)).map(P=>e.sum(P.flat().filter(de=>de!=0)))),d=e.max(w.map((P,de)=>e.max(JSON.parse(P.hits).map((le,_e)=>e.sum(le)*(_e+1))))),p=e.max(q.map((P,de)=>e.max(JSON.parse(P.hits).map((le,_e)=>e.sum(le)*(_e+1))))),k=e.max(z.map((P,de)=>e.max(JSON.parse(P.hits).map((le,_e)=>e.sum(le)*(_e+1))))),j=e.max(w.map(P=>JSON.parse(P.hits).flat()).map(P=>a(P))),O=e.max(q.map(P=>JSON.parse(P.hits).flat()).map(P=>a(P))),C=e.max(z.map(P=>JSON.parse(P.hits).flat()).map(P=>a(P))),L=e.sum(w.map(P=>l(JSON.parse(P.hits)))),I=e.sum(q.map(P=>l(JSON.parse(P.hits)))),R=e.sum(z.map(P=>l(JSON.parse(P.hits)))),$=e.sum(w.map(P=>u(JSON.parse(P.hits)))),N=e.sum(q.map(P=>u(JSON.parse(P.hits)))),D=e.sum(z.map(P=>u(JSON.parse(P.hits)))),M=e.sum(w.map(P=>c(JSON.parse(P.hits)))),F=e.sum(q.map(P=>c(JSON.parse(P.hits)))),Y=e.sum(z.map(P=>c(JSON.parse(P.hits)))),ee=e.sum(w.map(P=>h(JSON.parse(P.hits)))),Q=e.sum(q.map(P=>h(JSON.parse(P.hits)))),we=e.sum(z.map(P=>h(JSON.parse(P.hits)))),ge=e.sum(w.map(P=>g(JSON.parse(P.hits)))),Ie=e.sum(q.map(P=>g(JSON.parse(P.hits)))),Le=e.sum(z.map(P=>g(JSON.parse(P.hits))));return{...m,played_all:be,mean_all_raw:at,mean_all:Ct,max_all:jt,min_all:Is,streak_all:j,assiduity_all:Be,shanghai_all:L,played_year:ae,mean_year_raw:ie,mean_year:U,max_year:Ge,min_year:_r,streak_year:O,assiduity_year:ot,shanghai_year:I,played_last:pe,mean_last_raw:W,mean_last:ze,max_last:Re,min_last:mr,streak_last:C,shanghai_last:R,hits_all:yt,hits_year:$t,hits_last:ts,hits2_all:Ls,hits2_year:bt,hits2_last:On,hitbest_all:d,hitbest_year:p,hitbest_last:k,tt_all:$,tt_year:N,tt_last:D,ttt_all:M,ttt_year:F,ttt_last:Y,dd_all:ee,dd_year:Q,dd_last:we,ddd_all:ge,ddd_year:Ie,ddd_last:Le}}),f=[...f].sort((m,w)=>w.max_all-m.max_all).map((m,w)=>({...m,medal_max_all:o(w)})),f=[...f].sort((m,w)=>w.max_year-m.max_year).map((m,w)=>({...m,medal_max_year:o(w)})),f=[...f].sort((m,w)=>w.max_last-m.max_last).map((m,w)=>({...m,medal_max_last:o(w)})),f=[...f].sort((m,w)=>w.streak_all-m.streak_all).map((m,w)=>({...m,medal_streak_all:o(w)})),f=[...f].sort((m,w)=>w.streak_year-m.streak_year).map((m,w)=>({...m,medal_streak_year:o(w)})),f=[...f].sort((m,w)=>w.streak_last-m.streak_last).map((m,w)=>({...m,medal_streak_last:o(w)})),f=[...f].sort((m,w)=>w.hits_all-m.hits_all).map((m,w)=>({...m,medal_hits_all:o(w)})),f=[...f].sort((m,w)=>w.hits_year-m.hits_year).map((m,w)=>({...m,medal_hits_year:o(w)})),f=[...f].sort((m,w)=>w.hits_last-m.hits_last).map((m,w)=>({...m,medal_hits_last:o(w)})),f=[...f].sort((m,w)=>w.hitbest_all-m.hitbest_all).map((m,w)=>({...m,medal_hitbest_all:o(w)})),f=[...f].sort((m,w)=>w.hitbest_year-m.hitbest_year).map((m,w)=>({...m,medal_hitbest_year:o(w)})),f=[...f].sort((m,w)=>w.hitbest_last-m.hitbest_last).map((m,w)=>({...m,medal_hitbest_last:o(w)})),f=[...f].sort((m,w)=>w.hits2_all-m.hits2_all).map((m,w)=>({...m,medal_hits2_all:o(w)})),f=[...f].sort((m,w)=>w.hits2_year-m.hits2_year).map((m,w)=>({...m,medal_hits2_year:o(w)})),f=[...f].sort((m,w)=>w.hits2_last-m.hits2_last).map((m,w)=>({...m,medal_hits2_last:o(w)})),f=[...f].sort((m,w)=>w.mean_all_raw-m.mean_all_raw).map((m,w)=>({...m,medal_mean_all:o(w)})),f=[...f].sort((m,w)=>w.mean_year_raw-m.mean_year_raw).map((m,w)=>({...m,medal_mean_year:o(w)})),f=[...f].sort((m,w)=>w.mean_last_raw-m.mean_last_raw).map((m,w)=>({...m,medal_mean_last:o(w)})),f}return hr(()=>{n()}),(x,y)=>(H(),V("div",qd,[s.value.length>=3?(H(),V("div",Hd,[y[1]||(y[1]=_("img",{src:Ud,alt:"Podium",class:"podium-image"},null,-1)),_("div",Jd,A(s.value[0].name),1),_("div",Wd,A(s.value[1].name),1),_("div",Kd,A(s.value[2].name),1)])):he("",!0),s.value.length?(H(),V("div",Vd,[(H(!0),V(ve,null,xs(s.value,(f,T)=>(H(),V("div",{key:T,class:"player-card"},[_("h2",zd,[ms(A(f.medal_mean_last)+" "+A(f.name)+" - ",1),_("small",null,A(f.mean_last)+" pts",1)]),_("table",Gd,[y[16]||(y[16]=_("thead",null,[_("tr",null,[_("th"),_("th",null,"Sur 10 parties"),_("th",null,"Sur l'anne"),_("th",null,"Hall of Fame")])],-1)),_("tbody",null,[_("tr",null,[y[2]||(y[2]=_("th",null,"Parties",-1)),_("td",null,A(f.played_last),1),_("td",null,A(f.played_year),1),_("td",null,A(f.played_all),1)]),_("tr",null,[y[3]||(y[3]=_("th",null,"Assiduit",-1)),y[4]||(y[4]=_("td",null,"-",-1)),_("td",null,A(f.assiduity_year)+" %",1),_("td",null,A(f.assiduity_all)+" %",1)]),_("tr",null,[y[5]||(y[5]=_("th",null,"Moyenne",-1)),_("td",null,A(f.mean_last)+" "+A(f.medal_mean_last),1),_("td",null,A(f.mean_year)+" "+A(f.medal_mean_year),1),_("td",null,A(f.mean_all)+" "+A(f.medal_mean_all),1)]),_("tr",null,[y[6]||(y[6]=_("th",null,"Meilleur",-1)),_("td",null,A(f.max_last)+" "+A(f.medal_max_last),1),_("td",null,A(f.max_year)+" "+A(f.medal_max_year),1),_("td",null,A(f.max_all)+" "+A(f.medal_max_all),1)]),_("tr",null,[y[7]||(y[7]=_("th",null,"Streak",-1)),_("td",null,A(f.streak_last)+" "+A(f.medal_streak_last),1),_("td",null,A(f.streak_year)+" "+A(f.medal_streak_year),1),_("td",null,A(f.streak_all)+" "+A(f.medal_streak_alll),1)]),_("tr",null,[y[8]||(y[8]=_("th",null,[ms("Hits "),_("small",null,"(60)")],-1)),_("td",null,A(f.hits_last)+" "+A(f.medal_hits_last),1),_("td",null,A(f.hits_year)+" "+A(f.medal_hits_year),1),_("td",null,A(f.hits_all)+" "+A(f.medal_hits_all),1)]),_("tr",null,[y[9]||(y[9]=_("th",null,[ms("Hits "),_("small",null,"(180)")],-1)),_("td",null,A(f.hits2_last)+" "+A(f.medal_hits2_last),1),_("td",null,A(f.hits2_year)+" "+A(f.medal_hits2_year),1),_("td",null,A(f.hits2_all)+" "+A(f.medal_hits2_all),1)]),_("tr",null,[y[10]||(y[10]=_("th",null,"Meilleur coup",-1)),_("td",null,A(f.hitbest_last)+" "+A(f.medal_hitbest_last),1),_("td",null,A(f.hitbest_year)+" "+A(f.medal_hitbest_last),1),_("td",null,A(f.hitbest_all)+" "+A(f.medal_hitbest_last),1)]),_("tr",null,[y[11]||(y[11]=_("th",null,"Shanghai",-1)),_("td",null,A(f.shanghai_last),1),_("td",null,A(f.shanghai_year),1),_("td",null,A(f.shanghai_all),1)]),_("tr",null,[y[12]||(y[12]=_("th",null,"ttt",-1)),_("td",null,A(f.ttt_last),1),_("td",null,A(f.ttt_year),1),_("td",null,A(f.ttt_all),1)]),_("tr",null,[y[13]||(y[13]=_("th",null,"tt",-1)),_("td",null,A(f.tt_last),1),_("td",null,A(f.tt_year),1),_("td",null,A(f.tt_all),1)]),_("tr",null,[y[14]||(y[14]=_("th",null,"ddd",-1)),_("td",null,A(f.ddd_last),1),_("td",null,A(f.ddd_year),1),_("td",null,A(f.ddd_all),1)]),_("tr",null,[y[15]||(y[15]=_("th",null,"dd",-1)),_("td",null,A(f.dd_last),1),_("td",null,A(f.dd_year),1),_("td",null,A(f.dd_all),1)])])])]))),128)),_("div",Yd,[_("h2",Qd,A(r.value.name),1),_("table",Xd,[y[20]||(y[20]=_("thead",null,[_("tr",null,[_("th"),_("th",null,"Sur 10 parties"),_("th",null,"Sur l'anne"),_("th",null,"Hall of Fame")])],-1)),_("tbody",null,[_("tr",null,[y[17]||(y[17]=_("th",null,"Parties",-1)),_("td",null,A(r.value.played_last),1),_("td",null,A(r.value.played_year),1),_("td",null,A(r.value.played_last),1)]),_("tr",null,[y[18]||(y[18]=_("th",null,"Moyenne",-1)),_("td",null,A(r.value.mean_last),1),_("td",null,A(r.value.mean_year),1),_("td",null,A(r.value.mean_all),1)]),_("tr",null,[y[19]||(y[19]=_("th",null,"Meilleur",-1)),_("td",null,A(r.value.max_last),1),_("td",null,A(r.value.max_year),1),_("td",null,A(r.value.max_all),1)])])])])])):he("",!0),_("button",{onClick:y[0]||(y[0]=f=>x.$emit("back")),class:"back-button"},"Retour")]))}},ef=js(Zd,[["__scopeId","data-v-9d10ce0a"]]),tf={__name:"App",setup(t){const e=[{id:1,name:"Matt"},{id:2,name:"Darts Vador",avatar:"/shanghai/img/dartsvador.png"},{id:3,name:"Dart Simpson",avatar:"/shanghai/img/dartsimpson.png"},{id:4,name:"Robull",avatar:"/shanghai/img/ro.jpg"},{id:5,name:"Louis CLXXX",avatar:"/shanghai/img/crown.jpeg"},{id:6,name:"Angelo",avatar:"/shanghai/img/pp_angelo.png"},{id:7,name:"Cramomille",avatar:"/shanghai/img/cramomille.png"}],s=Ce(null),r=Ce([]),n=Ce("login");function i(u){s.value=u,n.value="selection"}function o(u){r.value=u,n.value="game"}function a(){n.value="scores"}function l(){n.value="selection"}return(u,c)=>(H(),V("div",null,[n.value==="login"?(H(),as(Dd,{key:0,onLogin:i})):n.value==="selection"?(H(),as($c,{key:1,predefinedPlayers:e,role:s.value.role,onStartGame:o,onViewScores:a},null,8,["role"])):n.value==="game"?(H(),as(Cd,{key:2,players:r.value,role:s.value.role,onViewScores:a},null,8,["players","role"])):n.value==="scores"?(H(),as(ef,{key:3,onBack:l,onViewScores:a})):he("",!0)]))}};mc(tf).mount("#app");
