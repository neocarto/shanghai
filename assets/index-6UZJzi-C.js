var Uu=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Pv=Uu((Fv,Er)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Ri(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const xe={},bn=[],mt=()=>{},Bu=()=>!1,ms=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ii=e=>e.startsWith("onUpdate:"),Ke=Object.assign,Mi=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},qu=Object.prototype.hasOwnProperty,we=(e,t)=>qu.call(e,t),Q=Array.isArray,xn=e=>vr(e)==="[object Map]",Ia=e=>vr(e)==="[object Set]",uo=e=>vr(e)==="[object Date]",ne=e=>typeof e=="function",Ee=e=>typeof e=="string",yt=e=>typeof e=="symbol",Te=e=>e!==null&&typeof e=="object",Ma=e=>(Te(e)||ne(e))&&ne(e.then)&&ne(e.catch),ja=Object.prototype.toString,vr=e=>ja.call(e),Hu=e=>vr(e).slice(8,-1),La=e=>vr(e)==="[object Object]",ji=e=>Ee(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,zn=Ri(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),_s=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Vu=/-(\w)/g,qt=_s(e=>e.replace(Vu,(t,n)=>n?n.toUpperCase():"")),Wu=/\B([A-Z])/g,on=_s(e=>e.replace(Wu,"-$1").toLowerCase()),Na=_s(e=>e.charAt(0).toUpperCase()+e.slice(1)),Cs=_s(e=>e?`on${Na(e)}`:""),Bt=(e,t)=>!Object.is(e,t),qr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Da=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},ni=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let co;const vs=()=>co||(co=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Li(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ee(r)?Gu(r):Li(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ee(e)||Te(e))return e}const Ju=/;(?![^(]*\))/g,Ku=/:([^]+)/,zu=/\/\*[^]*?\*\//g;function Gu(e){const t={};return e.replace(zu,"").split(Ju).forEach(n=>{if(n){const r=n.split(Ku);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ot(e){let t="";if(Ee(e))t=e;else if(Q(e))for(let n=0;n<e.length;n++){const r=ot(e[n]);r&&(t+=r+" ")}else if(Te(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Yu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Xu=Ri(Yu);function Fa(e){return!!e||e===""}function Qu(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Qr(e[r],t[r]);return n}function Qr(e,t){if(e===t)return!0;let n=uo(e),r=uo(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=yt(e),r=yt(t),n||r)return e===t;if(n=Q(e),r=Q(t),n||r)return n&&r?Qu(e,t):!1;if(n=Te(e),r=Te(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Qr(e[o],t[o]))return!1}}return String(e)===String(t)}const Ua=e=>!!(e&&e.__v_isRef===!0),$=e=>Ee(e)?e:e==null?"":Q(e)||Te(e)&&(e.toString===ja||!ne(e.toString))?Ua(e)?$(e.value):JSON.stringify(e,Ba,2):String(e),Ba=(e,t)=>Ua(t)?Ba(e,t.value):xn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Ps(r,i)+" =>"]=s,n),{})}:Ia(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Ps(n))}:yt(t)?Ps(t):Te(t)&&!Q(t)&&!La(t)?String(t):t,Ps=(e,t="")=>{var n;return yt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xe;class Zu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Xe,!t&&Xe&&(this.index=(Xe.scopes||(Xe.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Xe;try{return Xe=this,t()}finally{Xe=n}}}on(){++this._on===1&&(this.prevScope=Xe,Xe=this)}off(){this._on>0&&--this._on===0&&(Xe=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function ec(){return Xe}let ke;const Rs=new WeakSet;class qa{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Xe&&Xe.active&&Xe.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rs.has(this)&&(Rs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Va(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ho(this),Wa(this);const t=ke,n=ut;ke=this,ut=!0;try{return this.fn()}finally{Ja(this),ke=t,ut=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Fi(t);this.deps=this.depsTail=void 0,ho(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ri(this)&&this.run()}get dirty(){return ri(this)}}let Ha=0,Gn,Yn;function Va(e,t=!1){if(e.flags|=8,t){e.next=Yn,Yn=e;return}e.next=Gn,Gn=e}function Ni(){Ha++}function Di(){if(--Ha>0)return;if(Yn){let t=Yn;for(Yn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Gn;){let t=Gn;for(Gn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Wa(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ja(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Fi(r),tc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function ri(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ka(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ka(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===sr)||(e.globalVersion=sr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ri(e))))return;e.flags|=2;const t=e.dep,n=ke,r=ut;ke=e,ut=!0;try{Wa(e);const s=e.fn(e._value);(t.version===0||Bt(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{ke=n,ut=r,Ja(e),e.flags&=-3}}function Fi(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Fi(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function tc(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let ut=!0;const za=[];function Ct(){za.push(ut),ut=!1}function Pt(){const e=za.pop();ut=e===void 0?!0:e}function ho(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=ke;ke=void 0;try{t()}finally{ke=n}}}let sr=0;class nc{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ui{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ke||!ut||ke===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ke)n=this.activeLink=new nc(ke,this),ke.deps?(n.prevDep=ke.depsTail,ke.depsTail.nextDep=n,ke.depsTail=n):ke.deps=ke.depsTail=n,Ga(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ke.depsTail,n.nextDep=void 0,ke.depsTail.nextDep=n,ke.depsTail=n,ke.deps===n&&(ke.deps=r)}return n}trigger(t){this.version++,sr++,this.notify(t)}notify(t){Ni();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Di()}}}function Ga(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ga(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const si=new WeakMap,nn=Symbol(""),ii=Symbol(""),ir=Symbol("");function Ne(e,t,n){if(ut&&ke){let r=si.get(e);r||si.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ui),s.map=r,s.key=n),s.track()}}function Ot(e,t,n,r,s,i){const o=si.get(e);if(!o){sr++;return}const a=l=>{l&&l.trigger()};if(Ni(),t==="clear")o.forEach(a);else{const l=Q(e),u=l&&ji(n);if(l&&n==="length"){const c=Number(r);o.forEach((h,f)=>{(f==="length"||f===ir||!yt(f)&&f>=c)&&a(h)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(ir)),t){case"add":l?u&&a(o.get("length")):(a(o.get(nn)),xn(e)&&a(o.get(ii)));break;case"delete":l||(a(o.get(nn)),xn(e)&&a(o.get(ii)));break;case"set":xn(e)&&a(o.get(nn));break}}Di()}function ln(e){const t=ye(e);return t===e?t:(Ne(t,"iterate",ir),st(e)?t:t.map(Ie))}function ys(e){return Ne(e=ye(e),"iterate",ir),e}const rc={__proto__:null,[Symbol.iterator](){return Is(this,Symbol.iterator,Ie)},concat(...e){return ln(this).concat(...e.map(t=>Q(t)?ln(t):t))},entries(){return Is(this,"entries",e=>(e[1]=Ie(e[1]),e))},every(e,t){return St(this,"every",e,t,void 0,arguments)},filter(e,t){return St(this,"filter",e,t,n=>n.map(Ie),arguments)},find(e,t){return St(this,"find",e,t,Ie,arguments)},findIndex(e,t){return St(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return St(this,"findLast",e,t,Ie,arguments)},findLastIndex(e,t){return St(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return St(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ms(this,"includes",e)},indexOf(...e){return Ms(this,"indexOf",e)},join(e){return ln(this).join(e)},lastIndexOf(...e){return Ms(this,"lastIndexOf",e)},map(e,t){return St(this,"map",e,t,void 0,arguments)},pop(){return Ln(this,"pop")},push(...e){return Ln(this,"push",e)},reduce(e,...t){return fo(this,"reduce",e,t)},reduceRight(e,...t){return fo(this,"reduceRight",e,t)},shift(){return Ln(this,"shift")},some(e,t){return St(this,"some",e,t,void 0,arguments)},splice(...e){return Ln(this,"splice",e)},toReversed(){return ln(this).toReversed()},toSorted(e){return ln(this).toSorted(e)},toSpliced(...e){return ln(this).toSpliced(...e)},unshift(...e){return Ln(this,"unshift",e)},values(){return Is(this,"values",Ie)}};function Is(e,t,n){const r=ys(e),s=r[t]();return r!==e&&!st(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const sc=Array.prototype;function St(e,t,n,r,s,i){const o=ys(e),a=o!==e&&!st(e),l=o[t];if(l!==sc[t]){const h=l.apply(e,i);return a?Ie(h):h}let u=n;o!==e&&(a?u=function(h,f){return n.call(this,Ie(h),f,e)}:n.length>2&&(u=function(h,f){return n.call(this,h,f,e)}));const c=l.call(o,u,r);return a&&s?s(c):c}function fo(e,t,n,r){const s=ys(e);let i=n;return s!==e&&(st(e)?n.length>3&&(i=function(o,a,l){return n.call(this,o,a,l,e)}):i=function(o,a,l){return n.call(this,o,Ie(a),l,e)}),s[t](i,...r)}function Ms(e,t,n){const r=ye(e);Ne(r,"iterate",ir);const s=r[t](...n);return(s===-1||s===!1)&&Vi(n[0])?(n[0]=ye(n[0]),r[t](...n)):s}function Ln(e,t,n=[]){Ct(),Ni();const r=ye(e)[t].apply(e,n);return Di(),Pt(),r}const ic=Ri("__proto__,__v_isRef,__isVue"),Ya=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(yt));function oc(e){yt(e)||(e=String(e));const t=ye(this);return Ne(t,"has",e),t.hasOwnProperty(e)}class Xa{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?mc:tl:i?el:Za).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=Q(t);if(!s){let l;if(o&&(l=rc[n]))return l;if(n==="hasOwnProperty")return oc}const a=Reflect.get(t,n,Ue(t)?t:r);return(yt(n)?Ya.has(n):ic(n))||(s||Ne(t,"get",n),i)?a:Ue(a)?o&&ji(n)?a:a.value:Te(a)?s?nl(a):qi(a):a}}class Qa extends Xa{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const l=Ht(i);if(!st(r)&&!Ht(r)&&(i=ye(i),r=ye(r)),!Q(t)&&Ue(i)&&!Ue(r))return l?!1:(i.value=r,!0)}const o=Q(t)&&ji(n)?Number(n)<t.length:we(t,n),a=Reflect.set(t,n,r,Ue(t)?t:s);return t===ye(s)&&(o?Bt(r,i)&&Ot(t,"set",n,r):Ot(t,"add",n,r)),a}deleteProperty(t,n){const r=we(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ot(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!yt(n)||!Ya.has(n))&&Ne(t,"has",n),r}ownKeys(t){return Ne(t,"iterate",Q(t)?"length":nn),Reflect.ownKeys(t)}}class ac extends Xa{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const lc=new Qa,uc=new ac,cc=new Qa(!0),oi=e=>e,$r=e=>Reflect.getPrototypeOf(e);function hc(e,t,n){return function(...r){const s=this.__v_raw,i=ye(s),o=xn(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=s[e](...r),c=n?oi:t?Zr:Ie;return!t&&Ne(i,"iterate",l?ii:nn),{next(){const{value:h,done:f}=u.next();return f?{value:h,done:f}:{value:a?[c(h[0]),c(h[1])]:c(h),done:f}},[Symbol.iterator](){return this}}}}function Cr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function fc(e,t){const n={get(s){const i=this.__v_raw,o=ye(i),a=ye(s);e||(Bt(s,a)&&Ne(o,"get",s),Ne(o,"get",a));const{has:l}=$r(o),u=t?oi:e?Zr:Ie;if(l.call(o,s))return u(i.get(s));if(l.call(o,a))return u(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!e&&Ne(ye(s),"iterate",nn),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=ye(i),a=ye(s);return e||(Bt(s,a)&&Ne(o,"has",s),Ne(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=ye(a),u=t?oi:e?Zr:Ie;return!e&&Ne(l,"iterate",nn),a.forEach((c,h)=>s.call(i,u(c),u(h),o))}};return Ke(n,e?{add:Cr("add"),set:Cr("set"),delete:Cr("delete"),clear:Cr("clear")}:{add(s){!t&&!st(s)&&!Ht(s)&&(s=ye(s));const i=ye(this);return $r(i).has.call(i,s)||(i.add(s),Ot(i,"add",s,s)),this},set(s,i){!t&&!st(i)&&!Ht(i)&&(i=ye(i));const o=ye(this),{has:a,get:l}=$r(o);let u=a.call(o,s);u||(s=ye(s),u=a.call(o,s));const c=l.call(o,s);return o.set(s,i),u?Bt(i,c)&&Ot(o,"set",s,i):Ot(o,"add",s,i),this},delete(s){const i=ye(this),{has:o,get:a}=$r(i);let l=o.call(i,s);l||(s=ye(s),l=o.call(i,s)),a&&a.call(i,s);const u=i.delete(s);return l&&Ot(i,"delete",s,void 0),u},clear(){const s=ye(this),i=s.size!==0,o=s.clear();return i&&Ot(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=hc(s,e,t)}),n}function Bi(e,t){const n=fc(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(we(n,s)&&s in r?n:r,s,i)}const dc={get:Bi(!1,!1)},pc={get:Bi(!1,!0)},gc={get:Bi(!0,!1)},Za=new WeakMap,el=new WeakMap,tl=new WeakMap,mc=new WeakMap;function _c(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vc(e){return e.__v_skip||!Object.isExtensible(e)?0:_c(Hu(e))}function qi(e){return Ht(e)?e:Hi(e,!1,lc,dc,Za)}function yc(e){return Hi(e,!1,cc,pc,el)}function nl(e){return Hi(e,!0,uc,gc,tl)}function Hi(e,t,n,r,s){if(!Te(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=vc(e);if(i===0)return e;const o=s.get(e);if(o)return o;const a=new Proxy(e,i===2?r:n);return s.set(e,a),a}function Sn(e){return Ht(e)?Sn(e.__v_raw):!!(e&&e.__v_isReactive)}function Ht(e){return!!(e&&e.__v_isReadonly)}function st(e){return!!(e&&e.__v_isShallow)}function Vi(e){return e?!!e.__v_raw:!1}function ye(e){const t=e&&e.__v_raw;return t?ye(t):e}function wc(e){return!we(e,"__v_skip")&&Object.isExtensible(e)&&Da(e,"__v_skip",!0),e}const Ie=e=>Te(e)?qi(e):e,Zr=e=>Te(e)?nl(e):e;function Ue(e){return e?e.__v_isRef===!0:!1}function Fe(e){return bc(e,!1)}function bc(e,t){return Ue(e)?e:new xc(e,t)}class xc{constructor(t,n){this.dep=new Ui,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ye(t),this._value=n?t:Ie(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||st(t)||Ht(t);t=r?t:ye(t),Bt(t,n)&&(this._rawValue=t,this._value=r?t:Ie(t),this.dep.trigger())}}function or(e){return Ue(e)?e.value:e}const Sc={get:(e,t,n)=>t==="__v_raw"?e:or(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return Ue(s)&&!Ue(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function rl(e){return Sn(e)?e:new Proxy(e,Sc)}class kc{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ui(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ke!==this)return Va(this,!0),!0}get value(){const t=this.dep.track();return Ka(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Tc(e,t,n=!1){let r,s;return ne(e)?r=e:(r=e.get,s=e.set),new kc(r,s,n)}const Pr={},es=new WeakMap;let Yt;function Ec(e,t=!1,n=Yt){if(n){let r=es.get(n);r||es.set(n,r=[]),r.push(e)}}function Ac(e,t,n=xe){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=n,u=E=>s?E:st(E)||s===!1||s===0?$t(E,1):$t(E);let c,h,f,p,k=!1,O=!1;if(Ue(e)?(h=()=>e.value,k=st(e)):Sn(e)?(h=()=>u(e),k=!0):Q(e)?(O=!0,k=e.some(E=>Sn(E)||st(E)),h=()=>e.map(E=>{if(Ue(E))return E.value;if(Sn(E))return u(E);if(ne(E))return l?l(E,2):E()})):ne(e)?t?h=l?()=>l(e,2):e:h=()=>{if(f){Ct();try{f()}finally{Pt()}}const E=Yt;Yt=c;try{return l?l(e,3,[p]):e(p)}finally{Yt=E}}:h=mt,t&&s){const E=h,x=s===!0?1/0:s;h=()=>$t(E(),x)}const d=ec(),m=()=>{c.stop(),d&&d.active&&Mi(d.effects,c)};if(i&&t){const E=t;t=(...x)=>{E(...x),m()}}let A=O?new Array(e.length).fill(Pr):Pr;const w=E=>{if(!(!(c.flags&1)||!c.dirty&&!E))if(t){const x=c.run();if(s||k||(O?x.some((L,V)=>Bt(L,A[V])):Bt(x,A))){f&&f();const L=Yt;Yt=c;try{const V=[x,A===Pr?void 0:O&&A[0]===Pr?[]:A,p];A=x,l?l(t,3,V):t(...V)}finally{Yt=L}}}else c.run()};return a&&a(w),c=new qa(h),c.scheduler=o?()=>o(w,!1):w,p=E=>Ec(E,!1,c),f=c.onStop=()=>{const E=es.get(c);if(E){if(l)l(E,4);else for(const x of E)x();es.delete(c)}},t?r?w(!0):A=c.run():o?o(w.bind(null,!0),!0):c.run(),m.pause=c.pause.bind(c),m.resume=c.resume.bind(c),m.stop=m,m}function $t(e,t=1/0,n){if(t<=0||!Te(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ue(e))$t(e.value,t,n);else if(Q(e))for(let r=0;r<e.length;r++)$t(e[r],t,n);else if(Ia(e)||xn(e))e.forEach(r=>{$t(r,t,n)});else if(La(e)){for(const r in e)$t(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&$t(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function yr(e,t,n,r){try{return r?e(...r):e()}catch(s){ws(s,t,n)}}function wt(e,t,n,r){if(ne(e)){const s=yr(e,t,n,r);return s&&Ma(s)&&s.catch(i=>{ws(i,t,n)}),s}if(Q(e)){const s=[];for(let i=0;i<e.length;i++)s.push(wt(e[i],t,n,r));return s}}function ws(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||xe;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const c=a.ec;if(c){for(let h=0;h<c.length;h++)if(c[h](e,l,u)===!1)return}a=a.parent}if(i){Ct(),yr(i,null,10,[e,l,u]),Pt();return}}Oc(e,n,s,r,o)}function Oc(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const Ve=[];let dt=-1;const kn=[];let Lt=null,vn=0;const sl=Promise.resolve();let ts=null;function il(e){const t=ts||sl;return e?t.then(this?e.bind(this):e):t}function $c(e){let t=dt+1,n=Ve.length;for(;t<n;){const r=t+n>>>1,s=Ve[r],i=ar(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function Wi(e){if(!(e.flags&1)){const t=ar(e),n=Ve[Ve.length-1];!n||!(e.flags&2)&&t>=ar(n)?Ve.push(e):Ve.splice($c(t),0,e),e.flags|=1,ol()}}function ol(){ts||(ts=sl.then(ll))}function Cc(e){Q(e)?kn.push(...e):Lt&&e.id===-1?Lt.splice(vn+1,0,e):e.flags&1||(kn.push(e),e.flags|=1),ol()}function po(e,t,n=dt+1){for(;n<Ve.length;n++){const r=Ve[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;Ve.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function al(e){if(kn.length){const t=[...new Set(kn)].sort((n,r)=>ar(n)-ar(r));if(kn.length=0,Lt){Lt.push(...t);return}for(Lt=t,vn=0;vn<Lt.length;vn++){const n=Lt[vn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Lt=null,vn=0}}const ar=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ll(e){try{for(dt=0;dt<Ve.length;dt++){const t=Ve[dt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),yr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;dt<Ve.length;dt++){const t=Ve[dt];t&&(t.flags&=-2)}dt=-1,Ve.length=0,al(),ts=null,(Ve.length||kn.length)&&ll()}}let rt=null,ul=null;function ns(e){const t=rt;return rt=e,ul=e&&e.type.__scopeId||null,t}function Pc(e,t=rt,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&So(-1);const i=ns(t);let o;try{o=e(...s)}finally{ns(i),r._d&&So(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Hr(e,t){if(rt===null)return e;const n=Ts(rt),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,o,a,l=xe]=t[s];i&&(ne(i)&&(i={mounted:i,updated:i}),i.deep&&$t(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Jt(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(Ct(),wt(l,n,8,[e.el,a,e,t]),Pt())}}const Rc=Symbol("_vte"),Ic=e=>e.__isTeleport;function Ji(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ji(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function cl(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function rs(e,t,n,r,s=!1){if(Q(e)){e.forEach((k,O)=>rs(k,t&&(Q(t)?t[O]:t),n,r,s));return}if(Xn(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&rs(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Ts(r.component):r.el,o=s?null:i,{i:a,r:l}=e,u=t&&t.r,c=a.refs===xe?a.refs={}:a.refs,h=a.setupState,f=ye(h),p=h===xe?()=>!1:k=>we(f,k);if(u!=null&&u!==l&&(Ee(u)?(c[u]=null,p(u)&&(h[u]=null)):Ue(u)&&(u.value=null)),ne(l))yr(l,a,12,[o,c]);else{const k=Ee(l),O=Ue(l);if(k||O){const d=()=>{if(e.f){const m=k?p(l)?h[l]:c[l]:l.value;s?Q(m)&&Mi(m,i):Q(m)?m.includes(i)||m.push(i):k?(c[l]=[i],p(l)&&(h[l]=c[l])):(l.value=[i],e.k&&(c[e.k]=l.value))}else k?(c[l]=o,p(l)&&(h[l]=o)):O&&(l.value=o,e.k&&(c[e.k]=o))};o?(d.id=-1,Ze(d,n)):d()}}}vs().requestIdleCallback;vs().cancelIdleCallback;const Xn=e=>!!e.type.__asyncLoader,hl=e=>e.type.__isKeepAlive;function Mc(e,t){fl(e,"a",t)}function jc(e,t){fl(e,"da",t)}function fl(e,t,n=We){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(bs(t,r,n),n){let s=n.parent;for(;s&&s.parent;)hl(s.parent.vnode)&&Lc(r,t,n,s),s=s.parent}}function Lc(e,t,n,r){const s=bs(t,e,r,!0);pl(()=>{Mi(r[t],s)},n)}function bs(e,t,n=We,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...o)=>{Ct();const a=wr(n),l=wt(t,n,e,o);return a(),Pt(),l});return r?s.unshift(i):s.push(i),i}}const It=e=>(t,n=We)=>{(!cr||e==="sp")&&bs(e,(...r)=>t(...r),n)},Nc=It("bm"),xs=It("m"),Dc=It("bu"),Fc=It("u"),dl=It("bum"),pl=It("um"),Uc=It("sp"),Bc=It("rtg"),qc=It("rtc");function Hc(e,t=We){bs("ec",e,t)}const Vc=Symbol.for("v-ndc");function lr(e,t,n,r){let s;const i=n,o=Q(e);if(o||Ee(e)){const a=o&&Sn(e);let l=!1,u=!1;a&&(l=!st(e),u=Ht(e),e=ys(e)),s=new Array(e.length);for(let c=0,h=e.length;c<h;c++)s[c]=t(l?u?Zr(Ie(e[c])):Ie(e[c]):e[c],c,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,i)}else if(Te(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,i));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];s[l]=t(e[c],c,l,i)}}else s=[];return s}const ai=e=>e?jl(e)?Ts(e):ai(e.parent):null,Qn=Ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>ai(e.parent),$root:e=>ai(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ml(e),$forceUpdate:e=>e.f||(e.f=()=>{Wi(e.update)}),$nextTick:e=>e.n||(e.n=il.bind(e.proxy)),$watch:e=>fh.bind(e)}),js=(e,t)=>e!==xe&&!e.__isScriptSetup&&we(e,t),Wc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(js(r,t))return o[t]=1,r[t];if(s!==xe&&we(s,t))return o[t]=2,s[t];if((u=e.propsOptions[0])&&we(u,t))return o[t]=3,i[t];if(n!==xe&&we(n,t))return o[t]=4,n[t];li&&(o[t]=0)}}const c=Qn[t];let h,f;if(c)return t==="$attrs"&&Ne(e.attrs,"get",""),c(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(n!==xe&&we(n,t))return o[t]=4,n[t];if(f=l.config.globalProperties,we(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return js(s,t)?(s[t]=n,!0):r!==xe&&we(r,t)?(r[t]=n,!0):we(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||e!==xe&&we(e,o)||js(t,o)||(a=i[0])&&we(a,o)||we(r,o)||we(Qn,o)||we(s.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:we(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function go(e){return Q(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let li=!0;function Jc(e){const t=ml(e),n=e.proxy,r=e.ctx;li=!1,t.beforeCreate&&mo(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:h,mounted:f,beforeUpdate:p,updated:k,activated:O,deactivated:d,beforeDestroy:m,beforeUnmount:A,destroyed:w,unmounted:E,render:x,renderTracked:L,renderTriggered:V,errorCaptured:Z,serverPrefetch:ue,expose:ce,inheritAttrs:me,components:M,directives:I,filters:q}=t;if(u&&Kc(u,r,null),o)for(const ie in o){const re=o[ie];ne(re)&&(r[ie]=re.bind(n))}if(s){const ie=s.call(n,n);Te(ie)&&(e.data=qi(ie))}if(li=!0,i)for(const ie in i){const re=i[ie],Oe=ne(re)?re.bind(n,n):ne(re.get)?re.get.bind(n,n):mt,S=!ne(re)&&ne(re.set)?re.set.bind(n):mt,y=Hn({get:Oe,set:S});Object.defineProperty(r,ie,{enumerable:!0,configurable:!0,get:()=>y.value,set:H=>y.value=H})}if(a)for(const ie in a)gl(a[ie],r,n,ie);if(l){const ie=ne(l)?l.call(n):l;Reflect.ownKeys(ie).forEach(re=>{Zc(re,ie[re])})}c&&mo(c,e,"c");function be(ie,re){Q(re)?re.forEach(Oe=>ie(Oe.bind(n))):re&&ie(re.bind(n))}if(be(Nc,h),be(xs,f),be(Dc,p),be(Fc,k),be(Mc,O),be(jc,d),be(Hc,Z),be(qc,L),be(Bc,V),be(dl,A),be(pl,E),be(Uc,ue),Q(ce))if(ce.length){const ie=e.exposed||(e.exposed={});ce.forEach(re=>{Object.defineProperty(ie,re,{get:()=>n[re],set:Oe=>n[re]=Oe})})}else e.exposed||(e.exposed={});x&&e.render===mt&&(e.render=x),me!=null&&(e.inheritAttrs=me),M&&(e.components=M),I&&(e.directives=I),ue&&cl(e)}function Kc(e,t,n=mt){Q(e)&&(e=ui(e));for(const r in e){const s=e[r];let i;Te(s)?"default"in s?i=Vr(s.from||r,s.default,!0):i=Vr(s.from||r):i=Vr(s),Ue(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function mo(e,t,n){wt(Q(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function gl(e,t,n,r){let s=r.includes(".")?$l(n,r):()=>n[r];if(Ee(e)){const i=t[e];ne(i)&&Zn(s,i)}else if(ne(e))Zn(s,e.bind(n));else if(Te(e))if(Q(e))e.forEach(i=>gl(i,t,n,r));else{const i=ne(e.handler)?e.handler.bind(n):t[e.handler];ne(i)&&Zn(s,i,e)}}function ml(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!s.length&&!n&&!r?l=t:(l={},s.length&&s.forEach(u=>ss(l,u,o,!0)),ss(l,t,o)),Te(t)&&i.set(t,l),l}function ss(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&ss(e,i,n,!0),s&&s.forEach(o=>ss(e,o,n,!0));for(const o in t)if(!(r&&o==="expose")){const a=zc[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const zc={data:_o,props:vo,emits:vo,methods:Bn,computed:Bn,beforeCreate:qe,created:qe,beforeMount:qe,mounted:qe,beforeUpdate:qe,updated:qe,beforeDestroy:qe,beforeUnmount:qe,destroyed:qe,unmounted:qe,activated:qe,deactivated:qe,errorCaptured:qe,serverPrefetch:qe,components:Bn,directives:Bn,watch:Yc,provide:_o,inject:Gc};function _o(e,t){return t?e?function(){return Ke(ne(e)?e.call(this,this):e,ne(t)?t.call(this,this):t)}:t:e}function Gc(e,t){return Bn(ui(e),ui(t))}function ui(e){if(Q(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function qe(e,t){return e?[...new Set([].concat(e,t))]:t}function Bn(e,t){return e?Ke(Object.create(null),e,t):t}function vo(e,t){return e?Q(e)&&Q(t)?[...new Set([...e,...t])]:Ke(Object.create(null),go(e),go(t??{})):t}function Yc(e,t){if(!e)return t;if(!t)return e;const n=Ke(Object.create(null),e);for(const r in t)n[r]=qe(e[r],t[r]);return n}function _l(){return{app:null,config:{isNativeTag:Bu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xc=0;function Qc(e,t){return function(r,s=null){ne(r)||(r=Ke({},r)),s!=null&&!Te(s)&&(s=null);const i=_l(),o=new WeakSet,a=[];let l=!1;const u=i.app={_uid:Xc++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Rh,get config(){return i.config},set config(c){},use(c,...h){return o.has(c)||(c&&ne(c.install)?(o.add(c),c.install(u,...h)):ne(c)&&(o.add(c),c(u,...h))),u},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),u},component(c,h){return h?(i.components[c]=h,u):i.components[c]},directive(c,h){return h?(i.directives[c]=h,u):i.directives[c]},mount(c,h,f){if(!l){const p=u._ceVNode||_t(r,s);return p.appContext=i,f===!0?f="svg":f===!1&&(f=void 0),e(p,c,f),l=!0,u._container=c,c.__vue_app__=u,Ts(p.component)}},onUnmount(c){a.push(c)},unmount(){l&&(wt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,h){return i.provides[c]=h,u},runWithContext(c){const h=Tn;Tn=u;try{return c()}finally{Tn=h}}};return u}}let Tn=null;function Zc(e,t){if(We){let n=We.provides;const r=We.parent&&We.parent.provides;r===n&&(n=We.provides=Object.create(r)),n[e]=t}}function Vr(e,t,n=!1){const r=We||rt;if(r||Tn){let s=Tn?Tn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ne(t)?t.call(r&&r.proxy):t}}const vl={},yl=()=>Object.create(vl),wl=e=>Object.getPrototypeOf(e)===vl;function eh(e,t,n,r=!1){const s={},i=yl();e.propsDefaults=Object.create(null),bl(e,t,s,i);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);n?e.props=r?s:yc(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function th(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=e,a=ye(s),[l]=e.propsOptions;let u=!1;if((r||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let h=0;h<c.length;h++){let f=c[h];if(Ss(e.emitsOptions,f))continue;const p=t[f];if(l)if(we(i,f))p!==i[f]&&(i[f]=p,u=!0);else{const k=qt(f);s[k]=ci(l,a,k,p,e,!1)}else p!==i[f]&&(i[f]=p,u=!0)}}}else{bl(e,t,s,i)&&(u=!0);let c;for(const h in a)(!t||!we(t,h)&&((c=on(h))===h||!we(t,c)))&&(l?n&&(n[h]!==void 0||n[c]!==void 0)&&(s[h]=ci(l,a,h,void 0,e,!0)):delete s[h]);if(i!==a)for(const h in i)(!t||!we(t,h))&&(delete i[h],u=!0)}u&&Ot(e.attrs,"set","")}function bl(e,t,n,r){const[s,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(zn(l))continue;const u=t[l];let c;s&&we(s,c=qt(l))?!i||!i.includes(c)?n[c]=u:(a||(a={}))[c]=u:Ss(e.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,o=!0)}if(i){const l=ye(n),u=a||xe;for(let c=0;c<i.length;c++){const h=i[c];n[h]=ci(s,l,h,u[h],e,!we(u,h))}}return o}function ci(e,t,n,r,s,i){const o=e[n];if(o!=null){const a=we(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&ne(l)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const c=wr(s);r=u[n]=l.call(null,t),c()}}else r=l;s.ce&&s.ce._setProp(n,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===on(n))&&(r=!0))}return r}const nh=new WeakMap;function xl(e,t,n=!1){const r=n?nh:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,o={},a=[];let l=!1;if(!ne(e)){const c=h=>{l=!0;const[f,p]=xl(h,t,!0);Ke(o,f),p&&a.push(...p)};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!i&&!l)return Te(e)&&r.set(e,bn),bn;if(Q(i))for(let c=0;c<i.length;c++){const h=qt(i[c]);yo(h)&&(o[h]=xe)}else if(i)for(const c in i){const h=qt(c);if(yo(h)){const f=i[c],p=o[h]=Q(f)||ne(f)?{type:f}:Ke({},f),k=p.type;let O=!1,d=!0;if(Q(k))for(let m=0;m<k.length;++m){const A=k[m],w=ne(A)&&A.name;if(w==="Boolean"){O=!0;break}else w==="String"&&(d=!1)}else O=ne(k)&&k.name==="Boolean";p[0]=O,p[1]=d,(O||we(p,"default"))&&a.push(h)}}const u=[o,a];return Te(e)&&r.set(e,u),u}function yo(e){return e[0]!=="$"&&!zn(e)}const Ki=e=>e[0]==="_"||e==="$stable",zi=e=>Q(e)?e.map(gt):[gt(e)],rh=(e,t,n)=>{if(t._n)return t;const r=Pc((...s)=>zi(t(...s)),n);return r._c=!1,r},Sl=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Ki(s))continue;const i=e[s];if(ne(i))t[s]=rh(s,i,r);else if(i!=null){const o=zi(i);t[s]=()=>o}}},kl=(e,t)=>{const n=zi(t);e.slots.default=()=>n},Tl=(e,t,n)=>{for(const r in t)(n||!Ki(r))&&(e[r]=t[r])},sh=(e,t,n)=>{const r=e.slots=yl();if(e.vnode.shapeFlag&32){const s=t._;s?(Tl(r,t,n),n&&Da(r,"_",s,!0)):Sl(t,r)}else t&&kl(e,t)},ih=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,o=xe;if(r.shapeFlag&32){const a=t._;a?n&&a===1?i=!1:Tl(s,t,n):(i=!t.$stable,Sl(t,s)),o=t}else t&&(kl(e,t),o={default:1});if(i)for(const a in s)!Ki(a)&&o[a]==null&&delete s[a]},Ze=yh;function oh(e){return ah(e)}function ah(e,t){const n=vs();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:h,nextSibling:f,setScopeId:p=mt,insertStaticContent:k}=e,O=(g,_,b,P=null,C=null,R=null,F=void 0,D=null,N=!!_.dynamicChildren)=>{if(g===_)return;g&&!Nn(g,_)&&(P=K(g),H(g,C,R,!0),g=null),_.patchFlag===-2&&(N=!1,_.dynamicChildren=null);const{type:j,ref:G,shapeFlag:B}=_;switch(j){case ks:d(g,_,b,P);break;case Vt:m(g,_,b,P);break;case Ns:g==null&&A(_,b,P,F);break;case De:M(g,_,b,P,C,R,F,D,N);break;default:B&1?x(g,_,b,P,C,R,F,D,N):B&6?I(g,_,b,P,C,R,F,D,N):(B&64||B&128)&&j.process(g,_,b,P,C,R,F,D,N,he)}G!=null&&C&&rs(G,g&&g.ref,R,_||g,!_)},d=(g,_,b,P)=>{if(g==null)r(_.el=a(_.children),b,P);else{const C=_.el=g.el;_.children!==g.children&&u(C,_.children)}},m=(g,_,b,P)=>{g==null?r(_.el=l(_.children||""),b,P):_.el=g.el},A=(g,_,b,P)=>{[g.el,g.anchor]=k(g.children,_,b,P,g.el,g.anchor)},w=({el:g,anchor:_},b,P)=>{let C;for(;g&&g!==_;)C=f(g),r(g,b,P),g=C;r(_,b,P)},E=({el:g,anchor:_})=>{let b;for(;g&&g!==_;)b=f(g),s(g),g=b;s(_)},x=(g,_,b,P,C,R,F,D,N)=>{_.type==="svg"?F="svg":_.type==="math"&&(F="mathml"),g==null?L(_,b,P,C,R,F,D,N):ue(g,_,C,R,F,D,N)},L=(g,_,b,P,C,R,F,D)=>{let N,j;const{props:G,shapeFlag:B,transition:J,dirs:Y}=g;if(N=g.el=o(g.type,R,G&&G.is,G),B&8?c(N,g.children):B&16&&Z(g.children,N,null,P,C,Ls(g,R),F,D),Y&&Jt(g,null,P,"created"),V(N,g,g.scopeId,F,P),G){for(const ve in G)ve!=="value"&&!zn(ve)&&i(N,ve,null,G[ve],R,P);"value"in G&&i(N,"value",null,G.value,R),(j=G.onVnodeBeforeMount)&&ht(j,P,g)}Y&&Jt(g,null,P,"beforeMount");const se=lh(C,J);se&&J.beforeEnter(N),r(N,_,b),((j=G&&G.onVnodeMounted)||se||Y)&&Ze(()=>{j&&ht(j,P,g),se&&J.enter(N),Y&&Jt(g,null,P,"mounted")},C)},V=(g,_,b,P,C)=>{if(b&&p(g,b),P)for(let R=0;R<P.length;R++)p(g,P[R]);if(C){let R=C.subTree;if(_===R||Pl(R.type)&&(R.ssContent===_||R.ssFallback===_)){const F=C.vnode;V(g,F,F.scopeId,F.slotScopeIds,C.parent)}}},Z=(g,_,b,P,C,R,F,D,N=0)=>{for(let j=N;j<g.length;j++){const G=g[j]=D?Nt(g[j]):gt(g[j]);O(null,G,_,b,P,C,R,F,D)}},ue=(g,_,b,P,C,R,F)=>{const D=_.el=g.el;let{patchFlag:N,dynamicChildren:j,dirs:G}=_;N|=g.patchFlag&16;const B=g.props||xe,J=_.props||xe;let Y;if(b&&Kt(b,!1),(Y=J.onVnodeBeforeUpdate)&&ht(Y,b,_,g),G&&Jt(_,g,b,"beforeUpdate"),b&&Kt(b,!0),(B.innerHTML&&J.innerHTML==null||B.textContent&&J.textContent==null)&&c(D,""),j?ce(g.dynamicChildren,j,D,b,P,Ls(_,C),R):F||re(g,_,D,null,b,P,Ls(_,C),R,!1),N>0){if(N&16)me(D,B,J,b,C);else if(N&2&&B.class!==J.class&&i(D,"class",null,J.class,C),N&4&&i(D,"style",B.style,J.style,C),N&8){const se=_.dynamicProps;for(let ve=0;ve<se.length;ve++){const fe=se[ve],$e=B[fe],Ae=J[fe];(Ae!==$e||fe==="value")&&i(D,fe,$e,Ae,C,b)}}N&1&&g.children!==_.children&&c(D,_.children)}else!F&&j==null&&me(D,B,J,b,C);((Y=J.onVnodeUpdated)||G)&&Ze(()=>{Y&&ht(Y,b,_,g),G&&Jt(_,g,b,"updated")},P)},ce=(g,_,b,P,C,R,F)=>{for(let D=0;D<_.length;D++){const N=g[D],j=_[D],G=N.el&&(N.type===De||!Nn(N,j)||N.shapeFlag&198)?h(N.el):b;O(N,j,G,null,P,C,R,F,!0)}},me=(g,_,b,P,C)=>{if(_!==b){if(_!==xe)for(const R in _)!zn(R)&&!(R in b)&&i(g,R,_[R],null,C,P);for(const R in b){if(zn(R))continue;const F=b[R],D=_[R];F!==D&&R!=="value"&&i(g,R,D,F,C,P)}"value"in b&&i(g,"value",_.value,b.value,C)}},M=(g,_,b,P,C,R,F,D,N)=>{const j=_.el=g?g.el:a(""),G=_.anchor=g?g.anchor:a("");let{patchFlag:B,dynamicChildren:J,slotScopeIds:Y}=_;Y&&(D=D?D.concat(Y):Y),g==null?(r(j,b,P),r(G,b,P),Z(_.children||[],b,G,C,R,F,D,N)):B>0&&B&64&&J&&g.dynamicChildren?(ce(g.dynamicChildren,J,b,C,R,F,D),(_.key!=null||C&&_===C.subTree)&&El(g,_,!0)):re(g,_,b,G,C,R,F,D,N)},I=(g,_,b,P,C,R,F,D,N)=>{_.slotScopeIds=D,g==null?_.shapeFlag&512?C.ctx.activate(_,b,P,F,N):q(_,b,P,C,R,F,N):de(g,_,N)},q=(g,_,b,P,C,R,F)=>{const D=g.component=Eh(g,P,C);if(hl(g)&&(D.ctx.renderer=he),Ah(D,!1,F),D.asyncDep){if(C&&C.registerDep(D,be,F),!g.el){const N=D.subTree=_t(Vt);m(null,N,_,b)}}else be(D,g,_,b,C,R,F)},de=(g,_,b)=>{const P=_.component=g.component;if(_h(g,_,b))if(P.asyncDep&&!P.asyncResolved){ie(P,_,b);return}else P.next=_,P.update();else _.el=g.el,P.vnode=_},be=(g,_,b,P,C,R,F)=>{const D=()=>{if(g.isMounted){let{next:B,bu:J,u:Y,parent:se,vnode:ve}=g;{const ze=Al(g);if(ze){B&&(B.el=ve.el,ie(g,B,F)),ze.asyncDep.then(()=>{g.isUnmounted||D()});return}}let fe=B,$e;Kt(g,!1),B?(B.el=ve.el,ie(g,B,F)):B=ve,J&&qr(J),($e=B.props&&B.props.onVnodeBeforeUpdate)&&ht($e,se,B,ve),Kt(g,!0);const Ae=bo(g),Me=g.subTree;g.subTree=Ae,O(Me,Ae,h(Me.el),K(Me),g,C,R),B.el=Ae.el,fe===null&&vh(g,Ae.el),Y&&Ze(Y,C),($e=B.props&&B.props.onVnodeUpdated)&&Ze(()=>ht($e,se,B,ve),C)}else{let B;const{el:J,props:Y}=_,{bm:se,m:ve,parent:fe,root:$e,type:Ae}=g,Me=Xn(_);Kt(g,!1),se&&qr(se),!Me&&(B=Y&&Y.onVnodeBeforeMount)&&ht(B,fe,_),Kt(g,!0);{$e.ce&&$e.ce._injectChildStyle(Ae);const ze=g.subTree=bo(g);O(null,ze,b,P,g,C,R),_.el=ze.el}if(ve&&Ze(ve,C),!Me&&(B=Y&&Y.onVnodeMounted)){const ze=_;Ze(()=>ht(B,fe,ze),C)}(_.shapeFlag&256||fe&&Xn(fe.vnode)&&fe.vnode.shapeFlag&256)&&g.a&&Ze(g.a,C),g.isMounted=!0,_=b=P=null}};g.scope.on();const N=g.effect=new qa(D);g.scope.off();const j=g.update=N.run.bind(N),G=g.job=N.runIfDirty.bind(N);G.i=g,G.id=g.uid,N.scheduler=()=>Wi(G),Kt(g,!0),j()},ie=(g,_,b)=>{_.component=g;const P=g.vnode.props;g.vnode=_,g.next=null,th(g,_.props,P,b),ih(g,_.children,b),Ct(),po(g),Pt()},re=(g,_,b,P,C,R,F,D,N=!1)=>{const j=g&&g.children,G=g?g.shapeFlag:0,B=_.children,{patchFlag:J,shapeFlag:Y}=_;if(J>0){if(J&128){S(j,B,b,P,C,R,F,D,N);return}else if(J&256){Oe(j,B,b,P,C,R,F,D,N);return}}Y&8?(G&16&&X(j,C,R),B!==j&&c(b,B)):G&16?Y&16?S(j,B,b,P,C,R,F,D,N):X(j,C,R,!0):(G&8&&c(b,""),Y&16&&Z(B,b,P,C,R,F,D,N))},Oe=(g,_,b,P,C,R,F,D,N)=>{g=g||bn,_=_||bn;const j=g.length,G=_.length,B=Math.min(j,G);let J;for(J=0;J<B;J++){const Y=_[J]=N?Nt(_[J]):gt(_[J]);O(g[J],Y,b,null,C,R,F,D,N)}j>G?X(g,C,R,!0,!1,B):Z(_,b,P,C,R,F,D,N,B)},S=(g,_,b,P,C,R,F,D,N)=>{let j=0;const G=_.length;let B=g.length-1,J=G-1;for(;j<=B&&j<=J;){const Y=g[j],se=_[j]=N?Nt(_[j]):gt(_[j]);if(Nn(Y,se))O(Y,se,b,null,C,R,F,D,N);else break;j++}for(;j<=B&&j<=J;){const Y=g[B],se=_[J]=N?Nt(_[J]):gt(_[J]);if(Nn(Y,se))O(Y,se,b,null,C,R,F,D,N);else break;B--,J--}if(j>B){if(j<=J){const Y=J+1,se=Y<G?_[Y].el:P;for(;j<=J;)O(null,_[j]=N?Nt(_[j]):gt(_[j]),b,se,C,R,F,D,N),j++}}else if(j>J)for(;j<=B;)H(g[j],C,R,!0),j++;else{const Y=j,se=j,ve=new Map;for(j=se;j<=J;j++){const Be=_[j]=N?Nt(_[j]):gt(_[j]);Be.key!=null&&ve.set(Be.key,j)}let fe,$e=0;const Ae=J-se+1;let Me=!1,ze=0;const xt=new Array(Ae);for(j=0;j<Ae;j++)xt[j]=0;for(j=Y;j<=B;j++){const Be=g[j];if($e>=Ae){H(Be,C,R,!0);continue}let nt;if(Be.key!=null)nt=ve.get(Be.key);else for(fe=se;fe<=J;fe++)if(xt[fe-se]===0&&Nn(Be,_[fe])){nt=fe;break}nt===void 0?H(Be,C,R,!0):(xt[nt-se]=j+1,nt>=ze?ze=nt:Me=!0,O(Be,_[nt],b,null,C,R,F,D,N),$e++)}const Ar=Me?uh(xt):bn;for(fe=Ar.length-1,j=Ae-1;j>=0;j--){const Be=se+j,nt=_[Be],Or=Be+1<G?_[Be+1].el:P;xt[j]===0?O(null,nt,b,Or,C,R,F,D,N):Me&&(fe<0||j!==Ar[fe]?y(nt,b,Or,2):fe--)}}},y=(g,_,b,P,C=null)=>{const{el:R,type:F,transition:D,children:N,shapeFlag:j}=g;if(j&6){y(g.component.subTree,_,b,P);return}if(j&128){g.suspense.move(_,b,P);return}if(j&64){F.move(g,_,b,he);return}if(F===De){r(R,_,b);for(let B=0;B<N.length;B++)y(N[B],_,b,P);r(g.anchor,_,b);return}if(F===Ns){w(g,_,b);return}if(P!==2&&j&1&&D)if(P===0)D.beforeEnter(R),r(R,_,b),Ze(()=>D.enter(R),C);else{const{leave:B,delayLeave:J,afterLeave:Y}=D,se=()=>{g.ctx.isUnmounted?s(R):r(R,_,b)},ve=()=>{B(R,()=>{se(),Y&&Y()})};J?J(R,se,ve):ve()}else r(R,_,b)},H=(g,_,b,P=!1,C=!1)=>{const{type:R,props:F,ref:D,children:N,dynamicChildren:j,shapeFlag:G,patchFlag:B,dirs:J,cacheIndex:Y}=g;if(B===-2&&(C=!1),D!=null&&(Ct(),rs(D,null,b,g,!0),Pt()),Y!=null&&(_.renderCache[Y]=void 0),G&256){_.ctx.deactivate(g);return}const se=G&1&&J,ve=!Xn(g);let fe;if(ve&&(fe=F&&F.onVnodeBeforeUnmount)&&ht(fe,_,g),G&6)W(g.component,b,P);else{if(G&128){g.suspense.unmount(b,P);return}se&&Jt(g,null,_,"beforeUnmount"),G&64?g.type.remove(g,_,b,he,P):j&&!j.hasOnce&&(R!==De||B>0&&B&64)?X(j,_,b,!1,!0):(R===De&&B&384||!C&&G&16)&&X(N,_,b),P&&z(g)}(ve&&(fe=F&&F.onVnodeUnmounted)||se)&&Ze(()=>{fe&&ht(fe,_,g),se&&Jt(g,null,_,"unmounted")},b)},z=g=>{const{type:_,el:b,anchor:P,transition:C}=g;if(_===De){U(b,P);return}if(_===Ns){E(g);return}const R=()=>{s(b),C&&!C.persisted&&C.afterLeave&&C.afterLeave()};if(g.shapeFlag&1&&C&&!C.persisted){const{leave:F,delayLeave:D}=C,N=()=>F(b,R);D?D(g.el,R,N):N()}else R()},U=(g,_)=>{let b;for(;g!==_;)b=f(g),s(g),g=b;s(_)},W=(g,_,b)=>{const{bum:P,scope:C,job:R,subTree:F,um:D,m:N,a:j,parent:G,slots:{__:B}}=g;wo(N),wo(j),P&&qr(P),G&&Q(B)&&B.forEach(J=>{G.renderCache[J]=void 0}),C.stop(),R&&(R.flags|=8,H(F,g,_,b)),D&&Ze(D,_),Ze(()=>{g.isUnmounted=!0},_),_&&_.pendingBranch&&!_.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===_.pendingId&&(_.deps--,_.deps===0&&_.resolve())},X=(g,_,b,P=!1,C=!1,R=0)=>{for(let F=R;F<g.length;F++)H(g[F],_,b,P,C)},K=g=>{if(g.shapeFlag&6)return K(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const _=f(g.anchor||g.el),b=_&&_[Rc];return b?f(b):_};let ee=!1;const le=(g,_,b)=>{g==null?_._vnode&&H(_._vnode,null,null,!0):O(_._vnode||null,g,_,null,null,null,b),_._vnode=g,ee||(ee=!0,po(),al(),ee=!1)},he={p:O,um:H,m:y,r:z,mt:q,mc:Z,pc:re,pbc:ce,n:K,o:e};return{render:le,hydrate:void 0,createApp:Qc(le)}}function Ls({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Kt({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function lh(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function El(e,t,n=!1){const r=e.children,s=t.children;if(Q(r)&&Q(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Nt(s[i]),a.el=o.el),!n&&a.patchFlag!==-2&&El(o,a)),a.type===ks&&(a.el=o.el),a.type===Vt&&!a.el&&(a.el=o.el)}}function uh(e){const t=e.slice(),n=[0];let r,s,i,o,a;const l=e.length;for(r=0;r<l;r++){const u=e[r];if(u!==0){if(s=n[n.length-1],e[s]<u){t[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,e[n[a]]<u?i=a+1:o=a;u<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=t[o];return n}function Al(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Al(t)}function wo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ch=Symbol.for("v-scx"),hh=()=>Vr(ch);function Zn(e,t,n){return Ol(e,t,n)}function Ol(e,t,n=xe){const{immediate:r,deep:s,flush:i,once:o}=n,a=Ke({},n),l=t&&r||!t&&i!=="post";let u;if(cr){if(i==="sync"){const p=hh();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=mt,p.resume=mt,p.pause=mt,p}}const c=We;a.call=(p,k,O)=>wt(p,c,k,O);let h=!1;i==="post"?a.scheduler=p=>{Ze(p,c&&c.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(p,k)=>{k?p():Wi(p)}),a.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=Ac(e,t,a);return cr&&(u?u.push(f):l&&f()),f}function fh(e,t,n){const r=this.proxy,s=Ee(e)?e.includes(".")?$l(r,e):()=>r[e]:e.bind(r,r);let i;ne(t)?i=t:(i=t.handler,n=t);const o=wr(this),a=Ol(s,i.bind(r),n);return o(),a}function $l(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const dh=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${qt(t)}Modifiers`]||e[`${on(t)}Modifiers`];function ph(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||xe;let s=n;const i=t.startsWith("update:"),o=i&&dh(r,t.slice(7));o&&(o.trim&&(s=n.map(c=>Ee(c)?c.trim():c)),o.number&&(s=n.map(ni)));let a,l=r[a=Cs(t)]||r[a=Cs(qt(t))];!l&&i&&(l=r[a=Cs(on(t))]),l&&wt(l,e,6,s);const u=r[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,wt(u,e,6,s)}}function Cl(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let o={},a=!1;if(!ne(e)){const l=u=>{const c=Cl(u,t,!0);c&&(a=!0,Ke(o,c))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(Te(e)&&r.set(e,null),null):(Q(i)?i.forEach(l=>o[l]=null):Ke(o,i),Te(e)&&r.set(e,o),o)}function Ss(e,t){return!e||!ms(t)?!1:(t=t.slice(2).replace(/Once$/,""),we(e,t[0].toLowerCase()+t.slice(1))||we(e,on(t))||we(e,t))}function bo(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:h,data:f,setupState:p,ctx:k,inheritAttrs:O}=e,d=ns(e);let m,A;try{if(n.shapeFlag&4){const E=s||r,x=E;m=gt(u.call(x,E,c,h,p,f,k)),A=a}else{const E=t;m=gt(E.length>1?E(h,{attrs:a,slots:o,emit:l}):E(h,null)),A=t.props?a:gh(a)}}catch(E){er.length=0,ws(E,e,1),m=_t(Vt)}let w=m;if(A&&O!==!1){const E=Object.keys(A),{shapeFlag:x}=w;E.length&&x&7&&(i&&E.some(Ii)&&(A=mh(A,i)),w=$n(w,A,!1,!0))}return n.dirs&&(w=$n(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&Ji(w,n.transition),m=w,ns(d),m}const gh=e=>{let t;for(const n in e)(n==="class"||n==="style"||ms(n))&&((t||(t={}))[n]=e[n]);return t},mh=(e,t)=>{const n={};for(const r in e)(!Ii(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function _h(e,t,n){const{props:r,children:s,component:i}=e,{props:o,children:a,patchFlag:l}=t,u=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?xo(r,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let h=0;h<c.length;h++){const f=c[h];if(o[f]!==r[f]&&!Ss(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?xo(r,o,u):!0:!!o;return!1}function xo(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Ss(n,i))return!0}return!1}function vh({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Pl=e=>e.__isSuspense;function yh(e,t){t&&t.pendingBranch?Q(e)?t.effects.push(...e):t.effects.push(e):Cc(e)}const De=Symbol.for("v-fgt"),ks=Symbol.for("v-txt"),Vt=Symbol.for("v-cmt"),Ns=Symbol.for("v-stc"),er=[];let et=null;function ae(e=!1){er.push(et=e?null:[])}function wh(){er.pop(),et=er[er.length-1]||null}let ur=1;function So(e,t=!1){ur+=e,e<0&&et&&t&&(et.hasOnce=!0)}function Rl(e){return e.dynamicChildren=ur>0?et||bn:null,wh(),ur>0&&et&&et.push(e),e}function ge(e,t,n,r,s,i){return Rl(v(e,t,n,r,s,i,!0))}function qn(e,t,n,r,s){return Rl(_t(e,t,n,r,s,!0))}function Il(e){return e?e.__v_isVNode===!0:!1}function Nn(e,t){return e.type===t.type&&e.key===t.key}const Ml=({key:e})=>e??null,Wr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ee(e)||Ue(e)||ne(e)?{i:rt,r:e,k:t,f:!!n}:e:null);function v(e,t=null,n=null,r=0,s=null,i=e===De?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ml(t),ref:t&&Wr(t),scopeId:ul,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:rt};return a?(Gi(l,n),i&128&&e.normalize(l)):n&&(l.shapeFlag|=Ee(n)?8:16),ur>0&&!o&&et&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&et.push(l),l}const _t=bh;function bh(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Vc)&&(e=Vt),Il(e)){const a=$n(e,t,!0);return n&&Gi(a,n),ur>0&&!i&&et&&(a.shapeFlag&6?et[et.indexOf(e)]=a:et.push(a)),a.patchFlag=-2,a}if(Ph(e)&&(e=e.__vccOpts),t){t=xh(t);let{class:a,style:l}=t;a&&!Ee(a)&&(t.class=ot(a)),Te(l)&&(Vi(l)&&!Q(l)&&(l=Ke({},l)),t.style=Li(l))}const o=Ee(e)?1:Pl(e)?128:Ic(e)?64:Te(e)?4:ne(e)?2:0;return v(e,t,n,r,s,o,i,!0)}function xh(e){return e?Vi(e)||wl(e)?Ke({},e):e:null}function $n(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=e,u=t?Sh(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Ml(u),ref:t&&t.ref?n&&i?Q(i)?i.concat(Wr(t)):[i,Wr(t)]:Wr(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==De?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&$n(e.ssContent),ssFallback:e.ssFallback&&$n(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&Ji(c,l.clone(c)),c}function pt(e=" ",t=0){return _t(ks,null,e,t)}function Je(e="",t=!1){return t?(ae(),qn(Vt,null,e)):_t(Vt,null,e)}function gt(e){return e==null||typeof e=="boolean"?_t(Vt):Q(e)?_t(De,null,e.slice()):Il(e)?Nt(e):_t(ks,null,String(e))}function Nt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:$n(e)}function Gi(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Q(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Gi(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!wl(t)?t._ctx=rt:s===3&&rt&&(rt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ne(t)?(t={default:t,_ctx:rt},n=32):(t=String(t),r&64?(n=16,t=[pt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Sh(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=ot([t.class,r.class]));else if(s==="style")t.style=Li([t.style,r.style]);else if(ms(s)){const i=t[s],o=r[s];o&&i!==o&&!(Q(i)&&i.includes(o))&&(t[s]=i?[].concat(i,o):o)}else s!==""&&(t[s]=r[s])}return t}function ht(e,t,n,r=null){wt(e,t,7,[n,r])}const kh=_l();let Th=0;function Eh(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||kh,i={uid:Th++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Zu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xl(r,s),emitsOptions:Cl(r,s),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:r.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=ph.bind(null,i),e.ce&&e.ce(i),i}let We=null,is,hi;{const e=vs(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};is=t("__VUE_INSTANCE_SETTERS__",n=>We=n),hi=t("__VUE_SSR_SETTERS__",n=>cr=n)}const wr=e=>{const t=We;return is(e),e.scope.on(),()=>{e.scope.off(),is(t)}},ko=()=>{We&&We.scope.off(),is(null)};function jl(e){return e.vnode.shapeFlag&4}let cr=!1;function Ah(e,t=!1,n=!1){t&&hi(t);const{props:r,children:s}=e.vnode,i=jl(e);eh(e,r,i,t),sh(e,s,n||t);const o=i?Oh(e,t):void 0;return t&&hi(!1),o}function Oh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Wc);const{setup:r}=n;if(r){Ct();const s=e.setupContext=r.length>1?Ch(e):null,i=wr(e),o=yr(r,e,0,[e.props,s]),a=Ma(o);if(Pt(),i(),(a||e.sp)&&!Xn(e)&&cl(e),a){if(o.then(ko,ko),t)return o.then(l=>{To(e,l)}).catch(l=>{ws(l,e,0)});e.asyncDep=o}else To(e,o)}else Ll(e)}function To(e,t,n){ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Te(t)&&(e.setupState=rl(t)),Ll(e)}function Ll(e,t,n){const r=e.type;e.render||(e.render=r.render||mt);{const s=wr(e);Ct();try{Jc(e)}finally{Pt(),s()}}}const $h={get(e,t){return Ne(e,"get",""),e[t]}};function Ch(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,$h),slots:e.slots,emit:e.emit,expose:t}}function Ts(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(rl(wc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Qn)return Qn[n](e)},has(t,n){return n in t||n in Qn}})):e.proxy}function Ph(e){return ne(e)&&"__vccOpts"in e}const Hn=(e,t)=>Tc(e,t,cr),Rh="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let fi;const Eo=typeof window<"u"&&window.trustedTypes;if(Eo)try{fi=Eo.createPolicy("vue",{createHTML:e=>e})}catch{}const Nl=fi?e=>fi.createHTML(e):e=>e,Ih="http://www.w3.org/2000/svg",Mh="http://www.w3.org/1998/Math/MathML",Et=typeof document<"u"?document:null,Ao=Et&&Et.createElement("template"),jh={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Et.createElementNS(Ih,e):t==="mathml"?Et.createElementNS(Mh,e):n?Et.createElement(e,{is:n}):Et.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Et.createTextNode(e),createComment:e=>Et.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Et.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const o=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Ao.innerHTML=Nl(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=Ao.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Lh=Symbol("_vtc");function Nh(e,t,n){const r=e[Lh];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Oo=Symbol("_vod"),Dh=Symbol("_vsh"),Fh=Symbol(""),Uh=/(^|;)\s*display\s*:/;function Bh(e,t,n){const r=e.style,s=Ee(n);let i=!1;if(n&&!s){if(t)if(Ee(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Jr(r,a,"")}else for(const o in t)n[o]==null&&Jr(r,o,"");for(const o in n)o==="display"&&(i=!0),Jr(r,o,n[o])}else if(s){if(t!==n){const o=r[Fh];o&&(n+=";"+o),r.cssText=n,i=Uh.test(n)}}else t&&e.removeAttribute("style");Oo in e&&(e[Oo]=i?r.display:"",e[Dh]&&(r.display="none"))}const $o=/\s*!important$/;function Jr(e,t,n){if(Q(n))n.forEach(r=>Jr(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=qh(e,t);$o.test(n)?e.setProperty(on(r),n.replace($o,""),"important"):e[r]=n}}const Co=["Webkit","Moz","ms"],Ds={};function qh(e,t){const n=Ds[t];if(n)return n;let r=qt(t);if(r!=="filter"&&r in e)return Ds[t]=r;r=Na(r);for(let s=0;s<Co.length;s++){const i=Co[s]+r;if(i in e)return Ds[t]=i}return t}const Po="http://www.w3.org/1999/xlink";function Ro(e,t,n,r,s,i=Xu(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Po,t.slice(6,t.length)):e.setAttributeNS(Po,t,n):n==null||i&&!Fa(n)?e.removeAttribute(t):e.setAttribute(t,i?"":yt(n)?String(n):n)}function Io(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Nl(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Fa(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(s||t)}function Zt(e,t,n,r){e.addEventListener(t,n,r)}function Hh(e,t,n,r){e.removeEventListener(t,n,r)}const Mo=Symbol("_vei");function Vh(e,t,n,r,s=null){const i=e[Mo]||(e[Mo]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=Wh(t);if(r){const u=i[t]=zh(r,s);Zt(e,a,u,l)}else o&&(Hh(e,a,o,l),i[t]=void 0)}}const jo=/(?:Once|Passive|Capture)$/;function Wh(e){let t;if(jo.test(e)){t={};let r;for(;r=e.match(jo);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):on(e.slice(2)),t]}let Fs=0;const Jh=Promise.resolve(),Kh=()=>Fs||(Jh.then(()=>Fs=0),Fs=Date.now());function zh(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;wt(Gh(r,n.value),t,5,[r])};return n.value=e,n.attached=Kh(),n}function Gh(e,t){if(Q(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Lo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Yh=(e,t,n,r,s,i)=>{const o=s==="svg";t==="class"?Nh(e,r,o):t==="style"?Bh(e,n,r):ms(t)?Ii(t)||Vh(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Xh(e,t,r,o))?(Io(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ro(e,t,r,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ee(r))?Io(e,qt(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Ro(e,t,r,o))};function Xh(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Lo(t)&&ne(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Lo(t)&&Ee(n)?!1:t in e}const os=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Q(t)?n=>qr(t,n):t};function Qh(e){e.target.composing=!0}function No(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const En=Symbol("_assign"),Dl={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[En]=os(s);const i=r||s.props&&s.props.type==="number";Zt(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),i&&(a=ni(a)),e[En](a)}),n&&Zt(e,"change",()=>{e.value=e.value.trim()}),t||(Zt(e,"compositionstart",Qh),Zt(e,"compositionend",No),Zt(e,"change",No))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},o){if(e[En]=os(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?ni(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===l)||(e.value=l))}},Do={created(e,{value:t},n){e.checked=Qr(t,n.props.value),e[En]=os(n),Zt(e,"change",()=>{e[En](Zh(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[En]=os(r),t!==n&&(e.checked=Qr(t,r.props.value))}};function Zh(e){return"_value"in e?e._value:e.value}const ef=["ctrl","shift","alt","meta"],tf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ef.some(n=>e[`${n}Key`]&&!t.includes(n))},hr=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<t.length;o++){const a=tf[t[o]];if(a&&a(s,t))return}return e(s,...i)})},nf=Ke({patchProp:Yh},jh);let Fo;function rf(){return Fo||(Fo=oh(nf))}const sf=(...e)=>{const t=rf().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=af(r);if(!s)return;const i=t._component;!ne(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=n(s,!1,of(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function of(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function af(e){return Ee(e)?document.querySelector(e):e}const br=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},lf={key:0,class:"action-buttons"},uf=["disabled"],cf={class:"players-grid"},hf={class:"avatar-placeholder"},ff=["src"],df={class:"player-name"},pf={class:"player-actions"},gf=["onClick"],mf=["onClick"],_f=["onClick"],vf={class:"action-buttons"},yf={__name:"PlayerSelector",props:{predefinedPlayers:Array,role:String},emits:["start-game"],setup(e,{emit:t}){const n=e,r=t,s=Fe([]),i=Fe(""),o=["/shanghai/img/invite_1.jpg","/shanghai/img/invite_2.png","/shanghai/img/invite_3.png","/shanghai/img/invite_4.png","/shanghai/img/invite_5.png","/shanghai/img/invite_6.png","/shanghai/img/invite_7.png","/shanghai/img/invite_8.png","/shanghai/img/invite_9.png","/shanghai/img/invite_10.png","/shanghai/img/invite_11.png"];let a=[...o];function l(){a.length===0&&(a=[...o]);const A=Math.floor(Math.random()*a.length);return a.splice(A,1)[0]}function u(){const A=i.value.trim();if(A===""||s.value.some(E=>E.name===A))return;const w=n.predefinedPlayers.find(E=>E.name===A);s.value.push({name:A,avatar:(w==null?void 0:w.avatar)||l()}),i.value=""}function c(){u()}function h(){s.value=n.predefinedPlayers.map(A=>({id:A.id,name:A.name,avatar:A.avatar||l()}))}function f(A){s.value=s.value.filter(w=>w.name!==A)}function p(A){const w=s.value.findIndex(E=>E.name===A);w<=0||([s.value[w-1],s.value[w]]=[s.value[w],s.value[w-1]])}function k(A){const w=s.value.findIndex(E=>E.name===A);w===-1||w>=s.value.length-1||([s.value[w+1],s.value[w]]=[s.value[w],s.value[w+1]])}function O(){for(let A=s.value.length-1;A>0;A--){const w=Math.floor(Math.random()*(A+1));[s.value[A],s.value[w]]=[s.value[w],s.value[A]]}}function d(){const A=document.documentElement;A.requestFullscreen?A.requestFullscreen():A.mozRequestFullScreen?A.mozRequestFullScreen():A.webkitRequestFullscreen?A.webkitRequestFullscreen():A.msRequestFullscreen&&A.msRequestFullscreen()}function m(){d(),r("start-game",s.value)}return xs(()=>{n.role==="admin"&&h()}),(A,w)=>(ae(),ge(De,null,[w[3]||(w[3]=v("h1",null,"Shanghai ",-1)),e.role==="admin"?(ae(),ge("div",lf,[v("a",{href:"#",onClick:w[0]||(w[0]=hr(E=>A.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):Je("",!0),v("form",{onSubmit:hr(u,["prevent"])},[Hr(v("input",{type:"text","onUpdate:modelValue":w[1]||(w[1]=E=>i.value=E),placeholder:"Ajouter un joueur",onChange:c},null,544),[[Dl,i.value]]),v("button",{disabled:i.value.length===0},"Ajouter",8,uf)],32),v("ul",cf,[(ae(!0),ge(De,null,lr(s.value,E=>(ae(),ge("li",{key:E.name,class:"player-card"},[v("div",hf,[v("img",{src:E.avatar,alt:"avatar",class:"avatar-img"},null,8,ff)]),v("div",df,$(E.name),1),v("div",pf,[v("button",{onClick:x=>p(E.name)},"",8,gf),v("button",{onClick:x=>f(E.name)},"",8,mf),v("button",{onClick:x=>k(E.name)},"",8,_f)])]))),128))]),v("div",vf,[s.value.length>=2?(ae(),ge("button",{key:0,onClick:w[2]||(w[2]=E=>O())},"Ordre alatoire")):Je("",!0),s.value.length>=1?(ae(),ge("button",{key:1,onClick:m,class:"jouer-button"},"JOUER")):Je("",!0)]),w[4]||(w[4]=v("br",null,null,-1))],64))}},wf=br(yf,[["__scopeId","data-v-91569e23"]]),bf="modulepreload",xf=function(e){return"/shanghai/"+e},Uo={},xr=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(c=>Promise.resolve(c).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(n.map(u=>{if(u=xf(u),u in Uo)return;Uo[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":bf,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,k)=>{f.addEventListener("load",p),f.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},Sf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xr(async()=>{const{default:r}=await Promise.resolve().then(()=>In);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Yi extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class kf extends Yi{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Tf extends Yi{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ef extends Yi{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var di;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(di||(di={}));var Af=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class Of{constructor(t,{headers:n={},customFetch:r,region:s=di.Any}={}){this.url=t,this.headers=n,this.region=s,this.fetch=Sf(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return Af(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(k=>{throw new kf(k)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new Tf(c);if(!c.ok)throw new Ef(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield c.json():f==="application/octet-stream"?p=yield c.blob():f==="text/event-stream"?p=c:f==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(s){return{data:null,error:s}}})}}function $f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Cf(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Ce={},un={},cn={},hn={},fn={},dn={},Pf=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Cn=Pf();const Rf=Cn.fetch,Fl=Cn.fetch.bind(Cn),Ul=Cn.Headers,If=Cn.Request,Mf=Cn.Response,In=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ul,Request:If,Response:Mf,default:Fl,fetch:Rf},Symbol.toStringTag,{value:"Module"})),jf=Cf(In);var Rr={},Bo;function Bl(){if(Bo)return Rr;Bo=1,Object.defineProperty(Rr,"__esModule",{value:!0});class e extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Rr.default=e,Rr}var qo;function ql(){if(qo)return dn;qo=1;var e=dn&&dn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(dn,"__esModule",{value:!0});const t=e(jf),n=e(Bl());class r{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=Object.assign({},this.headers),this.headers[i]=o,this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var c,h,f;let p=null,k=null,O=null,d=u.status,m=u.statusText;if(u.ok){if(this.method!=="HEAD"){const x=await u.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?k=x:k=JSON.parse(x))}const w=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),E=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&E&&E.length>1&&(O=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(k)&&(k.length>1?(p={code:"PGRST116",details:`Results contain ${k.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},k=null,O=null,d=406,m="Not Acceptable"):k.length===1?k=k[0]:k=null)}else{const w=await u.text();try{p=JSON.parse(w),Array.isArray(p)&&u.status===404&&(k=[],p=null,d=200,m="OK")}catch{u.status===404&&w===""?(d=204,m="No Content"):p={message:w}}if(p&&this.isMaybeSingle&&(!((f=p==null?void 0:p.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,d=200,m="OK"),p&&this.shouldThrowOnError)throw new n.default(p)}return{error:p,data:k,count:O,status:d,statusText:m}});return this.shouldThrowOnError||(l=l.catch(u=>{var c,h,f;return{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(h=u==null?void 0:u.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=u==null?void 0:u.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,o)}returns(){return this}overrideTypes(){return this}}return dn.default=r,dn}var Ho;function Hl(){if(Ho)return fn;Ho=1;var e=fn&&fn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fn,"__esModule",{value:!0});const t=e(ql());class n extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,u=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:u="text"}={}){var c;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(c=this.headers.Accept)!==null&&c!==void 0?c:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`,u==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return fn.default=n,fn}var Vo;function Xi(){if(Vo)return hn;Vo=1;var e=hn&&hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hn,"__esModule",{value:!0});const t=e(Hl());class n extends t.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${l}fts${u}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return hn.default=n,hn}var Wo;function Vl(){if(Wo)return cn;Wo=1;var e=cn&&cn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cn,"__esModule",{value:!0});const t=e(Xi());class n{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=i,this.schema=o,this.fetch=a}select(s,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let l=!1;const u=(s??"*").split("").map(c=>/\s/.test(c)&&!l?"":(c==='"'&&(l=!l),c)).join("");return this.url.searchParams.set("select",u),o&&(this.headers.Prefer=`count=${o}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:o=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),o||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const u=s.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(u.length>0){const c=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){const u="POST",c=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&c.push(this.headers.Prefer),a&&c.push(`count=${a}`),l||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(s)){const h=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",o=[];return s&&o.push(`count=${s}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return cn.default=n,cn}var Dn={},Fn={},Jo;function Lf(){return Jo||(Jo=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.version=void 0,Fn.version="0.0.0-automated"),Fn}var Ko;function Nf(){if(Ko)return Dn;Ko=1,Object.defineProperty(Dn,"__esModule",{value:!0}),Dn.DEFAULT_HEADERS=void 0;const e=Lf();return Dn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${e.version}`},Dn}var zo;function Df(){if(zo)return un;zo=1;var e=un&&un.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(un,"__esModule",{value:!0});const t=e(Vl()),n=e(Xi()),r=Nf();class s{constructor(o,{headers:a={},schema:l,fetch:u}={}){this.url=o,this.headers=Object.assign(Object.assign({},r.DEFAULT_HEADERS),a),this.schemaName=l,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new t.default(a,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new s(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:l=!1,get:u=!1,count:c}={}){let h;const f=new URL(`${this.url}/rpc/${o}`);let p;l||u?(h=l?"HEAD":"GET",Object.entries(a).filter(([O,d])=>d!==void 0).map(([O,d])=>[O,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([O,d])=>{f.searchParams.append(O,d)})):(h="POST",p=a);const k=Object.assign({},this.headers);return c&&(k.Prefer=`count=${c}`),new n.default({method:h,url:f,headers:k,schema:this.schemaName,body:p,fetch:this.fetch,allowEmpty:!1})}}return un.default=s,un}var Go;function Ff(){if(Go)return Ce;Go=1;var e=Ce&&Ce.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.PostgrestError=Ce.PostgrestBuilder=Ce.PostgrestTransformBuilder=Ce.PostgrestFilterBuilder=Ce.PostgrestQueryBuilder=Ce.PostgrestClient=void 0;const t=e(Df());Ce.PostgrestClient=t.default;const n=e(Vl());Ce.PostgrestQueryBuilder=n.default;const r=e(Xi());Ce.PostgrestFilterBuilder=r.default;const s=e(Hl());Ce.PostgrestTransformBuilder=s.default;const i=e(ql());Ce.PostgrestBuilder=i.default;const o=e(Bl());return Ce.PostgrestError=o.default,Ce.default={PostgrestClient:t.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},Ce}var Uf=Ff();const Bf=$f(Uf),{PostgrestClient:qf,PostgrestQueryBuilder:Iv,PostgrestFilterBuilder:Mv,PostgrestTransformBuilder:jv,PostgrestBuilder:Lv,PostgrestError:Nv}=Bf;let pi;typeof window>"u"?pi=require("ws"):pi=window.WebSocket;const Hf="2.11.10",Vf={"X-Client-Info":`realtime-js/${Hf}`},Wf="1.0.0",Wl=1e4,Jf=1e3;var An;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(An||(An={}));var He;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(He||(He={}));var at;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(at||(at={}));var gi;(function(e){e.websocket="websocket"})(gi||(gi={}));var en;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(en||(en={}));class Kf{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+s));o=o+s;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}let Jl=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Se;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Se||(Se={}));const Yo=(e,t,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=zf(o,e,t,s),i),{})},zf=(e,t,n,r)=>{const s=t.find(a=>a.name===e),i=s==null?void 0:s.type,o=n[e];return i&&!r.includes(i)?Kl(i,o):mi(o)},Kl=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Qf(t,n)}switch(e){case Se.bool:return Gf(t);case Se.float4:case Se.float8:case Se.int2:case Se.int4:case Se.int8:case Se.numeric:case Se.oid:return Yf(t);case Se.json:case Se.jsonb:return Xf(t);case Se.timestamp:return Zf(t);case Se.abstime:case Se.date:case Se.daterange:case Se.int4range:case Se.int8range:case Se.money:case Se.reltime:case Se.text:case Se.time:case Se.timestamptz:case Se.timetz:case Se.tsrange:case Se.tstzrange:return mi(t);default:return mi(t)}},mi=e=>e,Gf=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Yf=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Xf=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Qf=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let i;const o=e.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Kl(t,a))}return e},Zf=e=>typeof e=="string"?e.replace(" ","T"):e,zl=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Us{constructor(t,n,r={},s=Wl){this.channel=t,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Xo;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Xo||(Xo={}));class tr{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=tr.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=tr.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=tr.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,s){const i=this.cloneDeep(t),o=this.transformState(n),a={},l={};return this.map(i,(u,c)=>{o[u]||(l[u]=c)}),this.map(o,(u,c)=>{const h=i[u];if(h){const f=c.map(d=>d.presence_ref),p=h.map(d=>d.presence_ref),k=c.filter(d=>p.indexOf(d.presence_ref)<0),O=h.filter(d=>f.indexOf(d.presence_ref)<0);k.length>0&&(a[u]=k),O.length>0&&(l[u]=O)}else a[u]=c}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(t,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const c=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),c.length>0){const h=t[a].map(p=>p.presence_ref),f=c.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}r(a,c,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),t[a]=u,s(a,u,l),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const s=t[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Qo;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Qo||(Qo={}));var Zo;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Zo||(Zo={}));var At;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(At||(At={}));class Qi{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=He.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Us(this,at.join,this.params,this.timeout),this.rejoinTimer=new Jl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=He.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=He.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=He.errored,this.rejoinTimer.scheduleTimeout())}),this._on(at.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new tr(this),this.broadcastEndpointURL=zl(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(c=>t==null?void 0:t(At.CHANNEL_ERROR,c)),this._onClose(()=>t==null?void 0:t(At.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(c=>c.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:c})=>{var h;if(this.socket.setAuth(),c===void 0){t==null||t(At.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,p=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,k=[];for(let O=0;O<p;O++){const d=f[O],{filter:{event:m,schema:A,table:w,filter:E}}=d,x=c&&c[O];if(x&&x.event===m&&x.schema===A&&x.table===w&&x.filter===E)k.push(Object.assign(Object.assign({},d),{id:x.id}));else{this.unsubscribe(),this.state=He.errored,t==null||t(At.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,t&&t(At.SUBSCRIBED);return}}).receive("error",c=>{this.state=He.errored,t==null||t(At.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(c).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(At.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=He.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(at.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new Us(this,at.leave,{},t);s.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Us(this,t,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var s,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:c}=at;if(r&&[a,l,u,c].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,n,r);if(n&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var k,O,d;return((k=p.filter)===null||k===void 0?void 0:k.event)==="*"||((d=(O=p.filter)===null||O===void 0?void 0:O.event)===null||d===void 0?void 0:d.toLocaleLowerCase())===o}).map(p=>p.callback(f,r)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var k,O,d,m,A,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,x=(k=p.filter)===null||k===void 0?void 0:k.event;return E&&((O=n.ids)===null||O===void 0?void 0:O.includes(E))&&(x==="*"||(x==null?void 0:x.toLocaleLowerCase())===((d=n.data)===null||d===void 0?void 0:d.type.toLocaleLowerCase()))}else{const E=(A=(m=p==null?void 0:p.filter)===null||m===void 0?void 0:m.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return E==="*"||E===((w=n==null?void 0:n.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const k=f.data,{schema:O,table:d,commit_timestamp:m,type:A,errors:w}=k;f=Object.assign(Object.assign({},{schema:O,table:d,commit_timestamp:m,eventType:A,new:{},old:{},errors:w}),this._getPayloadRecords(k))}p.callback(f,r)})}_isClosed(){return this.state===He.closed}_isJoined(){return this.state===He.joined}_isJoining(){return this.state===He.joining}_isLeaving(){return this.state===He.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const s=t.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Qi.isEqual(s.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(at.close,{},t)}_onError(t){this._on(at.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=He.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Yo(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Yo(t.columns,t.old_record)),n}}const ea=()=>{},ed=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class td{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Vf,this.params={},this.timeout=Wl,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ea,this.ref=0,this.logger=ea,this.conn=null,this.sendBuffer=[],this.serializer=new Kf,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>xr(async()=>{const{default:l}=await Promise.resolve().then(()=>In);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${gi.websocket}`,this.httpEndpoint=zl(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Jl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=pi),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new nd(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wf}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels=this.channels.filter(r=>r._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case An.connecting:return en.Connecting;case An.open:return en.Open;case An.closing:return en.Closing;default:return en.Closed}}isConnected(){return this.connectionState()===en.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new Qi(`realtime:${t}`,n,this);return this.channels.push(i),i}}push(t){const{topic:n,event:r,payload:s,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{n&&r.updateJoinPayload({access_token:n,version:this.headers&&this.headers["X-Client-Info"]}),r.joinedOnce&&r._isJoined()&&r._push(at.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(Jf,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(at.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${t}${r}${s}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([ed],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class nd{constructor(t,n,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=An.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=r.close}}class Zi extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Pe(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class rd extends Zi{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _i extends Zi{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var sd=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Gl=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xr(async()=>{const{default:r}=await Promise.resolve().then(()=>In);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},id=()=>sd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xr(()=>Promise.resolve().then(()=>In),void 0)).Response:Response}),vi=e=>{if(Array.isArray(e))return e.map(n=>vi(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=vi(r)}),t};var an=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Bs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),od=(e,t,n)=>an(void 0,void 0,void 0,function*(){const r=yield id();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(s=>{t(new rd(Bs(s),e.status||500))}).catch(s=>{t(new _i(Bs(s),s))}):t(new _i(Bs(e),e))}),ad=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Sr(e,t,n,r,s,i){return an(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,ad(t,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>od(l,a,r))})})}function as(e,t,n,r){return an(this,void 0,void 0,function*(){return Sr(e,"GET",t,n,r)})}function Dt(e,t,n,r,s){return an(this,void 0,void 0,function*(){return Sr(e,"POST",t,r,s,n)})}function ld(e,t,n,r,s){return an(this,void 0,void 0,function*(){return Sr(e,"PUT",t,r,s,n)})}function ud(e,t,n,r){return an(this,void 0,void 0,function*(){return Sr(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Yl(e,t,n,r,s){return an(this,void 0,void 0,function*(){return Sr(e,"DELETE",t,r,s,n)})}var Ge=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const cd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ta={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class hd{constructor(t,n={},r,s){this.url=t,this.headers=n,this.bucketId=r,this.fetch=Gl(s)}uploadOrUpdate(t,n,r,s){return Ge(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},ta),s);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),c=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:t,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Pe(i))return{data:null,error:i};throw i}})}upload(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,s){return Ge(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:ta.upsert},s),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:c}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(Pe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,n){return Ge(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Dt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Zi("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}update(t,n,r){return Ge(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}copy(t,n,r){return Ge(this,void 0,void 0,function*(){try{return{data:{path:(yield Dt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrl(t,n,r){return Ge(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Dt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}createSignedUrls(t,n,r){return Ge(this,void 0,void 0,function*(){try{const s=yield Dt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}download(t,n){return Ge(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield as(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Pe(a))return{data:null,error:a};throw a}})}info(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield as(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:vi(r),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}exists(t){return Ge(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield ud(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Pe(r)&&r instanceof _i){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return Ge(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}list(t,n,r){return Ge(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},cd),n),{prefix:t||""});return{data:yield Dt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Pe(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const fd="2.7.1",dd={"X-Client-Info":`storage-js/${fd}`};var pn=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class pd{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},dd),n),this.fetch=Gl(r)}listBuckets(){return pn(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Pe(t))return{data:null,error:t};throw t}})}getBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield as(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return pn(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return pn(this,void 0,void 0,function*(){try{return{data:yield ld(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Pe(r))return{data:null,error:r};throw r}})}emptyBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield Dt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}deleteBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Pe(n))return{data:null,error:n};throw n}})}}class gd extends pd{constructor(t,n={},r){super(t,n,r)}from(t){return new hd(this.url,this.headers,t,this.fetch)}}const md="2.50.0";let Vn="";typeof Deno<"u"?Vn="deno":typeof document<"u"?Vn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Vn="react-native":Vn="node";const _d={"X-Client-Info":`supabase-js-${Vn}/${md}`},vd={headers:_d},yd={schema:"public"},wd={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bd={};var xd=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const Sd=e=>{let t;return e?t=e:typeof fetch>"u"?t=Fl:t=fetch,(...n)=>t(...n)},kd=()=>typeof Headers>"u"?Ul:Headers,Td=(e,t,n)=>{const r=Sd(n),s=kd();return(i,o)=>xd(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Ed=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function Ad(e){return e.endsWith("/")?e:e+"/"}function Od(e,t){var n,r;const{db:s,auth:i,realtime:o,global:a}=e,{db:l,auth:u,realtime:c,global:h}=t,f={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},c),o),global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Ed(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const Xl="2.70.0",yn=30*1e3,yi=3,qs=yi*yn,$d="http://localhost:9999",Cd="supabase.auth.token",Pd={"X-Client-Info":`gotrue-js/${Xl}`},wi="X-Supabase-Api-Version",Ql={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Rd=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Id=6e5;class eo extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function te(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Md extends eo{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function jd(e){return te(e)&&e.name==="AuthApiError"}class Zl extends eo{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Wt extends eo{constructor(t,n,r,s){super(t,r,s),this.name=n,this.status=r}}class jt extends Wt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ld(e){return te(e)&&e.name==="AuthSessionMissingError"}class Ir extends Wt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Mr extends Wt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class jr extends Wt{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Nd(e){return te(e)&&e.name==="AuthImplicitGrantRedirectError"}class na extends Wt{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bi extends Wt{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Hs(e){return te(e)&&e.name==="AuthRetryableFetchError"}class ra extends Wt{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class nr extends Wt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ls="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),sa=` 	
\r=`.split(""),Dd=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<sa.length;t+=1)e[sa[t].charCodeAt(0)]=-2;for(let t=0;t<ls.length;t+=1)e[ls[t].charCodeAt(0)]=t;return e})();function ia(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ls[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(ls[r]),t.queuedBits-=6}}function eu(e,t,n){const r=Dd[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function oa(e){const t=[],n=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Bd(o,r,n)};for(let o=0;o<e.length;o+=1)eu(e.charCodeAt(o),s,i);return t.join("")}function Fd(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Ud(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}Fd(r,t)}}function Bd(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function qd(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)eu(e.charCodeAt(s),n,r);return new Uint8Array(t)}function Hd(e){const t=[];return Ud(e,n=>t.push(n)),new Uint8Array(t)}function Vd(e){const t=[],n={queue:0,queuedBits:0},r=s=>{t.push(s)};return e.forEach(s=>ia(s,n,r)),ia(null,n,r),t.join("")}function Wd(e){return Math.round(Date.now()/1e3)+e}function Jd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const it=()=>typeof window<"u"&&typeof document<"u",zt={tested:!1,writable:!1},rr=()=>{if(!it())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(zt.tested)return zt.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),zt.tested=!0,zt.writable=!0}catch{zt.tested=!0,zt.writable=!1}return zt.writable};function Kd(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{t[s]=r}),t}const tu=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>xr(async()=>{const{default:r}=await Promise.resolve().then(()=>In);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},zd=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",nu=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Lr=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Nr=async(e,t)=>{await e.removeItem(t)};class Es{constructor(){this.promise=new Es.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}Es.promiseConstructor=Promise;function Vs(e){const t=e.split(".");if(t.length!==3)throw new nr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Rd.test(t[r]))throw new nr("JWT not in base64url format");return{header:JSON.parse(oa(t[0])),payload:JSON.parse(oa(t[1])),signature:qd(t[2]),raw:{header:t[0],payload:t[1]}}}async function Gd(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Yd(e,t){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Xd(e){return("0"+e.toString(16)).substr(-2)}function Qd(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(t),Array.from(t,Xd).join("")}async function Zd(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function ep(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Zd(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gn(e,t,n=!1){const r=Qd();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await nu(e,`${t}-code-verifier`,s);const i=await ep(r);return[i,r===i?"plain":"s256"]}const tp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function np(e){const t=e.headers.get(wi);if(!t||!t.match(tp))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function rp(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function sp(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ip=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mn(e){if(!ip.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var op=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Xt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ap=[502,503,504];async function aa(e){var t;if(!zd(e))throw new bi(Xt(e),0);if(ap.includes(e.status))throw new bi(Xt(e),e.status);let n;try{n=await e.json()}catch(i){throw new Zl(Xt(i),i)}let r;const s=np(e);if(s&&s.getTime()>=Ql["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ra(Xt(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new jt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new ra(Xt(n),e.status,n.weak_password.reasons);throw new Md(Xt(n),e.status||500,r)}const lp=(e,t,n,r)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function oe(e,t,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[wi]||(i[wi]=Ql["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await up(e,t,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function up(e,t,n,r,s,i){const o=lp(t,r,s,i);let a;try{a=await e(n,Object.assign({},o))}catch(l){throw console.error(l),new bi(Xt(l),0)}if(a.ok||await aa(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await aa(l)}}function Tt(e){var t;let n=null;dp(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Wd(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function la(e){const t=Tt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ut(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function cp(e){return{data:e,error:null}}function hp(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=e,o=op(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function fp(e){return e}function dp(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ws=["global","local","others"];var pp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};class gp{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=tu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Ws[0]){if(Ws.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ws.join(", ")}`);try{return await oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ut})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=pp(t,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:hp,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(te(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ut})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},c=await oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fp});if(c.error)throw c.error;const h=await c.json(),f=(o=c.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=c.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(k=>{const O=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),d=JSON.parse(k.split(";")[1].split("=")[1]);u[`${d}Page`]=O}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(te(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){mn(t);try{return await oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ut})}catch(n){if(te(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){mn(t);try{return await oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ut})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){mn(t);try{return await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ut})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){mn(t.userId);try{const{data:n,error:r}=await oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(te(n))return{data:null,error:n};throw n}}async _deleteFactor(t){mn(t.userId),mn(t.id);try{return{data:await oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}}const mp={getItem:e=>rr()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{rr()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{rr()&&globalThis.localStorage.removeItem(e)}};function ua(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function _p(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const _n={debug:!!(globalThis&&rr()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class ru extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class vp extends ru{}async function yp(e,t,n){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),_n.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{_n.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw _n.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new vp(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_n.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}_p();const wp={url:$d,storageKey:Cd,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Pd,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ca(e,t,n){return await n()}class fr{constructor(t){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=fr.nextInstanceID,fr.nextInstanceID+=1,this.instanceID>0&&it()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},wp),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new gp({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=tu(s.fetch),this.lock=s.lock||ca,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:it()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=yp:this.lock=ca,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:rr()?this.storage=mp:(this.memoryStorage={},this.storage=ua(this.memoryStorage)):(this.memoryStorage={},this.storage=ua(this.memoryStorage)),it()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Xl}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=Kd(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),it()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Nd(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return te(n)?{error:n}:{error:new Zl("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,s;try{const i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Tt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var n,r,s;try{let i;if("email"in t){const{email:c,password:h,options:f}=t;let p=null,k=null;this.flowType==="pkce"&&([p,k]=await gn(this.storage,this.storageKey)),i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:c,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:k},xform:Tt})}else if("phone"in t){const{phone:c,password:h,options:f}=t;i=await oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Tt})}else throw new Mr("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(te(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let n;if("email"in t){const{email:i,password:o,options:a}=t;n=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:la})}else if("phone"in t){const{phone:i,password:o,options:a}=t;n=await oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:la})}else throw new Mr("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Ir}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,s,i,o,a,l,u,c,h,f,p;let k,O;if("message"in t)k=t.message,O=t.signature;else{const{chain:d,wallet:m,statement:A,options:w}=t;let E;if(it())if(typeof m=="object")E=m;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))E=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=m}const x=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in E&&E.signIn){const L=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:x.host,uri:x.href}),A?{statement:A}:null));let V;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")V=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)V=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in V&&"signature"in V&&(typeof V.signedMessage=="string"||V.signedMessage instanceof Uint8Array)&&V.signature instanceof Uint8Array)k=typeof V.signedMessage=="string"?V.signedMessage:new TextDecoder().decode(V.signedMessage),O=V.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${x.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${x.href}`,`Issued At: ${(s=(r=w==null?void 0:w.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(c=w==null?void 0:w.signInWithSolana)===null||c===void 0?void 0:c.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(V=>`- ${V}`)]:[]].join(`
`);const L=await E.signMessage(new TextEncoder().encode(k),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=L}}try{const{data:d,error:m}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:Vd(O)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Tt});if(m)throw m;return!d||!d.session||!d.user?{data:{user:null,session:null},error:new Ir}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:Object.assign({},d),error:m})}catch(d){if(te(d))return{data:{user:null,session:null},error:d};throw d}}async _exchangeCodeForSession(t){const n=await Lr(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Tt});if(await Nr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ir}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(te(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=t,a=await oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Tt}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ir}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,s,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await gn(this.storage,this.storageKey));const{error:h}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:c}=await oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new Mr("You must provide either an email or phone number.")}catch(a){if(te(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var n,r;try{let s,i;"options"in t&&(s=(n=t.options)===null||n===void 0?void 0:n.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Tt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(te(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await gn(this.storage,this.storageKey)),await oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:cp})}catch(i){if(te(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new jt;const{error:s}=await oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(te(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:s,options:i}=t,{error:o}=await oe(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:s,options:i}=t,{data:o,error:a}=await oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Mr("You must provide either an email or phone number and a type")}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Lr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<qs:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,c)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,c))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ut}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new jt}:await oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Ut})})}catch(n){if(te(n))return Ld(n)&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new jt;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await gn(this.storage,this.storageKey));const{data:u,error:c}=await oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ut});if(c)throw c;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(te(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new jt;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=Vs(t.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(te(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:o,error:a}=n;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new jt;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(te(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!it())throw new jr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new jr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new na("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jr("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new na("No code detected.");const{data:A,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new jr("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(a);let f=c+h;l&&(f=parseInt(l));const p=f-c;p*1e3<=yn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const k=f-h;c-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,f,c):c-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,f,c);const{data:O,error:d}=await this._getUser(i);if(d)throw d;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(r){if(te(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Lr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(jd(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Nr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=Jd(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await gn(this.storage,this.storageKey,!0));try{return await oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(te(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(te(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,c;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await oe(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(s)throw s;return it()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(te(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Yd(async s=>(s>0&&await Gd(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Tt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Hs(i)&&Date.now()+o-r<yn})}catch(r){if(this._debug(n,"error",r),te(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),it()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Lr(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((t=r.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<qs;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${qs}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),Hs(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new jt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Es;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new jt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),te(i)){const o={session:null,error:i};return Hs(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,n,r=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await nu(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Nr(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&it()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),yn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-t)/yn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${yn}ms, refresh threshold is ${yi} ticks`),s<=yi&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof ru)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!it()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await gn(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await oe(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(te(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(te(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Vs(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const c=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(o=>o.kid===t);if(r||(r=this.jwks.keys.find(o=>o.kid===t),r&&this.jwks_cached_at+Id>Date.now()))return r;const{data:s,error:i}=await oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new nr("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===t),!r)throw new nr("No matching signing key found in JWKS");return r}async getClaims(t,n={keys:[]}){try{let r=t;if(!r){const{data:p,error:k}=await this.getSession();if(k||!p.session)return{data:null,error:k};r=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=Vs(r);if(rp(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:p}=await this.getUser(r);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=sp(s.alg),c=await this.fetchJwk(s.kid,n),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Hd(`${a}.${l}`)))throw new nr("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(te(r))return{data:null,error:r};throw r}}}fr.nextInstanceID=0;const bp=fr;class xp extends bp{constructor(t){super(t)}}var Sp=function(e,t,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class kp{constructor(t,n,r){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Ad(t),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,c={db:yd,realtime:bd,auth:Object.assign(Object.assign({},wd),{storageKey:u}),global:vd},h=Od(r??{},c);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Td(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new qf(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Of(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new gd(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return Sp(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xp({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new td(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Tp=(e,t,n)=>new kp(e,t,n),Ep="https://kueodidcmdsxaoctjtug.supabase.co/",Ap="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt1ZW9kaWRjbWRzeGFvY3RqdHVnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk2NzE0NzYsImV4cCI6MjA2NTI0NzQ3Nn0.zuRgrGhf-PwpeX_1yJaUxXda4-uKw4Fk6gxrhcelpZI",to=Tp(Ep,Ap),Op="admin@monapp.local";async function $p(e){const{data:t,error:n}=await to.auth.signInWithPassword({email:Op,password:e});return n?(console.error("Erreur login:",n.message),!1):!0}function Cp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function su(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Pp(e,t){let n=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&++n;else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(s=+s)>=s&&++n}return n}class Rp extends Map{constructor(t,n=jp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(ha(this,t))}has(t){return super.has(ha(this,t))}set(t,n){return super.set(Ip(this,t),n)}delete(t){return super.delete(Mp(this,t))}}function ha({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ip({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Mp({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function jp(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fa(e){return e}function Lp(e,...t){return Np(e,fa,fa,t)}function Np(e,t,n,r){return function s(i,o){if(o>=r.length)return n(i);const a=new Rp,l=r[o++];let u=-1;for(const c of i){const h=l(c,++u,i),f=a.get(h);f?f.push(c):a.set(h,[c])}for(const[c,h]of a)a.set(c,s(h,o));return t(a)}(e,0)}function iu(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n<s||n===void 0&&s>=s)&&(n=s)}return n}function Dp(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let s of e)(s=t(s,++r,e))!=null&&(n>s||n===void 0&&s>=s)&&(n=s)}return n}function ou(e,t){let n=0,r=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(++n,r+=s);else{let s=-1;for(let i of e)(i=t(i,++s,e))!=null&&(i=+i)>=i&&(++n,r+=i)}if(n)return r/n}function Fp(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(s);++r<s;)i[r]=e+r*n;return i}function xi(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let s of e)(s=+t(s,++r,e))&&(n+=s)}return n}var Up={value:()=>{}};function au(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Kr(n)}function Kr(e){this._=e}function Bp(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",s=n.indexOf(".");if(s>=0&&(r=n.slice(s+1),n=n.slice(0,s)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Kr.prototype=au.prototype={constructor:Kr,on:function(e,t){var n=this._,r=Bp(e+"",n),s,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((s=(e=r[i]).type)&&(s=qp(n[s],e.name)))return s;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(s=(e=r[i]).type)n[s]=da(n[s],e.name,t);else if(t==null)for(s in n)n[s]=da(n[s],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Kr(e)},call:function(e,t){if((s=arguments.length-2)>0)for(var n=new Array(s),r=0,s,i;r<s;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,s=i.length;r<s;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],s=0,i=r.length;s<i;++s)r[s].value.apply(t,n)}};function qp(e,t){for(var n=0,r=e.length,s;n<r;++n)if((s=e[n]).name===t)return s.value}function da(e,t,n){for(var r=0,s=e.length;r<s;++r)if(e[r].name===t){e[r]=Up,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Si="http://www.w3.org/1999/xhtml";const pa={svg:"http://www.w3.org/2000/svg",xhtml:Si,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function As(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),pa.hasOwnProperty(t)?{space:pa[t],local:e}:e}function Hp(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Si&&t.documentElement.namespaceURI===Si?t.createElement(e):t.createElementNS(n,e)}}function Vp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function no(e){var t=As(e);return(t.local?Vp:Hp)(t)}function Wp(){}function ro(e){return e==null?Wp:function(){return this.querySelector(e)}}function Jp(e){typeof e!="function"&&(e=ro(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=new Array(o),l,u,c=0;c<o;++c)(l=i[c])&&(u=e.call(l,l.__data__,c,i))&&("__data__"in l&&(u.__data__=l.__data__),a[c]=u);return new tt(r,this._parents)}function Kp(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function zp(){return[]}function lu(e){return e==null?zp:function(){return this.querySelectorAll(e)}}function Gp(e){return function(){return Kp(e.apply(this,arguments))}}function Yp(e){typeof e=="function"?e=Gp(e):e=lu(e);for(var t=this._groups,n=t.length,r=[],s=[],i=0;i<n;++i)for(var o=t[i],a=o.length,l,u=0;u<a;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),s.push(l));return new tt(r,s)}function uu(e){return function(){return this.matches(e)}}function cu(e){return function(t){return t.matches(e)}}var Xp=Array.prototype.find;function Qp(e){return function(){return Xp.call(this.children,e)}}function Zp(){return this.firstElementChild}function eg(e){return this.select(e==null?Zp:Qp(typeof e=="function"?e:cu(e)))}var tg=Array.prototype.filter;function ng(){return Array.from(this.children)}function rg(e){return function(){return tg.call(this.children,e)}}function sg(e){return this.selectAll(e==null?ng:rg(typeof e=="function"?e:cu(e)))}function ig(e){typeof e!="function"&&(e=uu(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,u=0;u<o;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new tt(r,this._parents)}function hu(e){return new Array(e.length)}function og(){return new tt(this._enter||this._groups.map(hu),this._parents)}function us(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}us.prototype={constructor:us,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ag(e){return function(){return e}}function lg(e,t,n,r,s,i){for(var o=0,a,l=t.length,u=i.length;o<u;++o)(a=t[o])?(a.__data__=i[o],r[o]=a):n[o]=new us(e,i[o]);for(;o<l;++o)(a=t[o])&&(s[o]=a)}function ug(e,t,n,r,s,i,o){var a,l,u=new Map,c=t.length,h=i.length,f=new Array(c),p;for(a=0;a<c;++a)(l=t[a])&&(f[a]=p=o.call(l,l.__data__,a,t)+"",u.has(p)?s[a]=l:u.set(p,l));for(a=0;a<h;++a)p=o.call(e,i[a],a,i)+"",(l=u.get(p))?(r[a]=l,l.__data__=i[a],u.delete(p)):n[a]=new us(e,i[a]);for(a=0;a<c;++a)(l=t[a])&&u.get(f[a])===l&&(s[a]=l)}function cg(e){return e.__data__}function hg(e,t){if(!arguments.length)return Array.from(this,cg);var n=t?ug:lg,r=this._parents,s=this._groups;typeof e!="function"&&(e=ag(e));for(var i=s.length,o=new Array(i),a=new Array(i),l=new Array(i),u=0;u<i;++u){var c=r[u],h=s[u],f=h.length,p=fg(e.call(c,c&&c.__data__,u,r)),k=p.length,O=a[u]=new Array(k),d=o[u]=new Array(k),m=l[u]=new Array(f);n(c,h,O,d,m,p,t);for(var A=0,w=0,E,x;A<k;++A)if(E=O[A]){for(A>=w&&(w=A+1);!(x=d[w])&&++w<k;);E._next=x||null}}return o=new tt(o,r),o._enter=a,o._exit=l,o}function fg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dg(){return new tt(this._exit||this._groups.map(hu),this._parents)}function pg(e,t,n){var r=this.enter(),s=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(s=t(s),s&&(s=s.selection())),n==null?i.remove():n(i),r&&s?r.merge(s).order():s}function gg(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,s=n.length,i=r.length,o=Math.min(s,i),a=new Array(s),l=0;l<o;++l)for(var u=n[l],c=r[l],h=u.length,f=a[l]=new Array(h),p,k=0;k<h;++k)(p=u[k]||c[k])&&(f[k]=p);for(;l<s;++l)a[l]=n[l];return new tt(a,this._parents)}function mg(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],s=r.length-1,i=r[s],o;--s>=0;)(o=r[s])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function _g(e){e||(e=vg);function t(h,f){return h&&f?e(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,s=new Array(r),i=0;i<r;++i){for(var o=n[i],a=o.length,l=s[i]=new Array(a),u,c=0;c<a;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new tt(s,this._parents).order()}function vg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function yg(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wg(){return Array.from(this)}function bg(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length;s<i;++s){var o=r[s];if(o)return o}return null}function xg(){let e=0;for(const t of this)++e;return e}function Sg(){return!this.node()}function kg(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var s=t[n],i=0,o=s.length,a;i<o;++i)(a=s[i])&&e.call(a,a.__data__,i,s);return this}function Tg(e){return function(){this.removeAttribute(e)}}function Eg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ag(e,t){return function(){this.setAttribute(e,t)}}function Og(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $g(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Cg(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Pg(e,t){var n=As(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Eg:Tg:typeof t=="function"?n.local?Cg:$g:n.local?Og:Ag)(n,t))}function fu(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Rg(e){return function(){this.style.removeProperty(e)}}function Ig(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Mg(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function jg(e,t,n){return arguments.length>1?this.each((t==null?Rg:typeof t=="function"?Mg:Ig)(e,t,n??"")):Pn(this.node(),e)}function Pn(e,t){return e.style.getPropertyValue(t)||fu(e).getComputedStyle(e,null).getPropertyValue(t)}function Lg(e){return function(){delete this[e]}}function Ng(e,t){return function(){this[e]=t}}function Dg(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Fg(e,t){return arguments.length>1?this.each((t==null?Lg:typeof t=="function"?Dg:Ng)(e,t)):this.node()[e]}function du(e){return e.trim().split(/^|\s+/)}function so(e){return e.classList||new pu(e)}function pu(e){this._node=e,this._names=du(e.getAttribute("class")||"")}pu.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function gu(e,t){for(var n=so(e),r=-1,s=t.length;++r<s;)n.add(t[r])}function mu(e,t){for(var n=so(e),r=-1,s=t.length;++r<s;)n.remove(t[r])}function Ug(e){return function(){gu(this,e)}}function Bg(e){return function(){mu(this,e)}}function qg(e,t){return function(){(t.apply(this,arguments)?gu:mu)(this,e)}}function Hg(e,t){var n=du(e+"");if(arguments.length<2){for(var r=so(this.node()),s=-1,i=n.length;++s<i;)if(!r.contains(n[s]))return!1;return!0}return this.each((typeof t=="function"?qg:t?Ug:Bg)(n,t))}function Vg(){this.textContent=""}function Wg(e){return function(){this.textContent=e}}function Jg(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Kg(e){return arguments.length?this.each(e==null?Vg:(typeof e=="function"?Jg:Wg)(e)):this.node().textContent}function zg(){this.innerHTML=""}function Gg(e){return function(){this.innerHTML=e}}function Yg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Xg(e){return arguments.length?this.each(e==null?zg:(typeof e=="function"?Yg:Gg)(e)):this.node().innerHTML}function Qg(){this.nextSibling&&this.parentNode.appendChild(this)}function Zg(){return this.each(Qg)}function em(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tm(){return this.each(em)}function nm(e){var t=typeof e=="function"?e:no(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function rm(){return null}function sm(e,t){var n=typeof e=="function"?e:no(e),r=t==null?rm:typeof t=="function"?t:ro(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function im(){var e=this.parentNode;e&&e.removeChild(this)}function om(){return this.each(im)}function am(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function lm(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function um(e){return this.select(e?lm:am)}function cm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hm(e){return function(t){e.call(this,t,this.__data__)}}function fm(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function dm(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,s=t.length,i;n<s;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function pm(e,t,n){return function(){var r=this.__on,s,i=hm(t);if(r){for(var o=0,a=r.length;o<a;++o)if((s=r[o]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=i,s.options=n),s.value=t;return}}this.addEventListener(e.type,i,n),s={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(s):this.__on=[s]}}function gm(e,t,n){var r=fm(e+""),s,i=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var l=0,u=a.length,c;l<u;++l)for(s=0,c=a[l];s<i;++s)if((o=r[s]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?pm:dm,s=0;s<i;++s)this.each(a(r[s],t,n));return this}function _u(e,t,n){var r=fu(e),s=r.CustomEvent;typeof s=="function"?s=new s(t,n):(s=r.document.createEvent("Event"),n?(s.initEvent(t,n.bubbles,n.cancelable),s.detail=n.detail):s.initEvent(t,!1,!1)),e.dispatchEvent(s)}function mm(e,t){return function(){return _u(this,e,t)}}function _m(e,t){return function(){return _u(this,e,t.apply(this,arguments))}}function vm(e,t){return this.each((typeof t=="function"?_m:mm)(e,t))}function*ym(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],s=0,i=r.length,o;s<i;++s)(o=r[s])&&(yield o)}var vu=[null];function tt(e,t){this._groups=e,this._parents=t}function kr(){return new tt([[document.documentElement]],vu)}function wm(){return this}tt.prototype=kr.prototype={constructor:tt,select:Jp,selectAll:Yp,selectChild:eg,selectChildren:sg,filter:ig,data:hg,enter:og,exit:dg,join:pg,merge:gg,selection:wm,order:mg,sort:_g,call:yg,nodes:wg,node:bg,size:xg,empty:Sg,each:kg,attr:Pg,style:jg,property:Fg,classed:Hg,text:Kg,html:Xg,raise:Zg,lower:tm,append:nm,insert:sm,remove:om,clone:um,datum:cm,on:gm,dispatch:vm,[Symbol.iterator]:ym};function bm(e){return typeof e=="string"?new tt([[document.querySelector(e)]],[document.documentElement]):new tt([[e]],vu)}function xm(e){return bm(no(e).call(document.documentElement))}function io(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yu(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Tr(){}var dr=.7,cs=1/dr,On="\\s*([+-]?\\d+)\\s*",pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",vt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sm=/^#([0-9a-f]{3,8})$/,km=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),Tm=new RegExp(`^rgb\\(${vt},${vt},${vt}\\)$`),Em=new RegExp(`^rgba\\(${On},${On},${On},${pr}\\)$`),Am=new RegExp(`^rgba\\(${vt},${vt},${vt},${pr}\\)$`),Om=new RegExp(`^hsl\\(${pr},${vt},${vt}\\)$`),$m=new RegExp(`^hsla\\(${pr},${vt},${vt},${pr}\\)$`),ga={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};io(Tr,gr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ma,formatHex:ma,formatHex8:Cm,formatHsl:Pm,formatRgb:_a,toString:_a});function ma(){return this.rgb().formatHex()}function Cm(){return this.rgb().formatHex8()}function Pm(){return wu(this).formatHsl()}function _a(){return this.rgb().formatRgb()}function gr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Sm.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?va(t):n===3?new Qe(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=km.exec(e))?new Qe(t[1],t[2],t[3],1):(t=Tm.exec(e))?new Qe(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Em.exec(e))?Dr(t[1],t[2],t[3],t[4]):(t=Am.exec(e))?Dr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Om.exec(e))?ba(t[1],t[2]/100,t[3]/100,1):(t=$m.exec(e))?ba(t[1],t[2]/100,t[3]/100,t[4]):ga.hasOwnProperty(e)?va(ga[e]):e==="transparent"?new Qe(NaN,NaN,NaN,0):null}function va(e){return new Qe(e>>16&255,e>>8&255,e&255,1)}function Dr(e,t,n,r){return r<=0&&(e=t=n=NaN),new Qe(e,t,n,r)}function Rm(e){return e instanceof Tr||(e=gr(e)),e?(e=e.rgb(),new Qe(e.r,e.g,e.b,e.opacity)):new Qe}function ki(e,t,n,r){return arguments.length===1?Rm(e):new Qe(e,t,n,r??1)}function Qe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}io(Qe,ki,yu(Tr,{brighter(e){return e=e==null?cs:Math.pow(cs,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?dr:Math.pow(dr,e),new Qe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qe(rn(this.r),rn(this.g),rn(this.b),hs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ya,formatHex:ya,formatHex8:Im,formatRgb:wa,toString:wa}));function ya(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}`}function Im(){return`#${tn(this.r)}${tn(this.g)}${tn(this.b)}${tn((isNaN(this.opacity)?1:this.opacity)*255)}`}function wa(){const e=hs(this.opacity);return`${e===1?"rgb(":"rgba("}${rn(this.r)}, ${rn(this.g)}, ${rn(this.b)}${e===1?")":`, ${e})`}`}function hs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tn(e){return e=rn(e),(e<16?"0":"")+e.toString(16)}function ba(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new lt(e,t,n,r)}function wu(e){if(e instanceof lt)return new lt(e.h,e.s,e.l,e.opacity);if(e instanceof Tr||(e=gr(e)),!e)return new lt;if(e instanceof lt)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,a=i-s,l=(i+s)/2;return a?(t===i?o=(n-r)/a+(n<r)*6:n===i?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?i+s:2-i-s,o*=60):a=l>0&&l<1?0:o,new lt(o,a,l,e.opacity)}function Mm(e,t,n,r){return arguments.length===1?wu(e):new lt(e,t,n,r??1)}function lt(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}io(lt,Mm,yu(Tr,{brighter(e){return e=e==null?cs:Math.pow(cs,e),new lt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?dr:Math.pow(dr,e),new lt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Qe(Js(e>=240?e-240:e+120,s,r),Js(e,s,r),Js(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new lt(xa(this.h),Fr(this.s),Fr(this.l),hs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hs(this.opacity);return`${e===1?"hsl(":"hsla("}${xa(this.h)}, ${Fr(this.s)*100}%, ${Fr(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xa(e){return e=(e||0)%360,e<0?e+360:e}function Fr(e){return Math.max(0,Math.min(1,e||0))}function Js(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bu=e=>()=>e;function jm(e,t){return function(n){return e+n*t}}function Lm(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Nm(e){return(e=+e)==1?xu:function(t,n){return n-t?Lm(t,n,e):bu(isNaN(t)?n:t)}}function xu(e,t){var n=t-e;return n?jm(e,n):bu(isNaN(e)?t:e)}const Sa=function e(t){var n=Nm(t);function r(s,i){var o=n((s=ki(s)).r,(i=ki(i)).r),a=n(s.g,i.g),l=n(s.b,i.b),u=xu(s.opacity,i.opacity);return function(c){return s.r=o(c),s.g=a(c),s.b=l(c),s.opacity=u(c),s+""}}return r.gamma=e,r}(1);function Ft(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ti=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ks=new RegExp(Ti.source,"g");function Dm(e){return function(){return e}}function Fm(e){return function(t){return e(t)+""}}function Um(e,t){var n=Ti.lastIndex=Ks.lastIndex=0,r,s,i,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=Ti.exec(e))&&(s=Ks.exec(t));)(i=s.index)>n&&(i=t.slice(n,i),a[o]?a[o]+=i:a[++o]=i),(r=r[0])===(s=s[0])?a[o]?a[o]+=s:a[++o]=s:(a[++o]=null,l.push({i:o,x:Ft(r,s)})),n=Ks.lastIndex;return n<t.length&&(i=t.slice(n),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?Fm(l[0].x):Dm(t):(t=l.length,function(u){for(var c=0,h;c<t;++c)a[(h=l[c]).i]=h.x(u);return a.join("")})}var ka=180/Math.PI,Ei={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Su(e,t,n,r,s,i){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:s,translateY:i,rotate:Math.atan2(t,e)*ka,skewX:Math.atan(l)*ka,scaleX:o,scaleY:a}}var Ur;function Bm(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ei:Su(t.a,t.b,t.c,t.d,t.e,t.f)}function qm(e){return e==null||(Ur||(Ur=document.createElementNS("http://www.w3.org/2000/svg","g")),Ur.setAttribute("transform",e),!(e=Ur.transform.baseVal.consolidate()))?Ei:(e=e.matrix,Su(e.a,e.b,e.c,e.d,e.e,e.f))}function ku(e,t,n,r){function s(u){return u.length?u.pop()+" ":""}function i(u,c,h,f,p,k){if(u!==h||c!==f){var O=p.push("translate(",null,t,null,n);k.push({i:O-4,x:Ft(u,h)},{i:O-2,x:Ft(c,f)})}else(h||f)&&p.push("translate("+h+t+f+n)}function o(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(s(h)+"rotate(",null,r)-2,x:Ft(u,c)})):c&&h.push(s(h)+"rotate("+c+r)}function a(u,c,h,f){u!==c?f.push({i:h.push(s(h)+"skewX(",null,r)-2,x:Ft(u,c)}):c&&h.push(s(h)+"skewX("+c+r)}function l(u,c,h,f,p,k){if(u!==h||c!==f){var O=p.push(s(p)+"scale(",null,",",null,")");k.push({i:O-4,x:Ft(u,h)},{i:O-2,x:Ft(c,f)})}else(h!==1||f!==1)&&p.push(s(p)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,h,f),o(u.rotate,c.rotate,h,f),a(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(p){for(var k=-1,O=f.length,d;++k<O;)h[(d=f[k]).i]=d.x(p);return h.join("")}}}var Hm=ku(Bm,"px, ","px)","deg)"),Vm=ku(qm,", ",")",")"),Rn=0,Wn=0,Un=0,Tu=1e3,fs,Jn,ds=0,sn=0,Os=0,mr=typeof performance=="object"&&performance.now?performance:Date,Eu=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oo(){return sn||(Eu(Wm),sn=mr.now()+Os)}function Wm(){sn=0}function ps(){this._call=this._time=this._next=null}ps.prototype=Au.prototype={constructor:ps,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oo():+n)+(t==null?0:+t),!this._next&&Jn!==this&&(Jn?Jn._next=this:fs=this,Jn=this),this._call=e,this._time=n,Ai()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ai())}};function Au(e,t,n){var r=new ps;return r.restart(e,t,n),r}function Jm(){oo(),++Rn;for(var e=fs,t;e;)(t=sn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Rn}function Ta(){sn=(ds=mr.now())+Os,Rn=Wn=0;try{Jm()}finally{Rn=0,zm(),sn=0}}function Km(){var e=mr.now(),t=e-ds;t>Tu&&(Os-=t,ds=e)}function zm(){for(var e,t=fs,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fs=n);Jn=e,Ai(r)}function Ai(e){if(!Rn){Wn&&(Wn=clearTimeout(Wn));var t=e-sn;t>24?(e<1/0&&(Wn=setTimeout(Ta,e-mr.now()-Os)),Un&&(Un=clearInterval(Un))):(Un||(ds=mr.now(),Un=setInterval(Km,Tu)),Rn=1,Eu(Ta))}}function Ea(e,t,n){var r=new ps;return t=t==null?0:+t,r.restart(s=>{r.stop(),e(s+t)},t,n),r}var Gm=au("start","end","cancel","interrupt"),Ym=[],Ou=0,Aa=1,Oi=2,zr=3,Oa=4,$i=5,Gr=6;function $s(e,t,n,r,s,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Xm(e,n,{name:t,index:r,group:s,on:Gm,tween:Ym,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Ou})}function ao(e,t){var n=ct(e,t);if(n.state>Ou)throw new Error("too late; already scheduled");return n}function bt(e,t){var n=ct(e,t);if(n.state>zr)throw new Error("too late; already running");return n}function ct(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Xm(e,t,n){var r=e.__transition,s;r[t]=n,n.timer=Au(i,0,n.time);function i(u){n.state=Aa,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,h,f,p;if(n.state!==Aa)return l();for(c in r)if(p=r[c],p.name===n.name){if(p.state===zr)return Ea(o);p.state===Oa?(p.state=Gr,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete r[c]):+c<t&&(p.state=Gr,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete r[c])}if(Ea(function(){n.state===zr&&(n.state=Oa,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Oi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Oi){for(n.state=zr,s=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(p=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(s[++h]=p);s.length=h+1}}function a(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=$i,1),h=-1,f=s.length;++h<f;)s[h].call(e,c);n.state===$i&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Gr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Qm(e,t){var n=e.__transition,r,s,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}s=r.state>Oi&&r.state<$i,r.state=Gr,r.timer.stop(),r.on.call(s?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function Zm(e){return this.each(function(){Qm(this,e)})}function e_(e,t){var n,r;return function(){var s=bt(this,e),i=s.tween;if(i!==n){r=n=i;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}s.tween=r}}function t_(e,t,n){var r,s;if(typeof n!="function")throw new Error;return function(){var i=bt(this,e),o=i.tween;if(o!==r){s=(r=o).slice();for(var a={name:t,value:n},l=0,u=s.length;l<u;++l)if(s[l].name===t){s[l]=a;break}l===u&&s.push(a)}i.tween=s}}function n_(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ct(this.node(),n).tween,s=0,i=r.length,o;s<i;++s)if((o=r[s]).name===e)return o.value;return null}return this.each((t==null?e_:t_)(n,e,t))}function lo(e,t,n){var r=e._id;return e.each(function(){var s=bt(this,r);(s.value||(s.value={}))[t]=n.apply(this,arguments)}),function(s){return ct(s,r).value[t]}}function $u(e,t){var n;return(typeof t=="number"?Ft:t instanceof gr?Sa:(n=gr(t))?(t=n,Sa):Um)(e,t)}function r_(e){return function(){this.removeAttribute(e)}}function s_(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i_(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttribute(e);return o===s?null:o===r?i:i=t(r=o,n)}}function o_(e,t,n){var r,s=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===s?null:o===r?i:i=t(r=o,n)}}function a_(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function l_(e,t,n){var r,s,i;return function(){var o,a=n(this),l;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=a+"",o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a)))}}function u_(e,t){var n=As(e),r=n==="transform"?Vm:$u;return this.attrTween(e,typeof t=="function"?(n.local?l_:a_)(n,r,lo(this,"attr."+e,t)):t==null?(n.local?s_:r_)(n):(n.local?o_:i_)(n,r,t))}function c_(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function h_(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function f_(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&h_(e,i)),n}return s._value=t,s}function d_(e,t){var n,r;function s(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&c_(e,i)),n}return s._value=t,s}function p_(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=As(e);return this.tween(n,(r.local?f_:d_)(r,t))}function g_(e,t){return function(){ao(this,e).delay=+t.apply(this,arguments)}}function m_(e,t){return t=+t,function(){ao(this,e).delay=t}}function __(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?g_:m_)(t,e)):ct(this.node(),t).delay}function v_(e,t){return function(){bt(this,e).duration=+t.apply(this,arguments)}}function y_(e,t){return t=+t,function(){bt(this,e).duration=t}}function w_(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?v_:y_)(t,e)):ct(this.node(),t).duration}function b_(e,t){if(typeof t!="function")throw new Error;return function(){bt(this,e).ease=t}}function x_(e){var t=this._id;return arguments.length?this.each(b_(t,e)):ct(this.node(),t).ease}function S_(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;bt(this,e).ease=n}}function k_(e){if(typeof e!="function")throw new Error;return this.each(S_(this._id,e))}function T_(e){typeof e!="function"&&(e=uu(e));for(var t=this._groups,n=t.length,r=new Array(n),s=0;s<n;++s)for(var i=t[s],o=i.length,a=r[s]=[],l,u=0;u<o;++u)(l=i[u])&&e.call(l,l.__data__,u,i)&&a.push(l);return new Rt(r,this._parents,this._name,this._id)}function E_(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,s=n.length,i=Math.min(r,s),o=new Array(r),a=0;a<i;++a)for(var l=t[a],u=n[a],c=l.length,h=o[a]=new Array(c),f,p=0;p<c;++p)(f=l[p]||u[p])&&(h[p]=f);for(;a<r;++a)o[a]=t[a];return new Rt(o,this._parents,this._name,this._id)}function A_(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function O_(e,t,n){var r,s,i=A_(t)?ao:bt;return function(){var o=i(this,e),a=o.on;a!==r&&(s=(r=a).copy()).on(t,n),o.on=s}}function $_(e,t){var n=this._id;return arguments.length<2?ct(this.node(),n).on.on(e):this.each(O_(n,e,t))}function C_(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function P_(){return this.on("end.remove",C_(this._id))}function R_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ro(e));for(var r=this._groups,s=r.length,i=new Array(s),o=0;o<s;++o)for(var a=r[o],l=a.length,u=i[o]=new Array(l),c,h,f=0;f<l;++f)(c=a[f])&&(h=e.call(c,c.__data__,f,a))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,$s(u[f],t,n,f,u,ct(c,n)));return new Rt(i,this._parents,t,n)}function I_(e){var t=this._name,n=this._id;typeof e!="function"&&(e=lu(e));for(var r=this._groups,s=r.length,i=[],o=[],a=0;a<s;++a)for(var l=r[a],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=e.call(c,c.__data__,h,l),p,k=ct(c,n),O=0,d=f.length;O<d;++O)(p=f[O])&&$s(p,t,n,O,f,k);i.push(f),o.push(c)}return new Rt(i,o,t,n)}var M_=kr.prototype.constructor;function j_(){return new M_(this._groups,this._parents)}function L_(e,t){var n,r,s;return function(){var i=Pn(this,e),o=(this.style.removeProperty(e),Pn(this,e));return i===o?null:i===n&&o===r?s:s=t(n=i,r=o)}}function Cu(e){return function(){this.style.removeProperty(e)}}function N_(e,t,n){var r,s=n+"",i;return function(){var o=Pn(this,e);return o===s?null:o===r?i:i=t(r=o,n)}}function D_(e,t,n){var r,s,i;return function(){var o=Pn(this,e),a=n(this),l=a+"";return a==null&&(l=a=(this.style.removeProperty(e),Pn(this,e))),o===l?null:o===r&&l===s?i:(s=l,i=t(r=o,a))}}function F_(e,t){var n,r,s,i="style."+t,o="end."+i,a;return function(){var l=bt(this,e),u=l.on,c=l.value[i]==null?a||(a=Cu(t)):void 0;(u!==n||s!==c)&&(r=(n=u).copy()).on(o,s=c),l.on=r}}function U_(e,t,n){var r=(e+="")=="transform"?Hm:$u;return t==null?this.styleTween(e,L_(e,r)).on("end.style."+e,Cu(e)):typeof t=="function"?this.styleTween(e,D_(e,r,lo(this,"style."+e,t))).each(F_(this._id,e)):this.styleTween(e,N_(e,r,t),n).on("end.style."+e,null)}function B_(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function q_(e,t,n){var r,s;function i(){var o=t.apply(this,arguments);return o!==s&&(r=(s=o)&&B_(e,o,n)),r}return i._value=t,i}function H_(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,q_(e,t,n??""))}function V_(e){return function(){this.textContent=e}}function W_(e){return function(){var t=e(this);this.textContent=t??""}}function J_(e){return this.tween("text",typeof e=="function"?W_(lo(this,"text",e)):V_(e==null?"":e+""))}function K_(e){return function(t){this.textContent=e.call(this,t)}}function z_(e){var t,n;function r(){var s=e.apply(this,arguments);return s!==n&&(t=(n=s)&&K_(s)),t}return r._value=e,r}function G_(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,z_(e))}function Y_(){for(var e=this._name,t=this._id,n=Pu(),r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,u=0;u<a;++u)if(l=o[u]){var c=ct(l,t);$s(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Rt(r,this._parents,e,n)}function X_(){var e,t,n=this,r=n._id,s=n.size();return new Promise(function(i,o){var a={value:o},l={value:function(){--s===0&&i()}};n.each(function(){var u=bt(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(l)),u.on=t}),s===0&&i()})}var Q_=0;function Rt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Pu(){return++Q_}var kt=kr.prototype;Rt.prototype={constructor:Rt,select:R_,selectAll:I_,selectChild:kt.selectChild,selectChildren:kt.selectChildren,filter:T_,merge:E_,selection:j_,transition:Y_,call:kt.call,nodes:kt.nodes,node:kt.node,size:kt.size,empty:kt.empty,each:kt.each,on:$_,attr:u_,attrTween:p_,style:U_,styleTween:H_,text:J_,textTween:G_,remove:P_,tween:n_,delay:__,duration:w_,ease:x_,easeVarying:k_,end:X_,[Symbol.iterator]:kt[Symbol.iterator]};function Z_(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var e0={time:null,delay:0,duration:250,ease:Z_};function t0(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function n0(e){var t,n;e instanceof Rt?(t=e._id,e=e._name):(t=Pu(),(n=e0).time=oo(),e=e==null?null:e+"");for(var r=this._groups,s=r.length,i=0;i<s;++i)for(var o=r[i],a=o.length,l,u=0;u<a;++u)(l=o[u])&&$s(l,e,t,u,o,n||t0(l,t));return new Rt(r,this._parents,e,t)}kr.prototype.interrupt=Zm;kr.prototype.transition=n0;const Ci=Math.PI,Pi=2*Ci,Qt=1e-6,r0=Pi-Qt;function Ru(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function s0(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Ru;const n=10**t;return function(r){this._+=r[0];for(let s=1,i=r.length;s<i;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class i0{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Ru:s0(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,s){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(t,n,r,s,i,o){this._append`C${+t},${+n},${+r},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,r,s,i){if(t=+t,n=+n,r=+r,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,l=r-t,u=s-n,c=o-t,h=a-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Qt)if(!(Math.abs(h*l-u*c)>Qt)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let p=r-o,k=s-a,O=l*l+u*u,d=p*p+k*k,m=Math.sqrt(O),A=Math.sqrt(f),w=i*Math.tan((Ci-Math.acos((O+f-d)/(2*m*A)))/2),E=w/A,x=w/m;Math.abs(E-1)>Qt&&this._append`L${t+E*c},${n+E*h}`,this._append`A${i},${i},0,0,${+(h*p>c*k)},${this._x1=t+x*l},${this._y1=n+x*u}`}}arc(t,n,r,s,i,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(s),l=r*Math.sin(s),u=t+a,c=n+l,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Qt||Math.abs(this._y1-c)>Qt)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%Pi+Pi),f>r0?this._append`A${r},${r},0,1,${h},${t-a},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>Qt&&this._append`A${r},${r},0,${+(f>=Ci)},${h},${this._x1=t+r*Math.cos(i)},${this._y1=n+r*Math.sin(i)}`)}rect(t,n,r,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function Mt(e){return function(){return e}}const $a=Math.abs,Le=Math.atan2,Gt=Math.cos,o0=Math.max,zs=Math.min,ft=Math.sin,wn=Math.sqrt,Ye=1e-12,_r=Math.PI,gs=_r/2,a0=2*_r;function l0(e){return e>1?0:e<-1?_r:Math.acos(e)}function Ca(e){return e>=1?gs:e<=-1?-gs:Math.asin(e)}function u0(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new i0(t)}function c0(e){return e.innerRadius}function h0(e){return e.outerRadius}function f0(e){return e.startAngle}function d0(e){return e.endAngle}function p0(e){return e&&e.padAngle}function g0(e,t,n,r,s,i,o,a){var l=n-e,u=r-t,c=o-s,h=a-i,f=h*l-c*u;if(!(f*f<Ye))return f=(c*(t-i)-h*(e-s))/f,[e+f*l,t+f*u]}function Br(e,t,n,r,s,i,o){var a=e-n,l=t-r,u=(o?i:-i)/wn(a*a+l*l),c=u*l,h=-u*a,f=e+c,p=t+h,k=n+c,O=r+h,d=(f+k)/2,m=(p+O)/2,A=k-f,w=O-p,E=A*A+w*w,x=s-i,L=f*O-k*p,V=(w<0?-1:1)*wn(o0(0,x*x*E-L*L)),Z=(L*w-A*V)/E,ue=(-L*A-w*V)/E,ce=(L*w+A*V)/E,me=(-L*A+w*V)/E,M=Z-d,I=ue-m,q=ce-d,de=me-m;return M*M+I*I>q*q+de*de&&(Z=ce,ue=me),{cx:Z,cy:ue,x01:-c,y01:-h,x11:Z*(s/x-1),y11:ue*(s/x-1)}}function m0(){var e=c0,t=h0,n=Mt(0),r=null,s=f0,i=d0,o=p0,a=null,l=u0(u);function u(){var c,h,f=+e.apply(this,arguments),p=+t.apply(this,arguments),k=s.apply(this,arguments)-gs,O=i.apply(this,arguments)-gs,d=$a(O-k),m=O>k;if(a||(a=c=l()),p<f&&(h=p,p=f,f=h),!(p>Ye))a.moveTo(0,0);else if(d>a0-Ye)a.moveTo(p*Gt(k),p*ft(k)),a.arc(0,0,p,k,O,!m),f>Ye&&(a.moveTo(f*Gt(O),f*ft(O)),a.arc(0,0,f,O,k,m));else{var A=k,w=O,E=k,x=O,L=d,V=d,Z=o.apply(this,arguments)/2,ue=Z>Ye&&(r?+r.apply(this,arguments):wn(f*f+p*p)),ce=zs($a(p-f)/2,+n.apply(this,arguments)),me=ce,M=ce,I,q;if(ue>Ye){var de=Ca(ue/f*ft(Z)),be=Ca(ue/p*ft(Z));(L-=de*2)>Ye?(de*=m?1:-1,E+=de,x-=de):(L=0,E=x=(k+O)/2),(V-=be*2)>Ye?(be*=m?1:-1,A+=be,w-=be):(V=0,A=w=(k+O)/2)}var ie=p*Gt(A),re=p*ft(A),Oe=f*Gt(x),S=f*ft(x);if(ce>Ye){var y=p*Gt(w),H=p*ft(w),z=f*Gt(E),U=f*ft(E),W;if(d<_r)if(W=g0(ie,re,z,U,y,H,Oe,S)){var X=ie-W[0],K=re-W[1],ee=y-W[0],le=H-W[1],he=1/ft(l0((X*ee+K*le)/(wn(X*X+K*K)*wn(ee*ee+le*le)))/2),_e=wn(W[0]*W[0]+W[1]*W[1]);me=zs(ce,(f-_e)/(he-1)),M=zs(ce,(p-_e)/(he+1))}else me=M=0}V>Ye?M>Ye?(I=Br(z,U,ie,re,p,M,m),q=Br(y,H,Oe,S,p,M,m),a.moveTo(I.cx+I.x01,I.cy+I.y01),M<ce?a.arc(I.cx,I.cy,M,Le(I.y01,I.x01),Le(q.y01,q.x01),!m):(a.arc(I.cx,I.cy,M,Le(I.y01,I.x01),Le(I.y11,I.x11),!m),a.arc(0,0,p,Le(I.cy+I.y11,I.cx+I.x11),Le(q.cy+q.y11,q.cx+q.x11),!m),a.arc(q.cx,q.cy,M,Le(q.y11,q.x11),Le(q.y01,q.x01),!m))):(a.moveTo(ie,re),a.arc(0,0,p,A,w,!m)):a.moveTo(ie,re),!(f>Ye)||!(L>Ye)?a.lineTo(Oe,S):me>Ye?(I=Br(Oe,S,y,H,f,-me,m),q=Br(ie,re,z,U,f,-me,m),a.lineTo(I.cx+I.x01,I.cy+I.y01),me<ce?a.arc(I.cx,I.cy,me,Le(I.y01,I.x01),Le(q.y01,q.x01),!m):(a.arc(I.cx,I.cy,me,Le(I.y01,I.x01),Le(I.y11,I.x11),!m),a.arc(0,0,f,Le(I.cy+I.y11,I.cx+I.x11),Le(q.cy+q.y11,q.cx+q.x11),m),a.arc(q.cx,q.cy,me,Le(q.y11,q.x11),Le(q.y01,q.x01),!m))):a.arc(0,0,f,x,E,m)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+s.apply(this,arguments)+ +i.apply(this,arguments))/2-_r/2;return[Gt(h)*c,ft(h)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Mt(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Mt(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Mt(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Mt(+c),u):r},u.startAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Mt(+c),u):s},u.endAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Mt(+c),u):i},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Mt(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function Kn(e,t,n){this.k=e,this.x=t,this.y=n}Kn.prototype={constructor:Kn,scale:function(e){return e===1?this:new Kn(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Kn(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Kn.prototype;function _0(e,t=null,n=800){const r=v0(e),s=r.find(M=>M.id=="stats").parties,i=n??"100%",o=n??"100%",a=n??600,l=i/2,u=o/2,c=n*.45,h={bullOuter:c*.16,tripleInner:c*.4,tripleOuter:c*.45,doubleInner:c*.81,doubleOuter:c*.86},f=[11,14,9,12,5,20,1,18,4,13,6,10,15,2,17,3,19,7,16,8],p=20,k=2*Math.PI/p,O=Fp(p).map(M=>{const I=-Math.PI/2-k/2+M*k,q=I+k;return{index:M,number:f[M],start:I,end:q}}),d=xm("svg").attr("viewBox",`0 0 ${a} ${a}`).style("width","100%").style("height","100%");d.append("rect").attr("x",0).attr("y",0).attr("width",a).attr("height",a).attr("fill","white").attr("rx",20).attr("ry",20);const A=d.append("g").attr("transform",`translate(${l},${u+30})`);function w(M,I){return m0().innerRadius(M).outerRadius(I).startAngle(q=>q.start).endAngle(q=>q.end)}const E="white",x=1;A.selectAll(".segment").data(O).join("path").attr("class","segment").attr("id",M=>`segment-${M.number}`).attr("d",w(h.bullOuter,h.doubleOuter)).attr("fill",M=>{var I;return(I=r.find(q=>q.id==M.number))==null?void 0:I.color}).attr("fill-opacity",1).attr("stroke",E).attr("stroke-width",x),A.selectAll(".single-inner").data(O).join("path").attr("class","single-inner").attr("id",M=>`single-inner-${M.number}`).attr("d",w(h.bullOuter,h.tripleInner)).attr("fill","none").attr("stroke",E).attr("stroke-width",x),A.selectAll(".single-outer").data(O).join("path").attr("class","single-outer").attr("id",M=>`single-outer-${M.number}`).attr("d",w(h.tripleOuter,h.doubleInner)).attr("fill","none").attr("stroke",E).attr("stroke-width",x),A.selectAll(".triple").data(O).join("path").attr("class","triple").attr("id",M=>`triple-${M.number}`).attr("d",w(h.tripleInner,h.tripleOuter)).attr("fill","none").attr("stroke",E).attr("stroke-width",x),A.selectAll(".double").data(O).join("path").attr("class","double").attr("id",M=>`double-${M.number}`).attr("d",w(h.doubleInner,h.doubleOuter)).attr("fill","none").attr("stroke",E).attr("stroke-width",x);const L=(h.doubleInner+h.doubleOuter)/2;A.selectAll(".double-point").data(O).join("circle").attr("class","double-point").attr("cx",M=>{const I=-Math.PI/2+M.index*k-Math.PI/2;return Math.cos(I)*L}).attr("cy",M=>{const I=-Math.PI/2+M.index*k-Math.PI/2;return Math.sin(I)*L}).attr("r",M=>{var q;const I=(q=r.find(de=>de.id==M.number))==null?void 0:q.double;if(s===1)return I*8;if(I<.2)return 0;if(I>=.2&&I<.3)return 8;if(I>=.3)return 18}).attr("fill","#FFD700").attr("stroke","black").attr("stroke-width",2);const V=(h.tripleInner+h.tripleOuter)/2;A.selectAll(".triple-point").data(O).join("circle").attr("class","triple-point").attr("cx",M=>{const I=-Math.PI/2+M.index*k-Math.PI/2;return Math.cos(I)*V}).attr("cy",M=>{const I=-Math.PI/2+M.index*k-Math.PI/2;return Math.sin(I)*V}).attr("r",M=>{var q;const I=(q=r.find(de=>de.id==M.number))==null?void 0:q.triple;if(s===1)return I*8;if(I<.2)return 0;if(I>=.2&&I<.3)return 8;if(I>=.3)return 18}).attr("fill","#FFD700").attr("stroke","black").attr("stroke-width",2);const Z=h.doubleOuter+20,ue=A.selectAll(".label-group").data(O).join("g").attr("class","label-group").attr("id",M=>`label-${M.number}`).attr("transform",M=>{const I=-Math.PI/2+M.index*k-Math.PI/2,q=Math.cos(I)*Z,de=Math.sin(I)*Z;return`translate(${q},${de})`});ue.append("circle").attr("r",15).attr("fill",M=>{var I;return((I=r.find(q=>q.id==M.number))==null?void 0:I.shanghai)>=1?"black":"none"}).attr("stroke","none"),ue.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",M=>{var I;return((I=r.find(q=>q.id==M.number))==null?void 0:I.shanghai)>=1?20:16}).attr("fill",M=>{var I;return((I=r.find(q=>q.id==M.number))==null?void 0:I.shanghai)>=1?"#FFD700":"#616161"}).attr("opacity",M=>{var I;return((I=r.find(q=>q.id==M.number))==null?void 0:I.hits)>=.75?1:0}).attr("font-weight",600).attr("font-family","Arial, Helvetica, sans-serif").text(M=>M.number),A.append("text").attr("class","center-text").attr("x",0).attr("y",0).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",28).attr("fill","#521a3a").attr("font-weight","bold").attr("font-family","Arial, Helvetica, sans-serif").text(Math.round(r.find(M=>M.id=="stats").hits)+"/60"),A.append("text").attr("class","center-text").attr("x",0).attr("y",22).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",18).attr("fill","#424242").attr("font-weight","bold").attr("font-family","Arial, Helvetica, sans-serif").text("("+r.find(M=>M.id=="stats").streak+")");const ce=Math.round(r.find(M=>M.id=="stats").score)+" points",me=t?t+" : "+ce:ce;return d.append("text").attr("x",i/2).attr("y",40).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-size",40).attr("fill","#521a3a").attr("font-weight","bold").attr("font-family","Arial, Helvetica, sans-serif").text(me),d.node()}function v0(e){let t,n,r=[],s=null,i=null,o;if(y0(e))o=S0,t=1,r=e;else if(Gs(e)){o=k0,i=iu(e.map(a=>Pa(a))),t=e.length;for(let a=0;a<20;a++){let l=e.map(u=>u[a]);r.push(l)}}return Gs(e)&&(s=x0(r),r=r.map(a=>a.flat())),n=r.map((a,l)=>{const u=new Set(a);return{id:l+1,hits:a.filter(c=>c!==0).length/t,single:a.filter(c=>c===1).length/t,double:a.filter(c=>c===2).length/t,triple:a.filter(c=>c===3).length/t,shanghai:s?s[l]:+(u.has(1)&&u.has(2)&&u.has(3)),color:o(a.filter(c=>c!==0).length/t)}}),n.push({id:"stats",parties:t,score:b0(r)/t,hits:w0(r)/t,streak:Gs(e)?i:Pa(r)}),n}function y0(e){return!Array.isArray(e)||e.length!==20?!1:e.every(t=>Array.isArray(t)&&t.length===3)}function Gs(e){return Array.isArray(e)?e.every(t=>Array.isArray(t)&&t.length===20&&t.every(n=>Array.isArray(n)&&n.length===3)):!1}function Pa(e){e=e.flat();let t=0,n=0;for(let r=0;r<e.length;r++)e[r]!==0?(n++,n>t&&(t=n)):n=0;return t}function w0(e){return e.flat().filter(t=>t!=0).length}function b0(e){return xi(e.map((t,n)=>xi(t)*(n+1)))}function x0(e){return e.map((t,n)=>t.reduce((s,i)=>{const o=new Set(i);return s+(o.has(1)&&o.has(2)&&o.has(3)?1:0)},0))}function S0(e){let t=["#fcc5c0","#f768a1","#7a0177"];switch(e){case 0:return"#FFFFFF";case 1:return t[0];case 2:return t[1];case 3:return t[2];default:return"#CCCCCC"}}function k0(e){let t=["#f2f2f2","#fde0dd","#fa9fb5","#ae017e","#49006a"];return e<.75?"white":e>=.75&&e<1?t[0]:e>=1&&e<1.25?t[1]:e>=1.25&&e<1.5?t[2]:e>=1.5&&e<1.75?t[3]:(e>=1.75&&e<=2,t[4])}const T0={class:"final-scores"},E0=["src"],A0={class:"final-player-info"},O0=["innerHTML"],$0={key:0,class:"action-buttons"},C0={__name:"GameStats",props:["sortedPlayers","humanPlayersSorted","robotName","stats","role","site"],setup(e){const t=e;async function n(){const i=Date.now(),o=t.sortedPlayers.map(u=>({player_id:u.id,name:u.name,timestamp:i,score:u.totalScore,hits:u.scores,site:t.site})),{data:a,error:l}=await to.from("scores").insert(o)}function r(){window.location.reload()}t.role==="admin"&&n();function s(i){return _0(i.scores,i.name,600).outerHTML}return(i,o)=>(ae(),ge("div",null,[o[1]||(o[1]=v("h2",null,"Partie termine",-1)),v("ul",T0,[(ae(!0),ge(De,null,lr(e.sortedPlayers,(a,l)=>(ae(),ge("li",{key:a.name,class:"final-score-item"},[a.name!==e.robotName?(ae(),ge(De,{key:0},[v("img",{src:a.avatar,alt:"avatar",class:"final-avatar-large"},null,8,E0),v("div",A0,[v("div",{class:"dartboard-container",innerHTML:s(a)},null,8,O0)])],64)):Je("",!0)]))),128))]),v("p",null,[v("button",{onClick:r},"Rejouer")]),e.role==="admin"?(ae(),ge("div",$0,[v("a",{href:"#",onClick:o[0]||(o[0]=hr(a=>i.$emit("view-scores"),["prevent"])),class:"link-button"},"Voir le classement")])):Je("",!0)]))}},P0=br(C0,[["__scopeId","data-v-a75db74d"]]),Iu=Object.assign({},{mean:ou,descending:su});function Yr(e){e=e.flat();let t=0,n=0;for(let r=0;r<e.length;r++)e[r]!==0?(n++,n>t&&(t=n)):n=0;return t}function Xr(e){e=e.flat();let t=0,n=0;for(let r=0;r<e.length;r++)e[r]===0?(n++,n>t&&(t=n)):n=0;return t}function Ra(){const e=new Date,t=e.getFullYear(),n=e.getMonth(),s=(n>=8?new Date(t,8,1):new Date(t-1,8,1)).getTime(),o=(n<=6?new Date(t,6,31):new Date(t+1,6,31)).getTime();return{septFirstLastYear:s,july31Next:o}}function Ys(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[1]===1&&n[2]===1&&n[3]===1}).length}function Xs(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[3]===2}).length}function Qs(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[3]===3}).length}function Zs(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[2]===2}).length}function ei(e){return e.filter(t=>{const n=[0,0,0,0];return t.forEach(r=>n[r]++),n[2]===3}).length}function ti(e,t,n){let r=n.filter(i=>t.map(o=>o.timestamp).includes(i.timestamp)).map(i=>({timestamp:i.timestamp,name:i.name,score:i.score})),s=0;return t.map(i=>i.timestamp).forEach(i=>{r.filter(a=>a.timestamp==i).slice().sort((a,l)=>Iu.descending(a.score,l.score)).map(a=>a)[1].name==e&&s++}),s/t.length*100}function R0(e){const t=[...new Set(e.map(s=>s.name))];let n=[];return t.forEach(s=>{const i=e.filter(o=>o.name==s).map(o=>o.score).sort((o,a)=>a-o).slice(0,10);n.push({name:s,scores:i,mean:Iu.mean(i)})}),n.filter(s=>s.scores.length>=10).sort((s,i)=>i.mean-s.mean).filter(s=>s.name!=="Number One")}function I0(e){let t="<table>";return t+="<tbody>",[...e].forEach((n,r)=>{if(t+=`<tr><td>${pe(r+1)} ${n.name}</td><td>${n.mean}</td></tr>`,n.scores&&n.scores.length){const s=n.scores.sort().join(", ");t+=`<tr><td colspan="2" style="font-size: 0.75em; color: #666;">${s}</td></tr>`}}),t+="</tbody>",t+="</table>",t}function M0(e){let t="<table>";return t+="<tbody>",[...e].forEach((n,r)=>{if(t+=`<tr><td>${pe(r+1)} ${n.name}</td><td>${n.mean_last}</td></tr>`,n.data_last&&n.data_last.length){const s=n.data_last.join(", ");t+=`<tr><td colspan="2" style="font-size: 0.75em; color: #666;">${s}</td></tr>`}}),t+="</tbody>",t+="</table>",t}function pe(e){switch(e){case 1:return"";case 2:return"";case 3:return"";case 4:return"";default:return""}}var Er={};(function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",a=function(){if(!t.OffscreenCanvas)return!1;var S=new OffscreenCanvas(1,1),y=S.getContext("2d");y.fillRect(0,0,1,1);var H=S.transferToImageBitmap();try{y.createPattern(H,"no-repeat")}catch{return!1}return!0}();function l(){}function u(S){var y=n.exports.Promise,H=y!==void 0?y:t.Promise;return typeof H=="function"?new H(S):(S(l,l),null)}var c=function(S,y){return{transform:function(H){if(S)return H;if(y.has(H))return y.get(H);var z=new OffscreenCanvas(H.width,H.height),U=z.getContext("2d");return U.drawImage(H,0,0),y.set(H,z),z},clear:function(){y.clear()}}}(a,new Map),h=function(){var S=Math.floor(16.666666666666668),y,H,z={},U=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(y=function(W){var X=Math.random();return z[X]=requestAnimationFrame(function K(ee){U===ee||U+S-1<ee?(U=ee,delete z[X],W()):z[X]=requestAnimationFrame(K)}),X},H=function(W){z[W]&&cancelAnimationFrame(z[W])}):(y=function(W){return setTimeout(W,S)},H=function(W){return clearTimeout(W)}),{frame:y,cancel:H}}(),f=function(){var S,y,H={};function z(U){function W(X,K){U.postMessage({options:X||{},callback:K})}U.init=function(K){var ee=K.transferControlToOffscreen();U.postMessage({canvas:ee},[ee])},U.fire=function(K,ee,le){if(y)return W(K,null),y;var he=Math.random().toString(36).slice(2);return y=u(function(_e){function g(_){_.data.callback===he&&(delete H[he],U.removeEventListener("message",g),y=null,c.clear(),le(),_e())}U.addEventListener("message",g),W(K,he),H[he]=g.bind(null,{data:{callback:he}})}),y},U.reset=function(){U.postMessage({reset:!0});for(var K in H)H[K](),delete H[K]}}return function(){if(S)return S;if(!r&&i){var U=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{S=new Worker(URL.createObjectURL(new Blob([U])))}catch(W){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",W),null}z(S)}return S}}(),p={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function k(S,y){return y?y(S):S}function O(S){return S!=null}function d(S,y,H){return k(S&&O(S[y])?S[y]:p[y],H)}function m(S){return S<0?0:Math.floor(S)}function A(S,y){return Math.floor(Math.random()*(y-S))+S}function w(S){return parseInt(S,16)}function E(S){return S.map(x)}function x(S){var y=String(S).replace(/[^0-9a-f]/gi,"");return y.length<6&&(y=y[0]+y[0]+y[1]+y[1]+y[2]+y[2]),{r:w(y.substring(0,2)),g:w(y.substring(2,4)),b:w(y.substring(4,6))}}function L(S){var y=d(S,"origin",Object);return y.x=d(y,"x",Number),y.y=d(y,"y",Number),y}function V(S){S.width=document.documentElement.clientWidth,S.height=document.documentElement.clientHeight}function Z(S){var y=S.getBoundingClientRect();S.width=y.width,S.height=y.height}function ue(S){var y=document.createElement("canvas");return y.style.position="fixed",y.style.top="0px",y.style.left="0px",y.style.pointerEvents="none",y.style.zIndex=S,y}function ce(S,y,H,z,U,W,X,K,ee){S.save(),S.translate(y,H),S.rotate(W),S.scale(z,U),S.arc(0,0,1,X,K,ee),S.restore()}function me(S){var y=S.angle*(Math.PI/180),H=S.spread*(Math.PI/180);return{x:S.x,y:S.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:S.startVelocity*.5+Math.random()*S.startVelocity,angle2D:-y+(.5*H-Math.random()*H),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:S.color,shape:S.shape,tick:0,totalTicks:S.ticks,decay:S.decay,drift:S.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:S.gravity*3,ovalScalar:.6,scalar:S.scalar,flat:S.flat}}function M(S,y){y.x+=Math.cos(y.angle2D)*y.velocity+y.drift,y.y+=Math.sin(y.angle2D)*y.velocity+y.gravity,y.velocity*=y.decay,y.flat?(y.wobble=0,y.wobbleX=y.x+10*y.scalar,y.wobbleY=y.y+10*y.scalar,y.tiltSin=0,y.tiltCos=0,y.random=1):(y.wobble+=y.wobbleSpeed,y.wobbleX=y.x+10*y.scalar*Math.cos(y.wobble),y.wobbleY=y.y+10*y.scalar*Math.sin(y.wobble),y.tiltAngle+=.1,y.tiltSin=Math.sin(y.tiltAngle),y.tiltCos=Math.cos(y.tiltAngle),y.random=Math.random()+2);var H=y.tick++/y.totalTicks,z=y.x+y.random*y.tiltCos,U=y.y+y.random*y.tiltSin,W=y.wobbleX+y.random*y.tiltCos,X=y.wobbleY+y.random*y.tiltSin;if(S.fillStyle="rgba("+y.color.r+", "+y.color.g+", "+y.color.b+", "+(1-H)+")",S.beginPath(),o&&y.shape.type==="path"&&typeof y.shape.path=="string"&&Array.isArray(y.shape.matrix))S.fill(ie(y.shape.path,y.shape.matrix,y.x,y.y,Math.abs(W-z)*.1,Math.abs(X-U)*.1,Math.PI/10*y.wobble));else if(y.shape.type==="bitmap"){var K=Math.PI/10*y.wobble,ee=Math.abs(W-z)*.1,le=Math.abs(X-U)*.1,he=y.shape.bitmap.width*y.scalar,_e=y.shape.bitmap.height*y.scalar,g=new DOMMatrix([Math.cos(K)*ee,Math.sin(K)*ee,-Math.sin(K)*le,Math.cos(K)*le,y.x,y.y]);g.multiplySelf(new DOMMatrix(y.shape.matrix));var _=S.createPattern(c.transform(y.shape.bitmap),"no-repeat");_.setTransform(g),S.globalAlpha=1-H,S.fillStyle=_,S.fillRect(y.x-he/2,y.y-_e/2,he,_e),S.globalAlpha=1}else if(y.shape==="circle")S.ellipse?S.ellipse(y.x,y.y,Math.abs(W-z)*y.ovalScalar,Math.abs(X-U)*y.ovalScalar,Math.PI/10*y.wobble,0,2*Math.PI):ce(S,y.x,y.y,Math.abs(W-z)*y.ovalScalar,Math.abs(X-U)*y.ovalScalar,Math.PI/10*y.wobble,0,2*Math.PI);else if(y.shape==="star")for(var b=Math.PI/2*3,P=4*y.scalar,C=8*y.scalar,R=y.x,F=y.y,D=5,N=Math.PI/D;D--;)R=y.x+Math.cos(b)*C,F=y.y+Math.sin(b)*C,S.lineTo(R,F),b+=N,R=y.x+Math.cos(b)*P,F=y.y+Math.sin(b)*P,S.lineTo(R,F),b+=N;else S.moveTo(Math.floor(y.x),Math.floor(y.y)),S.lineTo(Math.floor(y.wobbleX),Math.floor(U)),S.lineTo(Math.floor(W),Math.floor(X)),S.lineTo(Math.floor(z),Math.floor(y.wobbleY));return S.closePath(),S.fill(),y.tick<y.totalTicks}function I(S,y,H,z,U){var W=y.slice(),X=S.getContext("2d"),K,ee,le=u(function(he){function _e(){K=ee=null,X.clearRect(0,0,z.width,z.height),c.clear(),U(),he()}function g(){r&&!(z.width===s.width&&z.height===s.height)&&(z.width=S.width=s.width,z.height=S.height=s.height),!z.width&&!z.height&&(H(S),z.width=S.width,z.height=S.height),X.clearRect(0,0,z.width,z.height),W=W.filter(function(_){return M(X,_)}),W.length?K=h.frame(g):_e()}K=h.frame(g),ee=_e});return{addFettis:function(he){return W=W.concat(he),le},canvas:S,promise:le,reset:function(){K&&h.cancel(K),ee&&ee()}}}function q(S,y){var H=!S,z=!!d(y||{},"resize"),U=!1,W=d(y,"disableForReducedMotion",Boolean),X=i&&!!d(y||{},"useWorker"),K=X?f():null,ee=H?V:Z,le=S&&K?!!S.__confetti_initialized:!1,he=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,_e;function g(b,P,C){for(var R=d(b,"particleCount",m),F=d(b,"angle",Number),D=d(b,"spread",Number),N=d(b,"startVelocity",Number),j=d(b,"decay",Number),G=d(b,"gravity",Number),B=d(b,"drift",Number),J=d(b,"colors",E),Y=d(b,"ticks",Number),se=d(b,"shapes"),ve=d(b,"scalar"),fe=!!d(b,"flat"),$e=L(b),Ae=R,Me=[],ze=S.width*$e.x,xt=S.height*$e.y;Ae--;)Me.push(me({x:ze,y:xt,angle:F,spread:D,startVelocity:N,color:J[Ae%J.length],shape:se[A(0,se.length)],ticks:Y,decay:j,gravity:G,drift:B,scalar:ve,flat:fe}));return _e?_e.addFettis(Me):(_e=I(S,Me,ee,P,C),_e.promise)}function _(b){var P=W||d(b,"disableForReducedMotion",Boolean),C=d(b,"zIndex",Number);if(P&&he)return u(function(N){N()});H&&_e?S=_e.canvas:H&&!S&&(S=ue(C),document.body.appendChild(S)),z&&!le&&ee(S);var R={width:S.width,height:S.height};K&&!le&&K.init(S),le=!0,K&&(S.__confetti_initialized=!0);function F(){if(K){var N={getBoundingClientRect:function(){if(!H)return S.getBoundingClientRect()}};ee(N),K.postMessage({resize:{width:N.width,height:N.height}});return}R.width=R.height=null}function D(){_e=null,z&&(U=!1,t.removeEventListener("resize",F)),H&&S&&(document.body.contains(S)&&document.body.removeChild(S),S=null,le=!1)}return z&&!U&&(U=!0,t.addEventListener("resize",F,!1)),K?K.fire(b,R,D):g(b,R,D)}return _.reset=function(){K&&K.reset(),_e&&_e.reset()},_}var de;function be(){return de||(de=q(null,{useWorker:!0,resize:!0})),de}function ie(S,y,H,z,U,W,X){var K=new Path2D(S),ee=new Path2D;ee.addPath(K,new DOMMatrix(y));var le=new Path2D;return le.addPath(ee,new DOMMatrix([Math.cos(X)*U,Math.sin(X)*U,-Math.sin(X)*W,Math.cos(X)*W,H,z])),le}function re(S){if(!o)throw new Error("path confetti are not supported in this browser");var y,H;typeof S=="string"?y=S:(y=S.path,H=S.matrix);var z=new Path2D(y),U=document.createElement("canvas"),W=U.getContext("2d");if(!H){for(var X=1e3,K=X,ee=X,le=0,he=0,_e,g,_=0;_<X;_+=2)for(var b=0;b<X;b+=2)W.isPointInPath(z,_,b,"nonzero")&&(K=Math.min(K,_),ee=Math.min(ee,b),le=Math.max(le,_),he=Math.max(he,b));_e=le-K,g=he-ee;var P=10,C=Math.min(P/_e,P/g);H=[C,0,0,C,-Math.round(_e/2+K)*C,-Math.round(g/2+ee)*C]}return{type:"path",path:y,matrix:H}}function Oe(S){var y,H=1,z="#000000",U='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof S=="string"?y=S:(y=S.text,H="scalar"in S?S.scalar:H,U="fontFamily"in S?S.fontFamily:U,z="color"in S?S.color:z);var W=10*H,X=""+W+"px "+U,K=new OffscreenCanvas(W,W),ee=K.getContext("2d");ee.font=X;var le=ee.measureText(y),he=Math.ceil(le.actualBoundingBoxRight+le.actualBoundingBoxLeft),_e=Math.ceil(le.actualBoundingBoxAscent+le.actualBoundingBoxDescent),g=2,_=le.actualBoundingBoxLeft+g,b=le.actualBoundingBoxAscent+g;he+=g+g,_e+=g+g,K=new OffscreenCanvas(he,_e),ee=K.getContext("2d"),ee.font=X,ee.fillStyle=z,ee.fillText(y,_,b);var P=1/H;return{type:"bitmap",bitmap:K.transferToImageBitmap(),matrix:[P,0,0,P,-he*P/2,-_e*P/2]}}n.exports=function(){return be().apply(this,arguments)},n.exports.reset=function(){be().reset()},n.exports.create=q,n.exports.shapeFromPath=re,n.exports.shapeFromText=Oe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Er,!1);const j0=Er.exports;Er.exports.create;const L0={key:0,style:{"font-size":"0.8rem",color:"gray","text-align":"center","margin-bottom":"-10px"}},N0={class:"container"},D0={key:0},F0={class:"avatar-lineup"},U0=["src","alt"],B0={key:0,class:"buttons"},q0=["onClick"],H0=["onClick"],V0=["onClick"],W0=["onClick"],J0={key:0,id:"submitScoreContainer"},K0={key:1},z0=20,Re="Number One",G0="https://cdn-icons-png.flaticon.com/512/4712/4712027.png",Y0={__name:"Game",props:{players:Array,role:String,site:String},setup(e){let t=0;function n(x){t=x.touches[0].clientY}function r(x){const L=x.touches[0].clientY;window.scrollY===0&&L>t&&x.preventDefault()}xs(()=>{window.addEventListener("touchstart",n,{passive:!1}),window.addEventListener("touchmove",r,{passive:!1})}),dl(()=>{window.removeEventListener("touchstart",n),window.removeEventListener("touchmove",r)});function s(){const x=document.documentElement;document.fullscreenElement?document.exitFullscreen():x.requestFullscreen().catch(L=>{console.warn(`Erreur lors du passage en plein cran : ${L.message}`)})}const i=e,o=Fe(1),a=Fe(0),l=Fe([0,0,0]);let u=0;Zn(()=>i.players.length,x=>{const L=i.players.findIndex(V=>V.name===Re);x>1&&L===-1?i.players.push({id:0,name:Re,avatar:G0,scores:[],totalScore:0}):x<=1&&L!==-1&&(i.players.splice(L,1),a.value>=i.players.length&&(a.value=0))},{immediate:!0}),i.players.forEach(x=>{x.scores||(x.scores=[]),x.curses||(x.curses=0),x.totalScore===void 0&&(x.totalScore=0)});function c(x){const L=x.scores.flat(),V=Yr(L),Z=Xr(L),ue=L.length,ce=L.filter(U=>U===0).length,me=L.filter(U=>U!==0).length,M=x.scores.map(U=>U[0]).filter(U=>U!==0).length,I=x.scores.map(U=>U[1]).filter(U=>U!==0).length,q=x.scores.map(U=>U[2]).filter(U=>U!==0).length,de=L.filter(U=>U===1).length,be=L.filter(U=>U===2).length,ie=L.filter(U=>U===3).length,re=x.scores.filter(U=>U.filter(W=>W===3).length===3).length,Oe=x.scores.filter(U=>U.filter(W=>W===3).length===2).length,S=x.scores.filter(U=>U.filter(W=>W===2).length===3).length,y=x.scores.filter(U=>U.filter(W=>W===2).length===2).length,H=x.scores.filter(U=>{const W=new Set(U);return W.has(1)&&W.has(2)&&W.has(3)}).length,z=x.curses;return{total:ue,hits:me,hitsF1:M,hitsF2:I,hitsF3:q,miss:ce,single:de,double:be,triple:ie,shangai:H,ttt:re,ddd:S,tt:Oe,dd:y,strk:V,strkloose:Z,curses:z}}function h(x,L){l.value[x]=L,navigator.vibrate&&navigator.vibrate(30)}const f=Hn(()=>{const x=o.value;return l.value.reduce((L,V)=>L+V*x,0)});function p(){navigator.vibrate&&navigator.vibrate(30);const x=i.players[a.value];if(x.name===Re){const Z=i.players.filter(M=>M.name!==Re).map(M=>M.scores[M.scores.length-1]),ue=Z.map(M=>M[0]+M[1]+M[2]),ce=ue.indexOf(Math.max(...ue)),me=Z[ce];l.value=[...me]}const L=[...l.value];x.scores.push(L),x.totalScore+=f.value,new Set(L).has(1)&&new Set(L).has(2)&&new Set(L).has(3)&&x.name!==Re&&j0({particleCount:150,spread:90,origin:{y:.6}}),l.value=[0,0,0],a.value<i.players.length-1?a.value++:(a.value=0,o.value++),u=Math.max(...i.players.filter(Z=>Z.name!==Re).map(Z=>Z.totalScore))}function k(){if(o.value===1&&a.value===0)return;let x=a.value,L=o.value;function V(M){const I=i.players.length;for(let q=1;q<=I;q++){const de=(M-q+I)%I;if(i.players[de].name!==Re)return de}return M}const Z=i.players.findIndex(M=>M.name===Re);let ue=!1;if(x===0){if(L===1)return;L-=1,x=V(i.players.length),ue=!0}else x=V(x);a.value=x,o.value=L;const ce=i.players[x],me=ce.scores.pop();if(me){const M=L,I=me.reduce((q,de)=>q+de*M,0);ce.totalScore-=I}if(ue&&Z!==-1){const M=i.players[Z];if(M.scores.length>0){const q=M.scores[M.scores.length-1].reduce((de,be)=>de+be*L,0);M.totalScore-=q,M.scores.pop()}}l.value=[0,0,0]}function O(){const x=i.players[a.value];x.name!==Re&&(x.curses+=1)}const d=Hn(()=>o.value>z0),m=Hn(()=>[...i.players].sort((x,L)=>L.totalScore-x.totalScore));Zn(a,async x=>{i.players[x].name===Re&&!d.value&&(await il(),p())});const A=Hn(()=>i.players.filter(x=>x.name!==Re).sort((x,L)=>L.totalScore-x.totalScore));function w(x){const L=new Map([[1,"Ain"],[2,"Aisne"],[3,"Allier"],[4,"Alpes-de-Haute-Provence"],[5,"Hautes-Alpes"],[6,"Alpes-Maritimes"],[7,"Ardche"],[8,"Ardennes"],[9,"Arige"],[10,"Aube"],[11,"Aude"],[12,"Aveyron"],[13,"Bouches-du-Rhne"],[14,"Calvados"],[15,"Cantal"],[16,"Charente"],[17,"Charente-Maritime"],[18,"Cher"],[19,"Corrze"],[20,"Corse (2A Corse-du-Sud, 2B Haute-Corse)"],[21,"Cte-d'Or"],[22,"Ctes-d'Armor"],[23,"Creuse"],[24,"Dordogne"],[25,"Doubs"],[26,"Drme"],[27,"Eure"],[28,"Eure-et-Loir"],[29,"Finistre"],[30,"Gard"],[31,"Haute-Garonne"],[32,"Gers"],[33,"Gironde"],[34,"Hrault"],[35,"Ille-et-Vilaine"],[36,"Indre"],[37,"Indre-et-Loire"],[38,"Isre"],[39,"Jura"],[40,"Landes"],[41,"Loir-et-Cher"],[42,"Loire"],[43,"Haute-Loire"],[44,"Loire-Atlantique"],[45,"Loiret"],[46,"Lot"],[47,"Lot-et-Garonne"],[48,"Lozre"],[49,"Maine-et-Loire"],[50,"Manche"],[51,"Marne"],[52,"Haute-Marne"],[53,"Mayenne"],[54,"Meurthe-et-Moselle"],[55,"Meuse"],[56,"Morbihan"],[57,"Moselle"],[58,"Nivre"],[59,"Nord"],[60,"Oise"],[61,"Orne"],[62,"Pas-de-Calais"],[63,"Puy-de-Dme"],[64,"Pyrnes-Atlantiques"],[65,"Hautes-Pyrnes"],[66,"Pyrnes-Orientales"],[67,"Bas-Rhin"],[68,"Haut-Rhin"],[69,"Rhne"],[70,"Haute-Sane"],[71,"Sane-et-Loire"],[72,"Sarthe"],[73,"Savoie"],[74,"Haute-Savoie"],[75,"Paris"],[76,"Seine-Maritime"],[77,"Seine-et-Marne"],[78,"Yvelines"],[79,"Deux-Svres"],[80,"Somme"],[81,"Tarn"],[82,"Tarn-et-Garonne"],[83,"Var"],[84,"Vaucluse"],[85,"Vende"],[86,"Vienne"],[87,"Haute-Vienne"],[88,"Vosges"],[89,"Yonne"],[90,"Territoire de Belfort"],[91,"Essonne"],[92,"Hauts-de-Seine"],[93,"Seine-Saint-Denis"],[94,"Val-de-Marne"],[95,"Val-d'Oise"]]);if(x<=0||x>95&&x<100)return"";if(x<=95)return"| "+L.get(x);if(x>=100&&x<200)return"| Barrire de la honte";if(x>=200&&x<300)return"| Barrire de l'honneur";if(x>=300&&x<400)return"| Bien jou  ";if(x>=400&&x<500)return"|  Quel talent ";if(x>=500&&x<600)return"|  Lgendaire ";if(x>=600)return"|  G.O.A.T "}function E(x){if(x<100)return"neutral";if(x>=100&&x<200)return"ultra1";if(x>=200&&x<300)return"ultra2";if(x>=300&&x<400)return"ultra3";if(x>=400&&x<500)return"ultra4";if(x>=500)return"ultra5"}return(x,L)=>(ae(),ge("div",null,[e.role==="admin"?(ae(),ge("p",L0," Partie officielle et enregistre ")):Je("",!0),v("div",N0,[d.value?(ae(),ge("div",K0,[_t(P0,{sortedPlayers:m.value,humanPlayersSorted:A.value,robotName:Re,stats:c,replay:x.replay,role:i.role,site:i.site,onViewScores:L[0]||(L[0]=V=>x.$emit("view-scores"))},null,8,["sortedPlayers","humanPlayersSorted","replay","role","site"])])):(ae(),ge("div",D0,[v("h2",{class:"round-circle",onClick:s},$(o.value),1),v("h1",null,$(i.players[a.value].name),1),v("div",{class:ot(["dept-badge",E(i.players[a.value].totalScore+f.value)])},[L[1]||(L[1]=pt(" Score : ")),v("b",null,$(i.players[a.value].totalScore+f.value),1),pt(" "+$(w(i.players[a.value].totalScore+f.value)),1)],2),v("div",F0,[(ae(!0),ge(De,null,lr(i.players,(V,Z)=>(ae(),ge("div",{key:V.name,class:"avatar-wrapper"},[v("img",{src:V.avatar,alt:V.name,class:ot(["avatar",{current:Z===a.value}])},null,10,U0),v("div",{class:ot(["score-badge",{"bestscore-badge":V.totalScore===or(u)&&V.name!==Re&&or(u)!==0,"score-robot":V.name===Re}])},$(V.totalScore),3),V.name!==Re&&V.totalScore>=100?(ae(),ge("div",{key:0,class:ot(["score-dot",E(V.totalScore)])},null,2)):Je("",!0)]))),128))]),L[2]||(L[2]=v("hr",null,null,-1)),(ae(!0),ge(De,null,lr(l.value,(V,Z)=>(ae(),ge("div",{key:Z,class:"dart-controls",style:{display:"flex","align-items":"center",gap:"6px"}},[i.players[a.value].name!==Re?(ae(),ge("div",B0,[v("button",{class:ot(["dart-button",{active:V===0}]),onClick:ue=>h(Z,0)},"Miss",10,q0),v("button",{class:ot(["dart-button",{active:V===1}]),onClick:ue=>h(Z,1)},"Single",10,H0),v("button",{class:ot(["dart-button",{active:V===2}]),onClick:ue=>h(Z,2)},"Double",10,V0),v("button",{class:ot(["dart-button",{active:V===3}]),onClick:ue=>h(Z,3)},"Triple",10,W0)])):Je("",!0)]))),128)),i.players[a.value].name!==Re?(ae(),ge("p",J0,[v("button",{onClick:O,class:"curseCounter"}," ! "+$(i.players[a.value].curses),1),v("button",{onClick:p,class:"validate"},"Valider ce tour (+"+$(f.value)+" pts)",1)])):Je("",!0),v("p",null,[v("button",{onClick:k,class:"undo-button"},"")])]))])]))}},X0=br(Y0,[["__scopeId","data-v-8d09ca16"]]),Q0={class:"login-container"},Z0={class:"login-box"},ev={class:"radio-group"},tv={class:"radio-label"},nv={class:"radio-label"},rv=["disabled"],sv={key:0,class:"error"},iv={__name:"Login",emits:["login"],setup(e,{emit:t}){const n=t,r=Fe(""),s=Fe("Riate"),i=Fe(null),o=Fe(!1);async function a(){i.value=null,o.value=!0;const u=await $p(r.value);o.value=!1,u?n("login",{name:"Admin",role:"admin",site:s.value}):i.value="Mot de passe incorrect."}function l(){n("login",{name:"Visiteur",role:"visiteur",site:s.value})}return(u,c)=>(ae(),ge("div",Q0,[v("div",Z0,[v("form",{onSubmit:hr(a,["prevent"])},[v("div",ev,[v("label",tv,[Hr(v("input",{type:"radio",value:"Riate","onUpdate:modelValue":c[0]||(c[0]=h=>s.value=h)},null,512),[[Do,s.value]]),c[3]||(c[3]=v("span",null,"Riate",-1))]),v("label",nv,[Hr(v("input",{type:"radio",value:"Condorcet","onUpdate:modelValue":c[1]||(c[1]=h=>s.value=h)},null,512),[[Do,s.value]]),c[4]||(c[4]=v("span",null,"Condorcet",-1))])]),Hr(v("input",{"onUpdate:modelValue":c[2]||(c[2]=h=>r.value=h),type:"password",placeholder:"Mot de passe",autocomplete:"current-password"},null,512),[[Dl,r.value]]),v("button",{type:"submit",disabled:o.value},$(o.value?"Connexion...":"Se connecter"),9,rv)],32),v("a",{onClick:hr(l,["prevent"]),href:"#",class:"visitor-link"}," Continuer en tant que visiteur "),i.value?(ae(),ge("p",sv,$(i.value),1)):Je("",!0)])]))}},ov=br(iv,[["__scopeId","data-v-220c4406"]]),av="/shanghai/img/podium.webp",lv={class:"scores-page"},uv={key:0},cv={key:1},hv={key:0,class:"podium",style:{position:"relative",display:"inline-block"}},fv={class:"podium-text text-1"},dv={style:{"font-size":"0.5rem"}},pv={class:"podium-text text-2"},gv={style:{"font-size":"0.5rem"}},mv={class:"podium-text text-3"},_v={style:{"font-size":"0.5rem"}},vv={class:"podium-text text-4"},yv={align:"center"},wv=["innerHTML"],bv={key:1,class:"players-list"},xv=["innerHTML"],Sv={class:"player-name"},kv={class:"score-table"},Tv={class:"player-card"},Ev={class:"player-name"},Av={class:"score-table"},Ov={__name:"RecordedStats",setup(e){const t=Object.assign({},{min:Dp,max:iu,mean:ou,sum:xi,ascending:Cp,descending:su,count:Pp,group:Lp}),n=Fe([]),r=Fe([]),s=Fe([]);async function i(){console.log("fetchScores called");const{data:a,error:l}=await to.from("scores").select("*").order("score",{ascending:!1});if(l){console.error("Erreur de rcupration des scores :",l);return}if(!a.length)return;const u=Ra(),c=Array.from(t.group(a,p=>p.name)).filter(([p,k])=>k.length>=10).filter(([p,k])=>k.name!="Number One").map(([p])=>p),h=o(a.filter(p=>c.includes(p.name)));s.value=R0(a.filter(p=>p.timestamp>=u.septFirstLastYear).filter(p=>p.timestamp<=u.july31Next));const f=["Number One"];n.value=h.filter(p=>p.data_last.length>=10).filter(p=>!f.includes(p.name)),r.value=h.find(p=>p.name==="Number One")}function o(a,l=10){const u=new Date,c=new Date;c.setMonth(u.getMonth()-1);let h=[...new Set(a.map(d=>d.name))].map(d=>({name:d}));const f=Ra(),p=a.filter(d=>d.timestamp>=f.septFirstLastYear).filter(d=>d.timestamp<=f.july31Next),k=a.filter(d=>d.name=="Number One").length,O=p.filter(d=>d.name=="Number One").length;return h=h.map(d=>{const m=a.filter(T=>T.name==d.name),A=p.filter(T=>T.name==d.name),w=A.filter(T=>new Date(T.timestamp)>=c).slice().sort((T,je)=>t.ascending(T.timestamp,je.timestamp)).slice(-l),E=d.name,x=ti(E,m,a),L=ti(E,A,a),V=ti(E,w,a),Z=m.length,ue=A.length,ce=w.length,me=Math.round(1e3*m.length/k)/10,M=Math.round(1e3*A.length/O)/10,I=t.mean(m.map(T=>T.score)),q=Math.round(I),de=t.mean(A.map(T=>T.score)),be=Math.round(de),ie=t.mean(w.map(T=>T.score)),re=Math.round(ie),Oe=Math.round(t.max(m.map(T=>T.score))),S=Math.round(t.max(A.map(T=>T.score))),y=Math.round(t.max(w.map(T=>T.score))),H=Math.round(t.sum(m.map(T=>T.score))),z=Math.round(t.sum(A.map(T=>T.score))),U=Math.round(t.sum(w.map(T=>T.score))),W=Math.round(t.min(m.map(T=>T.score))),X=Math.round(t.min(A.map(T=>T.score))),K=Math.round(t.min(w.map(T=>T.score))),ee=t.max(m.map(T=>JSON.parse(T.hits)).map(T=>T.flat().filter(je=>je!=0).length)),le=t.max(A.map(T=>JSON.parse(T.hits)).map(T=>T.flat().filter(je=>je!=0).length)),he=t.max(w.map(T=>JSON.parse(T.hits)).map(T=>T.flat().filter(je=>je!=0).length)),_e=t.max(m.map(T=>JSON.parse(T.hits)).map(T=>t.sum(T.flat().filter(je=>je!=0)))),g=t.max(A.map(T=>JSON.parse(T.hits)).map(T=>t.sum(T.flat().filter(je=>je!=0)))),_=t.max(w.map(T=>JSON.parse(T.hits)).map(T=>t.sum(T.flat().filter(je=>je!=0)))),b=t.max(m.map((T,je)=>t.max(JSON.parse(T.hits).map((Mn,jn)=>t.sum(Mn)*(jn+1))))),P=t.max(A.map((T,je)=>t.max(JSON.parse(T.hits).map((Mn,jn)=>t.sum(Mn)*(jn+1))))),C=t.max(w.map((T,je)=>t.max(JSON.parse(T.hits).map((Mn,jn)=>t.sum(Mn)*(jn+1))))),R=t.max(m.map(T=>JSON.parse(T.hits).flat()).map(T=>Yr(T))),F=t.max(A.map(T=>JSON.parse(T.hits).flat()).map(T=>Yr(T))),D=t.max(w.map(T=>JSON.parse(T.hits).flat()).map(T=>Yr(T))),N=t.max(m.map(T=>JSON.parse(T.hits).flat()).map(T=>Xr(T))),j=t.max(A.map(T=>JSON.parse(T.hits).flat()).map(T=>Xr(T))),G=t.max(w.map(T=>JSON.parse(T.hits).flat()).map(T=>Xr(T))),B=Math.round(m.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==3).length/Z*10)/10,J=Math.round(A.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==3).length/ue*10)/10,Y=Math.round(w.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==3).length/ce*10)/10,se=Math.round(m.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==2).length/Z*10)/10,ve=Math.round(A.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==2).length/ue*10)/10,fe=Math.round(w.map(T=>JSON.parse(T.hits)).flat(2).filter(T=>T==2).length/ce*10)/10,$e=t.sum(m.map(T=>Ys(JSON.parse(T.hits)))),Ae=t.sum(A.map(T=>Ys(JSON.parse(T.hits)))),Me=t.sum(w.map(T=>Ys(JSON.parse(T.hits)))),ze=t.sum(m.map(T=>Xs(JSON.parse(T.hits)))),xt=t.sum(A.map(T=>Xs(JSON.parse(T.hits)))),Ar=t.sum(w.map(T=>Xs(JSON.parse(T.hits)))),Be=t.sum(m.map(T=>Qs(JSON.parse(T.hits)))),nt=t.sum(A.map(T=>Qs(JSON.parse(T.hits)))),Or=t.sum(w.map(T=>Qs(JSON.parse(T.hits)))),Mu=t.sum(m.map(T=>Zs(JSON.parse(T.hits)))),ju=t.sum(A.map(T=>Zs(JSON.parse(T.hits)))),Lu=t.sum(w.map(T=>Zs(JSON.parse(T.hits)))),Nu=t.sum(m.map(T=>ei(JSON.parse(T.hits)))),Du=t.sum(A.map(T=>ei(JSON.parse(T.hits)))),Fu=t.sum(w.map(T=>ei(JSON.parse(T.hits))));return{...d,played_all:Z,mean_all_raw:I,mean_all:q,max_all:Oe,min_all:W,streak_all:R,assiduity_all:me,shanghai_all:$e,played_year:ue,mean_year_raw:de,mean_year:be,max_year:S,min_year:X,streak_year:F,assiduity_year:M,shanghai_year:Ae,played_last:ce,mean_last_raw:ie,mean_last:re,max_last:y,min_last:K,streak_last:D,shanghai_last:Me,hits_all:ee,hits_year:le,hits_last:he,hits2_all:_e,hits2_year:g,hits2_last:_,hitbest_all:b,hitbest_year:P,hitbest_last:C,tt_all:ze,tt_year:xt,tt_last:Ar,ttt_all:Be,ttt_year:nt,ttt_last:Or,dd_all:Mu,dd_year:ju,dd_last:Lu,ddd_all:Nu,ddd_year:Du,ddd_last:Fu,cumul_all:H,cumul_year:z,cumul_last:U,triple_all:B,triple_year:J,triple_last:Y,double_all:se,double_year:ve,double_last:fe,win_all:x,win_year:L,win_last:V,data_last:w.map(T=>T.score),streakloose_all:N,streakloose_year:j,streakloose_last:G}}),h=[...h].sort((d,m)=>m.max_all-d.max_all).map((d,m)=>({...d,medal_max_all:pe(m)})),h=[...h].sort((d,m)=>m.max_year-d.max_year).map((d,m)=>({...d,medal_max_year:pe(m)})),h=[...h].sort((d,m)=>m.max_last-d.max_last).map((d,m)=>({...d,medal_max_last:pe(m)})),h=[...h].sort((d,m)=>m.cumul_all-d.cumul_all).map((d,m)=>({...d,medal_cumul_all:pe(m)})),h=[...h].sort((d,m)=>m.cumul_year-d.cumul_year).map((d,m)=>({...d,medal_cumul_year:pe(m)})),h=[...h].sort((d,m)=>m.cumul_last-d.cumul_last).map((d,m)=>({...d,medal_cumul_last:pe(m)})),h=[...h].sort((d,m)=>m.streak_all-d.streak_all).map((d,m)=>({...d,medal_streak_all:pe(m)})),h=[...h].sort((d,m)=>m.streak_year-d.streak_year).map((d,m)=>({...d,medal_streak_year:pe(m)})),h=[...h].sort((d,m)=>m.streak_last-d.streak_last).map((d,m)=>({...d,medal_streak_last:pe(m)})),h=[...h].sort((d,m)=>m.streakloose_all-d.streakloose_all).map((d,m)=>({...d,medal_streakloose_all:pe(m)})),h=[...h].sort((d,m)=>m.streakloose_year-d.streakloose_year).map((d,m)=>({...d,medal_streakloose_year:pe(m)})),h=[...h].sort((d,m)=>m.streakloose_last-d.streakloose_last).map((d,m)=>({...d,medal_streakloose_last:pe(m)})),h=[...h].sort((d,m)=>m.hits_all-d.hits_all).map((d,m)=>({...d,medal_hits_all:pe(m)})),h=[...h].sort((d,m)=>m.hits_year-d.hits_year).map((d,m)=>({...d,medal_hits_year:pe(m)})),h=[...h].sort((d,m)=>m.hits_last-d.hits_last).map((d,m)=>({...d,medal_hits_last:pe(m)})),h=[...h].sort((d,m)=>m.hitbest_all-d.hitbest_all).map((d,m)=>({...d,medal_hitbest_all:pe(m)})),h=[...h].sort((d,m)=>m.hitbest_year-d.hitbest_year).map((d,m)=>({...d,medal_hitbest_year:pe(m)})),h=[...h].sort((d,m)=>m.hitbest_last-d.hitbest_last).map((d,m)=>({...d,medal_hitbest_last:pe(m)})),h=[...h].sort((d,m)=>m.hits2_all-d.hits2_all).map((d,m)=>({...d,medal_hits2_all:pe(m)})),h=[...h].sort((d,m)=>m.hits2_year-d.hits2_year).map((d,m)=>({...d,medal_hits2_year:pe(m)})),h=[...h].sort((d,m)=>m.hits2_last-d.hits2_last).map((d,m)=>({...d,medal_hits2_last:pe(m)})),h=[...h].sort((d,m)=>m.triple_all-d.triple_all).map((d,m)=>({...d,medal_triple_all:pe(m)})),h=[...h].sort((d,m)=>m.triple_year-d.triple_year).map((d,m)=>({...d,medal_triple_year:pe(m)})),h=[...h].sort((d,m)=>m.triple_last-d.triple_last).map((d,m)=>({...d,medal_triple_last:pe(m)})),h=[...h].sort((d,m)=>m.double_all-d.double_all).map((d,m)=>({...d,medal_double_all:pe(m)})),h=[...h].sort((d,m)=>m.double_year-d.double_year).map((d,m)=>({...d,medal_double_year:pe(m)})),h=[...h].sort((d,m)=>m.double_last-d.double_last).map((d,m)=>({...d,medal_double_last:pe(m)})),h=[...h].sort((d,m)=>m.mean_all_raw-d.mean_all_raw).map((d,m)=>({...d,medal_mean_all:pe(m)})),h=[...h].sort((d,m)=>m.mean_year_raw-d.mean_year_raw).map((d,m)=>({...d,medal_mean_year:pe(m)})),h=[...h].sort((d,m)=>m.mean_last_raw-d.mean_last_raw).map((d,m)=>({...d,medal_mean_last:pe(m)})),h}return xs(()=>{i()}),(a,l)=>(ae(),ge("div",lv,[l[31]||(l[31]=v("h1",null,[v("ins",null,"Classement glissant")],-1)),l[32]||(l[32]=v("p",null,[pt("Sur les 10 dernires parties"),v("br"),v("small",null,[v("i",null,"(au moins une partie depuis un mois)")])],-1)),n.value.length==0?(ae(),ge("div",uv,l[1]||(l[1]=[v("h1",null,"Dbut de saison, repassez plus tard !",-1)]))):Je("",!0),n.value.length>0?(ae(),ge("div",cv,[n.value.length>=3?(ae(),ge("div",hv,[l[2]||(l[2]=v("img",{src:av,alt:"Podium",class:"podium-image"},null,-1)),v("div",fv,[pt($(n.value[0].name),1),v("span",dv," ("+$(n.value[0].mean_last)+")",1)]),v("div",pv,[pt($(n.value[1].name),1),v("span",gv," ("+$(n.value[1].mean_last)+")",1)]),v("div",mv,[pt($(n.value[2].name),1),v("span",_v," ("+$(n.value[2].mean_last)+")",1)]),v("div",vv,"Chocolat : "+$(n.value[3].name)+" ("+$(n.value[3].mean_last)+")",1)])):Je("",!0),v("div",yv,[v("div",{class:"player-card",innerHTML:or(M0)(n.value)},null,8,wv)]),l[29]||(l[29]=v("h1",null,[v("ins",null,"Classement de la saison")],-1)),l[30]||(l[30]=v("p",null,"Moyenne des 10 meilleurs scores",-1)),n.value.length?(ae(),ge("div",bv,[v("div",{class:"player-card",innerHTML:or(I0)(s.value)},null,8,xv),l[28]||(l[28]=v("h1",null,[v("ins",null,"Fiches individuelles")],-1)),(ae(!0),ge(De,null,lr(n.value,(u,c)=>(ae(),ge("div",{key:c,class:"player-card"},[v("h2",Sv,[pt($(u.medal_mean_last)+" "+$(u.name)+" - ",1),v("small",null,$(u.mean_last)+" pts",1)]),l[23]||(l[23]=v("div",{class:"last-scores"},null,-1)),v("table",kv,[l[22]||(l[22]=v("thead",null,[v("tr",null,[v("th"),v("th",null,"Sur 10 parties"),v("th",null,"Sur l'anne"),v("th",null,"Hall of Fame")])],-1)),v("tbody",null,[v("tr",null,[l[3]||(l[3]=v("th",null,"Parties",-1)),v("td",null,$(u.played_last),1),v("td",null,$(u.played_year),1),v("td",null,$(u.played_all),1)]),v("tr",null,[l[4]||(l[4]=v("th",null,"Win",-1)),v("td",null,$(Math.round(u.win_last*10)/10)+" %",1),v("td",null,$(Math.round(u.win_year*10)/10)+" %",1),v("td",null,$(Math.round(u.win_all*10)/10)+" %",1)]),v("tr",null,[l[5]||(l[5]=v("th",null,"Assiduit",-1)),l[6]||(l[6]=v("td",null,"-",-1)),v("td",null,$(u.assiduity_year)+" %",1),v("td",null,$(u.assiduity_all)+" %",1)]),v("tr",null,[l[7]||(l[7]=v("th",null,"Moyenne",-1)),v("td",null,$(u.mean_last)+" "+$(u.medal_mean_last),1),v("td",null,$(u.mean_year)+" "+$(u.medal_mean_year),1),v("td",null,$(u.mean_all)+" "+$(u.medal_mean_all),1)]),v("tr",null,[l[8]||(l[8]=v("th",null,"Cumul",-1)),v("td",null,$(Math.round(u.cumul_last/100)/10+"K")+" "+$(u.medal_cumul_last),1),v("td",null,$(Math.round(u.cumul_year/100)/10+"K")+" "+$(u.medal_cumul_year),1),v("td",null,$(Math.round(u.cumul_all/100)/10+"K")+" "+$(u.medal_cumul_all),1)]),v("tr",null,[l[9]||(l[9]=v("th",null,"Meilleur",-1)),v("td",null,$(u.max_last)+" "+$(u.medal_max_last),1),v("td",null,$(u.max_year)+" "+$(u.medal_max_year),1),v("td",null,$(u.max_all)+" "+$(u.medal_max_all),1)]),v("tr",null,[l[10]||(l[10]=v("th",null,"Streak",-1)),v("td",null,$(u.streak_last)+" "+$(u.medal_streak_last),1),v("td",null,$(u.streak_year)+" "+$(u.medal_streak_year),1),v("td",null,$(u.streak_all)+" "+$(u.medal_streak_all),1)]),v("tr",null,[l[11]||(l[11]=v("th",null,"Streak Loose",-1)),v("td",null,$(u.streakloose_last)+" "+$(u.medal_streakloose_last),1),v("td",null,$(u.streakloose_year)+" "+$(u.medal_streakloose_year),1),v("td",null,$(u.streakloose_all)+" "+$(u.medal_streakloose_all),1)]),v("tr",null,[l[12]||(l[12]=v("th",null,[pt("Hits "),v("small",null,"(60)")],-1)),v("td",null,$(u.hits_last)+" "+$(u.medal_hits_last),1),v("td",null,$(u.hits_year)+" "+$(u.medal_hits_year),1),v("td",null,$(u.hits_all)+" "+$(u.medal_hits_all),1)]),v("tr",null,[l[13]||(l[13]=v("th",null,[pt("Hits "),v("small",null,"(180)")],-1)),v("td",null,$(u.hits2_last)+" "+$(u.medal_hits2_last),1),v("td",null,$(u.hits2_year)+" "+$(u.medal_hits2_year),1),v("td",null,$(u.hits2_all)+" "+$(u.medal_hits2_all),1)]),v("tr",null,[l[14]||(l[14]=v("th",null,"Meilleur coup",-1)),v("td",null,$(u.hitbest_last)+" "+$(u.medal_hitbest_last),1),v("td",null,$(u.hitbest_year)+" "+$(u.medal_hitbest_year),1),v("td",null,$(u.hitbest_all)+" "+$(u.medal_hitbest_all),1)]),v("tr",null,[l[15]||(l[15]=v("th",null,"Triples",-1)),v("td",null,$(u.triple_last)+" % "+$(u.medal_triple_last),1),v("td",null,$(u.triple_year)+" % "+$(u.medal_triple_year),1),v("td",null,$(u.triple_all)+" % "+$(u.medal_triple_all),1)]),v("tr",null,[l[16]||(l[16]=v("th",null,"Doubles",-1)),v("td",null,$(u.double_last)+" % "+$(u.medal_double_last),1),v("td",null,$(u.double_year)+" % "+$(u.medal_double_year),1),v("td",null,$(u.double_all)+" % "+$(u.medal_double_all),1)]),v("tr",null,[l[17]||(l[17]=v("th",null,"Shanghai",-1)),v("td",null,$(u.shanghai_last),1),v("td",null,$(u.shanghai_year),1),v("td",null,$(u.shanghai_all),1)]),v("tr",null,[l[18]||(l[18]=v("th",null,"ttt",-1)),v("td",null,$(u.ttt_last),1),v("td",null,$(u.ttt_year),1),v("td",null,$(u.ttt_all),1)]),v("tr",null,[l[19]||(l[19]=v("th",null,"tt",-1)),v("td",null,$(u.tt_last),1),v("td",null,$(u.tt_year),1),v("td",null,$(u.tt_all),1)]),v("tr",null,[l[20]||(l[20]=v("th",null,"ddd",-1)),v("td",null,$(u.ddd_last),1),v("td",null,$(u.ddd_year),1),v("td",null,$(u.ddd_all),1)]),v("tr",null,[l[21]||(l[21]=v("th",null,"dd",-1)),v("td",null,$(u.dd_last),1),v("td",null,$(u.dd_year),1),v("td",null,$(u.dd_all),1)])])])]))),128)),v("div",Tv,[v("h2",Ev,$(r.value.name),1),v("table",Av,[l[27]||(l[27]=v("thead",null,[v("tr",null,[v("th"),v("th",null,"Sur 10 parties"),v("th",null,"Sur l'anne"),v("th",null,"Hall of Fame")])],-1)),v("tbody",null,[v("tr",null,[l[24]||(l[24]=v("th",null,"Parties",-1)),v("td",null,$(r.value.played_last),1),v("td",null,$(r.value.played_year),1),v("td",null,$(r.value.played_all),1)]),v("tr",null,[l[25]||(l[25]=v("th",null,"Moyenne",-1)),v("td",null,$(r.value.mean_last),1),v("td",null,$(r.value.mean_year),1),v("td",null,$(r.value.mean_all),1)]),v("tr",null,[l[26]||(l[26]=v("th",null,"Meilleur",-1)),v("td",null,$(r.value.max_last),1),v("td",null,$(r.value.max_year),1),v("td",null,$(r.value.max_all),1)])])])])])):Je("",!0)])):Je("",!0),v("button",{onClick:l[0]||(l[0]=u=>a.$emit("back")),class:"back-button"},"Retour")]))}},$v=br(Ov,[["__scopeId","data-v-3daa8e5c"]]),Cv={__name:"App",setup(e){const t=[{id:1,name:"Matt"},{id:2,name:"Darts Vador",avatar:"/shanghai/img/dartsvador.png"},{id:3,name:"Dart Simpson",avatar:"/shanghai/img/dartsimpson.png"},{id:4,name:"Robull",avatar:"/shanghai/img/ro.jpg"},{id:5,name:"Louis CLXXX",avatar:"/shanghai/img/crown.jpeg"},{id:7,name:"Cramomille",avatar:"/shanghai/img/cramomille.png"},{id:8,name:"Chlo",avatar:"/shanghai/img/ponpon.png"}],n=[{id:1001,name:"Hugues",avatar:"/shanghai/img/default.jpeg"},{id:1002,name:"Elina",avatar:"/shanghai/img/default.jpeg"},{id:1003,name:"Mattia",avatar:"/shanghai/img/archi.jpg"}],r=Fe(null),s=Fe([]),i=Fe([]),o=Fe("login");function a(h){r.value=h,h.site==="Riate"?s.value=t:h.site==="Condorcet"?s.value=n:s.value=[],o.value="selection"}function l(h){i.value=h,o.value="game"}function u(){o.value="scores"}function c(){o.value="selection"}return(h,f)=>(ae(),ge("div",null,[o.value==="login"?(ae(),qn(ov,{key:0,onLogin:a})):o.value==="selection"?(ae(),qn(wf,{key:1,predefinedPlayers:s.value,role:r.value.role,onStartGame:l,onViewScores:u},null,8,["predefinedPlayers","role"])):o.value==="game"?(ae(),qn(X0,{key:2,players:i.value,role:r.value.role,site:r.value.site,onViewScores:u},null,8,["players","role","site"])):o.value==="scores"?(ae(),qn($v,{key:3,onBack:c,onViewScores:u})):Je("",!0)]))}};sf(Cv).mount("#app")});export default Pv();
